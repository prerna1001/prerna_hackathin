{"version":3,"sources":["webpack:///./src/ui/src/components/ThumbnailCard/ThumbnailCard.js","webpack:///./src/ui/src/components/ThumbnailCard/index.js","webpack:///./src/ui/src/components/PageThumbnailsGrid/PageThumbnailsGrid.js","webpack:///./src/ui/src/components/PageThumbnailsGrid/index.js","webpack:///./src/ui/src/components/ThumbnailCard/ThumbnailCard.scss?f173"],"names":["propTypes","onChange","PropTypes","func","checked","bool","index","number","thumbnail","object","ThumbnailCard","_ref","src","img","t","useTranslation","altText","concat","pageNumber","currentSrc","url","toDataURL","React","createElement","className","alt","onClick","Choice","id","name","e","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","from","test","_unsupportedIterableToArray","_nonIterableRest","PageThumbnailsGrid","document","onThumbnailSelected","selectedThumbnails","onfileLoadedHandler","_useState2","useState","thumbnails","setThumbnails","_useState4","completedPages","setCompletedPagesCount","useEffect","inFlightPromiseIds","_generateThumbnails","_callee","pageCount","thumbnailPromises","_loop","sortedThumbnails","_context2","getPageCount","thumbnailPromise","_context","promiseId","loadThumbnail","result","_regeneratorValues","all","sort","b","generateThumbnails","forEach","cancelLoadThumbnail","map","key","processText","module","exports"],"mappings":"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","file":"chunks/chunk.16.js","sourcesContent":["import React from 'react';\nimport Choice from 'components/Choice';\nimport './ThumbnailCard.scss';\nimport { useTranslation } from 'react-i18next';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  checked: PropTypes.bool,\n  index: PropTypes.number,\n  thumbnail: PropTypes.object,\n};\n\nconst ThumbnailCard = ({ onChange, checked, index, thumbnail }) => {\n  let img = null;\n  const { t } = useTranslation();\n  const altText = `${t('component.thumbnailsPanel')} ${thumbnail.pageNumber} `;\n\n  if (thumbnail) {\n    let src;\n    if (thumbnail.currentSrc) {\n      src = thumbnail.currentSrc;\n    } else if (thumbnail.url) {\n      src = thumbnail.url;\n    } else if (thumbnail.toDataURL) {\n      src = thumbnail.toDataURL();\n    }\n\n    img = <img className=\"thumb-card-img\" alt={altText} src={src} />;\n  }\n\n  return (\n    <div className=\"thumb-card\" onClick={onChange}>\n      <div className='thumb-body'>\n        <div className=\"thumb-image\">\n          {img}\n        </div>\n        <Choice\n          id={`custom-checkbox-${index}`}\n          className=\"thumb-checkbox\"\n          name={`thumb${index}`}\n          checked={checked}\n        />\n      </div>\n      <div className=\"thumb-card-title\">{index + 1}</div>\n    </div>\n  );\n};\n\nThumbnailCard.propTypes = propTypes;\n\nexport default ThumbnailCard;","import ThumbnailCard from './ThumbnailCard';\n\nexport default ThumbnailCard;","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ThumbnailCard from 'components/ThumbnailCard';\n\nfunction PageThumbnailsGrid({ document, onThumbnailSelected, selectedThumbnails, onfileLoadedHandler }) {\n  const [thumbnails, setThumbnails] = useState([]);\n  const [completedPages, setCompletedPagesCount] = useState(0);\n  const [t] = useTranslation();\n\n  useEffect(() => {\n    const inFlightPromiseIds = [];\n    async function generateThumbnails() {\n      const thumbnails = [];\n      const pageCount = document.getPageCount();\n      const thumbnailPromises = [];\n      for (let i = 1; i <= pageCount; i++) {\n        const thumbnailPromise = new Promise((resolve) => {\n          const promiseId = document.loadThumbnail(i, (result) => {\n            let thumbnail;\n            // If we get an embedded thumbnail we set the currentSrc prop\n            // otherwise we set the URl to avoid having to call this repeatedly every time the thumbnail card is rendered\n            if (result.currentSrc) {\n              thumbnail = {\n                pageNumber: i,\n                currentSrc: result.currentSrc,\n              };\n            } else {\n              thumbnail = {\n                pageNumber: i,\n                url: result.toDataURL(),\n              };\n            }\n            thumbnails.push(thumbnail);\n            setCompletedPagesCount(i);\n            resolve();\n          });\n          inFlightPromiseIds.push(promiseId);\n        });\n        thumbnailPromises.push(thumbnailPromise);\n      }\n\n      await Promise.all(thumbnailPromises);\n      const sortedThumbnails = [...thumbnails].sort((a, b) => a.pageNumber - b.pageNumber);\n      setThumbnails(sortedThumbnails);\n      inFlightPromiseIds.length = 0;\n      onfileLoadedHandler(false);\n    }\n\n    if (document) {\n      generateThumbnails();\n    }\n\n    return () => {\n      inFlightPromiseIds.forEach((id) => document.cancelLoadThumbnail(id));\n    };\n  }, [document]);\n\n  if (thumbnails.length > 0) {\n    return thumbnails.map((thumbnail, index) => {\n      const pageNumber = index + 1;\n      return (\n        <ThumbnailCard key={pageNumber}\n          onChange={() => onThumbnailSelected(pageNumber)}\n          checked={!!selectedThumbnails[pageNumber]}\n          index={index}\n          thumbnail={thumbnail}\n        />\n      );\n    });\n  }\n\n  const pageCount = document ? document.getPageCount() : 0;\n  const processText = `${completedPages}/${pageCount}`;\n  return (<div>{t('message.processing')} {processText}</div>);\n}\n\nexport default PageThumbnailsGrid;","import PageThumbnailsGrid from './PageThumbnailsGrid';\n\nexport default PageThumbnailsGrid;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};"],"sourceRoot":""}