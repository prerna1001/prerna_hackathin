{"version":3,"sources":["webpack:///./src/ui/src/components/ThumbnailControlsMulti/ThumbnailControlsMulti.scss?7d02","webpack:///./src/ui/src/components/ThumbnailControls/ThumbnailControls.scss?fb68","webpack:///./src/ui/src/components/Thumbnail/Thumbnail.scss?1bf6","webpack:///./src/ui/src/components/DocumentControls/DocumentControls.scss?4d9a","webpack:///./src/ui/src/components/ThumbnailsPanel/ThumbnailsPanel.scss?829f","webpack:///./src/ui/src/components/PageManipulationOverlayButton/PageManipulationOverlayButtonContainer.js","webpack:///./src/ui/src/components/PageManipulationOverlayButton/index.js","webpack:///./src/ui/src/components/ThumbnailControls/ThumbnailControls.js","webpack:///./src/ui/src/components/ThumbnailControls/index.js","webpack:///./src/ui/src/components/Thumbnail/Thumbnail.js","webpack:///./src/ui/src/components/Thumbnail/ThumbnailRedux.js","webpack:///./src/ui/src/components/Thumbnail/index.js","webpack:///./src/ui/src/components/ThumbnailControlsMulti/MoveOperations/MoveOperations.js","webpack:///./src/ui/src/components/ThumbnailControlsMulti/ManipulateOperations/ManipulateOperations.js","webpack:///./src/ui/src/components/ThumbnailControlsMulti/RotateOperations/RotateOperations.js","webpack:///./src/ui/src/components/ThumbnailControlsMulti/ThumbnailControlsMultiContainer.js","webpack:///./src/ui/src/components/ThumbnailControlsMulti/index.js","webpack:///./src/ui/src/components/DocumentControls/DocumentControls.js","webpack:///./src/ui/src/constants/pageNumberPlaceholder.js","webpack:///./src/ui/src/components/DocumentControls/index.js","webpack:///./src/ui/src/helpers/pageManipulation.js","webpack:///./src/ui/src/components/ThumbnailsPanel/ThumbnailsPanel.js","webpack:///./src/ui/src/components/ThumbnailsPanel/index.js"],"names":["module","exports","PageManipulationOverlayButtonContainer","props","className","pageIndex","dispatch","useDispatch","selectedPageIndexes","useSelector","state","selectors","getSelectedThumbnailPageIndexes","React","createElement","onClick","indexOf","actions","setSelectedPageThumbnails","ToggleElementButton","dataElement","DataElements","PAGE_MANIPULATION_OVERLAY_BUTTON","toggleElement","PAGE_MANIPULATION","img","title","propTypes","index","PropTypes","number","isRequired","ThumbnailControls","_ref","t","useTranslation","isElementDisabled","isMoreOptionDisabled","isPageDeletionConfirmationModalEnabled","pageDeletionConfirmationModalEnabled","selectedIndexes","shallowEqual","currentPage","getCurrentPage","pageThumbnailControlMenuItems","getThumbnailControlMenuItems","featureFlags","getFeatureFlags","isViewOnly","buttonsRef","useRef","buttonContainerRef","pageNumbers","length","map","i","isCurrentPageInTheSelection","includes","customizableUI","document","core","getDocument","documentType","type","isXod","workerTypes","XOD","isOffice","OFFICE","LEGACY_OFFICE","BUTTONS_MAP","Button","rotateClockwise","rotateCounterClockwise","deletePages","onClickAnnouncement","concat","isCustomized","occurredButtons","buttons","item","key","component","push","cloneElement","useEffect","current","findFocusableElements","forEach","element","tabIndex","isWebViewerServerDocument","data-element","style","display","classNames","ref","PageManipulationOverlayButton","e","r","Symbol","n","iterator","o","toStringTag","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_slicedToArray","Array","isArray","_arrayWithHoles","next","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","toString","slice","constructor","name","from","test","Thumbnail","forwardRef","isSelected","updateAnnotations","shiftKeyThumbnailPivotIndex","onFinishLoading","onLoad","_props$onRemove","onRemove","onDragStart","onDragOver","isDraggable","shouldShowControls","thumbnailSize","_props$pageLabels","pageLabels","isThumbnailMultiselectEnabled","isReaderModeOrReadOnly","isMobile","canLoad","isThumbnailSelectingPages","thumbnailSelectionMode","activeDocumentViewerKey","panelSelector","parentKeyListener","useCore","thumbSize","Number","_useState2","useState","currentFocusIndex","setCurrentFocusIndex","thumbContainerRef","buttonRefs","buttonMultiSelectRefs","_useState4","width","height","dimensions","setDimensions","_useState6","loaded","setLoaded","isRightToLeft","useIsRTL","rtlRef","isContentEditingEnabled","loadTimeout","handleClickOutside","event","contains","target","preventDefaultTab","addEventListener","removeEventListener","loadThumbnailAsync","setTimeout","_drawComplete","thumbnailContainer","getRootNode","querySelector","isRTL","pageNum","viewerRotation","getRotation","doc","getPageInfo","id","loadCanvas","pageNumber","drawComplete","_callee","thumb","childElement","ratio","cssTransform","_context","removeChild","Math","min","abs","appendChild","arguments","apply","_next","_throw","_x","allowUseOfOptimizedThumbnail","onPagesUpdated","changes","contentChanged","moved","added","removed","isPageAdded","didPageChange","some","changedPage","didPageMove","keys","movedPage","parseInt","isPageRemoved","newPageCount","getTotalPages","onRotationUpdated","clearTimeout","isActive","pageLabel","checkboxRotateClass","rotation","useImperativeHandle","focusInput","selectElement","ariaCurrent","focus","deselectElement","undefined","handleEnterGrid","preventDefault","elem","handleKeyDown","useCallback","stopPropagation","_leaveFocusActions$e$","leaveFocusActions","Tab","Escape","keyboardActions","ArrowUp","handleArrowKey","ArrowDown","ArrowLeft","ArrowRight","isMultiselectEnabled","direction","prevIndex","newFocusIndex","updateTabIndexes","focusedElement","active","selected","onKeyDown","checkboxToggled","multiSelectionKeyPressed","ctrlKey","metaKey","shiftKeyPressed","shiftKey","updatedSelectedPages","_toConsumableArray","setThumbnailSelectingPages","shiftKeyPivot","setShiftKeyThumbnailsPivotIndex","currSelectMinIndex","currSelectMaxIndex","max","Set","_","thumbnailSelectionModes","filter","lastSelectedPageIndex","closeElement","setCurrentPage","cursor","background","border","draggable","Choice","checked","aria-label","bool","func","array","object","string","ThumbnailRedux","_useSelector2","getPageLabels","isReaderMode","isDocumentReadOnly","getShiftKeyThumbnailPivotIndex","getThumbnailSelectionMode","getActiveDocumentViewerKey","selectionModes","_extends","MoveOperations","moveToTop","moveToBottom","Fragment","ManipulateOperations","onInsert","onReplace","onExtractPages","onDeletePages","RotateOperations","onRotateClockwise","onRotateCounterClockwise","ThumbnailControlsMultiContainer","widthMinusMargins","parentElement","store","useStore","isInMobile","panelWidth","getPanelWidth","getLeftPanelWidth","deleteModalEnabled","isDesktopOnlyMode","isInDesktopOnlyMode","items","getMultiPageManipulationControlsItems","displayFlyout","setDisplayFlyout","useMemo","childProps","noPagesSelectedWarning","replace","extractPages","PAGE_MANIPULATION_OVERLAY","openElement","movePagesToTop","movePagesToBottom","getBoundingClientRect","panelMinWidth","isPanelSmall","isPanelLarge","startIndex","flyoutItems","skip","getPageRotationControls","getPageAdditionalControls","getPageManipulationControls","getPageCustomControlsFlyout","getFlyoutItemsFromType","flyout","PAGE_MANIPULATION_FLYOUT_MULTI_SELECT","updateFlyout","removeFlyout","renderedItems","lastDividerAdded","actualIndex","lastIndexToRender","operations","operation","getPageString","selectedPageArray","pagesToPrint","sortedPages","sort","b","DocumentControls","isDisabled","initialPagesString","pageString","setPageString","previousPageString","setPreviousPageString","enableThumbnailSelectingPages","ThumbnailControlsMulti","htmlFor","onBlur","selectedPagesString","pages","getPageArrayFromString","pageIndexes","page","updatedString","onChange","placeholder","arrayOf","toggleDocumentControl","mergeDocument","srcToMerge","mergeToPage","shouldFireEvent","LOADING_MODAL","reject","mergeResults","fireEvent","Events","DOCUMENT_MERGED","err","ThumbnailsPanel","parentDataElement","isLeftPanelOpen","isElementOpen","totalPages","isThumbnailMergingEnabled","getIsThumbnailMergingEnabled","isThumbnailReorderingEnabled","getIsThumbnailReorderingEnabled","isMultipleViewerMerging","getIsMultipleViewerMerging","isThumbnailControlDisabled","isThumbnailSliderDisabled","totalPagesFromSecondaryDocumentViewer","isRightClickEnabled","openingPageManipulationOverlayByRightClickEnabled","listRef","pendingThumbs","thumbs","afterMovePageNumber","isOfficeEditor","setIsOfficeEditor","setCanLoad","setHeight","_useState8","setWidth","_useState0","draggingOverPageIndex","setDraggingOverPageIndex","_useState10","isDraggingToPreviousPage","setDraggingToPreviousPage","_useState12","numberOfColumns","setNumberOfColumns","_useState14","isDragging","setIsDragging","_useState16","focusedIndex","setFocusedIndex","thumbnailContainerRefs","thumbnailRefs","focusedThumbnailRef","_useState18","setThumbnailSize","_useState20","lastTimeTriggered","setLastTimeTriggered","_useState22","globalIndex","setGlobalIndex","pageCount","activeThumbRenders","removeOutline","currentIndex","columnCount","newIndex","arrowActions","keyActions","Enter","handleEnterKey","handleTabOutKey","outline","handleThumbnailKeyDown","_keyActions$e$key","handleTabKey","handleEscapeKey","thumbContainer","pageWidth","getPageWidth","_getThumbnailSize","pageHeight","round","getThumbnailSize","getPageHeight","annotCanvas","role","ariaLabel","maxWidth","maxHeight","ctx","getContext","zoom","getCompleteRotation","multiplier","window","Core","getCanvasMultiplier","setAnnotationCanvasTransform","options","overrideCanvas","_objectSpread","overridePageRotation","overridePageCanvas","debounce","drawAnnotations","debouncedDraw","onBeginRendering","onFinishedRendering","needsMoreRendering","onDocumentLoaded","_core$getDocument","getType","onPageComplete","updatedPagesIndexes","isPageAddedBefore","_listRef$current","scrollToRow","floor","onAnnotationChanged","annots","indices","annot","PageNumber","Listable","onPageNumberUpdated","_listRef$current2","onDragEnd","scrollToRowHelper","change","time","_listRef$current3","now","Date","getTime","thumbnail","pageX","x","pageY","_virtualizedThumbnail","bottom","hoverAreaHeight","scrollDown","scrollUp","getContextElementId","isApryseWebViewerWebComponent","host","frameElement","draggingSelectedPage","pagesToMove","THUMBNAIL_DRAGGED","dataTransfer","setData","setDragImage","Image","dropEffect","effectAllowed","extractedDataPromise","extractPagesWithAnnotations","pagesExtracted","onDrop","externalPageWebViewerFrameId","files","insertTo","isIE11","getData","viewerID","mergingDocument","currentPageIndex","otherWebViewerIframe","parent","console","warn","contentWindow","docToMerge","filename","file","targetPageNumber","pageNumbersToMove","movePages","updatedPagesNumbers","offset","THUMBNAIL_DROPPED","pageNumbersBeforeMove","pagesNumbersAfterMove","numberOfPagesMoved","thumbIsLoaded","thumbIsPending","removeFromPendingThumbs","getPendingThumbIndex","splice","_thumbs$current$pageI","findIndex","thumbStatus","_thumbs$current$pageI2","_thumbs$current$pageI3","cancelLoadThumbnail","onCancel","canvases","querySelectorAll","cancel","renderThumbnails","_ref2","columnsOfThumbnails","row","allowPageOperationsUI","fill","columnIndex","thumbIndex","allowDragAndDrop","showPlaceHolder","el","aria-current","onContextMenu","setFlyoutPosition","openElements","onFocus","handleFocus","updateNumberOfColumns","thumbnailHeight","thumbnailAutoScrollAreaStyle","hideTooltipShortcut","Slider","property","displayProperty","step","getDisplayValue","onSliderChange","zoomValue","shouldHideSliderTitle","shouldHideSliderValue","aria-valuemin","aria-valuemax","aria-valuenow","Measure","bounds","onResize","_ref3","_ref4","measureRef","List","rowHeight","rowCount","ceil","rowRenderer","overscanRowCount","scrollToIndex"],"mappings":"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","file":"chunks/chunk.40.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport DataElements from 'constants/dataElement';\nimport ToggleElementButton from 'components/ModularComponents/ToggleElementButton';\n\nfunction PageManipulationOverlayButtonContainer(props) {\n  const { className, pageIndex } = props;\n\n  const dispatch = useDispatch();\n  const selectedPageIndexes = useSelector((state) => selectors.getSelectedThumbnailPageIndexes(state));\n\n  const onClickPageManipulationOverlayButton = () => {\n    if (selectedPageIndexes.indexOf(pageIndex) === -1) {\n      dispatch(actions.setSelectedPageThumbnails([pageIndex]));\n    }\n  };\n\n  return (\n    <div\n      className={className}\n      onClick={onClickPageManipulationOverlayButton}\n    >\n      <ToggleElementButton\n        dataElement={DataElements.PAGE_MANIPULATION_OVERLAY_BUTTON}\n        toggleElement={DataElements.PAGE_MANIPULATION}\n        img=\"icon-tool-more\"\n        title=\"option.thumbnailPanel.moreOptions\"\n      />\n    </div>\n  );\n}\n\nexport default PageManipulationOverlayButtonContainer;","import PageManipulationOverlayButtonContainer from './PageManipulationOverlayButtonContainer';\n\nexport default PageManipulationOverlayButtonContainer;","import React, { useRef, useEffect } from 'react';\nimport { useDispatch, shallowEqual, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { deletePages, rotateClockwise, rotateCounterClockwise } from 'helpers/pageManipulationFunctions';\nimport Button from 'components/Button';\nimport selectors from 'selectors';\nimport './ThumbnailControls.scss';\nimport PageManipulationOverlayButton from 'components/PageManipulationOverlayButton';\nimport { workerTypes } from 'constants/types';\nimport core from 'src/core';\nimport DataElements from 'constants/dataElement';\nimport { useTranslation } from 'react-i18next';\nimport findFocusableElements from 'helpers/findFocusableElements';\n\nconst propTypes = {\n  index: PropTypes.number.isRequired,\n};\n\nconst dataElementName = 'thumbnailControl';\n\nconst ThumbnailControls = ({ index }) => {\n  const { t } = useTranslation();\n  const isElementDisabled = useSelector((state) => selectors.isElementDisabled(state, dataElementName));\n  const isMoreOptionDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.PAGE_MANIPULATION_OVERLAY_BUTTON));\n  const isPageDeletionConfirmationModalEnabled = useSelector(selectors.pageDeletionConfirmationModalEnabled);\n  const selectedIndexes = useSelector(selectors.getSelectedThumbnailPageIndexes, shallowEqual);\n  const currentPage = useSelector(selectors.getCurrentPage);\n  const pageThumbnailControlMenuItems = useSelector(selectors.getThumbnailControlMenuItems, shallowEqual);\n  const featureFlags = useSelector(selectors.getFeatureFlags, shallowEqual);\n  const isViewOnly = useSelector(selectors.isViewOnly);\n\n  const dispatch = useDispatch();\n  const buttonsRef = useRef([]);\n  const buttonContainerRef = useRef(null);\n\n  let pageNumbers = selectedIndexes.length > 0 ? selectedIndexes.map((i) => i + 1) : [index + 1];\n\n  const isCurrentPageInTheSelection = pageNumbers.includes(currentPage);\n  const customizableUI = featureFlags.customizableUI;\n\n  if (!isCurrentPageInTheSelection) {\n    pageNumbers = [currentPage];\n  }\n\n  const document = core.getDocument();\n  const documentType = document?.type;\n  const isXod = documentType === workerTypes.XOD;\n  const isOffice = documentType === workerTypes.OFFICE || documentType === workerTypes.LEGACY_OFFICE;\n\n  const BUTTONS_MAP = {\n    'thumbRotateClockwise': <Button\n      className=\"rotate-button\"\n      img=\"icon-header-page-manipulation-page-rotation-clockwise-line\"\n      onClick={() => rotateClockwise(pageNumbers)}\n      title=\"option.thumbnailPanel.rotatePageClockwise\"\n      dataElement=\"thumbRotateClockwise\"\n    />,\n    'thumbRotateCounterClockwise': <Button\n      img=\"icon-header-page-manipulation-page-rotation-counterclockwise-line\"\n      onClick={() => rotateCounterClockwise(pageNumbers)}\n      title=\"option.thumbnailPanel.rotatePageCounterClockwise\"\n      dataElement=\"thumbRotateCounterClockwise\"\n    />,\n    'thumbDelete': <Button\n      className=\"delete-button\"\n      img=\"icon-delete-line\"\n      onClick={() => deletePages(pageNumbers, dispatch, isPageDeletionConfirmationModalEnabled)}\n      title=\"option.thumbnailPanel.delete\"\n      dataElement=\"thumbDelete\"\n      onClickAnnouncement={`${t('action.delete')} ${t('action.modal')} ${t('action.isOpen')}`}\n    />,\n  };\n  let isCustomized = false;\n  const occurredButtons = [];\n  const buttons = pageThumbnailControlMenuItems.map((item) => {\n    const { dataElement } = item;\n    const key = dataElement;\n    let component = BUTTONS_MAP[dataElement];\n    if (occurredButtons.indexOf(dataElement) > -1) {\n      return null;\n    }\n    occurredButtons.push(dataElement);\n\n    /* Example button object:\n    {\n      title: 'Alert me',\n      img: '/path-to-image',\n      onClick: (selectedPageNumbers) => alert(``),\n      dataElement: 'alertMeDataElement',\n    } */\n    if (!component) {\n      isCustomized = true;\n      const { img, onClick, title } = item;\n      component = <Button\n        className={`${dataElement}-button`}\n        img={img}\n        onClick={() => onClick(currentPage)}\n        title={title}\n        dataElement={dataElement}\n      />;\n    }\n\n    return component\n      ? React.cloneElement(component, {\n        key,\n      })\n      : null;\n  });\n\n  useEffect(() => {\n    buttonsRef.current = findFocusableElements(buttonContainerRef.current);\n    if (buttonsRef.current.length > 0) {\n      buttonsRef.current.forEach((element) => {\n        element.tabIndex = -1;\n      });\n    }\n  }, [buttonsRef.current, buttons]);\n\n  if (isElementDisabled) {\n    return null;\n  }\n\n  if (isXod || isOffice || document?.isWebViewerServerDocument()) {\n    return (\n      <div className=\"thumbnailControls-overlay\" data-element={dataElementName}\n        style={{ display: 'flex' }}\n      >\n        <Button\n          img=\"icon-header-page-manipulation-page-rotation-counterclockwise-line\"\n          onClick={() => rotateCounterClockwise(pageNumbers)}\n          title=\"option.thumbnailPanel.rotatePageCounterClockwise\"\n          dataElement=\"thumbRotateCounterClockwise\"\n        />\n        <Button\n          img=\"icon-header-page-manipulation-page-rotation-clockwise-line\"\n          onClick={() => rotateClockwise(pageNumbers)}\n          title=\"option.thumbnailPanel.rotatePageClockwise\"\n          dataElement=\"thumbRotateClockwise\"\n        />\n      </div>\n    );\n  }\n\n  if (isViewOnly) {\n    return null;\n  }\n\n  return (\n    <div className={classNames({\n      'thumbnailControls-overlay': true,\n      'custom-buttons': isCustomized,\n      'modular-ui': customizableUI,\n    })}\n    data-element={dataElementName}\n    ref={buttonContainerRef}\n    >\n      {buttons}\n      {\n        (isMoreOptionDisabled) ? null : <PageManipulationOverlayButton\n          className={'more-options'}\n          pageIndex={index}\n        />\n      }\n\n    </div>\n  );\n};\n\n\nThumbnailControls.propTypes = propTypes;\n\nexport default ThumbnailControls;","import ThumbnailControls from './ThumbnailControls';\n\nexport default ThumbnailControls;\n","import React, { useRef, useEffect, useState, useImperativeHandle, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport selectors from 'selectors';\nimport ThumbnailControls from 'components/ThumbnailControls';\nimport thumbnailSelectionModes from 'constants/thumbnailSelectionModes';\nimport { useTranslation } from 'react-i18next';\nimport PropTypes from 'prop-types';\n\nimport './Thumbnail.scss';\nimport Choice from 'components/Choice';\nimport getRootNode from 'helpers/getRootNode';\nimport findFocusableElements from 'helpers/findFocusableElements';\nimport useIsRTL from 'src/hooks/useIsRTL';\nimport useCore from 'hooks/useCore';\n\n// adds a delay in ms so thumbs that are only on the screen briefly are not loaded.\nconst THUMBNAIL_LOAD_DELAY = 50;\n\nconst Thumbnail = React.forwardRef((props, ref) => {\n  const {\n    index,\n    isSelected,\n    updateAnnotations,\n    shiftKeyThumbnailPivotIndex,\n    onFinishLoading,\n    onLoad,\n    onRemove = () => { },\n    onDragStart,\n    onDragOver,\n    isDraggable,\n    shouldShowControls,\n    thumbnailSize,\n    currentPage,\n    pageLabels = [],\n    selectedPageIndexes,\n    isThumbnailMultiselectEnabled,\n    isReaderModeOrReadOnly,\n    dispatch,\n    actions,\n    isMobile,\n    canLoad,\n    isThumbnailSelectingPages,\n    thumbnailSelectionMode,\n    activeDocumentViewerKey,\n    panelSelector,\n    parentKeyListener,\n  } = props;\n  const { core } = useCore();\n  const thumbSize = thumbnailSize ? Number(thumbnailSize) : 150;\n  const [currentFocusIndex, setCurrentFocusIndex] = useState(-1);\n  const thumbContainerRef = useRef(null);\n  const buttonRefs = useRef([]);\n  const buttonMultiSelectRefs = useRef([]);\n  const [dimensions, setDimensions] = useState({ width: thumbSize, height: thumbSize });\n  const { t } = useTranslation();\n  // To ensure checkmark loads after thumbnail\n  const [loaded, setLoaded] = useState(false);\n  const isRightToLeft = useIsRTL();\n  const rtlRef = useRef(isRightToLeft);\n\n  const isContentEditingEnabled = useSelector(selectors.isContentEditingEnabled);\n\n  let loadTimeout = null;\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (thumbContainerRef.current && !thumbContainerRef.current.contains(event.target)) {\n        preventDefaultTab();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (loaded) {\n      loadThumbnailAsync();\n    }\n    rtlRef.current = isRightToLeft;\n  }, [isRightToLeft]);\n\n  const loadThumbnailAsync = () => {\n    loadTimeout = setTimeout(() => {\n      const thumbnailContainer = getRootNode().querySelector(`.ThumbnailsPanel.${panelSelector} #pageThumb${index}`);\n      const isRTL = rtlRef.current;\n\n      const pageNum = index + 1;\n      const viewerRotation = core.getRotation(pageNum);\n\n      const doc = core.getDocument(activeDocumentViewerKey);\n      // Possible race condition can happen where we try to render a thumbnail for a page that has\n      // been deleted. Prevent that by checking if pageInfo exists\n\n      if (doc && doc.getPageInfo(pageNum)) {\n        const id = doc.loadCanvas({\n          pageNumber: pageNum,\n          width: thumbSize,\n          height: thumbSize,\n          drawComplete: async (thumb) => {\n            const thumbnailContainer = getRootNode().querySelector(`.ThumbnailsPanel.${panelSelector} #pageThumb${index}`);\n            if (thumbnailContainer) {\n              const childElement = thumbnailContainer.querySelector('.page-image');\n              if (childElement) {\n                thumbnailContainer.removeChild(childElement);\n              }\n\n              thumb.className = `page-image ${isRTL ? 'right-to-left' : ''}`;\n\n              const ratio = Math.min(thumbSize / thumb.width, thumbSize / thumb.height);\n              thumb.style.width = `${thumb.width * ratio}px`;\n              thumb.style.height = `${thumb.height * ratio}px`;\n              setDimensions({ width: Number(thumb.width), height: Number(thumb.height) });\n\n              if (isRTL) {\n                thumb.style['transform'] = 'translate(50%, -50%)';\n              }\n\n              if (Math.abs(viewerRotation)) {\n                const cssTransform = `rotate(${viewerRotation * 90}deg) translate(-50%,-50%)`;\n                const cssTransformOrigin = 'top left';\n                thumb.style['transform'] = cssTransform;\n                thumb.style['transform-origin'] = cssTransformOrigin;\n                thumb.style['ms-transform'] = cssTransform;\n                thumb.style['ms-transform-origin'] = cssTransformOrigin;\n                thumb.style['-moz-transform'] = cssTransform;\n                thumb.style['-moz-transform-origin'] = cssTransformOrigin;\n                thumb.style['-webkit-transform-origin'] = cssTransformOrigin;\n                thumb.style['-webkit-transform'] = cssTransform;\n                thumb.style['-o-transform'] = cssTransform;\n                thumb.style['-o-transform-origin'] = cssTransformOrigin;\n              }\n\n              thumbnailContainer.appendChild(thumb);\n            }\n\n            if (updateAnnotations) {\n              updateAnnotations(index);\n            }\n\n            onFinishLoading(index);\n            setLoaded(true);\n          },\n          allowUseOfOptimizedThumbnail: true,\n        });\n        onLoad(index, thumbnailContainer, id);\n      }\n    }, THUMBNAIL_LOAD_DELAY);\n  };\n\n  useEffect(() => {\n    const onPagesUpdated = (changes) => {\n      const { contentChanged, moved, added, removed } = changes;\n\n      const currentPage = index + 1;\n\n      const isPageAdded = added.includes(currentPage);\n      const didPageChange = contentChanged.some((changedPage) => currentPage === changedPage);\n      const didPageMove = Object.keys(moved).some((movedPage) => currentPage === parseInt(movedPage));\n      const isPageRemoved = removed.includes(currentPage);\n      const newPageCount = core.getTotalPages();\n\n      if (removed.length > 0 && index + 1 > newPageCount) {\n        return;\n      }\n\n      if (isPageAdded || didPageChange || didPageMove || isPageRemoved) {\n        loadThumbnailAsync();\n      }\n    };\n\n    const onRotationUpdated = () => {\n      setLoaded(false);\n      loadThumbnailAsync();\n    };\n\n    core.addEventListener('pagesUpdated', onPagesUpdated);\n    core.addEventListener('rotationUpdated', onRotationUpdated);\n    if (canLoad) {\n      loadThumbnailAsync();\n    }\n    return () => {\n      core.removeEventListener('pagesUpdated', onPagesUpdated);\n      core.removeEventListener('rotationUpdated', onRotationUpdated);\n      clearTimeout(loadTimeout);\n      onRemove(index);\n    };\n  }, []);\n\n  const handleClick = (e) => {\n    const checkboxToggled = e.target.type && e.target.type === 'checkbox';\n    if (isThumbnailMultiselectEnabled && !isReaderModeOrReadOnly) {\n      const multiSelectionKeyPressed = e.ctrlKey || e.metaKey;\n      const shiftKeyPressed = e.shiftKey;\n      let updatedSelectedPages = [...selectedPageIndexes];\n\n      if (shiftKeyPressed) {\n        dispatch(actions.setThumbnailSelectingPages(true));\n        // Include current page as part of selection if we just started shift-selecting\n        let shiftKeyPivot = shiftKeyThumbnailPivotIndex;\n        if (shiftKeyPivot === null) {\n          shiftKeyPivot = currentPage - 1;\n          dispatch(actions.setShiftKeyThumbnailsPivotIndex(shiftKeyPivot));\n        }\n        // get the range of the selected index and update selected page\n        const currSelectMinIndex = Math.min(shiftKeyPivot, index);\n        const currSelectMaxIndex = Math.max(shiftKeyPivot, index);\n        updatedSelectedPages = [...new Set([...Array.from(\n          { length: currSelectMaxIndex - currSelectMinIndex + 1 },\n          (_, i) => i + currSelectMinIndex,\n        )])];\n      } else if (multiSelectionKeyPressed || isThumbnailSelectingPages) {\n        dispatch(actions.setThumbnailSelectingPages(true));\n        // Only select a page if multiSelectionKeyPressed or if checkbox is checked unless in 'thumbnail' mode\n        if (multiSelectionKeyPressed || checkboxToggled || thumbnailSelectionMode === thumbnailSelectionModes['THUMBNAIL']) {\n          // Include current page as part of selection if we just started multi-selecting\n          if (selectedPageIndexes.length === 0 && !isThumbnailSelectingPages) {\n            updatedSelectedPages.push(currentPage - 1);\n          } else if (selectedPageIndexes.includes(index)) {\n            updatedSelectedPages = selectedPageIndexes.filter((pageIndex) => index !== pageIndex);\n          } else {\n            updatedSelectedPages.push(index);\n          }\n        }\n        dispatch(actions.setShiftKeyThumbnailsPivotIndex(index));\n      } else {\n        updatedSelectedPages = [index];\n      }\n      // set shiftKeyPivot when press ctr key or single key\n      const lastSelectedPageIndex = updatedSelectedPages[updatedSelectedPages.length - 1];\n      const shouldUpdateShiftKeyPivotIndex = !isThumbnailSelectingPages && !shiftKeyPressed;\n\n      if (shouldUpdateShiftKeyPivotIndex) {\n        dispatch(actions.setShiftKeyThumbnailsPivotIndex(lastSelectedPageIndex));\n      }\n\n      dispatch(actions.setSelectedPageThumbnails(updatedSelectedPages));\n    } else if (isMobile()) {\n      dispatch(actions.closeElement('leftPanel'));\n    }\n\n    // due to the race condition, we need a settimeout here\n    // otherwise, sometimes the current page will not be visible in left panel\n    setTimeout(() => {\n      // If user clicks on checkbox, it should not automatically jump to that page,\n      // only if the user clicks on thumbnail then go to page and view it, unless in 'thumbnail' mode\n      if (!checkboxToggled || thumbnailSelectionMode === thumbnailSelectionModes['THUMBNAIL']) {\n        core.setCurrentPage(index + 1);\n      }\n    }, 0);\n  };\n\n  const isActive = currentPage === index + 1;\n  const pageLabel = pageLabels[index];\n  let checkboxRotateClass = 'default';\n  const rotation = core.getRotation(index + 1);\n  if ((!rotation || rotation === 2) && dimensions.width > dimensions.height) {\n    checkboxRotateClass = 'rotated';\n  } else if ((rotation === 1 || rotation === 3) && dimensions.width < dimensions.height) {\n    checkboxRotateClass = 'rotated';\n  }\n  useImperativeHandle(ref, () => ({\n    focusInput: () => {\n      if (isThumbnailSelectingPages && loaded) {\n        selectElement(buttonMultiSelectRefs.current[0]);\n        setCurrentFocusIndex(0);\n      } else if (buttonRefs.current) {\n        setTimeout(() => {\n          selectElement(buttonRefs.current[0]);\n          setCurrentFocusIndex(0);\n        }, 0);\n      }\n    }\n  }));\n\n  const selectElement = (element) => {\n    if (element) {\n      element.ariaCurrent = 'page';\n      element.focus();\n    }\n  };\n\n  const deselectElement = (element) => {\n    if (element) {\n      element.ariaCurrent = undefined;\n    }\n  };\n\n  const handleEnterGrid = (e) => {\n    e.preventDefault();\n    preventDefaultTab();\n  };\n\n  const preventDefaultTab = () => {\n    buttonRefs.current.forEach((elem) => {\n      deselectElement(elem);\n    });\n  };\n\n  const handleKeyDown = useCallback((e) => {\n    e.stopPropagation();\n    parentKeyListener(e);\n    const leaveFocusActions = {\n      Tab: () => handleEnterGrid(e),\n      Escape: () => handleEnterGrid(e)\n    };\n    if (leaveFocusActions[e.key]) {\n      leaveFocusActions[e.key]?.();\n    }\n    const keyboardActions = {\n      ArrowUp: () => handleArrowKey(e, -1),\n      ArrowDown: () => handleArrowKey(e, 1),\n      ArrowLeft: () => handleArrowKey(e, -1),\n      ArrowRight: () => handleArrowKey(e, 1),\n    };\n    if (keyboardActions[e.key] && !isMultiselectEnabled) {\n      keyboardActions[e.key]();\n    }\n  }, [buttonRefs.current, currentFocusIndex]);\n\n  const handleArrowKey = (e, direction) => {\n    e.preventDefault();\n    if (buttonRefs.current.length === 0) {\n      return;\n    }\n\n    setCurrentFocusIndex((prevIndex) => {\n      let newFocusIndex = prevIndex + direction;\n      if (newFocusIndex < 0) {\n        newFocusIndex = buttonRefs.current.length - 1;\n      } else if (newFocusIndex >= buttonRefs.current.length) {\n        newFocusIndex = 0;\n      }\n      updateTabIndexes(buttonRefs.current[newFocusIndex]);\n      return newFocusIndex;\n    });\n  };\n\n  const updateTabIndexes = (focusedElement) => {\n    buttonRefs.current.forEach((elem) => {\n      elem === focusedElement ? selectElement(elem) : deselectElement(elem);\n    });\n  };\n  useEffect(() => {\n    if (thumbContainerRef.current) {\n      buttonRefs.current = findFocusableElements(thumbContainerRef.current);\n    }\n  }, [shouldShowControls, isActive, loaded]);\n\n  useEffect(() => {\n    if (thumbContainerRef.current) {\n      buttonMultiSelectRefs.current = findFocusableElements(thumbContainerRef.current);\n    }\n  }, [isThumbnailSelectingPages, loaded]);\n\n  const isMultiselectEnabled = isThumbnailSelectingPages && loaded;\n\n  return (\n    <button\n      className={classNames({\n        Thumbnail: true,\n        active: isActive,\n        selected: isSelected && isThumbnailSelectingPages,\n      })}\n      onDragOver={(e) => onDragOver(e, index)}\n      id={`Thumbnail-container-${index}`}\n      ref={thumbContainerRef}\n      onKeyDown={(e) => handleKeyDown(e)}\n      onClick={handleClick}\n      style={{\n        width: thumbSize,\n        cursor: 'pointer',\n        background: 'none',\n        border: 'none'\n      }}\n      tabIndex={-1}\n    >\n      <div\n        className=\"container\"\n        style={{\n          height: thumbSize,\n          width: thumbSize,\n        }}\n        onDragStart={(e) => onDragStart(e, index)}\n        draggable={isDraggable}\n        tabIndex={-1}\n      >\n        <div id={`pageThumb${index}`} className=\"thumbnail\" />\n        {isThumbnailSelectingPages && loaded && (\n          <Choice\n            className={`checkbox ${checkboxRotateClass}`}\n            checked={selectedPageIndexes.includes(index)}\n            aria-label={`${t('action.page')} ${pageLabel} ${t('formField.types.checkbox')}`}\n            tabIndex={-1}\n          />\n        )}\n      </div>\n      <div className=\"page-label\">{pageLabel}</div>\n      {!isThumbnailSelectingPages && isActive && shouldShowControls && !isContentEditingEnabled && <ThumbnailControls index={index} />}\n    </button>\n  );\n});\n\nThumbnail.displayName = 'Thumbnail';\nThumbnail.propTypes = {\n  index: PropTypes.number,\n  isSelected: PropTypes.bool,\n  updateAnnotations: PropTypes.func,\n  shiftKeyThumbnailPivotIndex: PropTypes.number,\n  onFinishLoading: PropTypes.func,\n  onLoad: PropTypes.func,\n  onRemove: PropTypes.func,\n  onDragStart: PropTypes.func,\n  onDragOver: PropTypes.func,\n  isDraggable: PropTypes.bool,\n  shouldShowControls: PropTypes.bool,\n  thumbnailSize: PropTypes.number,\n  currentPage: PropTypes.number,\n  pageLabels: PropTypes.array,\n  selectedPageIndexes: PropTypes.array,\n  isThumbnailMultiselectEnabled: PropTypes.bool,\n  isReaderModeOrReadOnly: PropTypes.bool,\n  dispatch: PropTypes.func,\n  actions: PropTypes.object,\n  isMobile: PropTypes.func,\n  canLoad: PropTypes.bool,\n  isThumbnailSelectingPages: PropTypes.bool,\n  thumbnailSelectionMode: PropTypes.string,\n  activeDocumentViewerKey: PropTypes.number,\n  panelSelector: PropTypes.string,\n  parentKeyListener: PropTypes.func,\n};\n\nexport default Thumbnail;","import React from 'react';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\n\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { isMobile } from 'helpers/device';\n\nimport Thumbnail from './Thumbnail';\n\nconst ThumbnailRedux = React.forwardRef((props, ref) => {\n  const [\n    currentPage,\n    pageLabels,\n    selectedPageIndexes,\n    isThumbnailMultiselectEnabled,\n    isReaderMode,\n    isDocumentReadOnly,\n    shiftKeyThumbnailPivotIndex,\n    isThumbnailSelectingPages,\n    thumbnailSelectionMode,\n    activeDocumentViewerKey,\n    selectionModes\n  ] = useSelector(\n    (state) => [\n      selectors.getCurrentPage(state),\n      selectors.getPageLabels(state),\n      selectors.getSelectedThumbnailPageIndexes(state),\n      selectors.isThumbnailMultiselectEnabled(state),\n      selectors.isReaderMode(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.getShiftKeyThumbnailPivotIndex(state),\n      selectors.isThumbnailSelectingPages(state),\n      selectors.getThumbnailSelectionMode(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n\n  return <Thumbnail {...props} {...{\n    ref,\n    currentPage,\n    pageLabels,\n    selectedPageIndexes,\n    isThumbnailMultiselectEnabled,\n    isReaderModeOrReadOnly: isReaderMode || isDocumentReadOnly,\n    dispatch,\n    actions,\n    isMobile,\n    shiftKeyThumbnailPivotIndex,\n    isThumbnailSelectingPages,\n    thumbnailSelectionMode,\n    selectionModes,\n    activeDocumentViewerKey,\n  }}\n  />;\n});\nThumbnailRedux.displayName = 'ThumbnailRedux';\nexport default ThumbnailRedux;\n","import ThumbnailRedux from './ThumbnailRedux';\n\nexport default ThumbnailRedux;","import React from 'react';\nimport Button from 'components/Button';\nimport '../ThumbnailControlsMulti.scss';\nimport PropTypes from 'prop-types';\n\nfunction MoveOperations({ moveToTop, moveToBottom }) {\n  return (\n    <>\n      <Button\n        className={'button-hover'}\n        dataElement=\"moveToTop\"\n        img=\"icon-page-move-up\"\n        onClick={moveToTop}\n        title=\"action.moveToTop\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"moveToBottom\"\n        img=\"icon-page-move-down\"\n        onClick={moveToBottom}\n        title=\"action.moveToBottom\"\n      />\n    </>\n  );\n}\n\nMoveOperations.propTypes = {\n  moveToTop: PropTypes.func,\n  moveToBottom: PropTypes.func,\n};\n\nexport default MoveOperations;\n","import React from 'react';\nimport Button from 'components/Button';\nimport '../ThumbnailControlsMulti.scss';\nimport PropTypes from 'prop-types';\n\nfunction ManipulateOperations({ onInsert, onReplace, onExtractPages, onDeletePages }) {\n  return (\n    <>\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlInsert\"\n        img=\"icon-page-insertion-insert\"\n        onClick={onInsert}\n        title=\"action.insert\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlReplace\"\n        img=\"icon-page-replacement\"\n        onClick={onReplace}\n        title=\"action.replace\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlExtract\"\n        img=\"icon-page-manipulation-extract\"\n        onClick={onExtractPages}\n        title=\"action.extract\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlDelete\"\n        img=\"icon-delete-line\"\n        onClick={onDeletePages}\n        title=\"action.delete\"\n      />\n    </>\n  );\n}\n\nManipulateOperations.propTypes = {\n  onInsert: PropTypes.func,\n  onReplace: PropTypes.func,\n  onExtractPages: PropTypes.func,\n  onDeletePages: PropTypes.func,\n};\n\nexport default ManipulateOperations;\n","import React from 'react';\nimport Button from 'components/Button';\nimport '../ThumbnailControlsMulti.scss';\nimport PropTypes from 'prop-types';\n\nfunction RotateOperations({ onRotateClockwise, onRotateCounterClockwise }) {\n  return (\n    <>\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlRotateCounterClockwise\"\n        img=\"icon-header-page-manipulation-page-rotation-counterclockwise-line\"\n        onClick={onRotateCounterClockwise}\n        title=\"action.rotateCounterClockwise\"\n      />\n      <Button\n        className={'button-hover'}\n        dataElement=\"thumbnailsControlRotateClockwise\"\n        img=\"icon-header-page-manipulation-page-rotation-clockwise-line\"\n        onClick={onRotateClockwise}\n        title=\"action.rotateClockwise\"\n      />\n    </>\n  );\n}\n\nRotateOperations.propTypes = {\n  onRotateClockwise: PropTypes.func,\n  onRotateCounterClockwise: PropTypes.func,\n};\n\nexport default RotateOperations;\n","import React, { useEffect, useState, useMemo } from 'react';\nimport { useDispatch, useSelector, useStore, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport {\n  deletePages,\n  extractPages,\n  noPagesSelectedWarning,\n  replace,\n  rotateClockwise,\n  rotateCounterClockwise,\n  movePagesToBottom,\n  movePagesToTop\n} from 'helpers/pageManipulationFunctions';\nimport { workerTypes } from 'constants/types';\nimport core from 'src/core';\nimport DataElements from 'constants/dataElement';\nimport { panelMinWidth } from 'constants/panel';\nimport { isMobile as isInMobile } from 'helpers/device';\nimport getRootNode from 'helpers/getRootNode';\nimport MoveOperations from './MoveOperations/MoveOperations';\nimport ManipulateOperations from './ManipulateOperations/ManipulateOperations';\nimport RotateOperations from './RotateOperations/RotateOperations';\nimport ToggleElementButton from 'components/ModularComponents/ToggleElementButton';\nimport {\n  getPageAdditionalControls,\n  getPageManipulationControls,\n  getPageRotationControls,\n  getPageCustomControlsFlyout\n} from 'helpers/pageManipulationFlyoutHelper';\nimport './ThumbnailControlsMulti.scss';\nimport PropTypes from 'prop-types';\nimport Button from 'components/Button';\n\n// Values come from the CSS\nconst WIDTH_MARGINS = 16 + 8 + 16 + 16 + 16 + 16;\n\nfunction ThumbnailControlsMultiContainer({ parentElement }) {\n  const store = useStore();\n  const dispatch = useDispatch();\n  const isMobile = isInMobile();\n  const selectedPageIndexes = useSelector(selectors.getSelectedThumbnailPageIndexes);\n  const panelWidth = useSelector((state) => !parentElement || parentElement === 'leftPanel' ? selectors.getLeftPanelWidth(state) : selectors.getPanelWidth(state, parentElement));\n  const deleteModalEnabled = useSelector(selectors.pageDeletionConfirmationModalEnabled);\n  const isDesktopOnlyMode = useSelector(selectors.isInDesktopOnlyMode);\n  const items = useSelector(selectors.getMultiPageManipulationControlsItems, shallowEqual);\n  const [displayFlyout, setDisplayFlyout] = useState(false);\n\n  const pageNumbers = useMemo(() =>\n    selectedPageIndexes.map((index) => index + 1), [selectedPageIndexes]);\n\n  const openInsertPageModal = () => {\n    dispatch(actions.closeElement(DataElements.PAGE_MANIPULATION_OVERLAY));\n    dispatch(actions.openElement('insertPageModal'));\n  };\n\n  const childProps = useMemo(() => {\n    const onReplace = () => !noPagesSelectedWarning(pageNumbers, dispatch) && replace(dispatch);\n    const onExtractPages = () => !noPagesSelectedWarning(pageNumbers, dispatch) && extractPages(pageNumbers, dispatch);\n    const onDeletePages = () => !noPagesSelectedWarning(pageNumbers, dispatch) && deletePages(pageNumbers, dispatch, deleteModalEnabled);\n    const onRotateClockwise = () => !noPagesSelectedWarning(pageNumbers, dispatch) && rotateClockwise(pageNumbers);\n    const onRotateCounterClockwise = () => !noPagesSelectedWarning(pageNumbers, dispatch) && rotateCounterClockwise(pageNumbers);\n    const onInsert = () => !noPagesSelectedWarning(pageNumbers, dispatch) && openInsertPageModal();\n    const moveToTop = () => !noPagesSelectedWarning(pageNumbers, dispatch) && movePagesToTop(pageNumbers);\n    const moveToBottom = () => !noPagesSelectedWarning(pageNumbers, dispatch) && movePagesToBottom(pageNumbers);\n    return {\n      onReplace,\n      onExtractPages,\n      onDeletePages,\n      onRotateCounterClockwise,\n      onRotateClockwise,\n      onInsert,\n      moveToTop,\n      moveToBottom,\n      pageNumbers,\n    };\n  }, [pageNumbers, deleteModalEnabled]);\n\n  const { onRotateClockwise, onRotateCounterClockwise } = childProps;\n\n  const document = core.getDocument();\n  const documentType = document?.type;\n  const isXod = documentType === workerTypes.XOD;\n  const isOffice = documentType === workerTypes.OFFICE || documentType === workerTypes.LEGACY_OFFICE;\n\n  const smallBreakPoint = 190;\n  const largeBreakPoint = 290;\n  let widthMinusMargins;\n  if (!isDesktopOnlyMode && isMobile) {\n    try {\n      const appRect = getRootNode().querySelector('.App').getBoundingClientRect();\n      widthMinusMargins = appRect.width - WIDTH_MARGINS;\n    } catch (e) {\n      widthMinusMargins = (panelWidth || panelMinWidth) - WIDTH_MARGINS;\n    }\n  } else {\n    widthMinusMargins = (panelWidth || panelMinWidth) - WIDTH_MARGINS;\n  }\n  const isPanelSmall = widthMinusMargins < smallBreakPoint;\n  const isPanelLarge = widthMinusMargins > largeBreakPoint;\n\n  useEffect(() => {\n    const getFlyoutItemsFromType = (item) => {\n      if (item.dataElement === 'leftPanelPageTabsRotate') {\n        return getPageRotationControls(store, true);\n      } else if (item.dataElement === 'leftPanelPageTabsMove') {\n        return getPageAdditionalControls(store, true);\n      } else if (item.dataElement === 'leftPanelPageTabsMore') {\n        return getPageManipulationControls(store, true);\n      } else if (item.type === 'customPageOperation') {\n        return getPageCustomControlsFlyout(store, item);\n      } else if (item.type === 'divider') {\n        return ['divider'];\n      }\n    };\n    const flyoutItems = [];\n    let startIndex;\n    if (isPanelSmall) {\n      startIndex = 1;\n    } else if (isPanelLarge) {\n      startIndex = 3;\n    } else {\n      startIndex = 2;\n    }\n    let index = 0;\n    items.forEach((item) => {\n      let skip = false;\n      if (index < startIndex || (flyoutItems.length === 0 && item?.type === 'divider')) {\n        skip = true;\n      }\n      if (item && item.type !== 'divider') {\n        index++;\n      }\n      !skip && flyoutItems.push(...getFlyoutItemsFromType(item));\n    });\n    const flyout = {\n      dataElement: DataElements.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT,\n      className: DataElements.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT,\n      items: flyoutItems,\n    };\n    if (isPanelLarge) {\n      dispatch(actions.closeElement(flyout.dataElement));\n    }\n    if (flyout.items.length) {\n      dispatch(actions.updateFlyout(flyout.dataElement, flyout));\n      setDisplayFlyout(true);\n    } else {\n      dispatch(actions.removeFlyout(flyout.dataElement));\n      setDisplayFlyout(false);\n    }\n  }, [store, isPanelLarge, isPanelSmall, items]);\n\n  const renderedItems = useMemo(() => {\n    let lastDividerAdded = false;\n    let index = 0;\n    return items.map((item, actualIndex) => {\n      let lastIndexToRender;\n      if (isPanelSmall) {\n        lastIndexToRender = 0;\n      } else if (isPanelLarge) {\n        lastIndexToRender = 2;\n      } else {\n        lastIndexToRender = 1;\n      }\n      if (item?.type === 'divider' && !lastDividerAdded) {\n        if (index > lastIndexToRender) {\n          lastDividerAdded = true;\n        }\n        return <div key={`divider${actualIndex}`} className=\"divider\"/>;\n      }\n      if (index > lastIndexToRender) {\n        return null;\n      }\n      if (item && item.type !== 'divider') {\n        index++;\n      }\n      if (item.dataElement === 'leftPanelPageTabsRotate') {\n        return <RotateOperations {...childProps} key=\"leftPanelPageTabsRotate\"/>;\n      } else if (item.dataElement === 'leftPanelPageTabsMove') {\n        return <MoveOperations {...childProps} key=\"leftPanelPageTabsMove\"/>;\n      } else if (item.dataElement === 'leftPanelPageTabsMore') {\n        return <ManipulateOperations {...childProps} key=\"leftPanelPageTabsMore\"/>;\n      } else if (item.type === 'customPageOperation') {\n        if (!item.operations) {\n          index--;\n          return null;\n        }\n        return item.operations.map((operation) => (\n          <Button\n            key={operation.dataElement}\n            className={'button-hover'}\n            dataElement={operation.dataElement}\n            img={operation.img}\n            onClick={() => operation.onClick(pageNumbers)}\n            title={operation.title}\n          />\n        ));\n      }\n      return null;\n    });\n  }, [items, childProps, isPanelSmall, isPanelLarge]);\n\n  if (isXod || isOffice || document?.isWebViewerServerDocument()) {\n    return (\n      <div className={'PageControlContainer root small'}>\n        <RotateOperations onRotateClockwise={onRotateClockwise}\n          onRotateCounterClockwise={onRotateCounterClockwise}/>\n      </div>\n    );\n  }\n\n  return (<div className=\"PageControlContainer root\">\n    {renderedItems}\n    {displayFlyout && <div className=\"dropdown-menu\">\n      <ToggleElementButton\n        dataElement={`${DataElements.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT}Button`}\n        toggleElement={DataElements.PAGE_MANIPULATION_FLYOUT_MULTI_SELECT}\n        title=\"action.more\"\n        img=\"icon-tool-more\"\n      />\n      <div className=\"indicator\"/>\n    </div>}\n  </div>);\n}\n\nThumbnailControlsMultiContainer.propTypes = {\n  parentElement: PropTypes.string,\n};\n\nexport default ThumbnailControlsMultiContainer;\n","import ThumbnailControlsMultiContainer from './ThumbnailControlsMultiContainer';\n\nexport default ThumbnailControlsMultiContainer;","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Button from 'components/Button';\nimport getPageArrayFromString from 'helpers/getPageArrayFromString';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport pageNumberPlaceholder from 'constants/pageNumberPlaceholder';\nimport core from 'src/core';\nimport { useTranslation } from 'react-i18next';\nimport ThumbnailControlsMulti from 'src/components/ThumbnailControlsMulti';\nimport './DocumentControls.scss';\n\nfunction getPageString(selectedPageArray, pageLabels) {\n  let pagesToPrint = '';\n  const sortedPages = selectedPageArray.sort((a, b) => a - b);\n  let prevIndex = null;\n\n  for (let i = 0; sortedPages.length > i; i++) {\n    if (sortedPages[i + 1] === sortedPages[i] + 1) {\n      prevIndex = prevIndex !== null ? prevIndex : sortedPages[i];\n    } else if (prevIndex !== null) {\n      pagesToPrint = `${pagesToPrint}${pageLabels[prevIndex]}-${pageLabels[sortedPages[i]]}, `;\n      prevIndex = null;\n    } else {\n      pagesToPrint = `${pagesToPrint}${pageLabels[sortedPages[i]]}, `;\n    }\n  }\n\n  return pagesToPrint.slice(0, -2);\n}\n\nconst DocumentControls = ({ shouldShowControls, parentElement }) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n\n  const [\n    selectedPageIndexes,\n    isDisabled,\n    pageLabels,\n    isThumbnailSelectingPages,\n    featureFlags,\n  ] = useSelector((state) => [\n    selectors.getSelectedThumbnailPageIndexes(state),\n    selectors.isElementDisabled(state, 'documentControl'),\n    selectors.getPageLabels(state),\n    selectors.isThumbnailSelectingPages(state),\n    selectors.getFeatureFlags(state),\n  ]);\n\n  const initialPagesString = getPageString(selectedPageIndexes, pageLabels);\n\n  const [pageString, setPageString] = useState(initialPagesString);\n  const [previousPageString, setPreviousPageString] = useState(initialPagesString);\n  const customizableUI = featureFlags.customizableUI;\n\n  useEffect(() => {\n    setPageString(getPageString(selectedPageIndexes, pageLabels));\n  }, [setPageString, selectedPageIndexes, shouldShowControls, pageLabels]);\n\n  const onBlur = (e) => {\n    const selectedPagesString = e.target.value.replace(/ /g, '');\n    const pages = !selectedPagesString ? [] : getPageArrayFromString(selectedPagesString, pageLabels);\n    const pageIndexes = pages.map((page) => page - 1);\n\n    if (pages.length || !selectedPagesString) {\n      dispatch(actions.setSelectedPageThumbnails(pageIndexes));\n\n      const updatedString = getPageString(selectedPageIndexes, pageLabels);\n\n      setPageString(updatedString);\n      setPreviousPageString(updatedString);\n    } else {\n      setPageString(previousPageString);\n    }\n\n    if (selectedPageIndexes.length > 0 && !isThumbnailSelectingPages) {\n      // set a short timeout due to race condition caused by onBlur and\n      // changing the documentControlsButton based on isThumbnailSelectingPages\n      setTimeout(() => {\n        if (pageString !== previousPageString) {\n          enableThumbnailSelectingPages();\n        }\n      }, 100);\n    }\n  };\n\n  const pageStringUpdate = (e) => {\n    setPageString(e.target.value);\n  };\n\n  const disableThumbnailSelectingPages = () => {\n    dispatch(actions.setSelectedPageThumbnails([core.getCurrentPage() - 1]));\n    dispatch(actions.setThumbnailSelectingPages(false));\n  };\n\n  const enableThumbnailSelectingPages = () => {\n    dispatch(actions.setThumbnailSelectingPages(true));\n  };\n\n  return isDisabled ? null : (\n    <div className={'documentControlsContainer'} data-element={'documentControl'}>\n      {shouldShowControls ? (\n        <div className={'documentControls'}>\n          <div className={'divider'}></div>\n          {isThumbnailSelectingPages && <ThumbnailControlsMulti parentElement={parentElement}/>}\n          {customizableUI &&\n            <label className={'documentControlsLabel'} htmlFor=\"pageNumbersInput\">\n              <span>\n                {t('option.thumbnailPanel.multiSelectPages')} -\n              </span>\n              <span className='multiSelectExampleLabel'>\n                {t('option.thumbnailPanel.multiSelectPagesExample')}\n              </span>\n            </label>\n          }\n          <div className={'documentControlsInput'}>\n            <input\n              name=\"pageNumbersInput\"\n              onBlur={onBlur}\n              onChange={pageStringUpdate}\n              value={pageString}\n              placeholder={customizableUI ? '' : pageNumberPlaceholder}\n              aria-label={t('option.thumbnailPanel.enterPageNumbers')}\n              className=\"pagesInput\"\n              type=\"text\"\n            />\n            <div className={'documentControlsButton'}>\n              {!isThumbnailSelectingPages ? (\n                <Button\n                  img={'icon-tool-select-pages'}\n                  title={'option.documentControls.selectTooltip'}\n                  onClick={enableThumbnailSelectingPages}\n                  dataElement={'thumbMultiSelect'}\n                />\n              ) : (\n                <Button\n                  img={'icon-close'}\n                  title={'option.documentControls.closeTooltip'}\n                  onClick={disableThumbnailSelectingPages}\n                  dataElement={'thumbCloseMultiSelect'}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nDocumentControls.propTypes = {\n  isDisabled: PropTypes.bool,\n  pageLabels: PropTypes.arrayOf(PropTypes.string),\n  toggleDocumentControl: PropTypes.func,\n  shouldShowControls: PropTypes.bool,\n};\n\nexport default DocumentControls;\n","export default '1, 3, 5-10';","import DocumentControls from './DocumentControls';\n\nexport default DocumentControls;","import core from 'core';\nimport actions from 'actions';\nimport extractPagesWithAnnotations from './extractPagesWithAnnotations';\nimport fireEvent from './fireEvent';\nimport Events from 'constants/events';\nimport DataElements from 'src/constants/dataElement';\n\nexport const extractPagesToMerge = (pageNumbers) => {\n  // extract pages and put the data on the iFrame window element for another instance of WebViewer to access\n  window.extractedDataPromise = extractPagesWithAnnotations(pageNumbers);\n  window.pagesExtracted = pageNumbers;\n};\n\nexport const mergeDocument = (srcToMerge, mergeToPage, shouldFireEvent = true) => (dispatch) => {\n  dispatch(actions.openElement(DataElements.LOADING_MODAL));\n\n  return new Promise((resolve, reject) => {\n    core.mergeDocument(srcToMerge, mergeToPage).then((mergeResults) => {\n      dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n      core.setCurrentPage(mergeToPage);\n\n      if (shouldFireEvent) {\n        fireEvent(Events.DOCUMENT_MERGED, mergeResults);\n      }\n\n      resolve(mergeResults);\n    }).catch((err) => {\n      reject(err);\n      dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n    });\n  });\n};\n\nexport const mergeExternalWebViewerDocument = (viewerID, mergeToPage) => (dispatch) => {\n  return new Promise((resolve, reject) => {\n    const otherWebViewerIframe = window.parent.document.querySelector(`#${viewerID}`);\n    if (!otherWebViewerIframe) {\n      console.warn('Could not find other instance of WebViewer');\n      reject();\n    }\n\n    let contentWindow = otherWebViewerIframe.contentWindow;\n    if (window.isApryseWebViewerWebComponent) {\n      contentWindow = window;\n    }\n\n    const extractedDataPromise = contentWindow.extractedDataPromise;\n    if (!extractedDataPromise) {\n      console.warn('Could not retrieve data from other instance of WebViewer');\n      reject();\n    }\n\n    dispatch(actions.openElement(DataElements.LOADING_MODAL));\n    extractedDataPromise.then((docToMerge) => {\n      dispatch(mergeDocument(docToMerge, mergeToPage, false)).then(({ filename, pages }) => {\n        fireEvent(Events.DOCUMENT_MERGED, { filename, pages: contentWindow.pagesExtracted });\n        dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n        resolve({ filename, pages });\n      });\n    }).catch((err) => {\n      dispatch(actions.closeElement(DataElements.LOADING_MODAL));\n      reject(err);\n    });\n  });\n};","import debounce from 'lodash/debounce';\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { List } from 'react-virtualized';\nimport Measure from 'react-measure';\nimport classNames from 'classnames';\nimport { isIE11 } from 'helpers/device';\n\nimport Thumbnail from 'components/Thumbnail';\nimport DocumentControls from 'components/DocumentControls';\nimport Button from 'components/Button';\nimport Slider from 'components/Slider';\n\nimport useCore from 'hooks/useCore';\nimport { extractPagesToMerge, mergeDocument, mergeExternalWebViewerDocument } from 'helpers/pageManipulation';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport Events from 'constants/events';\nimport DataElements from 'constants/dataElement';\nimport fireEvent from 'helpers/fireEvent';\n\nimport './ThumbnailsPanel.scss';\nimport getRootNode from 'helpers/getRootNode';\nimport { useTranslation } from 'react-i18next';\nimport useIsRTL from 'hooks/useIsRTL';\n\nconst dataTransferWebViewerFrameKey = 'dataTransferWebViewerFrame';\n\nconst ZOOM_RANGE_MIN = '100';\nconst ZOOM_RANGE_MAX = '1000';\nconst ZOOM_RANGE_STEP = '50';\nconst MAX_COLUMNS = 16;\n\nconst hoverAreaHeight = 25;\n\nconst ThumbnailsPanel = ({ panelSelector, parentDataElement }) => {\n  const { core } = useCore();\n  const isLeftPanelOpen = useSelector((state) => selectors.isElementOpen(state, 'leftPanel'));\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, 'thumbnailsPanel'));\n  const totalPages = useSelector(selectors.getTotalPages);\n  const currentPage = useSelector(selectors.getCurrentPage);\n  const selectedPageIndexes = useSelector((state) => selectors.getSelectedThumbnailPageIndexes(state), shallowEqual);\n  const isThumbnailMergingEnabled = useSelector(selectors.getIsThumbnailMergingEnabled);\n  const isThumbnailReorderingEnabled = useSelector(selectors.getIsThumbnailReorderingEnabled);\n  const isMultipleViewerMerging = useSelector(selectors.getIsMultipleViewerMerging);\n  const isThumbnailControlDisabled = useSelector((state) => selectors.isElementDisabled(state, 'thumbnailControl'));\n  const isThumbnailSliderDisabled = useSelector((state) => selectors.isElementDisabled(state, 'thumbnailsSizeSlider'));\n  const isReaderMode = useSelector(selectors.isReaderMode);\n  const isViewOnly = useSelector(selectors.isViewOnly);\n  const isDocumentReadOnly = useSelector(selectors.isDocumentReadOnly);\n  const totalPagesFromSecondaryDocumentViewer = useSelector((state) => selectors.getTotalPages(state, 2));\n  const activeDocumentViewerKey = useSelector(selectors.getActiveDocumentViewerKey);\n  const isRightClickEnabled = useSelector(selectors.openingPageManipulationOverlayByRightClickEnabled);\n  const featureFlags = useSelector(selectors.getFeatureFlags, shallowEqual);\n  const isContentEditingEnabled = useSelector(selectors.isContentEditingEnabled);\n\n  const [t] = useTranslation();\n  const isRightToLeft = useIsRTL();\n\n  const listRef = useRef();\n  const pendingThumbs = useRef([]);\n  const thumbs = useRef([]);\n  const afterMovePageNumber = useRef(null);\n\n  const [isOfficeEditor, setIsOfficeEditor] = useState(false);\n  const [canLoad, setCanLoad] = useState(true);\n  const [height, setHeight] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [draggingOverPageIndex, setDraggingOverPageIndex] = useState(null);\n  const [isDraggingToPreviousPage, setDraggingToPreviousPage] = useState(false);\n  const [numberOfColumns, setNumberOfColumns] = useState(1);\n  const [isDragging, setIsDragging] = useState(false);\n  const [focusedIndex, setFocusedIndex] = useState(0);\n  const thumbnailContainerRefs = useRef([]);\n  const thumbnailRefs = useRef([]);\n  const focusedThumbnailRef = useRef(null);\n\n  const [thumbnailSize, setThumbnailSize] = useState(150);\n  const [lastTimeTriggered, setLastTimeTriggered] = useState(0);\n  const [globalIndex, setGlobalIndex] = useState(0);\n  const pageCount = activeDocumentViewerKey === 2 ? totalPagesFromSecondaryDocumentViewer : totalPages;\n  const customizableUI = featureFlags?.customizableUI;\n  const shouldShowControls = !(isReaderMode || isDocumentReadOnly || isViewOnly || isContentEditingEnabled);\n\n  const dispatch = useDispatch();\n\n  // If memory becomes an issue, change this to use pageNumbers.\n  // Instead of a debounced drawAnnotations function, perhaps use\n  // a function that first checks for the pageNumber in this map\n  // before calling drawAnnotations on a page.\n  let activeThumbRenders = {};\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (focusedThumbnailRef.current && !focusedThumbnailRef.current.contains(event.target)) {\n        removeOutline(focusedThumbnailRef.current);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const handleKeyDown = useCallback((e, currentIndex, columnCount) => {\n    e.stopPropagation();\n    let newIndex;\n    const arrowActions = {\n      ArrowLeft: () => handleArrowKey(e, currentIndex, -1),\n      ArrowRight: () => handleArrowKey(e, currentIndex, 1),\n      ArrowUp: () => handleArrowKey(e, currentIndex, -columnCount),\n      ArrowDown: () => handleArrowKey(e, currentIndex, columnCount),\n    };\n    const keyActions = {\n      Enter: () => handleEnterKey(e, currentIndex),\n      Tab: () => handleTabOutKey(currentIndex),\n    };\n\n    if (arrowActions[e.key]) {\n      newIndex = arrowActions[e.key]();\n    }\n    if (keyActions[e.key]) {\n      keyActions[e.key]();\n    }\n\n    if (newIndex !== undefined && newIndex !== currentIndex) {\n      setFocusedIndex(newIndex);\n      selectElement(thumbnailContainerRefs.current[newIndex]);\n      deselectElement(thumbnailContainerRefs.current[currentIndex]);\n    }\n  }, [thumbnailRefs, thumbnailContainerRefs]);\n\n  const selectElement = (element) => {\n    element.tabIndex = 0;\n    element.ariaCurrent = 'page';\n    element.style.outline = 'var(--focus-visible-outline)';\n    element.focus();\n    focusedThumbnailRef.current = element;\n  };\n\n  const deselectElement = (element) => {\n    element.tabIndex = -1;\n    element.ariaCurrent = undefined;\n    removeOutline(element);\n  };\n\n  const removeOutline = (element) => {\n    element.style.outline = 'none';\n  };\n\n  const handleTabOutKey = (index) => {\n    removeOutline(thumbnailContainerRefs.current[index]);\n  };\n\n  const handleArrowKey = (e, currentIndex, direction) => {\n    let newIndex = currentIndex + direction;\n    if (newIndex < 0 || newIndex >= pageCount) {\n      return currentIndex;\n    }\n    return newIndex;\n  };\n\n  const handleEnterKey = (e, index) => {\n    e.preventDefault();\n    selectElement(thumbnailContainerRefs.current[index]);\n    core.setCurrentPage(index + 1);\n    thumbnailRefs.current[index].focusInput();\n  };\n\n  const handleThumbnailKeyDown = useCallback((e, index) => {\n    e.stopPropagation();\n    const keyActions = {\n      Tab: () => handleTabKey(e, index),\n      Escape: () => handleEscapeKey(e, index)\n    };\n    if (keyActions[e.key]) {\n      keyActions[e.key]?.();\n    }\n  }, [thumbnailContainerRefs]);\n\n  const handleEscapeKey = (e, index) => {\n    e.preventDefault();\n    selectElement(thumbnailContainerRefs.current[index]);\n  };\n\n  const handleTabKey = (e, index) => {\n    let direction = e.shiftKey ? -1 : 1;\n    let newIndex = index + direction;\n    if (newIndex < 0 || newIndex >= pageCount) {\n      newIndex = index;\n    }\n    setFocusedIndex(newIndex);\n    selectElement(thumbnailContainerRefs.current[newIndex]);\n    if (newIndex !== index) {\n      deselectElement(thumbnailContainerRefs.current[index]);\n    }\n  };\n\n  const getThumbnailSize = (pageWidth, pageHeight) => {\n    let width;\n    let height;\n    let ratio;\n\n    if (pageWidth > pageHeight) {\n      ratio = pageWidth / thumbnailSize;\n      width = thumbnailSize;\n      height = Math.round(pageHeight / ratio);\n    } else {\n      ratio = pageHeight / thumbnailSize;\n      width = Math.round(pageWidth / ratio); // Chrome has trouble displaying borders of non integer width canvases.\n      height = thumbnailSize;\n    }\n\n    return {\n      width,\n      height,\n    };\n  };\n\n  const updateAnnotations = (pageIndex) => {\n    const thumbContainer = thumbs.current && thumbs.current[pageIndex] && thumbs.current[pageIndex].element;\n    if (!thumbContainer) {\n      return;\n    }\n\n    const pageNumber = pageIndex + 1;\n    const pageWidth = core.getPageWidth(pageNumber);\n    const pageHeight = core.getPageHeight(pageNumber);\n\n    const { width, height } = getThumbnailSize(pageWidth, pageHeight);\n\n    const annotCanvas = thumbContainer.querySelector('.annotation-image') || document.createElement('canvas');\n    annotCanvas.className = `annotation-image ${isRightToLeft ? 'right-to-left' : ''}`;\n    annotCanvas.role = 'img';\n    annotCanvas.ariaLabel = `${t('action.page')} ${pageNumber}`;\n    annotCanvas.style.maxWidth = `${thumbnailSize}px`;\n    annotCanvas.style.maxHeight = `${thumbnailSize}px`;\n    annotCanvas.style['transform'] = `${isRightToLeft ? 'translate(50%, -50%)' : 'translate(-50%, -50%)'}`;\n    const ctx = annotCanvas.getContext('2d');\n\n    let zoom = 1;\n    let rotation = core.getCompleteRotation(pageNumber);\n    if (rotation < 0) {\n      rotation += 4;\n    }\n    const multiplier = window.Core.getCanvasMultiplier();\n\n    if (rotation % 2 === 0) {\n      annotCanvas.width = width;\n      annotCanvas.height = height;\n      zoom = annotCanvas.width / pageWidth;\n      zoom /= multiplier;\n    } else {\n      annotCanvas.width = height;\n      annotCanvas.height = width;\n\n      zoom = annotCanvas.height / pageWidth;\n      zoom /= multiplier;\n    }\n\n    thumbContainer.appendChild(annotCanvas);\n    core.setAnnotationCanvasTransform(ctx, zoom, rotation);\n\n    let options = {\n      pageNumber,\n      overrideCanvas: annotCanvas,\n    };\n\n    const thumb = thumbContainer.querySelector('.page-image');\n\n    if (thumb) {\n      options = {\n        ...options,\n        overridePageRotation: rotation,\n        overridePageCanvas: thumb,\n      };\n    } else {\n      return;\n    }\n\n    if (!activeThumbRenders[pageNumber]) {\n      activeThumbRenders[pageNumber] = debounce(core.drawAnnotations, 112);\n    }\n    const debouncedDraw = activeThumbRenders[pageNumber];\n    debouncedDraw(options);\n  };\n\n  useEffect(() => {\n    const onBeginRendering = () => {\n      setCanLoad(false);\n    };\n\n    const onFinishedRendering = (needsMoreRendering) => {\n      if (!needsMoreRendering) {\n        setCanLoad(true);\n      }\n    };\n\n    const onDocumentLoaded = () => {\n      if (core.getDocument()?.getType() === 'officeEditor') {\n        setIsOfficeEditor(true);\n      } else {\n        setIsOfficeEditor(false);\n      }\n      activeThumbRenders = {};\n      dispatch(actions.setSelectedPageThumbnails([]));\n    };\n\n    const onPageComplete = () => {\n      if (afterMovePageNumber.current) {\n        core.setCurrentPage(afterMovePageNumber.current);\n        afterMovePageNumber.current = null;\n      }\n    };\n\n    core.addEventListener('beginRendering', onBeginRendering);\n    core.addEventListener('finishedRendering', onFinishedRendering);\n    core.addEventListener('documentLoaded', onDocumentLoaded);\n    core.addEventListener('pageComplete', onPageComplete);\n\n\n    // The document might have already been loaded before this component is mounted.\n    // If document is already loaded, call 'onDocumentLoaded()' manually to update the state properly.\n    if (core.getDocument()) {\n      onDocumentLoaded();\n    }\n\n    return () => {\n      core.removeEventListener('beginRendering', onBeginRendering);\n      core.removeEventListener('finishedRendering', onFinishedRendering);\n      core.removeEventListener('documentLoaded', onDocumentLoaded);\n      core.removeEventListener('pageComplete', onPageComplete);\n    };\n  }, []);\n\n  useEffect(() => {\n    const onPagesUpdated = (changes) => {\n      if (!changes) {\n        return;\n      }\n      let updatedPagesIndexes = Array.from(selectedPageIndexes);\n\n      if (changes.removed) {\n        updatedPagesIndexes = updatedPagesIndexes.filter((pageIndex) => changes.removed.indexOf(pageIndex + 1) === -1);\n      }\n\n      if (changes.moved) {\n        updatedPagesIndexes = updatedPagesIndexes.map((pageIndex) => (changes.moved[pageIndex + 1] ? changes.moved[pageIndex + 1] - 1 : pageIndex),\n        );\n      }\n\n      const isPageAddedBefore = changes.added && (changes.added[0] - 1) <= updatedPagesIndexes[0];\n      if (updatedPagesIndexes.length === 1 && isPageAddedBefore) {\n        updatedPagesIndexes = changes.added.map((pageNumber) => pageNumber - 1);\n      }\n\n      dispatch(actions.setSelectedPageThumbnails(updatedPagesIndexes));\n    };\n\n    core.addEventListener('pagesUpdated', onPagesUpdated);\n\n    return () => core.removeEventListener('pagesUpdated', onPagesUpdated);\n  }, [selectedPageIndexes]);\n\n  useEffect(() => {\n    listRef.current?.scrollToRow(Math.floor((currentPage - 1) / numberOfColumns));\n    const onAnnotationChanged = (annots) => {\n      const indices = [];\n\n      annots.forEach((annot) => {\n        const pageIndex = annot.PageNumber - 1;\n        if (!annot.Listable || indices.indexOf(pageIndex) > -1) {\n          return;\n        }\n        indices.push(pageIndex);\n\n        updateAnnotations(pageIndex);\n      });\n    };\n\n    const onPageNumberUpdated = (pageNumber) => {\n      const pageIndex = pageNumber - 1;\n      listRef.current?.scrollToRow(Math.floor(pageIndex / numberOfColumns));\n    };\n\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated);\n    core.addEventListener('annotationChanged', onAnnotationChanged);\n    core.addEventListener('annotationHidden', onAnnotationChanged);\n\n    return () => {\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated);\n      core.removeEventListener('annotationChanged', onAnnotationChanged);\n      core.removeEventListener('annotationHidden', onAnnotationChanged);\n    };\n  }, [thumbnailSize, numberOfColumns]);\n\n  useEffect(() => {\n    if (isReaderMode || isDocumentReadOnly) {\n      dispatch(actions.setSelectedPageThumbnails([]));\n      dispatch(actions.setThumbnailSelectingPages(false));\n    }\n  }, [isReaderMode, isDocumentReadOnly]);\n\n  // if disabled, or is office editor or left panel is not open when we are not in customize mode, return\n  if (isDisabled || isOfficeEditor || (!isLeftPanelOpen && !panelSelector && !customizableUI)) {\n    return null;\n  }\n  const onDragEnd = () => {\n    setIsDragging(false);\n    setDraggingOverPageIndex(null);\n  };\n\n  const scrollToRowHelper = (index, change, time) => {\n    const now = new Date().getTime();\n    if (index < pageCount - 1 && index > 0 && now - lastTimeTriggered >= time) {\n      listRef.current?.scrollToRow(Math.floor((index + change) / numberOfColumns));\n      setLastTimeTriggered(now);\n      return index + change;\n    }\n    return index;\n  };\n\n  const onDragOver = (e, index) => {\n    // 'preventDefault' to prevent opening pdf dropped in and 'stopPropagation' to keep parent from opening pdf\n    e.preventDefault();\n    e.stopPropagation();\n    if (!isThumbnailReorderingEnabled && !isThumbnailMergingEnabled) {\n      return;\n    }\n\n    const thumbnail = e.target.getBoundingClientRect();\n    if (numberOfColumns > 1) {\n      // row with more than 1 thumbnail so user are dragging to the left and right\n      setDraggingToPreviousPage(!(e.pageX > thumbnail.x + thumbnail.width / 2));\n    } else {\n      setDraggingToPreviousPage(!(e.pageY > thumbnail.y + thumbnail.height / 2));\n    }\n\n    setDraggingOverPageIndex(index);\n    const virtualizedThumbnailContainerElement = getRootNode().querySelector('#virtualized-thumbnails-container');\n    const { y, bottom } = virtualizedThumbnailContainerElement.getBoundingClientRect();\n\n    if (e.pageY < y + hoverAreaHeight * 4) {\n      setGlobalIndex(scrollToRowHelper(index, -1, 400));\n    } else if (e.pageY > bottom - hoverAreaHeight * 4) {\n      setGlobalIndex(scrollToRowHelper(index, 1, 400));\n    }\n  };\n\n  const scrollDown = () => {\n    setGlobalIndex(scrollToRowHelper(globalIndex, 1, 200));\n  };\n  const scrollUp = () => {\n    setGlobalIndex(scrollToRowHelper(globalIndex, -1, 200));\n  };\n\n  const getContextElementId = () => {\n    if (window.isApryseWebViewerWebComponent) {\n      return getRootNode().host.id;\n    } else {\n      return window.frameElement.id;\n    }\n  };\n\n  const onDragStart = (e, index) => {\n    setGlobalIndex(index);\n    setIsDragging(true);\n    const draggingSelectedPage = selectedPageIndexes.some((i) => i === index);\n    const pagesToMove = draggingSelectedPage ? selectedPageIndexes.map((index) => index + 1) : [index + 1];\n    fireEvent(Events.THUMBNAIL_DRAGGED);\n    // need to set 'text' to empty for drag to work in FireFox and mobile\n    e.dataTransfer.setData('text', '');\n\n    if (pagesToMove.length > 1) {\n      // can't set to null so set to new instance of an image\n      e.dataTransfer.setDragImage(new Image(), 0, 0);\n    }\n\n    if (isThumbnailMergingEnabled && isMultipleViewerMerging) {\n      e.dataTransfer.dropEffect = 'move';\n      e.dataTransfer.effectAllowed = 'all';\n      e.dataTransfer.setData(dataTransferWebViewerFrameKey, getContextElementId());\n      extractPagesToMerge(pagesToMove);\n    }\n\n    if (!draggingSelectedPage) {\n      dispatch(actions.setSelectedPageThumbnails([index]));\n    }\n\n    core.setCurrentPage(index + 1);\n  };\n\n  const onDrop = (e) => {\n    e.preventDefault();\n    const { files } = e.dataTransfer;\n    const insertTo = isDraggingToPreviousPage ? draggingOverPageIndex + 1 : draggingOverPageIndex + 2;\n    let externalPageWebViewerFrameId;\n    if (!isIE11) {\n      // at this time of writing, IE11 does not really have support for getData\n      externalPageWebViewerFrameId = e.dataTransfer.getData(dataTransferWebViewerFrameKey);\n    }\n    const mergingDocument =\n      (externalPageWebViewerFrameId && getContextElementId() !== externalPageWebViewerFrameId) || files.length;\n    const currentPageIndex = currentPage - 1;\n\n    if (isThumbnailMergingEnabled && mergingDocument) {\n      if (externalPageWebViewerFrameId && getContextElementId() !== externalPageWebViewerFrameId) {\n        dispatch(mergeExternalWebViewerDocument(externalPageWebViewerFrameId, insertTo));\n      } else if (files.length) {\n        Array.from(files).forEach((file) => {\n          dispatch(mergeDocument(file, insertTo));\n        });\n      }\n    } else if (isThumbnailReorderingEnabled && !mergingDocument) {\n      if (draggingOverPageIndex !== null) {\n        const targetPageNumber = isDraggingToPreviousPage ? draggingOverPageIndex + 1 : draggingOverPageIndex + 2;\n        const draggingSelectedPage = selectedPageIndexes.some((i) => i === currentPageIndex);\n        const pageNumbersToMove = draggingSelectedPage ? selectedPageIndexes.map((i) => i + 1) : [currentPage];\n        afterMovePageNumber.current = targetPageNumber - pageNumbersToMove.filter((p) => p < targetPageNumber).length;\n        core.movePages(pageNumbersToMove, targetPageNumber);\n        const updatedPagesNumbers = [];\n        for (let offset = 0; offset < pageNumbersToMove.length; offset++) {\n          updatedPagesNumbers.push(afterMovePageNumber.current + offset);\n        }\n        fireEvent(Events.THUMBNAIL_DROPPED, { pageNumbersBeforeMove: pageNumbersToMove, pagesNumbersAfterMove: updatedPagesNumbers, numberOfPagesMoved: updatedPagesNumbers.length });\n      }\n    }\n    setDraggingOverPageIndex(null);\n    setIsDragging(false);\n  };\n\n  const onLoad = (pageIndex, element, id) => {\n    if (!thumbIsLoaded(pageIndex) && !thumbIsPending(pageIndex)) {\n      thumbs.current[pageIndex] = {\n        element,\n        loaded: false,\n      };\n\n      pendingThumbs.current.push({\n        pageIndex,\n        id,\n      });\n    }\n  };\n\n  const removeFromPendingThumbs = (pageIndex) => {\n    const index = getPendingThumbIndex(pageIndex);\n    if (index !== -1) {\n      pendingThumbs.current.splice(index, 1);\n    }\n  };\n\n  const thumbIsLoaded = (pageIndex) => thumbs.current[pageIndex]?.loaded;\n\n  const thumbIsPending = (pageIndex) => getPendingThumbIndex(pageIndex) !== -1;\n\n  const onCancel = (pageIndex) => {\n    const index = getPendingThumbIndex(pageIndex);\n    if (index !== -1) {\n      core.cancelLoadThumbnail(pendingThumbs.current[index].id);\n      pendingThumbs.current.splice(index, 1);\n    }\n  };\n\n  const onRightClick = (event, pageIndex) => {\n    event.preventDefault();\n    core.setCurrentPage(pageIndex + 1);\n    if (!selectedPageIndexes.includes(pageIndex)) {\n      dispatch(actions.setSelectedPageThumbnails([pageIndex]));\n    }\n\n    if (!shouldShowControls) {\n      return;\n    }\n\n    dispatch(actions.setFlyoutPosition({ x: event.pageX, y: event.pageY }));\n    dispatch(actions.openElements([DataElements.PAGE_MANIPULATION]));\n  };\n\n  const getPendingThumbIndex = (pageIndex) => pendingThumbs.current.findIndex((thumbStatus) => thumbStatus.pageIndex === pageIndex);\n\n  const onRemove = (pageIndex) => {\n    onCancel(pageIndex);\n    const canvases = thumbs.current[pageIndex]?.element?.querySelectorAll('canvas');\n    if (canvases?.length) {\n      canvases.forEach((c) => {\n        c.height = 0;\n        c.width = 0;\n      });\n    }\n\n    if (activeThumbRenders[pageIndex]) {\n      activeThumbRenders[pageIndex].cancel();\n    }\n    thumbs.current[pageIndex] = null;\n  };\n\n  const handleFocus = (e, index) => {\n    if (thumbnailContainerRefs.current && thumbnailContainerRefs.current.includes(e.target)) {\n      selectElement(thumbnailContainerRefs.current[index]);\n    }\n  };\n\n  const renderThumbnails = ({ index, key, style }) => {\n    const className = classNames({\n      columnsOfThumbnails: numberOfColumns > 1,\n      row: true,\n    });\n    const allowPageOperationsUI = !(isReaderMode || isDocumentReadOnly || isViewOnly);\n    return (\n      <div role=\"row\" aria-label=\"row\" className={className} key={key} style={style}>\n        {new Array(numberOfColumns).fill().map((_, columnIndex) => {\n          const thumbIndex = index * numberOfColumns + columnIndex;\n          const allowDragAndDrop = allowPageOperationsUI && (isThumbnailMergingEnabled || isThumbnailReorderingEnabled);\n          const showPlaceHolder = allowDragAndDrop && draggingOverPageIndex === thumbIndex;\n\n          return thumbIndex < pageCount ? (\n            <React.Fragment key={thumbIndex}>\n              {(numberOfColumns > 1 || thumbIndex === 0) && showPlaceHolder && isDraggingToPreviousPage && <div key={`placeholder1-${thumbIndex}`} className=\"thumbnailPlaceholder\" />}\n              <td\n                ref={(el) => (thumbnailContainerRefs.current[thumbIndex] = el)}\n                key={thumbIndex}\n                role=\"gridcell\"\n                tabIndex={focusedIndex === thumbIndex ? 0 : -1}\n                aria-current={focusedIndex === thumbIndex ? 'page' : undefined}\n                onDragEnd={onDragEnd}\n                className=\"cellThumbContainer\"\n                onKeyDown={(e) => handleKeyDown(e, thumbIndex, numberOfColumns)}\n                onContextMenu={(e) => isRightClickEnabled && onRightClick(e, thumbIndex)}\n                onFocus={(e) => handleFocus(e, thumbIndex)}\n              >\n                <Thumbnail\n                  ref={(el) => (thumbnailRefs.current[thumbIndex] = el)}\n                  isDraggable={allowDragAndDrop}\n                  isSelected={selectedPageIndexes.includes(thumbIndex)}\n                  index={thumbIndex}\n                  canLoad={canLoad}\n                  onLoad={onLoad}\n                  onRemove={onRemove}\n                  onDragStart={onDragStart}\n                  onDragOver={onDragOver}\n                  onFinishLoading={removeFromPendingThumbs}\n                  updateAnnotations={updateAnnotations}\n                  shouldShowControls={allowPageOperationsUI}\n                  thumbnailSize={thumbnailSize}\n                  panelSelector={panelSelector}\n                  parentKeyListener={(e) => handleThumbnailKeyDown(e, thumbIndex)}\n                />\n              </td>\n              {showPlaceHolder && !isDraggingToPreviousPage && <div key={`placeholder2-${thumbIndex}`} className=\"thumbnailPlaceholder\" />}\n            </React.Fragment>\n          ) : null;\n        })}\n      </div>\n    );\n  };\n\n  const onPanelResize = ({ bounds }) => {\n    setHeight(bounds.height);\n    setWidth(bounds.width);\n    setNumberOfColumns(Math.min(MAX_COLUMNS, Math.max(1, Math.floor(bounds.width / thumbnailSize))));\n  };\n\n  const updateNumberOfColumns = () => {\n    setNumberOfColumns(Math.min(MAX_COLUMNS, Math.max(1, Math.floor(width / thumbnailSize))));\n  };\n\n  const thumbnailHeight = isThumbnailControlDisabled ? Number(thumbnailSize) + 50 : Number(thumbnailSize) + 80;\n  const thumbnailAutoScrollAreaStyle = {\n    'height': `${hoverAreaHeight}px`,\n  };\n\n  const onSliderChange = (_, value) => {\n    let zoomValue = Number(value) * ZOOM_RANGE_MAX;\n    if (zoomValue < 100) {\n      zoomValue = 100;\n    }\n\n    setThumbnailSize(zoomValue);\n    updateNumberOfColumns();\n  };\n\n  return (\n    <React.Fragment>\n      {!isThumbnailSliderDisabled && <div data-element=\"thumbnailsSizeSlider\" className=\"thumbnail-slider-container\">\n        <Button\n          img=\"icon-zoom-thumb-out\"\n          title=\"action.zoomOut\"\n          hideTooltipShortcut\n          onClick={() => {\n            if (thumbnailSize - ZOOM_RANGE_STEP > ZOOM_RANGE_STEP) {\n              setThumbnailSize(thumbnailSize - ZOOM_RANGE_STEP);\n              updateNumberOfColumns();\n            }\n          }}\n          dataElement=\"zoomThumbOutButton\"\n        />\n        {customizableUI &&\n          <Slider\n            dataElement={'thumbnailsSizeSlider'}\n            property={'zoom'}\n            displayProperty={'zoom'}\n            min={0}\n            max={1}\n            step={0.01}\n            value={thumbnailSize / 1000}\n            getDisplayValue={() => thumbnailSize}\n            onSliderChange={onSliderChange}\n            shouldHideSliderTitle={true}\n            shouldHideSliderValue={true}\n          />\n        }\n        {!customizableUI &&\n          <input\n            role='slider'\n            type=\"range\"\n            aria-label='thumbnail size slider'\n            min={ZOOM_RANGE_MIN}\n            max={ZOOM_RANGE_MAX}\n            value={thumbnailSize}\n            aria-valuemin={ZOOM_RANGE_MIN}\n            aria-valuemax={ZOOM_RANGE_MAX}\n            aria-valuenow={thumbnailSize}\n            onChange={(e) => {\n              setThumbnailSize(Number(e.target.value));\n              updateNumberOfColumns();\n            }}\n            step={ZOOM_RANGE_STEP}\n            className=\"thumbnail-slider\"\n            id=\"thumbnailSize\"\n          />\n        }\n        <Button\n          img=\"icon-zoom-thumb-in\"\n          title=\"action.zoomIn\"\n          hideTooltipShortcut\n          onClick={() => {\n            if (thumbnailSize + Number(ZOOM_RANGE_STEP) < 1001) {\n              setThumbnailSize(thumbnailSize + Number(ZOOM_RANGE_STEP));\n              updateNumberOfColumns();\n            }\n          }}\n          dataElement=\"zoomThumbInButton\"\n        />\n      </div>}\n      <Measure bounds onResize={onPanelResize} key={thumbnailSize}>\n        {({ measureRef }) => (\n          <div className={`Panel ThumbnailsPanel ${panelSelector}`} id=\"virtualized-thumbnails-container\" data-element=\"thumbnailsPanel\" onDrop={onDrop} ref={measureRef}>\n            <div className=\"virtualized-thumbnails-container\">\n              {isDragging ?\n                <div className=\"thumbnailAutoScrollArea\" onDragOver={scrollUp} style={thumbnailAutoScrollAreaStyle}></div> : ''\n              }\n              <List\n                ref={listRef}\n                height={height}\n                width={width}\n                rowHeight={thumbnailHeight}\n                // Round it to a whole number because React-Virtualized list library doesn't round it for us and throws errors when rendering non whole number rows\n                // use ceiling rather than floor so that an extra row can be created in case the items can't be evenly distributed between rows\n                rowCount={Math.ceil(pageCount / numberOfColumns)}\n                rowRenderer={renderThumbnails}\n                overscanRowCount={3}\n                className={classNames({\n                  'thumbnailsList': true,\n                  'right-to-left': isRightToLeft,\n                })}\n                // Ensure we show the current page in the thumbnails when we open the panel\n                scrollToIndex={Math.floor((currentPage - 1) / numberOfColumns)}\n                role='grid'\n                aria-label={t('component.thumbnailsPanel')}\n                tabIndex={-1}\n              />\n              {isDragging ?\n                <div className=\"thumbnailAutoScrollArea\" onDragOver={scrollDown} style={{ ...thumbnailAutoScrollAreaStyle, 'bottom': '70px' }}></div> : ''\n              }\n            </div>\n          </div>\n        )}\n      </Measure>\n      <DocumentControls shouldShowControls={shouldShowControls} parentElement={parentDataElement || panelSelector} />\n    </React.Fragment>\n  );\n};\n\nexport default ThumbnailsPanel;\n","import ThumbnailsPanel from './ThumbnailsPanel';\n\nexport default ThumbnailsPanel;\n"],"sourceRoot":""}