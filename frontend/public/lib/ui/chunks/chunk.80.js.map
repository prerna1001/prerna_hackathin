{"version":3,"sources":["webpack:///./src/ui/src/components/TextPopup/TextPopup.scss?06ee","webpack:///./src/ui/src/components/TextPopup/TextPopup.js","webpack:///./src/ui/src/components/TextPopup/index.js"],"names":["module","exports","React","memo","withTranslation","_ref","t","selectedTextQuads","core","useCore","_useSelector2","_slicedToArray","useSelector","state","selectors","isElementDisabled","DataElements","TEXT_POPUP","isElementOpen","getPopupItems","isRightClickAnnotationPopupEnabled","getActiveDocumentViewerKey","isMultiViewerMode","shallowEqual","isDisabled","isOpen","popupItems","activeDocumentViewerKey","dispatch","useDispatch","_useState2","useState","left","top","position","setPosition","popupRef","useRef","useOnClickOutside","actions","closeElement","useEffect","closeElements","ANNOTATION_POPUP","CONTEXT_MENU_POPUP","INLINE_COMMENT_POPUP","current","length","getTextPopupPositionBasedOn","textPopup","createElement","className","classNames","Popup","TextPopup","open","closed","data-element","ref","style","_objectSpread","onClick","aria-label","FocusTrap","locked","CustomizablePopup","dataElement","childrenClassName","ActionButton","label","title","img","copyText","createTextAnnotationAndSelect","window","Core","Annotations","TextHighlightAnnotation","TextUnderlineAnnotation","TextSquigglyAnnotation","TextStrikeoutAnnotation","openElement","LINK_MODAL","isCreateRedactionEnabled","fillColor","RedactionAnnotation","isIE","isMobile","Draggable","cancel"],"mappings":"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","file":"chunks/chunk.80.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useEffect, useRef } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport FocusTrap from 'components/FocusTrap';\nimport Draggable from 'react-draggable';\nimport classNames from 'classnames';\n\nimport ActionButton from 'components/ActionButton';\nimport CustomizablePopup from 'components/CustomizablePopup';\n\nimport useCore from 'hooks/useCore';\nimport { getTextPopupPositionBasedOn } from 'helpers/getPopupPosition';\nimport createTextAnnotationAndSelect from 'helpers/createTextAnnotationAndSelect';\nimport copyText from 'helpers/copyText';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile, isIE } from 'helpers/device';\nimport DataElements from 'src/constants/dataElement';\n\nimport './TextPopup.scss';\n\nconst TextPopup = ({ t, selectedTextQuads }) => {\n  const { core } = useCore();\n  const [\n    isDisabled,\n    isOpen,\n    popupItems,\n    isRightClickAnnotationPopupEnabled,\n    activeDocumentViewerKey,\n    isMultiViewerMode,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementDisabled(state, DataElements.TEXT_POPUP),\n      selectors.isElementOpen(state, DataElements.TEXT_POPUP),\n      selectors.getPopupItems(state, DataElements.TEXT_POPUP),\n      selectors.isRightClickAnnotationPopupEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n      selectors.isMultiViewerMode(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const popupRef = useRef();\n  useOnClickOutside(popupRef, () => {\n    dispatch(actions.closeElement(DataElements.TEXT_POPUP));\n  });\n\n  const setPopupPositionAndShow = () => {\n    if (popupRef.current && popupItems.length > 0 && selectedTextQuads) {\n      setPosition(getTextPopupPositionBasedOn(selectedTextQuads, popupRef, activeDocumentViewerKey));\n    }\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      dispatch(actions.closeElements([\n        DataElements.ANNOTATION_POPUP,\n        DataElements.CONTEXT_MENU_POPUP,\n        DataElements.INLINE_COMMENT_POPUP,\n      ]));\n    }\n  }, [dispatch, isOpen]);\n\n  useEffect(() => {\n    setPopupPositionAndShow();\n  }, [selectedTextQuads, activeDocumentViewerKey, isMultiViewerMode]);\n\n  const onClose = () => dispatch(actions.closeElement(DataElements.TEXT_POPUP));\n\n  if (isDisabled) {\n    return null;\n  }\n\n  const textPopup = (\n    <div\n      className={classNames({\n        Popup: true,\n        TextPopup: true,\n        open: isOpen,\n        closed: !isOpen,\n        'is-vertical': isRightClickAnnotationPopupEnabled,\n        'is-horizontal': !isRightClickAnnotationPopupEnabled,\n      })}\n      data-element={DataElements.TEXT_POPUP}\n      ref={popupRef}\n      style={{ ...position }}\n      onClick={onClose}\n      aria-label={t('component.textPopup')}\n    >\n      <FocusTrap locked={isOpen && position.top !== 0 && position.left !== 0}>\n        <div className=\"container\">\n          <CustomizablePopup\n            dataElement={DataElements.TEXT_POPUP}\n            childrenClassName='main-menu-button'\n          >\n            <ActionButton\n              className=\"main-menu-button\"\n              dataElement=\"copyTextButton\"\n              label={isRightClickAnnotationPopupEnabled ? 'action.copy' : ''}\n              title={!isRightClickAnnotationPopupEnabled ? 'action.copy' : ''}\n              img=\"ic_copy_black_24px\"\n              onClick={() => copyText(activeDocumentViewerKey)}\n            />\n            <ActionButton\n              className=\"main-menu-button\"\n              dataElement=\"textHighlightToolButton\"\n              label={isRightClickAnnotationPopupEnabled ? 'annotation.highlight' : ''}\n              title={!isRightClickAnnotationPopupEnabled ? 'annotation.highlight' : ''}\n              img=\"icon-tool-highlight\"\n              onClick={() => createTextAnnotationAndSelect(dispatch, window.Core.Annotations.TextHighlightAnnotation, activeDocumentViewerKey)}\n            />\n            <ActionButton\n              className=\"main-menu-button\"\n              dataElement=\"textUnderlineToolButton\"\n              label={isRightClickAnnotationPopupEnabled ? 'annotation.underline' : ''}\n              title={!isRightClickAnnotationPopupEnabled ? 'annotation.underline' : ''}\n              img=\"icon-tool-text-manipulation-underline\"\n              onClick={() => createTextAnnotationAndSelect(dispatch, window.Core.Annotations.TextUnderlineAnnotation, activeDocumentViewerKey)}\n            />\n            <ActionButton\n              className=\"main-menu-button\"\n              dataElement=\"textSquigglyToolButton\"\n              label={isRightClickAnnotationPopupEnabled ? 'annotation.squiggly' : ''}\n              title={!isRightClickAnnotationPopupEnabled ? 'annotation.squiggly' : ''}\n              img=\"icon-tool-text-manipulation-squiggly\"\n              onClick={() => createTextAnnotationAndSelect(dispatch, window.Core.Annotations.TextSquigglyAnnotation, activeDocumentViewerKey)}\n            />\n            <ActionButton\n              className=\"main-menu-button\"\n              label={isRightClickAnnotationPopupEnabled ? 'annotation.strikeout' : ''}\n              title={!isRightClickAnnotationPopupEnabled ? 'annotation.strikeout' : ''}\n              img=\"icon-tool-text-manipulation-strikethrough\"\n              onClick={() => createTextAnnotationAndSelect(dispatch, window.Core.Annotations.TextStrikeoutAnnotation, activeDocumentViewerKey)}\n              dataElement=\"textStrikeoutToolButton\"\n            />\n            <ActionButton\n              className=\"main-menu-button\"\n              label={isRightClickAnnotationPopupEnabled ? 'tool.Link' : ''}\n              title={!isRightClickAnnotationPopupEnabled ? 'tool.Link' : ''}\n              img=\"icon-tool-link\"\n              onClick={() => dispatch(actions.openElement(DataElements.LINK_MODAL))}\n              dataElement=\"linkButton\"\n            />\n            {core.isCreateRedactionEnabled() && (\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"textRedactToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'option.redaction.markForRedaction' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'option.redaction.markForRedaction' : ''}\n                fillColor=\"868E96\"\n                img=\"icon-tool-select-area-redaction\"\n                onClick={() => createTextAnnotationAndSelect(dispatch, window.Core.Annotations.RedactionAnnotation, activeDocumentViewerKey)}\n              />\n            )}\n          </CustomizablePopup>\n        </div>\n      </FocusTrap>\n    </div>\n  );\n\n  return isIE || isMobile() ? (\n    textPopup\n  ) : (\n    <Draggable cancel=\".Button, .cell, .sliders-container svg, select, button, input\">{textPopup}</Draggable>\n  );\n};\n\nexport default React.memo(withTranslation()(TextPopup));\n","import TextPopup from './TextPopup';\n\nexport default TextPopup;\n"],"sourceRoot":""}