{"version":3,"sources":["webpack:///./src/ui/src/components/CustomModal/CustomModal.scss?239a","webpack:///./src/ui/src/components/CustomModal/CustomModal.js","webpack:///./src/ui/src/components/CustomModal/index.js"],"names":["module","exports","isDOMNode","element","window","Node","parent","e","CustomModalItemPropTypes","dataElement","PropTypes","string","isRequired","isOpen","bool","render","func","object","close","disableBackdropClick","disableEscapeKeyDown","CustomModalItem","props","_useState2","_slicedToArray","useState","usedElement","setUsedElement","modalRef","React","useRef","useLayoutEffect","current","focus","el","document","createTextNode","isValidElement","isReactElement","firstChild","removeChild","lastChild","appendChild","onClickOutsideModal","useCallback","onKeyDownOutsideModal","event","which","useEffect","addEventListener","removeEventListener","classNames","push","createElement","role","tabIndex","className","join","data-element","onClick","ref","stopPropagation","CustomModal","_useSelector2","useSelector","state","selectors","getCustomModals","getOpenElements","getDisabledElements","shallowEqual","customModals","openElements","disableElements","dispatch","useDispatch","closeCustomModalElement","actions","closeElement","map","customModalItem","_customModalItem$disa","_customModalItem$disa2","isModalOpen","disableElement","disabled","headerDiv","bodyDiv","footerDiv","header","body","footer","ModalSection","type","data","Fragment","key","filter","Boolean","propTypes","_ref","style","_data$innerHTML","innerHTML","_data$children","children","title","titleElement","createElementsForModal","concat","appendToComponent","length","forEach","child","i","div","classList","add","_className","button","_child$onClick","split","name","innerText","onclick","Object","entries","_ref2","_ref3","k","v","Number","isInteger","querySelector","replaceChild","memo"],"mappings":"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","file":"chunks/chunk.62.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useLayoutEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport actions from 'actions';\nimport selectors from 'selectors';\n\nimport './CustomModal.scss';\n\nfunction isDOMNode(element) {\n  try {\n    return (\n      element instanceof window.Node ||\n      element instanceof window.parent.Node\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\nconst isReactElement = (element) => React.isValidElement(element);\n\nconst CustomModalItemPropTypes = {\n  dataElement: PropTypes.string.isRequired,\n  isOpen: PropTypes.bool,\n  render: PropTypes.func,\n  element: PropTypes.object,\n  close: PropTypes.func,\n  disableBackdropClick: PropTypes.bool,\n  disableEscapeKeyDown: PropTypes.bool,\n};\n\nfunction CustomModalItem(props) {\n  const { dataElement, isOpen, element, render, close, disableBackdropClick, disableEscapeKeyDown } = props;\n  const [usedElement, setUsedElement] = useState(element);\n  const modalRef = React.useRef();\n\n  React.useLayoutEffect(function renderCustomModal() {\n    if (render && isOpen && modalRef.current) {\n      modalRef.current.focus();\n      let el = render();\n      if (typeof el === 'string') {\n        el = document.createTextNode(el);\n      }\n      // Only support React components through the render function\n      if (isReactElement(el)) {\n        setUsedElement(el);\n      } else if (isDOMNode(el)) {\n        while (modalRef.current.firstChild) {\n          modalRef.current.removeChild(modalRef.current.lastChild);\n        }\n        modalRef.current.appendChild(el);\n      }\n    }\n  }, [isOpen, render]);\n\n  const onClickOutsideModal = React.useCallback(function onClickOutsideModal() {\n    if (!disableBackdropClick) {\n      close(dataElement);\n    }\n  }, [close, dataElement, disableBackdropClick]);\n\n  const onKeyDownOutsideModal = React.useCallback(function onClickOutsideModal(event) {\n    if (event && event.which === 27 && !disableEscapeKeyDown) {\n      close(dataElement);\n    }\n  }, [close, dataElement, disableEscapeKeyDown]);\n\n  React.useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', onKeyDownOutsideModal);\n      return function cleanUp() {\n        document.removeEventListener('keydown', onKeyDownOutsideModal);\n      };\n    }\n  }, [onKeyDownOutsideModal, isOpen]);\n\n\n  const classNames = ['Modal CustomModal'];\n  classNames.push(dataElement);\n  if (isOpen) {\n    classNames.push('open');\n  } else {\n    classNames.push('closed');\n  }\n\n  return (\n    // Disable key-events for modal element as we attach keydown for Escape to document\n    <div\n      role=\"button\"\n      tabIndex=\"-1\"\n      className={classNames.join(' ')}\n      data-element={dataElement}\n      onClick={onClickOutsideModal}\n    >\n      {/* This element is not interactive. Reason to have onclick is to prevent propagation */}\n      <div ref={modalRef} className=\"CustomModal-container\" onClick={(e) => e.stopPropagation()}>{usedElement}</div>\n    </div>\n  );\n}\n\nCustomModalItem.propTypes = CustomModalItemPropTypes;\n\nfunction CustomModal() {\n  const [customModals, openElements, disableElements] = useSelector(\n    (state) => [\n      selectors.getCustomModals(state),\n      selectors.getOpenElements(state),\n      selectors.getDisabledElements(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n  const closeCustomModalElement = React.useCallback(function closeCustomModalElementCallback(dataElement) {\n    dispatch(actions.closeElement(dataElement));\n  }, [dispatch]);\n\n  return customModals.map((customModalItem) => {\n    const { dataElement, disableBackdropClick = false, disableEscapeKeyDown = false } = customModalItem;\n    let { render } = customModalItem;\n    const isModalOpen = openElements[dataElement];\n    const disableElement = disableElements[dataElement];\n    if (disableElement && disableElement.disabled === true) {\n      // avoid rendering component if it is disabled\n      return null;\n    }\n\n    const { header, body, footer } = customModalItem;\n\n    let headerDiv = null;\n    let bodyDiv = null;\n    let footerDiv = null;\n\n    headerDiv = <ModalSection type=\"header\" data={header}  />;\n    bodyDiv = <ModalSection type=\"body\" data={body} />;\n    footerDiv = <ModalSection type=\"footer\" data={footer} />;\n\n    let element = null;\n    if (header || body || footer) {\n      element = <React.Fragment>{headerDiv}{bodyDiv}{footerDiv}</React.Fragment>;\n      render = null;\n    }\n    return (\n      <CustomModalItem\n        key={dataElement}\n        dataElement={dataElement}\n        isOpen={isModalOpen}\n        render={render}\n        element={element}\n        close={closeCustomModalElement}\n        disableBackdropClick={disableBackdropClick}\n        disableEscapeKeyDown={disableEscapeKeyDown}\n      />\n    );\n  }).filter(Boolean);\n}\n\nconst ModalSection = ({ type, data }) => {\n  if (!data) {\n    return null;\n  }\n\n  const ref = React.useRef(null);\n\n  const { className, style, innerHTML = null, children = [] } = data;\n  let { title } = data;\n  const titleElement = (title && !innerHTML) ? <p>{title}</p> : null;\n\n  useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n\n    createElementsForModal(innerHTML, el, children);\n  }, [innerHTML, children]);\n\n  return (\n    <div\n      ref={ref}\n      className={`CustomModal-${type} ${className}` || ''}\n      style={style}\n    >{titleElement}</div>\n  );\n\n};\n\nconst appendToComponent = (el, ref) => {\n  if (isDOMNode(el)) {\n    ref.appendChild(el);\n  }\n};\n\nconst createElementsForModal = (innerHTML, ref, children) => {\n  if (innerHTML) {\n    appendToComponent(innerHTML, ref);\n  } else if (children && children.length) {\n    children.forEach((child, i) => {\n      let div;\n      if (isDOMNode(child)) {\n        child.classList.add(`customEl${i}`);\n        div = child;\n      } else {\n        const { title, button, style, onClick = null } = child;\n        let { className } = child;\n        div = (button) ? document.createElement('button') : document.createElement('div');\n        className = (button) ? `Button ${className}` : className;\n        className?.split(' ').forEach((name) => div.classList.add(name));\n\n        div.classList.add(`customEl${i}`);\n        div.innerText = title;\n        div.onclick = onClick;\n\n        if (style) {\n          div.style = (Object.entries(style).map(([k, v]) => (Number.isInteger(v) ? `${k}:${v}px` : `${k}:${v}`)).join(';'));\n        }\n      }\n\n      const el = ref.querySelector(`.customEl${i}`);\n      if (el) {\n        ref.replaceChild(div, el);\n      } else {\n        ref.appendChild(div);\n      }\n    });\n  }\n};\n\nexport default React.memo(CustomModal);\n","import CustomModal from './CustomModal';\n\nexport default CustomModal;\n"],"sourceRoot":""}