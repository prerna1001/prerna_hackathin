{"version":3,"sources":["webpack:///./src/ui/src/components/OfficeEditorMarginsModal/OfficeEditorMarginsModal.scss?58cd","webpack:///./src/ui/src/components/OfficeEditorMarginsModal/OfficeEditorMarginsModal.js","webpack:///./src/ui/src/components/OfficeEditorMarginsModal/index.js"],"names":["module","exports","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","toPrimitive","String","Number","_toPrimitive","_toPropertyKey","_slicedToArray","Array","isArray","_arrayWithHoles","next","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","SIDES","MARGIN_SIDES","LEFT","RIGHT","TOP","BOTTOM","OfficeEditorMarginsModal","useTranslation","dispatch","useDispatch","core","useCore","currentUnit","useSelector","selectors","getOfficeEditorUnitMeasurement","_useState2","useState","initialUnit","setInitialUnit","_useState4","left","right","top","bottom","initialMargins","setInitialMargins","_useState6","numericMargins","setNumericMargins","_useState8","inputMargins","setInputMargins","_useState0","maxMargins","setMaxMargins","_useState10","pageWidth","setPageWidth","_useState12","pageHeight","setPageHeight","areMarginsEqual","b","every","side","calculateMaxHorizontalMargins","oppositeMarginWidth","unit","getMinimumColumnWidth","calculateAllMaxMargins","margins","maxTopAndBottom","VERTICAL_MARGIN_LIMIT","onApply","_ref","_callee","_t","_context","closeModalAndFocus","getOfficeEditor","setSectionMargins","closeModal","console","error","showPageLayoutWarning","actions","PAGE_LAYOUT_WARNING_TYPE","MARGIN","closeElement","DataElements","OFFICE_EDITOR_MARGINS_MODAL","focusContent","inputElements","map","id","concat","label","OFFICE_EDITOR_TRANSLATION_PREFIX","onChange","previous","handleChange","target","onBlur","maxMargin","validated","validateMarginInput","handleBlur","valueAsNumber","useEffect","_ref2","_callee2","pageNumber","_core$getOfficeEditor","pageWidthInCurrentUnit","pageHeightInCurrentUnit","_context2","getEditingPageNumber","getSectionMargins","getPageDimensions","width","height","mapObjectKeys","formatToDecimalString","setInitialData","convertBetweenUnits","initialMarginsInCurrentUnit","marginsInCurrentUnit","maxMarginsInCurrentUnit","validatedMargins","React","createElement","className","data-element","ModalWrapper","title","closehandler","onCloseClick","swipeToClose","isOpen","Dropdown","dataElement","OFFICE_EDITOR_MARGIN_UNIT","labelledById","items","values","LAYOUT_UNITS","onClickItem","setOfficeEditorUnitMeasurement","getKey","item","currentSelectionKey","input","key","htmlFor","Input","type","min","step","Button","onClick"],"mappings":"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","file":"chunks/chunk.74.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport useCore from 'hooks/useCore';\nimport DataElements from 'constants/dataElement';\nimport Button from 'components/Button';\nimport ModalWrapper from 'components/ModalWrapper';\nimport Dropdown from 'components/Dropdown';\nimport Input from 'components/Input';\nimport mapObjectKeys from 'helpers/mapObjectKeys';\nimport {\n  OFFICE_EDITOR_TRANSLATION_PREFIX,\n  LAYOUT_UNITS,\n  MARGIN_SIDES,\n  VERTICAL_MARGIN_LIMIT,\n  PAGE_LAYOUT_WARNING_TYPE,\n} from 'constants/officeEditor';\nimport { validateMarginInput, focusContent, convertBetweenUnits, getMinimumColumnWidth, formatToDecimalString, showPageLayoutWarning } from 'helpers/officeEditor';\n\nimport './OfficeEditorMarginsModal.scss';\n\n// SIDES must be listed in this order for HTML inputs\nconst SIDES = [MARGIN_SIDES.LEFT, MARGIN_SIDES.RIGHT, MARGIN_SIDES.TOP, MARGIN_SIDES.BOTTOM];\n\nconst OfficeEditorMarginsModal = () => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const { core } = useCore();\n\n  const currentUnit = useSelector(selectors.getOfficeEditorUnitMeasurement);\n  const [initialUnit, setInitialUnit] = useState(currentUnit);\n  const [initialMargins, setInitialMargins] = useState({ left: 0, right: 0, top: 0, bottom: 0 });\n  const [numericMargins, setNumericMargins] = useState({ left: 0, right: 0, top: 0, bottom: 0 });\n  const [inputMargins, setInputMargins] = useState({ left: '0', right: '0', top: '0', bottom: '0' });\n  const [maxMargins, setMaxMargins] = useState({ left: 0, right: 0, top: 0, bottom: 0 });\n  const [pageWidth, setPageWidth] = useState(0);\n  const [pageHeight, setPageHeight] = useState(0);\n\n  const handleUnitChange = (unit) => dispatch(actions.setOfficeEditorUnitMeasurement(unit));\n\n  const areMarginsEqual = (a, b) => SIDES.every((side) => a[side] === b[side]);\n\n  const calculateMaxHorizontalMargins = (pageWidth, oppositeMarginWidth, unit) => {\n    const maxWidth = pageWidth - oppositeMarginWidth - getMinimumColumnWidth(unit);\n    return maxWidth;\n  };\n\n  const calculateAllMaxMargins = (pageWidth, pageHeight, margins, unit) => {\n    const maxTopAndBottom = pageHeight * VERTICAL_MARGIN_LIMIT;\n    return {\n      top: maxTopAndBottom,\n      bottom: maxTopAndBottom,\n      left: calculateMaxHorizontalMargins(pageWidth, margins.right, unit),\n      right: calculateMaxHorizontalMargins(pageWidth, margins.left, unit),\n    };\n  };\n\n  const handleBlur = (value, side, maxMargin) => {\n    const validated = validateMarginInput(value, maxMargin);\n    if (numericMargins[side] === validated && inputMargins[side] === validated.toString()) {\n      return;\n    }\n    setNumericMargins((previous) => ({ ...previous, [side]: validated }));\n    setInputMargins((previous) => ({ ...previous, [side]: validated.toString() }));\n  };\n\n  const handleChange = (value, side) => {\n    setInputMargins((previous) => ({ ...previous, [side]: value }));\n  };\n\n  const onApply = async () => {\n    if (areMarginsEqual(numericMargins, initialMargins)) {\n      closeModalAndFocus();\n      return;\n    }\n    try {\n      await core.getOfficeEditor().setSectionMargins(numericMargins, currentUnit);\n      closeModal();\n    } catch (e) {\n      console.error('Error applying margins:', e);\n      showPageLayoutWarning(dispatch, actions, PAGE_LAYOUT_WARNING_TYPE.MARGIN);\n    }\n  };\n\n  const closeModal = () => {\n    dispatch(actions.closeElement(DataElements.OFFICE_EDITOR_MARGINS_MODAL));\n  };\n\n  const closeModalAndFocus = () => {\n    closeModal();\n    focusContent();\n  };\n\n  const inputElements = SIDES.map((side) => ({\n    id: `${side}MarginInput`,\n    label: t(`${OFFICE_EDITOR_TRANSLATION_PREFIX}marginsModal.${side}Margin`),\n    value: inputMargins[side],\n    onChange: (e) => handleChange(e.target.value, side),\n    onBlur: (e) => handleBlur(e.target.valueAsNumber, side, maxMargins[side]),\n  }));\n\n  useEffect(() => {\n    const setInitialData = async () => {\n      const pageNumber = await core.getOfficeEditor().getEditingPageNumber();\n      const margins = await core.getOfficeEditor().getSectionMargins(currentUnit);\n      const { width: pageWidthInCurrentUnit, height: pageHeightInCurrentUnit } = core.getOfficeEditor().getPageDimensions(pageNumber, currentUnit);\n\n      setPageWidth(pageWidthInCurrentUnit);\n      setPageHeight(pageHeightInCurrentUnit);\n      setInitialUnit(currentUnit);\n      setInitialMargins(margins);\n      setNumericMargins(margins);\n      setInputMargins(mapObjectKeys(SIDES, (side) => formatToDecimalString(margins[side])));\n      setMaxMargins(calculateAllMaxMargins(pageWidthInCurrentUnit, pageHeightInCurrentUnit, margins, currentUnit));\n    };\n    setInitialData();\n  }, []);\n\n  useEffect(() => {\n    setMaxMargins((previous) => ({\n      ...previous,\n      left: calculateMaxHorizontalMargins(pageWidth, numericMargins.right, currentUnit),\n      right: calculateMaxHorizontalMargins(pageWidth, numericMargins.left, currentUnit),\n    }));\n  }, [pageWidth, numericMargins.left, numericMargins.right]);\n\n  useEffect(() => {\n    if (currentUnit === initialUnit) {\n      return;\n    }\n    setInitialUnit(currentUnit);\n\n    const pageWidthInCurrentUnit = convertBetweenUnits(pageWidth, initialUnit, currentUnit);\n    const pageHeightInCurrentUnit = convertBetweenUnits(pageHeight, initialUnit, currentUnit);\n    setPageWidth(pageWidthInCurrentUnit);\n    setPageHeight(pageHeightInCurrentUnit);\n\n    const initialMarginsInCurrentUnit = mapObjectKeys(SIDES, (side) => convertBetweenUnits(initialMargins[side], initialUnit, currentUnit));\n    const marginsInCurrentUnit = mapObjectKeys(SIDES, (side) => convertBetweenUnits(numericMargins[side], initialUnit, currentUnit));\n    const maxMarginsInCurrentUnit = calculateAllMaxMargins(pageWidthInCurrentUnit, pageHeightInCurrentUnit, marginsInCurrentUnit, currentUnit);\n\n    // validate margins here because of rounding from conversion\n    const validatedMargins = mapObjectKeys(SIDES, (side) => validateMarginInput(marginsInCurrentUnit[side], maxMarginsInCurrentUnit[side]));\n    setInitialMargins(initialMarginsInCurrentUnit);\n    setMaxMargins(maxMarginsInCurrentUnit);\n    setNumericMargins(validatedMargins);\n    setInputMargins(mapObjectKeys(SIDES, (side) => formatToDecimalString(validatedMargins[side])));\n  }, [currentUnit, initialUnit]);\n\n  return (\n    <div className='OfficeEditorMarginsModal' data-element={DataElements.OFFICE_EDITOR_MARGINS_MODAL}>\n      <ModalWrapper\n        title={t(`${OFFICE_EDITOR_TRANSLATION_PREFIX}marginsModal.title`)}\n        closehandler={closeModalAndFocus}\n        onCloseClick={closeModalAndFocus}\n        swipeToClose\n        isOpen\n      >\n        <div className='modal-body'>\n          <div className='input-container flex-full'>\n            <label\n              id='office-editor-margin-unit-label'\n              className='modal-label'\n            >\n              {t(`${OFFICE_EDITOR_TRANSLATION_PREFIX}unitMeasurement`)}\n            </label>\n            <Dropdown\n              id='office-editor-margin-unit'\n              dataElement={DataElements.OFFICE_EDITOR_MARGIN_UNIT}\n              labelledById='office-editor-margin-unit-label'\n              className={'unit-dropdown'}\n              items={Object.values(LAYOUT_UNITS)}\n              onClickItem={handleUnitChange}\n              getKey={(item) => item}\n              currentSelectionKey={currentUnit}\n              width={'auto'}\n            />\n          </div>\n\n          {inputElements.map((input) => (\n            <div key={input.id} className='input-container flex-half'>\n              <label htmlFor={input.id} className='modal-label'>{input.label}</label>\n              <Input\n                type='number'\n                id={input.id}\n                onChange={input.onChange}\n                onBlur={input.onBlur}\n                value={input.value}\n                min='0'\n                step='0.1'\n              />\n            </div>\n          ))}\n        </div>\n        <div className='footer'>\n          <Button onClick={onApply} label={t('action.apply')} />\n        </div>\n      </ModalWrapper>\n    </div>\n  );\n};\n\nexport default OfficeEditorMarginsModal;\n","import OfficeEditorMarginsModal from './OfficeEditorMarginsModal';\n\nexport default OfficeEditorMarginsModal;\n"],"sourceRoot":""}