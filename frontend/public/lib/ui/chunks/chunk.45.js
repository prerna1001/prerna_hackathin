(window.webpackJsonpWebViewerUI=window.webpackJsonpWebViewerUI||[]).push([[45],{1501:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(1),o=n.n(i),l=(n(1514),n(15)),c=n.n(l),u={renderContent:o.a.func,children:o.a.node,isBoldHeader:o.a.bool},s=function(e){var t=e.renderContent?e.renderContent():e.children,n=e.isBoldHeader;return a.a.createElement("h4",{className:c()("ListSeparator",{"bold-header":n})},t)};s.propTypes=u;var d=a.a.memo(s);t.a=d},1514:function(e,t,n){e.exports={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"}},1672:function(e,t,n){"use strict";t.a=function(e){switch(e.errorType){case"empty":return"formField.formFieldPopup.invalidField.empty";case"duplicate":return"formField.formFieldPopup.invalidField.duplicate"}}},1814:function(e,t,n){e.exports={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"}},1815:function(e,t,n){},1856:function(e,t,n){"use strict";n.r(t);n(9),n(10),n(14),n(36),n(21),n(20),n(12),n(22),n(18),n(26),n(16),n(57),n(8),n(17),n(19),n(11),n(13);var r=n(0),a=n.n(r),i=n(6),o=(n(1814),n(33)),l=n(5),c=(n(38),n(27),n(49),n(43),n(119),n(146),n(37),n(62),n(30),n(3)),u=n(307),s=n(1),d=n.n(s),f=n(2),m=n(53),b=n(44),p=n(61),v=(n(1815),n(1469)),g=n(1672),y=n(56),E=n(1471),h=n(1459);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N={isMultiSelectionMode:d.a.bool,fieldName:d.a.string,widgetId:d.a.string,icon:d.a.string,setSelected:d.a.func,isActive:d.a.bool,handleDeletion:d.a.func,isSubLevel:d.a.bool,childWidgets:d.a.array,selectingWidgets:d.a.array},j=Object(r.forwardRef)((function(e,t){var n=e.isSubLevel,s=e.isMultiSelectionMode,d=e.fieldName,m=e.widgetId,p=e.icon,O=e.setSelected,N=e.isActive,I=e.handleDeletion,w=e.childWidgets,x=e.selectingWidgets,S=Object(o.a)().core,k=A(Object(u.a)(),1)[0],C=A(Object(r.useState)(!1),2),T=C[0],D=C[1],F=A(Object(r.useState)(!1),2),P=F[0],L=F[1],M=A(Object(r.useState)(d),2),W=M[0],_=M[1],R=A(Object(r.useState)(!0),2),B=R[0],H=R[1],U=A(Object(r.useState)(""),2),V=U[0],X=U[1],G=Object(r.useRef)(),K=Object(i.d)(),$=function(){var e,t=S.getFormFieldCreationManager(),n=null;if(m){var r=S.getAnnotationById(m);n=t.setFieldName(r,W)}else w.forEach((function(e){n=t.setFieldName(e,W)}));H(n.isValid),e=Object(g.a)(n),X(e),n.isValid&&q()},q=function(){P&&_(d),L(!1),H(!0)};Object(r.useEffect)((function(){W!==d&&_(d)}),[d]),Object(r.useEffect)((function(){P&&(G.current.focus(),G.current.select()),D(!P)}),[P]);var J="".concat(l.a.BOOKMARK_OUTLINE_FLYOUT,"-").concat(m),Y=Object(i.e)((function(e){return c.a.getFlyout(e,J)})),z={moreOptionsDataElement:"index-panel-more-button-".concat(m),flyoutToggleElement:J},Q={shouldHideDeleteButton:!1,currentFlyout:Y,flyoutSelector:J,type:m?"indexPanel":"indexPanel.folder",handleOnClick:function(e){switch(e){case h.b.OPENFORMFIELDPANEL:K(f.a.openElement(l.a.FORM_FIELD_PANEL)),O(m,!0);break;case h.b.RENAME:L(!0);break;case h.b.DELETE:if(!m)return void w.forEach((function(e){I(e.Id)}));I(m)}}},Z={id:m,checked:N,onChange:function(e){m?O(m,e.target.checked):O(m,e.target.checked,w)},"aria-label":"index panel checkbox","aria-checked":N};return a.a.createElement("div",{className:"index-drag-container",key:m,ref:t},T&&a.a.createElement(E.a,{iconGlyph:p,labelHeader:n?m:d,enableMoreOptionsContextMenuFlyout:!0,onDoubleClick:function(){return L(!0)},onClick:function(){return!s&&O(m)},contextMenuMoreButtonOptions:z,contentMenuFlyoutOptions:Q,checkboxOptions:s&&Z||null,isActive:N},null==w?void 0:w.map((function(e){return function(e){var t=Object(y.e)(Object(y.g)(e)).icon,n=e.fieldName,r=e.Id;return a.a.createElement(j,{key:r,isMultiSelectionMode:s,fieldName:n,icon:t,widgetId:r,setSelected:O,isActive:x.includes(r),handleDeletion:I,isSubLevel:!0})}(e)}))),P&&a.a.createElement("div",{className:"index-panel-single-container"},a.a.createElement("div",{className:"index-panel-label-row"},a.a.createElement("div",{className:"index-panel_content-container"},a.a.createElement(v.a,{type:"text",name:"field-name",ref:G,className:"index-panel-outline-input index-panel-text-input","aria-label":k("action.name"),value:W,onKeyDown:function(e){"Enter"===e.key&&(e.stopPropagation(),P&&$()),"Escape"===e.key&&q()},onChange:function(e){H(!0),_(e.target.value)},fillWidth:"false",onBlur:function(e){e.relatedTarget&&(e.relatedTarget.className.includes("index-panel-save-button")||e.relatedTarget.className.includes("index-panel-cancel-button"))?e.preventDefault():q()},messageText:B?"":k(V),message:B?"default":"warning"})),a.a.createElement("div",{className:"index-panel-editing-controls"},a.a.createElement(b.a,{className:"index-panel-cancel-button",label:k("action.cancel"),onClick:q}),a.a.createElement(b.a,{className:"index-panel-save-button",label:k("action.save"),isSubmitType:!0,onClick:$,disabled:!B||W===d})))))}));j.displayName="IndexPanelContent",j.propTypes=N;var I=j,w=n(65),x=n(1501);function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=T(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function k(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var F={widgets:d.a.arrayOf(d.a.object).isRequired},P=function(e){var t=e.widgets,n=Object(o.a)().core,s=C(Object(i.e)((function(e){return[c.a.isElementOpen(e,l.a.INDEX_PANEL),c.a.isElementDisabled(e,l.a.INDEX_PANEL),c.a.isInDesktopOnlyMode(e)]})),3),d=s[0],v=s[1],g=s[2],E=C(Object(u.a)(),1)[0],h=C(Object(r.useState)(!1),2),A=h[0],O=h[1],N=C(Object(r.useState)([]),2),j=N[0],T=N[1],D=!v&&d,F=Object(w.b)(),P=Object(i.d)(),L=Object(r.useRef)({}),M=Object(r.useRef)(),W=Object(r.useRef)(-1);Object(r.useEffect)((function(){var e=n.getSelectedAnnotations().filter((function(e){return e instanceof window.Core.Annotations.WidgetAnnotation})).map((function(e){return e.Id}));T(e),e.length&&(W.current=e[0])}),[]),Object(r.useEffect)((function(){j.length&&-1!==W.current?R(W.current):W.current=-1}),[j]);var _=function(e,t){if("selected"===t){var n=e.filter((function(e){return e instanceof window.Core.Annotations.WidgetAnnotation})).map((function(e){return e.Id}));T(k(n)),n.length&&(W.current=n[0])}else if("deselected"===t){var r=e.filter((function(e){return e instanceof window.Core.Annotations.WidgetAnnotation})).map((function(e){return e.Id}));T((function(e){return e.filter((function(e){return!r.includes(e)}))}))}};Object(r.useEffect)((function(){return n.addEventListener("annotationSelected",_),function(){n.removeEventListener("annotationSelected",_)}}),[A]);var R=function(e){var t=L.current[e];t&&(function(e){var t=M.current;if(!t)return!1;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return r.top>=n.top&&r.top<=n.top+t.clientHeight}(t)||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))},B=t.reduce((function(e,t){e[t.PageNumber]||(e[t.PageNumber]=[]);var n,r=S(e[t.PageNumber]);try{for(r.s();!(n=r.n()).done;){if(n.value.fieldName===t.fieldName)return e}}catch(e){r.e(e)}finally{r.f()}return e[(t=function(e){var t=e.getField(),n=[];return((null==t?void 0:t.widgets)||[]).forEach((function(t){t.PageNumber===e.PageNumber&&n.push(t)})),n.length<=1?e:{fieldName:e.fieldName,Id:null,PageNumber:e.PageNumber,childWidgets:n}}(t)).PageNumber].push(t),e}),{}),H=Object.keys(B).sort((function(e,t){return e-t})),U=function(e){if(e)n.deleteAnnotations([n.getAnnotationById(e)]);else{var t=j.map((function(e){return n.getAnnotationById(e)}));n.deleteAnnotations(t)}},V=function(e,t,r){W.current=e,A?function(e,t,r){var a=[];if(e)a=t?[e].concat(k(j)):j.filter((function(t){return t!==e}));else{var i=r.map((function(e){return e.Id}));a=t?[].concat(k(i),k(j)):j.filter((function(e){return!i.includes(e)}))}T(a);var o=a.map((function(e){return n.getAnnotationById(e)}));if(n.deselectAllAnnotations(),n.selectAnnotations(o),t){var l=n.getAnnotationById(e||r[0].Id);n.jumpToAnnotation(l)}}(e,t,r):function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=j.includes(e),a=n.getAnnotationById(e);n.deselectAllAnnotations(),!r||t?(T([e]),n.selectAnnotation(n.getAnnotationById(e)),n.jumpToAnnotation(a)):T([])}(e,t)},X=a.a.createElement("div",{className:"no-fields"},a.a.createElement("div",null,a.a.createElement(m.a,{className:"empty-icon",glyph:"illustration - empty state - outlines"})),a.a.createElement("div",{className:"msg"},E("formField.indexPanel.notFields"))),G=function(e){var t=e.fieldName,n=e.childWidgets?"ic-folder-open":Object(y.e)(Object(y.g)(e)).icon,r=e.Id,i=e.childWidgets||null,o=r?j.includes(r):function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!j.includes(r.Id))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}(i),l=i?i.map((function(e){return e.Id})):[];return a.a.createElement(I,{key:e.Id,ref:function(e){return function(e,t,n){t?L.current[t]=e:n.forEach((function(t){L.current[t]=e}))}(e,r,l)},isMultiSelectionMode:A,fieldName:t,icon:n,widgetId:r,setSelected:V,isActive:o,handleDeletion:U,childWidgets:i,selectingWidgets:j})},K=function(){P(f.a.closeElement(l.a.INDEX_PANEL))};return D?a.a.createElement("div",{className:"index-panel-container"},a.a.createElement(p.a,{className:"index-panel-header",dataElement:"index-panel-header"},!g&&F&&a.a.createElement("div",{className:"close-container"},a.a.createElement("button",{className:"close-icon-container",onClick:K},a.a.createElement(m.a,{glyph:"ic_close_black_24px",className:"close-icon"}))),a.a.createElement(p.a,{className:"title-container",dataElement:"index-panel-title-container"},a.a.createElement(p.a,{className:"fields-counter",dataElement:"index-panel-fields-counter"},a.a.createElement("span",null,E("formField.indexPanel.formFieldList"))," (",t.length,")"),a.a.createElement(p.a,{dataElement:"form-field-multi-select"},!A&&a.a.createElement(b.a,{className:"field-control-button",label:E("action.edit"),disabled:0===t.length,onClick:function(){O(!0),T([]),n.deselectAllAnnotations(),W.current=-1}}),A&&a.a.createElement(b.a,{className:"field-control-button",label:E("option.bookmarkOutlineControls.done"),onClick:function(){O(!1),T([]),n.deselectAllAnnotations(),W.current=-1}})))),a.a.createElement(p.a,{className:"IndexPanel",dataElement:"index-panel",ref:M},t.length?H.map((function(e){return a.a.createElement("ul",{className:"index-page-container",key:e},a.a.createElement(x.a,{renderContent:function(){return"".concat(E("option.shared.page")," ").concat(e)}}),B[e].map(G))})):X),A&&a.a.createElement(p.a,{className:"index-panel-footer",dataElement:"index-panel-footer"},a.a.createElement(b.a,{className:"multi-selection-button",img:"icon-delete-line",disabled:0===j.length,onClick:function(){return U()}}))):null};P.propTypes=F;var L=P;function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var R={parentDataElement:d.a.string,dataElement:d.a.string.isRequired};function B(e){var t=e.parentDataElement,n=void 0===t?void 0:t,u=e.dataElement,s=Object(o.a)().core,d=W(Object(i.e)((function(e){return[c.a.isElementOpen(e,n||u||l.a.INDEX_PANEL)]}),i.c),1)[0],f=W(Object(r.useState)([]),2),m=f[0],b=f[1];Object(r.useEffect)((function(){var e=function(){var e=s.getAnnotationsList().filter((function(e){return e instanceof window.Core.Annotations.WidgetAnnotation}));b(e)};return s.addEventListener("annotationChanged",e),function(){s.removeEventListener("annotationChanged",e)}}),[]),Object(r.useEffect)((function(){if(d){var e=s.getAnnotationsList().filter((function(e){return e instanceof window.Core.Annotations.WidgetAnnotation}));b(e)}else b([])}),[d]);var p={widgets:m};return a.a.createElement(L,M({},e,p))}B.propTypes=R;var H=B;t.default=H}}]);
//# sourceMappingURL=chunk.45.js.map