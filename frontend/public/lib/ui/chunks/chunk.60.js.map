{"version":3,"sources":["webpack:///./src/ui/src/components/ColorPickerModal/ColorPickerModal.scss?3542","webpack:///./src/ui/src/components/ColorPickerModal/ColorPickerModal.js","webpack:///./src/ui/src/components/ColorPickerModal/ColorPickerModalContainer.js","webpack:///./src/ui/src/components/ColorPickerModal/ColorPickerModalRedux.js","webpack:///./src/ui/src/components/ColorPickerModal/index.js"],"names":["module","exports","EditableInput","prototype","componentDidUpdate","prevProps","prevState","this","props","value","state","activeElementExt","document","activeElement","getRootNode","input","setState","blurValue","String","toUpperCase","ColorPickerModal","_ref","isDisabled","isOpen","color","closeModal","handleChangeSave","handleChangeCancel","t","_slicedToArray","useTranslation","_useState2","useState","selectedColor","setSelectedColor","modalClass","classNames","Modal","open","closed","useEffect","escFunction","e","key","stopPropagation","preventDefault","closeModalHandler","window","addEventListener","removeEventListener","A","r","R","g","G","b","B","a","useFocusOnClose","handleChangeCancelWithFocus","handleSaveWithFocus","React","createElement","className","data-element","DataElements","COLOR_PICKER_MODAL","onMouseDown","ModalWrapper","closeHandler","onCloseClick","swipeToClose","accessibleLabel","SketchPicker","disableAlpha","onChange","newColor","rgb","presetColors","Button","onClick","label","ColorPickerModalContainer","closeColorPicker","onColorChange","rest","_objectWithoutProperties","_excluded","useCallback","newProps","_objectSpread","ColorPickerModalRedux","dispatch","useDispatch","_useSelector2","useSelector","selectors","isElementDisabled","isElementOpen","getCustomColor","convertedColor","Core","Annotations","Color","actions","setCustomColor","closeElement"],"mappings":"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","file":"chunks/chunk.60.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { SketchPicker } from 'react-color';\nimport DataElements from 'src/constants/dataElement';\nimport Button from 'components/Button';\nimport ModalWrapper from 'components/ModalWrapper';\nimport './ColorPickerModal.scss';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\nimport getRootNode from 'helpers/getRootNode';\nimport { EditableInput } from 'react-color/es/components/common';\n\n\n// This workaround resolves the issue where the 'Hex' input in the 'react-color'\n// library is not editable within WebComponent environments\nEditableInput.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n  if (this.props.value !== this.state.value && (prevProps.value !== this.props.value || prevState.value !== this.state.value)) {\n    let activeElementExt = document.activeElement;\n    if (getRootNode()) {\n      activeElementExt = getRootNode().activeElement;\n    }\n    if (this.input === activeElementExt) {\n      this.setState({ blurValue: String(this.props.value).toUpperCase() });\n    } else {\n      this.setState({ value: String(this.props.value).toUpperCase(), blurValue: !this.state.blurValue && String(this.props.value).toUpperCase() });\n    }\n  }\n};\n\nconst ColorPickerModal = ({ isDisabled, isOpen, color, closeModal, handleChangeSave, handleChangeCancel }) => {\n  const [t] = useTranslation();\n  const [selectedColor, setSelectedColor] = useState({});\n  const modalClass = classNames({\n    Modal: true,\n    ColorPickerModal: true,\n    open: isOpen,\n    closed: !isOpen,\n  });\n\n  useEffect(() => {\n    const escFunction = (e) => {\n      if (e.key === 'Escape') {\n        e?.stopPropagation();\n        e?.preventDefault();\n        closeModalHandler();\n      }\n    };\n\n    window.addEventListener('keydown', escFunction);\n    return () => window.removeEventListener('keydown', escFunction);\n  }, []);\n\n  useEffect(() => {\n    const black = { r: 0, g: 0, b: 0, a: 1 };\n    if (color && color.A !== 0) {\n      setSelectedColor({ r: color.R, g: color.G, b: color.B, a: 1 });\n    } else {\n      setSelectedColor(black);\n    }\n  }, [color]);\n\n  const handleChangeComplete = (newColor) => {\n    setSelectedColor(newColor.rgb);\n  };\n\n  const handleSave = () => {\n    handleChangeSave(selectedColor);\n  };\n\n  const closeModalHandler = useFocusOnClose(closeModal);\n  const handleChangeCancelWithFocus = useFocusOnClose(handleChangeCancel);\n  const handleSaveWithFocus = useFocusOnClose(handleSave);\n\n  return isDisabled ? null : (\n    <div className={modalClass} data-element={DataElements.COLOR_PICKER_MODAL} onMouseDown={closeModal}>\n      <ModalWrapper\n        isOpen={isOpen}\n        closeHandler={closeModalHandler}\n        onCloseClick={closeModalHandler}\n        swipeToClose\n        accessibleLabel={'colorPickerModal.modalTitle'}\n      >\n        <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\n          <SketchPicker\n            color={selectedColor}\n            disableAlpha\n            onChange={handleChangeComplete}\n            presetColors={[]}\n          />\n          <div className=\"buttons\">\n            <Button className=\"cancel-button\" onClick={handleChangeCancelWithFocus} label={t('action.cancel')} />\n            <Button className=\"save-button\" onClick={handleSaveWithFocus} label={t('action.ok')} />\n          </div>\n        </div>\n      </ModalWrapper >\n    </div>\n  );\n};\n\nexport default ColorPickerModal;\n","import React, { useCallback } from 'react';\r\nimport ColorPickerModal from './ColorPickerModal';\r\n\r\nfunction ColorPickerModalContainer(props) {\r\n  const { closeColorPicker, onColorChange, ...rest } = props;\r\n\r\n  const closeModal = useCallback(() => {\r\n    closeColorPicker();\r\n  }, [closeColorPicker]);\r\n\r\n  const handleChangeSave = (selectedColor) => {\r\n    onColorChange(selectedColor);\r\n    closeColorPicker();\r\n  };\r\n\r\n  const handleChangeCancel = useCallback(() => {\r\n    closeColorPicker();\r\n  }, [closeColorPicker]);\r\n\r\n  const newProps = {\r\n    ...rest,\r\n    closeModal,\r\n    handleChangeSave,\r\n    handleChangeCancel,\r\n  };\r\n\r\n  return <ColorPickerModal {...newProps} />;\r\n}\r\n\r\nexport default ColorPickerModalContainer;\r\n","import React from 'react';\r\nimport selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport ColorPickerModalContainer from './ColorPickerModalContainer';\r\n\r\nfunction ColorPickerModalRedux(props) {\r\n  const dispatch = useDispatch();\r\n  const [isDisabled, isOpen, color] = useSelector((state) => [\r\n    selectors.isElementDisabled(state, 'ColorPickerModal'),\r\n    selectors.isElementOpen(state, 'ColorPickerModal'),\r\n    selectors.getCustomColor(state),\r\n  ]);\r\n\r\n  const onColorChange = (selectedColor) => {\r\n    const convertedColor = new window.Core.Annotations.Color(selectedColor.r, selectedColor.g, selectedColor.b, selectedColor.a);\r\n    dispatch(actions.setCustomColor(convertedColor));\r\n  };\r\n\r\n  const closeColorPicker = () => {\r\n    dispatch(actions.closeElement('ColorPickerModal'));\r\n  };\r\n\r\n  const newProps = {\r\n    ...props,\r\n    color,\r\n    onColorChange,\r\n    isDisabled,\r\n    closeColorPicker,\r\n    isOpen,\r\n  };\r\n  return <ColorPickerModalContainer {...newProps} />;\r\n}\r\n\r\nexport default ColorPickerModalRedux;\r\n","import ColorPickerModalRedux from './ColorPickerModalRedux';\n\nexport default ColorPickerModalRedux;"],"sourceRoot":""}