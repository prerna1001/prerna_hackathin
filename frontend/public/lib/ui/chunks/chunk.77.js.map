{"version":3,"sources":["webpack:///./src/ui/src/components/SaveModal/SaveModal.scss?62f7","webpack:///./src/ui/src/components/SaveModal/SaveModal.js","webpack:///./src/ui/src/components/SaveModal/index.js"],"names":["module","exports","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","FILE_TYPES","OFFICE","label","extension","workerTypes","PDF","IMAGE","OFFICE_EDITOR","SPREADSHEET_EDITOR","CORRUPTED_OFFICE_EXTENSIONS","SaveModal","core","useCore","store","useStore","dispatch","useDispatch","useTranslation","isOpen","useSelector","state","selectors","isElementOpen","DataElements","SAVE_MODAL","activeDocumentViewerKey","getActiveDocumentViewerKey","isSpreadsheetEditorMode","isSpreadsheetEditorModeEnabled","initalFileTypes","_useState2","useState","fileTypes","setFileTypes","_useState4","filename","setFilename","_useState6","filetype","setFiletype","_useState8","includeAnnotations","setIncludeAnnotations","_useState0","includeComments","setIncludeComments","_useState10","pageCount","setPageCount","_usePageRanges","usePageRanges","pageRange","setPageRange","onPageRangeChange","hasPageNumberError","onError","hasSpecifiedPages","specifiedPages","setSpecifiedPages","useEffect","updateFile","_ref","_callee","document","_filename","newFilename","type","array","_context","getDocument","getFilename","substring","lastIndexOf","getType","split","concat","includes","getDocumentCompletePromise","getTotalPages","arguments","apply","_next","_throw","documentUnloaded","actions","closeElement","addEventListener","undefined","removeEventListener","isOfficeEditorMode","closeModal","closeModalWithOnFocusClose","useFocusOnClose","onSave","pages","PAGE_RANGES","SPECIFY","getCurrentPage","CURRENT_PAGE","CURRENT_VIEW","range","downloadPdf","useDisplayAuthor","downloadType","console","warn","isSaveDisabled","optionsDisabled","customPagesLabelElement","React","createElement","className","classNames","error","PageNumberInput","selectedPageNumbers","onSelectedPageNumbersChange","open","closed","data-element","ModalWrapper","title","closeHandler","onCloseClick","swipeToClose","htmlFor","Input","id","data-testid","onChange","_e$target","target","onKeyDown","key","fillWidth","padMessageText","messageText","message","Dropdown","labelledById","items","map","onClickItem","find","ALL","currentSelectionKey","Fragment","onSubmit","preventDefault","Choice","checked","radio","Button","disabled","onClick"],"mappings":"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","file":"chunks/chunk.77.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useEffect, useState, } from 'react';\nimport { useSelector, useDispatch, useStore } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { useTranslation } from 'react-i18next';\nimport DataElements from 'constants/dataElement';\nimport Button from 'components/Button';\nimport Choice from 'components/Choice';\nimport Input from 'components/Input';\nimport useCore from 'hooks/useCore';\nimport classNames from 'classnames';\nimport Dropdown from 'components/Dropdown';\nimport PageNumberInput from 'components/PageReplacementModal/PageNumberInput';\nimport usePageRanges, { PAGE_RANGES } from 'src/hooks/usePageRanges';\nimport downloadPdf from 'helpers/downloadPdf';\nimport { isOfficeEditorMode } from 'helpers/officeEditor';\nimport { workerTypes } from 'constants/types';\nimport range from 'lodash/range';\nimport ModalWrapper from 'components/ModalWrapper';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\n\nimport './SaveModal.scss';\n\nconst FILE_TYPES = {\n  OFFICE: { label: 'OFFICE (*.pptx,*.docx,*.xlsx)', extension: workerTypes.OFFICE },\n  PDF: { label: 'PDF (*.pdf)', extension: workerTypes.PDF },\n  IMAGE: { label: 'PNG (*.png)', extension: 'png' },\n  OFFICE_EDITOR: { label: 'Word Document (*.docx)', extension: workerTypes.OFFICE },\n  SPREADSHEET_EDITOR: { label: 'Excel Document (*.xlsx)', extension: workerTypes.SPREADSHEET_EDITOR },\n};\n// These legacy office extensions return corrupted file data from the workers if downloaded as OFFICE\nconst CORRUPTED_OFFICE_EXTENSIONS = ['.ppt', '.xls'];\n\nconst SaveModal = () => {\n  const { core } = useCore();\n  const store = useStore();\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const isOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.SAVE_MODAL));\n  const activeDocumentViewerKey = useSelector((state) => selectors.getActiveDocumentViewerKey(state));\n  const isSpreadsheetEditorMode = useSelector(selectors.isSpreadsheetEditorModeEnabled);\n\n  const initalFileTypes = [FILE_TYPES.PDF, FILE_TYPES.IMAGE];\n  const [fileTypes, setFileTypes] = useState(initalFileTypes);\n  const [filename, setFilename] = useState('');\n  const [filetype, setFiletype] = useState(fileTypes[0]);\n  const [includeAnnotations, setIncludeAnnotations] = useState(true);\n  const [includeComments, setIncludeComments] = useState(false);\n  const [pageCount, setPageCount] = useState(1);\n  const {\n    pageRange,\n    setPageRange,\n    onPageRangeChange,\n    hasPageNumberError,\n    onError,\n    hasSpecifiedPages,\n    specifiedPages,\n    setSpecifiedPages,\n  } = usePageRanges();\n\n  useEffect(() => {\n    const updateFile = async () => {\n      const document = core.getDocument(activeDocumentViewerKey);\n      if (document) {\n        setFiletype(FILE_TYPES.PDF);\n        setFileTypes(initalFileTypes);\n        const filename = document.getFilename();\n        const newFilename = filename.substring(0, filename.lastIndexOf('.')) || filename;\n        setFilename(newFilename);\n        const type = document.getType();\n        if (type === workerTypes.OFFICE) {\n          const array = filename.split('.');\n          const extension = `.${array[array.length - 1]}`;\n          if (!CORRUPTED_OFFICE_EXTENSIONS.includes(extension)) {\n            setFileTypes([...initalFileTypes, FILE_TYPES.OFFICE]);\n          }\n          await document.getDocumentCompletePromise();\n        } else if (type === workerTypes.OFFICE_EDITOR) {\n          setFileTypes([\n            FILE_TYPES.OFFICE_EDITOR,\n            FILE_TYPES.PDF\n          ]);\n          setFiletype(FILE_TYPES.OFFICE_EDITOR);\n        } else if (type === workerTypes.SPREADSHEET_EDITOR) {\n          setFileTypes([\n            FILE_TYPES.SPREADSHEET_EDITOR,\n            FILE_TYPES.PDF\n          ]);\n          setFiletype(FILE_TYPES.SPREADSHEET_EDITOR);\n        }\n        setPageCount(core.getTotalPages(activeDocumentViewerKey));\n      }\n    };\n    const documentUnloaded = () => {\n      setFilename('');\n      setPageCount(0);\n      setFileTypes(initalFileTypes);\n      setFiletype(initalFileTypes[0]);\n      dispatch(actions.closeElement(DataElements.SAVE_MODAL));\n    };\n    updateFile();\n    core.addEventListener('documentUnloaded', documentUnloaded, undefined, activeDocumentViewerKey);\n    core.addEventListener('documentLoaded', updateFile, undefined, activeDocumentViewerKey);\n    return () => {\n      core.removeEventListener('documentUnloaded', documentUnloaded, activeDocumentViewerKey);\n      core.removeEventListener('documentLoaded', updateFile, activeDocumentViewerKey);\n    };\n  }, [activeDocumentViewerKey]);\n\n  useEffect(() => {\n    const document = core.getDocument(activeDocumentViewerKey);\n\n    if (isOfficeEditorMode() && document) {\n      setFiletype(FILE_TYPES.OFFICE_EDITOR);\n      const filename = document.getFilename();\n      const newFilename = filename.substring(0, filename.lastIndexOf('.')) || filename;\n      setFilename(newFilename);\n    }\n  }, [isOpen]);\n\n  // One is passed to the modalWrapper which uses onFocusClose\n  const closeModal = () => dispatch(actions.closeElement(DataElements.SAVE_MODAL));\n  // One is used when we close the modal after save, we want to transfer focus back\n  const closeModalWithOnFocusClose = useFocusOnClose(closeModal);\n  const preventDefault = (e) => e.preventDefault();\n  const onFilenameChange = (e) => {\n    setFilename(e?.target?.value);\n  };\n  const onFilenameKeyDown = (e) => {\n    if (e.key === 'Enter' && !isSaveDisabled) {\n      onSave();\n    }\n  };\n  const onFiletypeChange = (e) => {\n    setFiletype(fileTypes.find((i) => i.label === e));\n    if (e === FILE_TYPES.OFFICE.label) {\n      setPageRange(PAGE_RANGES.ALL);\n    }\n  };\n  const onIncludeAnnotationsChanged = () => setIncludeAnnotations(!includeAnnotations);\n  const onIncludeCommentsChanged = () => setIncludeComments(!includeComments);\n  const onSave = () => {\n    let doc = core.getDocument(activeDocumentViewerKey);\n\n    if (!doc) {\n      console.warn('Document is not loaded');\n      return;\n    }\n\n    if (!filename) {\n      return;\n    }\n\n    let pages;\n    if (pageRange === PAGE_RANGES.SPECIFY) {\n      pages = specifiedPages?.length ? specifiedPages : [core.getCurrentPage(activeDocumentViewerKey)];\n    } else if (pageRange === PAGE_RANGES.CURRENT_PAGE) {\n      pages = [core.getCurrentPage(activeDocumentViewerKey)];\n    } else if (pageRange === PAGE_RANGES.CURRENT_VIEW) {\n      pages = [core.getCurrentPage(activeDocumentViewerKey)];\n    } else {\n      pages = range(1, core.getTotalPages(activeDocumentViewerKey) + 1, 1);\n    }\n\n    downloadPdf(dispatch, {\n      includeAnnotations,\n      includeComments,\n      useDisplayAuthor: true,\n      filename: filename || 'untitled',\n      downloadType: filetype.extension,\n      pages,\n      store,\n    }, activeDocumentViewerKey);\n\n    closeModalWithOnFocusClose();\n  };\n\n  const isSaveDisabled = (hasPageNumberError || !hasSpecifiedPages) && pageRange === PAGE_RANGES.SPECIFY || !filename;\n\n  const optionsDisabled = filetype.extension === 'office' || isOfficeEditorMode() || isSpreadsheetEditorMode;\n\n  const customPagesLabelElement = (\n    <div className={classNames('page-number-input-container', { error: hasPageNumberError })}>\n      <label className={'specifyPagesChoiceLabel'}>\n        <span>\n          {t('option.print.specifyPages')}\n        </span>\n        {pageRange === PAGE_RANGES.SPECIFY && <span className='specifyPagesExampleLabel'>\n          - {t('option.thumbnailPanel.multiSelectPagesExample')}\n        </span>}\n      </label>\n      {pageRange === PAGE_RANGES.SPECIFY &&\n        <PageNumberInput\n          selectedPageNumbers={specifiedPages}\n          pageCount={pageCount}\n          onSelectedPageNumbersChange={setSpecifiedPages}\n          onError={onError}\n        />\n      }\n    </div>\n  );\n\n  return (\n    <div className={classNames('SaveModal', { open: isOpen, closed: !isOpen })} data-element={DataElements.SAVE_MODAL}>\n      <ModalWrapper\n        isOpen={isOpen}\n        title={t('saveModal.saveAs')}\n        closeHandler={closeModal}\n        onCloseClick={closeModal}\n        swipeToClose>\n        <div className='modal-body'>\n          <div className='title'>{t('saveModal.general')}</div>\n          <div className='input-container'>\n            <label htmlFor='fileNameInput' className='label'>{t('saveModal.fileName')}</label>\n            <Input\n              type='text'\n              id='fileNameInput'\n              data-testid=\"fileNameInput\"\n              onChange={onFilenameChange}\n              onKeyDown={onFilenameKeyDown}\n              value={filename}\n              fillWidth={true}\n              padMessageText={true}\n              messageText={filename === '' ? t('saveModal.fileNameCannotBeEmpty') : ''}\n              message={filename === '' ? 'warning' : 'default'}\n            />\n          </div>\n          <div className='input-container'>\n            <div className='label' id=\"file-type-dropdown-label\">{t('saveModal.fileType')}</div>\n            <Dropdown\n              id=\"fileTypeDropdown\"\n              labelledById='file-type-dropdown-label'\n              items={fileTypes.map((i) => i.label)}\n              onClickItem={onFiletypeChange}\n              currentSelectionKey={filetype.label}\n            />\n          </div>\n          {!optionsDisabled && (<>\n            <div className='title'>{t('saveModal.pageRange')}</div>\n            <form className='radio-container' onChange={onPageRangeChange} onSubmit={preventDefault}>\n              <div className='page-range-column'>\n                <Choice\n                  checked={pageRange === PAGE_RANGES.ALL}\n                  radio\n                  name='page-range-option'\n                  label={t('saveModal.all')}\n                  value={PAGE_RANGES.ALL}\n                />\n                <Choice\n                  checked={pageRange === PAGE_RANGES.CURRENT_PAGE}\n                  radio\n                  name='page-range-option'\n                  label={t('saveModal.currentPage')}\n                  value={PAGE_RANGES.CURRENT_PAGE}\n                />\n              </div>\n              <div className='page-range-column custom-page-ranges'>\n                <Choice\n                  checked={pageRange === PAGE_RANGES.SPECIFY}\n                  radio\n                  name='page-range-option'\n                  label={customPagesLabelElement}\n                  value={PAGE_RANGES.SPECIFY}\n                />\n              </div>\n            </form>\n            <div className='title'>{t('saveModal.properties')}</div>\n            <div className='checkbox-container'>\n              <Choice\n                checked={includeAnnotations}\n                name='include-annotation-option'\n                label={t('saveModal.includeAnnotation')}\n                onChange={onIncludeAnnotationsChanged}\n              />\n              <Choice\n                checked={includeComments}\n                name='include-comment-option'\n                label={t('saveModal.includeComments')}\n                onChange={onIncludeCommentsChanged}\n              />\n            </div>\n          </>)}\n        </div>\n        <div className='footer'>\n          <Button disabled={isSaveDisabled} onClick={onSave} label={t('saveModal.save')} />\n        </div>\n      </ModalWrapper>\n    </div >\n  );\n};\n\nexport default SaveModal;\n","import SaveModal from './SaveModal';\n\nexport default SaveModal;\n"],"sourceRoot":""}