{"version":3,"sources":["webpack:///./src/ui/src/components/ListSeparator/ListSeparator.js","webpack:///./src/ui/src/components/ListSeparator/index.js","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss?675b","webpack:///./src/ui/src/components/SearchResult/SearchResult.scss?f3b1","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlay.scss?37d2","webpack:///./src/ui/src/components/SearchPanel/SearchPanel.scss?e149","webpack:///./src/ui/src/components/SearchResult/SearchResult.js","webpack:///./src/ui/src/components/SearchResult/index.js","webpack:///./src/ui/src/components/SearchOverlay/SearchOptionsFlyout.js","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlay.js","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlayContainer.js","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlayRedux.js","webpack:///./src/ui/src/components/SearchOverlay/index.js","webpack:///./src/ui/src/hooks/useSearch.js","webpack:///./src/ui/src/components/SearchPanel/SearchPanel.js","webpack:///./src/ui/src/components/SearchPanel/SearchPanelContainer.js","webpack:///./src/ui/src/components/SearchPanel/index.js"],"names":["propTypes","renderContent","PropTypes","func","children","node","isBoldHeader","bool","ListSeparator","props","content","React","createElement","className","classNames","memo","module","exports","SearchResultListSeparatorPropTypes","currentResultIndex","number","isRequired","searchResults","arrayOf","object","listSeparatorText","string","isProcessingSearchResults","SearchResultListSeparator","previousIndex","currentListItem","previousListItem","isFirstListItem","isInDifferentPage","pageNum","isInDifferentSheet","sheetOrder","role","isSpreadsheetEditorMode","SearchResultListItemPropTypes","result","activeResultIndex","onSearchResultClick","activeDocumentViewerKey","title","SearchResultListItem","t","_slicedToArray","useTranslation","customizableUI","useSelector","state","featureFlags","ambientStr","resultStrStart","resultStrEnd","resultStr","textBeforeSearchValue","slice","searchValue","textAfterSearchValue","isRtl","useIsRTL","ariaLabel","concat","cell","aria-label","onClick","aria-current","SearchResultPropTypes","width","height","searchStatus","oneOf","onClickResult","pageLabels","any","SearchResult","isSearchInProgress","cellMeasureCache","useMemo","CellMeasurerCache","defaultHeight","fixedWidth","listRef","useRef","_useState2","useState","listSize","setListSize","length","clearAll","rowRenderer","useCallback","rendererOptions","index","key","parent","style","CellMeasurer","cache","columnIndex","rowIndex","_ref","registerChild","ref","undefined","useEffect","_listRef$current","current","scrollToRow","VirtualizedList","tabIndex","overscanRowCount","rowCount","deferredMeasurementCache","rowHeight","scrollToIndex","SearchResultWithContentRectHOC","measureRef","contentRect","rest","_objectWithoutProperties","_excluded","bounds","_extends","oneOfType","shape","SearchResultWithContentRectHOCAndBounds","withContentRect","SearchResultsContainer","SearchOptionsFlyout","isPanelOpen","isCaseSensitive","isWholeWord","isWildcard","onCaseSensitiveSearchOptionChange","wholeWordSearchOptionOnChange","wildcardOptionOnChange","dispatch","useDispatch","flyoutSelector","DataElements","SEARCH_OPTIONS_FLYOUT","currentFlyout","selectors","getFlyout","useLayoutEffect","searchOptionsFlyout","dataElement","items","type","render","Choice","CASE_SENSITIVE_SEARCH_OPTION","id","checked","onChange","label","WHOLE_WORD_SEARCH_OPTION","WILD_CARD_SEARCH_OPTION","actions","updateFlyout","addFlyout","e","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_arrayLikeToArray","toString","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","isSearchOverlayDisabled","setSearchValue","setCaseSensitive","setSearchStatus","setWholeWord","setWildcard","executeSearch","selectNextResult","selectPreviousResult","showReplaceSpinner","setShowReplaceSpinner","SearchOverlay","core","useCore","replaceValue","nextResultValue","setReplaceValue","isReplaceBtnDisabled","setReplaceBtnDisabled","_useState4","isReplaceAllBtnDisabled","setReplaceAllBtnDisabled","_useState6","isReplacementRegexValid","setReplacementRegexValid","_useState8","allowInitialSearch","setAllowInitialSearch","_useState0","isReplaceInputActive","setisReplaceInputActive","isSearchAndReplaceDisabled","isElementDisabled","isSpreadsheetEditorModeEnabled","_selectors$getFeature","getFeatureFlags","searchTextInputRef","officeEditorIsReplaceInProgress","getOfficeEditorIsReplaceInProgress","RegExp","error","numberOfResultsFound","setTimeout","focus","console","warn","caseSensitive","wholeWord","wildcard","clearSearchResult","search","_callee","_context","isOfficeEditorMode","getDocument","getOfficeEditor","updateSearchData","_x","debouncedSearch","debounce","throttleSearch","throttle","searchParamsRef","addEventListener","onPagesUpdated","removeEventListener","_searchParamsRef$curr","linearizedUpdate","_core$getDocument","onOfficeDocumentEdited","_searchParamsRef$curr2","_core$getDocument2","clearSearchResults","caseSensitiveSearchOptionOnChange","event","isChecked","target","nextButtonOnClick","previousButtonOnClick","retriggerSearch","_core$getPageSearchRe","previousSearchValue","previousReplaceValue","getPageSearchResults","searchAndReplaceAll","_searchAndReplaceAllCallback","_callee2","results","documentViewer","_context2","getDocumentViewer","replace","searchAndReplaceOne","_searchAndReplaceOneCallback","_callee3","activeSearchResult","_context3","getActiveSearchResult","isSearchDoneAndNotProcessingResults","showSpinner","Spinner","shouldShowReplaceToggleButton","shouldShowReplaceInput","shouldShowDotOnFilterButton","Icon","glyph","autoComplete","placeholder","Button","img","onClickAnnouncement","ToggleElementButton","toggleElement","isActive","data-element","SEARCH_PANEL_REPLACE_CONTAINER","disabled","confirmationWarning","message","confirmBtnText","onConfirm","showWarningMessage","aria-live","getStartFacingChevronIcon","getEndFacingChevronIcon","options","store","searchOptions","_objectSpread","regex","searchModes","buildSearchModeArray","overrideSearchExecution","getOverrideSearchExecution","searchTextFullFactory","searchTextFull","nextResultIndex","setActiveSearchResult","nextIndex","setNextResultValue","prevResultIndex","SearchOverlayContainer","useStore","mapDispatchToProps","closeElements","ConnectedSearchOverlayRedux","connect","SEARCH_OVERLAY","getSearchValue","getReplaceValue","getNextResultValue","connectedComponent","useSearch","getSearchStatus","setSearchResults","activeSearchResultIndex","setActiveSearchResultIndex","documentViewersCount","getDocumentViewers","status","setSearchInProgress","spreadsheetSearch","_ref2","modes","getAll","_x2","_x3","coreSearchResults","newActiveSearchResultIndex","findIndex","searchResult","isSearchResultEqual","workbook","getSpreadsheetEditorDocument","getWorkbook","sheetNames","sheetCount","sheet","getSheetAt","setPageLabels","activeDocumentViewer","activeSearchResultChanged","newActiveSearchResult","searchResultsChanged","newSearchResults","searchInProgressEventHandler","isSearching","defaultActiveSearchResult","documentViewers","forEach","isOpen","isMobile","array","currentWidth","closeSearchPanel","setActiveResult","isInDesktopOnlyMode","isCustomPanel","noop","SearchPanel","_props$closeSearchPan","_props$setActiveResul","_props$setNextResultV","_props$isMobile","_props$dataElement","_props$isCustomPanel","_useSearch","onCloseButtonClick","resultIndex","searchEventListener","adjustSpreadsheetTableWidth","isUnmounting","editorWrapper","getRootNode","getElementById","removeProperty","newWidth","window","innerWidth","getEditor","onSizeChanged","addSearchListener","removeSearchListener","getClassName","minWidth","DataElementWrapper","SearchPanelContainer","SEARCH_PANEL","_props$parentDataElem","parentDataElement","isMobileSize","_useSelector2","isElementOpen","getPageLabels","shouldClearSearchPanelOnClose","getActiveDocumentViewerKey","shallowEqual","getPanelWidth","getSearchPanelWidth","clearSearchInputValue","RESIZE_BAR_WIDTH","combinedProps"],"mappings":"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","file":"chunks/chunk.37.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './ListSeparator.scss';\nimport classNames from 'classnames';\n\nconst propTypes = {\n  renderContent: PropTypes.func,\n  children: PropTypes.node,\n  isBoldHeader: PropTypes.bool,\n};\n\nconst ListSeparator = (function(props) {\n  const content = props.renderContent ? props.renderContent() : props.children;\n  const isBoldHeader = props.isBoldHeader;\n  return <h4 className={classNames(\n    'ListSeparator',\n    { 'bold-header': isBoldHeader },\n  )}>{content}</h4>;\n});\n\nListSeparator.propTypes = propTypes;\n\nexport default React.memo(ListSeparator);\n","import ListSeparator from './ListSeparator';\n\nexport default ListSeparator;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { withContentRect } from 'react-measure';\nimport PropTypes from 'prop-types';\nimport './SearchResult.scss';\nimport VirtualizedList from 'react-virtualized/dist/commonjs/List';\nimport CellMeasurer, { CellMeasurerCache } from 'react-virtualized/dist/commonjs/CellMeasurer';\nimport ListSeparator from 'components/ListSeparator';\nimport classNames from 'classnames';\nimport { isSpreadsheetEditorMode } from 'src/helpers/officeEditor';\nimport { useTranslation } from 'react-i18next';\nimport useIsRTL from 'src/hooks/useIsRTL';\n\nconst SearchResultListSeparatorPropTypes = {\n  currentResultIndex: PropTypes.number.isRequired,\n  searchResults: PropTypes.arrayOf(PropTypes.object).isRequired,\n  listSeparatorText: PropTypes.string.isRequired,\n  isProcessingSearchResults: PropTypes.bool\n};\n\nfunction SearchResultListSeparator(props) {\n  const { currentResultIndex, searchResults, listSeparatorText } = props;\n\n  const previousIndex = currentResultIndex === 0 ? currentResultIndex : currentResultIndex - 1;\n  const currentListItem = searchResults[currentResultIndex];\n  const previousListItem = searchResults[previousIndex];\n\n  const isFirstListItem = previousListItem === currentListItem;\n  const isInDifferentPage = previousListItem.pageNum !== currentListItem.pageNum;\n  const isInDifferentSheet = previousListItem.sheetOrder !== currentListItem.sheetOrder;\n\n  if (isFirstListItem || isInDifferentPage || isInDifferentSheet) {\n    return (\n      <div role=\"cell\">\n        <ListSeparator isBoldHeader={isSpreadsheetEditorMode()}>{listSeparatorText}</ListSeparator>\n      </div>\n    );\n  }\n  return null;\n}\n\nSearchResultListSeparator.propTypes = SearchResultListSeparatorPropTypes;\n\nconst SearchResultListItemPropTypes = {\n  result: PropTypes.object.isRequired,\n  currentResultIndex: PropTypes.number.isRequired,\n  activeResultIndex: PropTypes.number.isRequired,\n  onSearchResultClick: PropTypes.func,\n  activeDocumentViewerKey: PropTypes.number,\n  title: PropTypes.string\n};\n\nfunction SearchResultListItem(props) {\n  const [t] = useTranslation();\n  const [customizableUI] = useSelector((state) => [state.featureFlags.customizableUI]);\n  const { result, currentResultIndex, activeResultIndex, onSearchResultClick, activeDocumentViewerKey, title } = props;\n  const { ambientStr, resultStrStart, resultStrEnd, resultStr } = result;\n  const textBeforeSearchValue = ambientStr.slice(0, resultStrStart);\n  const searchValue = ambientStr === '' ? resultStr : ambientStr.slice(resultStrStart, resultStrEnd);\n  const textAfterSearchValue = ambientStr.slice(resultStrEnd);\n  const isRtl = useIsRTL();\n  let ariaLabel = '';\n  if (isSpreadsheetEditorMode()) {\n    ariaLabel = isRtl ? `${ambientStr}:${result.cell} ${t('action.goToResult')}` : `${t('action.goToResult')} ${result.cell}:${ambientStr}`;\n  } else {\n    ariaLabel = isRtl ? `${ambientStr}:${t('action.goToResult')}` : `${t('action.goToResult')}:${ambientStr}`;\n  }\n  return (\n    <button\n      aria-label={ariaLabel}\n      role=\"cell\"\n      className={classNames({\n        'SearchResult': true,\n        'selected': currentResultIndex === activeResultIndex,\n        'modular-ui': customizableUI\n      })}\n      onClick={() => {\n        if (onSearchResultClick) {\n          onSearchResultClick(currentResultIndex, result, activeDocumentViewerKey);\n        }\n      }}\n      aria-current={currentResultIndex === activeResultIndex}\n    >\n      {title && <div className='search-title'>{title}</div>}\n      {textBeforeSearchValue}\n      <span className='search-value'>\n        {searchValue}\n      </span>\n      {textAfterSearchValue}\n    </button>\n  );\n}\nSearchResultListItem.propTypes = SearchResultListItemPropTypes;\n\nconst SearchResultPropTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  activeResultIndex: PropTypes.number,\n  searchStatus: PropTypes.oneOf(['SEARCH_NOT_INITIATED', 'SEARCH_IN_PROGRESS', 'SEARCH_DONE']),\n  searchResults: PropTypes.arrayOf(PropTypes.object),\n  t: PropTypes.func.isRequired,\n  onClickResult: PropTypes.func,\n  pageLabels: PropTypes.arrayOf(PropTypes.any),\n  activeDocumentViewerKey: PropTypes.number\n};\n\nfunction SearchResult(props) {\n  const { height, searchStatus, searchResults, activeResultIndex, t, onClickResult, pageLabels, isProcessingSearchResults, isSearchInProgress, activeDocumentViewerKey } = props;\n  const cellMeasureCache = useMemo(() => {\n    return new CellMeasurerCache({ defaultHeight: 50, fixedWidth: true });\n  }, []);\n  const listRef = useRef(null);\n  const [listSize, setListSize] = useState(0);\n\n  if (searchResults.length === 0) {\n    // clear measure cache, when doing a new search\n    cellMeasureCache.clearAll();\n  }\n\n  if (searchResults.length && searchResults.length !== listSize) {\n    // If the search list is mutated in the backend, we\n    // need to clear cache and recalculate heights\n    setListSize(searchResults.length);\n    cellMeasureCache.clearAll();\n  }\n\n  const rowRenderer = useCallback(function rowRendererCallback(rendererOptions) {\n    const { index, key, parent, style } = rendererOptions;\n    const result = searchResults[index];\n    let listSeparatorText;\n    if (isSpreadsheetEditorMode()) {\n      listSeparatorText = pageLabels[result.sheetOrder];\n    } else {\n      listSeparatorText = `${t('option.shared.page')} ${pageLabels[result.pageNum - 1]}`;\n    }\n    return (\n      <CellMeasurer\n        cache={cellMeasureCache}\n        columnIndex={0}\n        key={key}\n        parent={parent}\n        rowIndex={index}\n      >\n        {({ registerChild }) => (\n          <div role=\"row\" ref={registerChild} style={style}>\n            <SearchResultListSeparator\n              listSeparatorText={listSeparatorText}\n              currentResultIndex={index}\n              searchResults={searchResults}\n            />\n            <SearchResultListItem\n              title={isSpreadsheetEditorMode ? result.cell : undefined}\n              result={result}\n              currentResultIndex={index}\n              activeResultIndex={activeResultIndex}\n              onSearchResultClick={onClickResult}\n              activeDocumentViewerKey={activeDocumentViewerKey}\n            />\n          </div>\n        )}\n      </CellMeasurer>\n    );\n  }, [cellMeasureCache, searchResults, activeResultIndex, t, pageLabels]);\n\n  useEffect(() => {\n    if (listRef) {\n      listRef.current?.scrollToRow(activeResultIndex);\n    }\n  }, [activeResultIndex]);\n\n  if (height == null) { // eslint-disable-line eqeqeq\n    // VirtualizedList requires width and height of the component which is calculated by withContentRect HOC.\n    // On first render when HOC haven't yet set these values, both are undefined, thus having this check here\n    // and skip rendering if values are missing\n    return null;\n  }\n\n  if (searchStatus === 'SEARCH_DONE'\n    && searchResults.length === 0\n    && !isProcessingSearchResults) {\n    if (isSearchInProgress) {\n      return null;\n    }\n    return (\n      <div className=\"info\"><p className=\"no-margin\">{t('message.noResults')}</p></div>\n    );\n  }\n\n  return (\n    <VirtualizedList\n      width={200}\n      height={height}\n      tabIndex={-1}\n      overscanRowCount={10}\n      rowCount={searchResults.length}\n      deferredMeasurementCache={cellMeasureCache}\n      rowHeight={cellMeasureCache.rowHeight}\n      rowRenderer={rowRenderer}\n      ref={listRef}\n      scrollToIndex={activeResultIndex - 1}\n    />\n  );\n}\nSearchResult.propTypes = SearchResultPropTypes;\n\nfunction SearchResultWithContentRectHOC(props) {\n  const { measureRef, contentRect, ...rest } = props;\n  const { height } = contentRect.bounds;\n  return (\n    <div className={classNames('results', {\n      'spreadsheet-results': isSpreadsheetEditorMode()\n    })} ref={measureRef}>\n      <SearchResult height={height} {...rest} />\n    </div>\n  );\n}\nSearchResultWithContentRectHOC.propTypes = {\n  contentRect: PropTypes.object,\n  measureRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.any })\n  ])\n};\n\nconst SearchResultWithContentRectHOCAndBounds = withContentRect('bounds')(SearchResultWithContentRectHOC);\n\nconst SearchResultsContainer = (props) => {\n  return (<SearchResultWithContentRectHOCAndBounds {...props} />);\n};\nexport { SearchResult };\nexport default SearchResultsContainer;\n","import SearchResultsContainer from './SearchResult';\n\nexport default SearchResultsContainer;\n","import React, { useLayoutEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport DataElements from 'src/constants/dataElement';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { useTranslation } from 'react-i18next';\nimport Choice from 'components/Choice';\nimport './SearchOptionsFlyout.scss';\n\nconst SearchOptionsFlyout = ({\n  isPanelOpen,\n  isCaseSensitive,\n  isWholeWord,\n  isWildcard,\n  onCaseSensitiveSearchOptionChange,\n  wholeWordSearchOptionOnChange,\n  wildcardOptionOnChange,\n}) => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n\n  const flyoutSelector = DataElements.SEARCH_OPTIONS_FLYOUT;\n  const currentFlyout = useSelector((state) => selectors.getFlyout(state, flyoutSelector));\n\n  useLayoutEffect(() => {\n    const searchOptionsFlyout = {\n      dataElement: flyoutSelector,\n      className: 'SearchOptionsFlyout',\n      items: [\n        {\n          type: 'customElement',\n          render: () => (\n            <Choice\n              dataElement={DataElements.CASE_SENSITIVE_SEARCH_OPTION}\n              id=\"case-sensitive-option\"\n              checked={isCaseSensitive}\n              onChange={onCaseSensitiveSearchOptionChange}\n              label={t('option.searchPanel.caseSensitive')}\n              tabIndex={isPanelOpen ? 0 : -1}\n            />\n          ),\n        },\n        {\n          type: 'customElement',\n          render: () => (\n            <Choice\n              dataElement={DataElements.WHOLE_WORD_SEARCH_OPTION}\n              id=\"whole-word-option\"\n              checked={isWholeWord}\n              onChange={wholeWordSearchOptionOnChange}\n              label={t('option.searchPanel.wholeWordOnly')}\n              tabIndex={isPanelOpen ? 0 : -1}\n            />\n          ),\n        },\n        {\n          type: 'customElement',\n          render: () => (\n            <Choice\n              dataElement={DataElements.WILD_CARD_SEARCH_OPTION}\n              id=\"wildcard-option\"\n              checked={isWildcard}\n              onChange={wildcardOptionOnChange}\n              label={t('option.searchPanel.wildcard')}\n              tabIndex={isPanelOpen ? 0 : -1}\n            />\n          ),\n        },\n      ],\n    };\n\n    if (!currentFlyout) {\n      dispatch(actions.addFlyout(searchOptionsFlyout));\n    } else {\n      dispatch(actions.updateFlyout(searchOptionsFlyout.dataElement, searchOptionsFlyout));\n    }\n  }, [isCaseSensitive, isWholeWord, isWildcard, isPanelOpen, onCaseSensitiveSearchOptionChange, wholeWordSearchOptionOnChange, wildcardOptionOnChange]);\n\n  return null;\n};\n\nSearchOptionsFlyout.propTypes = {\n  isCaseSensitive: PropTypes.bool.isRequired,\n  isWholeWord: PropTypes.bool.isRequired,\n  isWildcard: PropTypes.bool.isRequired,\n  isPanelOpen: PropTypes.bool,\n  onCaseSensitiveSearchOptionChange: PropTypes.func.isRequired,\n  wholeWordSearchOptionOnChange: PropTypes.func.isRequired,\n  wildcardOptionOnChange: PropTypes.func.isRequired,\n};\n\nexport default SearchOptionsFlyout;\n","import React, { useEffect, useCallback, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport useCore from 'hooks/useCore';\nimport { useTranslation } from 'react-i18next';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash/throttle';\nimport { useSelector, useDispatch } from 'react-redux';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport classNames from 'classnames';\nimport DataElements from 'constants/dataElement';\n\nimport Icon from 'components/Icon';\nimport Button from 'components/Button';\nimport ToggleElementButton from 'components/ModularComponents/ToggleElementButton';\nimport Spinner from '../Spinner';\nimport SearchOptionsFlyout from './SearchOptionsFlyout';\nimport { getEndFacingChevronIcon, getStartFacingChevronIcon } from 'helpers/rightToLeft';\nimport { isOfficeEditorMode, isSpreadsheetEditorMode } from 'helpers/officeEditor';\nimport './SearchOverlay.scss';\nimport '../Button/Button.scss';\n\nconst propTypes = {\n  isPanelOpen: PropTypes.bool,\n  isSearchOverlayDisabled: PropTypes.bool,\n  searchValue: PropTypes.string,\n  searchStatus: PropTypes.oneOf(['SEARCH_NOT_INITIATED', 'SEARCH_IN_PROGRESS', 'SEARCH_DONE']),\n  isCaseSensitive: PropTypes.bool,\n  isWholeWord: PropTypes.bool,\n  isWildcard: PropTypes.bool,\n  searchResults: PropTypes.arrayOf(PropTypes.object),\n  activeResultIndex: PropTypes.number,\n  setSearchValue: PropTypes.func.isRequired,\n  setCaseSensitive: PropTypes.func.isRequired,\n  setSearchStatus: PropTypes.func.isRequired,\n  setWholeWord: PropTypes.func.isRequired,\n  setWildcard: PropTypes.func.isRequired,\n  executeSearch: PropTypes.func.isRequired,\n  selectNextResult: PropTypes.func,\n  selectPreviousResult: PropTypes.func,\n  isProcessingSearchResults: PropTypes.bool,\n  activeDocumentViewerKey: PropTypes.number,\n  showReplaceSpinner: PropTypes.bool,\n  setShowReplaceSpinner: PropTypes.func,\n};\n\nfunction SearchOverlay(props) {\n  const { core } = useCore();\n  const { t } = useTranslation();\n  const { isSearchOverlayDisabled, searchResults, activeResultIndex, selectNextResult, selectPreviousResult, isProcessingSearchResults, activeDocumentViewerKey } = props;\n  const { searchValue, setSearchValue, executeSearch, replaceValue, nextResultValue, setReplaceValue } = props;\n  const { isCaseSensitive, setCaseSensitive, isWholeWord, setWholeWord, isWildcard, setWildcard, setSearchStatus } = props;\n  const { searchStatus, isPanelOpen } = props;\n  const { showReplaceSpinner, setShowReplaceSpinner } = props;\n  const [isReplaceBtnDisabled, setReplaceBtnDisabled] = useState(true);\n  const [isReplaceAllBtnDisabled, setReplaceAllBtnDisabled] = useState(true);\n  const [isReplacementRegexValid, setReplacementRegexValid] = useState(true);\n  const [allowInitialSearch, setAllowInitialSearch] = useState(false);\n  const [isReplaceInputActive, setisReplaceInputActive] = useState(false);\n  const isSearchAndReplaceDisabled = useSelector((state) => selectors.isElementDisabled(state, 'searchAndReplace'));\n  const isSpreadsheetEditorModeEnabled = useSelector(selectors.isSpreadsheetEditorModeEnabled);\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n  const searchTextInputRef = useRef();\n  const waitTime = 300; // Wait time in milliseconds\n  const dispatch = useDispatch();\n  const isSearchInProgress = useSelector((state) => selectors.isSearchInProgress(state));\n  const officeEditorIsReplaceInProgress = useSelector((state) => selectors.getOfficeEditorIsReplaceInProgress(state));\n\n  useEffect(() => {\n    try {\n      // eslint-disable-next-line no-unused-vars\n      const replacementRegex = new RegExp('(?<!<\\/?[^>]*|&[^;]*)');\n    } catch (error) {\n      setReplacementRegexValid(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (numberOfResultsFound > 0) {\n      setSearchStatus('SEARCH_DONE');\n    }\n\n    setReplaceBtnDisabled(numberOfResultsFound === 0);\n    setReplaceAllBtnDisabled(numberOfResultsFound === 0);\n  }, [searchResults]);\n\n  useEffect(() => {\n    if (searchTextInputRef.current && isPanelOpen) {\n      // give time for the search panel to open before focusing on the input\n      setTimeout(() => {\n        searchTextInputRef.current.focus();\n        setAllowInitialSearch(true);\n      }, waitTime);\n    }\n\n    if (!isSearchAndReplaceDisabled && !isReplacementRegexValid && isPanelOpen) {\n      console.warn('Search and Replace is not supported in this browser');\n    }\n  }, [isPanelOpen, isCaseSensitive]);\n\n  useEffect(() => {\n    if (searchValue && searchValue.length > 0) {\n      if (allowInitialSearch) {\n        executeSearch(searchValue, {\n          caseSensitive: isCaseSensitive,\n          wholeWord: isWholeWord,\n          wildcard: isWildcard,\n        });\n      }\n    } else {\n      clearSearchResult();\n    }\n  }, [isCaseSensitive, isWholeWord, isWildcard, activeDocumentViewerKey]);\n\n  const search = async (searchValue) => {\n    if (searchValue && searchValue.length > 0) {\n      setSearchStatus('SEARCH_IN_PROGRESS');\n\n      if (isOfficeEditorMode()) {\n        await core.getDocument().getOfficeEditor().updateSearchData();\n      }\n\n      executeSearch(searchValue, {\n        caseSensitive: isCaseSensitive,\n        wholeWord: isWholeWord,\n        wildcard: isWildcard,\n      });\n    } else {\n      clearSearchResult();\n    }\n  };\n\n  const debouncedSearch = useCallback(\n    debounce(search, waitTime),\n    [isCaseSensitive, isWholeWord, isWildcard]\n  );\n\n  const throttleSearch = throttle(search, waitTime);\n  const searchParamsRef = useRef({\n    searchValue,\n    throttleSearch,\n    officeEditorIsReplaceInProgress\n  });\n\n  useEffect(() => {\n    searchParamsRef.current = {\n      searchValue,\n      throttleSearch,\n      officeEditorIsReplaceInProgress\n    };\n  }, [searchValue, throttleSearch, officeEditorIsReplaceInProgress, isCaseSensitive, isWholeWord, isWildcard]);\n\n  useEffect(() => {\n    core.addEventListener('pagesUpdated', onPagesUpdated);\n    return () => {\n      core.removeEventListener('pagesUpdated', onPagesUpdated);\n    };\n  });\n\n  const onPagesUpdated = (e) => {\n    const { searchValue, officeEditorIsReplaceInProgress } = searchParamsRef.current;\n    if (e.linearizedUpdate || officeEditorIsReplaceInProgress) {\n      return;\n    }\n    search(searchValue);\n  };\n\n  useEffect(() => {\n    const onOfficeDocumentEdited = () => {\n      const { searchValue, throttleSearch, officeEditorIsReplaceInProgress } = searchParamsRef.current;\n      if (officeEditorIsReplaceInProgress) {\n        return;\n      }\n      if (searchValue && searchValue.length > 0) {\n        throttleSearch(searchValue);\n      }\n    };\n\n    core.getDocument()?.addEventListener('officeDocumentEdited', onOfficeDocumentEdited);\n\n    return () => {\n      core.getDocument()?.removeEventListener('officeDocumentEdited', onOfficeDocumentEdited);\n    };\n  }, []);\n\n  const textInputOnChange = (event) => {\n    setSearchValue(event.target.value);\n    debouncedSearch(event.target.value);\n\n    if (event.target.value && numberOfResultsFound > 0) {\n      setReplaceBtnDisabled(false);\n      setReplaceAllBtnDisabled(false);\n    }\n  };\n\n  const replaceTextInputOnChange = (event) => {\n    setReplaceValue(event.target.value);\n    if (event.target.value && searchValue && numberOfResultsFound > 0) {\n      setReplaceBtnDisabled(false);\n      setReplaceAllBtnDisabled(false);\n    }\n  };\n\n  function clearSearchResult() {\n    core.clearSearchResults();\n    setSearchValue('');\n    setSearchStatus('SEARCH_NOT_INITIATED');\n    setReplaceValue('');\n    setReplaceBtnDisabled(true);\n    setReplaceAllBtnDisabled(true);\n  }\n\n  const caseSensitiveSearchOptionOnChange = useCallback(\n    function caseSensitiveSearchOptionOnChangeCallback(event) {\n      const isChecked = event.target.checked;\n      setCaseSensitive(isChecked);\n      setSearchStatus('SEARCH_IN_PROGRESS');\n    }, [],\n  );\n\n  const wholeWordSearchOptionOnChange = useCallback(\n    function wholeWordSearchOptionOnChangeCallback(event) {\n      const isChecked = event.target.checked;\n      setWholeWord(isChecked);\n      setSearchStatus('SEARCH_IN_PROGRESS');\n    }, [],\n  );\n\n  const wildcardOptionOnChange = useCallback(\n    function wildcardOptionOnChangeCallback(event) {\n      const isChecked = event.target.checked;\n      setWildcard(isChecked);\n    }, [],\n  );\n\n  const nextButtonOnClick = useCallback(\n    function nextButtonOnClickCallback() {\n      if (selectNextResult) {\n        selectNextResult(searchResults, activeResultIndex);\n      }\n    },\n    [selectNextResult, searchResults, activeResultIndex],\n  );\n\n  const previousButtonOnClick = useCallback(\n    function previousButtonOnClickCallback() {\n      if (selectPreviousResult) {\n        selectPreviousResult(searchResults, activeResultIndex);\n      }\n    },\n    [selectPreviousResult, searchResults, activeResultIndex],\n  );\n\n  const toggleReplaceInput = () => {\n    setisReplaceInputActive(!isReplaceInputActive);\n  };\n\n  const retriggerSearch = () => {\n    if (isOfficeEditorMode()) {\n      search(searchParamsRef.current.searchValue);\n      return;\n    }\n\n    if (isSpreadsheetEditorMode()) {\n      const previousSearchValue = searchValue;\n      const previousReplaceValue = replaceValue;\n      clearSearchResult();\n      setSearchValue(previousSearchValue);\n      setReplaceValue(previousReplaceValue);\n\n      const shouldEnableReplaceButtons = core.getPageSearchResults()?.length > 0;\n      if (shouldEnableReplaceButtons) {\n        setReplaceBtnDisabled(false);\n        setReplaceAllBtnDisabled(false);\n      }\n    }\n  };\n\n  const searchAndReplaceAll = useCallback(\n    async function searchAndReplaceAllCallback() {\n      if (isReplaceAllBtnDisabled && nextResultValue) {\n        return;\n      }\n\n      setShowReplaceSpinner(true);\n      const results = core.getPageSearchResults();\n      const documentViewer = core.getDocumentViewer();\n      await documentViewer.replace(results, replaceValue);\n      retriggerSearch();\n      setShowReplaceSpinner(false);\n      setReplaceAllBtnDisabled(true);\n    },\n    [replaceValue]\n  );\n\n  const searchAndReplaceOne = useCallback(\n    async function searchAndReplaceOneCallback() {\n      if (isReplaceBtnDisabled && nextResultValue) {\n        return;\n      }\n\n      setShowReplaceSpinner(true);\n      const activeSearchResult = core.getActiveSearchResult();\n      const documentViewer = core.getDocumentViewer();\n      await documentViewer.replace([activeSearchResult], replaceValue);\n      retriggerSearch();\n      setShowReplaceSpinner(false);\n    },\n    [replaceValue, nextResultValue, isReplaceBtnDisabled]\n  );\n\n  const replaceAllConfirmationWarning = () => {\n    const title = t('option.searchPanel.replaceText');\n    const message = t('option.searchPanel.confirmMessageReplaceAll');\n    const confirmationWarning = {\n      message,\n      title,\n      confirmBtnText: t('option.searchPanel.confirm'),\n      onConfirm: () => {\n        searchAndReplaceAll();\n      },\n    };\n    dispatch(actions.showWarningMessage(confirmationWarning));\n  };\n\n  const replaceOneConfirmationWarning = () => {\n    const title = t('option.searchPanel.replaceText');\n    const message = t('option.searchPanel.confirmMessageReplaceOne');\n    const confirmationWarning = {\n      message,\n      title,\n      confirmBtnText: t('option.searchPanel.confirm'),\n      onConfirm: () => {\n        searchAndReplaceOne();\n      },\n    };\n    dispatch(actions.showWarningMessage(confirmationWarning));\n  };\n\n  if (isSearchOverlayDisabled) {\n    return null;\n  }\n  const numberOfResultsFound = searchResults ? searchResults.length : 0;\n\n  const isSearchDoneAndNotProcessingResults = searchStatus === 'SEARCH_DONE' && !isProcessingSearchResults;\n  const showSpinner = (!isSearchDoneAndNotProcessingResults || isSearchInProgress) ? <Spinner /> : null;\n  const shouldShowReplaceToggleButton = !isSearchAndReplaceDisabled && isReplacementRegexValid;\n  const shouldShowReplaceInput = shouldShowReplaceToggleButton && isReplaceInputActive;\n  const shouldShowDotOnFilterButton = isCaseSensitive || isWholeWord || isWildcard;\n\n  return (\n    <div className={classNames({\n      'SearchOverlay': true,\n      'modular-ui': customizableUI\n    })}>\n      <div className=\"search-input-row\">\n        <div className='input-container'>\n          {customizableUI && <Icon glyph=\"icon-header-search\" />}\n          <input\n            className='search-panel-input'\n            ref={searchTextInputRef}\n            type=\"text\"\n            autoComplete=\"off\"\n            onChange={textInputOnChange}\n            value={searchValue}\n            placeholder={customizableUI ? '' : t('message.searchDocumentPlaceholder')}\n            aria-label={t('message.searchDocumentPlaceholder')}\n            id=\"SearchPanel__input\"\n            tabIndex={isPanelOpen ? 0 : -1}\n          />\n          {(searchValue !== undefined) && searchValue.length > 0 && (\n            <Button\n              className=\"clearSearch-button\"\n              img=\"icon-close\"\n              onClick={clearSearchResult}\n              title={t('message.clearSearchResults')}\n              ariaLabel={t('message.clearSearchResults')}\n              onClickAnnouncement={t('message.searchResultsCleared')}\n            />\n          )}\n        </div>\n        <div className=\"search-option-buttons\">\n          <ToggleElementButton\n            dataElement=\"searchOptionsButton\"\n            title={t('option.searchPanel.filter')}\n            ariaLabel={t('option.searchPanel.filter')}\n            tabIndex={isPanelOpen ? 0 : -1}\n            img={shouldShowDotOnFilterButton ? 'ic-filter-with-dot' : 'ic-filter-alt'}\n            className={'search-options-button'}\n            toggleElement={DataElements.SEARCH_OPTIONS_FLYOUT}\n          />\n          {\n            shouldShowReplaceToggleButton ?\n              <Button\n                onClick={toggleReplaceInput}\n                title={t('option.searchPanel.replaceOptions')}\n                ariaLabel={t('option.searchPanel.replaceOptions')}\n                tabIndex={isPanelOpen ? 0 : -1}\n                img='ic_replace'\n                className={'search-options-button'}\n                isActive={isReplaceInputActive}\n              /> : null\n          }\n        </div>\n      </div>\n      {shouldShowReplaceInput && (\n        <div data-element={DataElements.SEARCH_PANEL_REPLACE_CONTAINER} className=\"replace-options\">\n          <div className=\"input-container with-replace-icon\">\n            <Icon\n              disabled={false}\n              glyph={'ic_replace'}\n              className={'replace-icon'}\n            />\n            <input type={'text'}\n              aria-label={t('option.searchPanel.replace')}\n              onChange={replaceTextInputOnChange}\n              value={replaceValue}\n            />\n          </div>\n          <div className='replace-buttons'>\n            {(showReplaceSpinner) ? <Spinner width={'25px'} height={'25px'} /> : null}\n            <Button\n              onClick={replaceAllConfirmationWarning}\n              title={t('option.searchPanel.replaceAll')}\n              ariaLabel={t('option.searchPanel.replaceAll')}\n              className={'btn-replace-all'}\n              disabled={isReplaceAllBtnDisabled}\n            >{t('option.searchPanel.replaceAll')}</Button>\n\n            <Button\n              onClick={replaceOneConfirmationWarning}\n              title={t('option.searchPanel.replace')}\n              ariaLabel={t('option.searchPanel.replace')}\n              className={'btn-replace'}\n              disabled={isReplaceBtnDisabled || !nextResultValue || !core.getActiveSearchResult()}\n            >{t('option.searchPanel.replace')}</Button>\n          </div>\n        </div>\n      )}\n      <SearchOptionsFlyout\n        isCaseSensitive={isCaseSensitive}\n        isWholeWord={isWholeWord}\n        isWildcard={isWildcard}\n        isPanelOpen={isPanelOpen}\n        onCaseSensitiveSearchOptionChange={caseSensitiveSearchOptionOnChange}\n        wholeWordSearchOptionOnChange={wholeWordSearchOptionOnChange}\n        wildcardOptionOnChange={wildcardOptionOnChange}\n      />\n      <div className=\"divider\" />\n      <div className=\"footer\">\n        {searchStatus === 'SEARCH_NOT_INITIATED' || '' ? null : showSpinner}\n        <p className=\"no-margin\" aria-live=\"assertive\">{isSearchDoneAndNotProcessingResults && !isSearchInProgress ? `${numberOfResultsFound} ${t('message.numResultsFound')}` : undefined}</p>\n        {numberOfResultsFound > 0 && (\n          <div className=\"buttons\">\n            <button className=\"button\" onClick={previousButtonOnClick} title={t('action.prevResult')} aria-label={t('action.prevResult')}>\n              <Icon className=\"arrow\" glyph={getStartFacingChevronIcon(isSpreadsheetEditorModeEnabled)} />\n            </button>\n            <button className=\"button\" onClick={nextButtonOnClick} title={t('action.nextResult')} aria-label={t('action.nextResult')}>\n              <Icon className=\"arrow\" glyph={getEndFacingChevronIcon(isSpreadsheetEditorModeEnabled)} />\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nSearchOverlay.propTypes = propTypes;\n\nexport default SearchOverlay;\n","import React, { useState } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\nimport SearchOverlay from './SearchOverlay';\nimport { getOverrideSearchExecution, buildSearchModeArray } from 'helpers/search';\nimport { isSpreadsheetEditorMode } from 'helpers/officeEditor';\nimport searchTextFullFactory from '../../apis/searchTextFull';\n// Helper functions\n// eslint-disable-next-line custom/use-core-hook-in-components\nimport core from 'core';\nimport actions from 'actions';\n\n// exported so that we can test these internal functions\nexport function executeSearch(searchValue, options, store) {\n  const searchOptions = {\n    regex: false,\n    ...options,\n  };\n\n  if (searchValue === null || searchValue === undefined) {\n    return;\n  }\n\n  if (isSpreadsheetEditorMode()) {\n    const searchModes = buildSearchModeArray(searchOptions);\n    core.getDocumentViewer().search(searchValue, searchModes);\n    return;\n  }\n\n  // user can override search execution with instance.overrideSearchExecution()\n  // Here we check if user has done that and call that rather than default search execution\n  const overrideSearchExecution = getOverrideSearchExecution();\n  if (overrideSearchExecution) {\n    overrideSearchExecution(searchValue, searchOptions);\n  } else {\n    const searchTextFull = searchTextFullFactory(store);\n    searchTextFull(searchValue, searchOptions, false);\n  }\n}\n\nexport function selectNextResult(searchResults = [], activeResultIndex, dispatch) {\n  if (searchResults.length > 0) {\n    const nextResultIndex = activeResultIndex === searchResults.length - 1 ? 0 : activeResultIndex + 1;\n    core.setActiveSearchResult(searchResults[nextResultIndex]);\n    if (dispatch) {\n      const nextIndex = (nextResultIndex > 0) ? nextResultIndex - 1 : 0;\n      dispatch(actions.setNextResultValue(searchResults[nextResultIndex], nextIndex));\n    }\n  }\n}\n\nexport function selectPreviousResult(searchResults = [], activeResultIndex, dispatch) {\n  if (searchResults.length > 0) {\n    const prevResultIndex = activeResultIndex <= 0 ? searchResults.length - 1 : activeResultIndex - 1;\n    core.setActiveSearchResult(searchResults[prevResultIndex]);\n    if (dispatch) {\n      dispatch(actions.setNextResultValue(searchResults[prevResultIndex]));\n    }\n  }\n}\n\nfunction SearchOverlayContainer(props) {\n  const dispatch = useDispatch();\n  const store = useStore();\n  const [showReplaceSpinner, setShowReplaceSpinner] = useState(false);\n\n  props = {\n    ...props,\n    showReplaceSpinner,\n    setShowReplaceSpinner\n  };\n\n  return (\n    <SearchOverlay\n      executeSearch={(searchValue, options = {}) => {\n        executeSearch(searchValue, options, store);\n      }}\n      selectNextResult={(searchResults = [], activeResultIndex) => {\n        selectNextResult(searchResults, activeResultIndex, dispatch);\n      }}\n      selectPreviousResult={(searchResults = [], activeResultIndex) => {\n        selectPreviousResult(searchResults, activeResultIndex, dispatch);\n      }}\n      {...props}\n    />\n  );\n}\n\nexport default SearchOverlayContainer;\n","import selectors from 'selectors';\nimport actions from 'actions';\nimport { connect } from 'react-redux';\nimport React from 'react';\nimport SearchOverlayContainer from './SearchOverlayContainer';\nimport DataElements from 'src/constants/dataElement';\n\nconst mapStateToProps = (state) => ({\n  isSearchOverlayDisabled: selectors.isElementDisabled(state, DataElements.SEARCH_OVERLAY),\n  searchValue: selectors.getSearchValue(state),\n  replaceValue: selectors.getReplaceValue(state),\n  nextResultValue: selectors.getNextResultValue(state),\n  isCaseSensitive: selectors.isCaseSensitive(state),\n  isWholeWord: selectors.isWholeWord(state),\n  isWildcard: selectors.isWildcard(state),\n  isProcessingSearchResults: selectors.isProcessingSearchResults(state),\n});\n\nconst mapDispatchToProps = {\n  closeElements: actions.closeElements,\n  setSearchValue: actions.setSearchValue,\n  setReplaceValue: actions.setReplaceValue,\n  setCaseSensitive: actions.setCaseSensitive,\n  setWholeWord: actions.setWholeWord,\n  setWildcard: actions.setWildcard,\n};\n\nfunction SearchOverlayRedux(props) {\n  return (<SearchOverlayContainer {...props} />);\n}\n\nconst ConnectedSearchOverlayRedux = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(SearchOverlayRedux);\n\nconst connectedComponent = (props) => {\n  return <ConnectedSearchOverlayRedux {...props} />;\n};\n\nexport default connectedComponent;","import connectedComponent from './SearchOverlayRedux';\n\nexport default connectedComponent;\n","import { useState, useMemo, useEffect, useCallback } from 'react';\nimport core from 'core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from 'actions/index';\nimport { isSpreadsheetEditorMode } from 'src/helpers/officeEditor';\nimport selectors from 'selectors';\nimport { debounce } from 'lodash';\nimport { buildSearchModeArray } from 'src/helpers/search';\n\nfunction useSearch(activeDocumentViewerKey) {\n  const searchValue = useSelector(selectors.getSearchValue);\n  const caseSensitive = useSelector(selectors.isCaseSensitive);\n  const wholeWord = useSelector(selectors.isWholeWord);\n  const searchStatus = useSelector(selectors.getSearchStatus);\n  const [searchResults, setSearchResults] = useState([]);\n  const [activeSearchResult, setActiveSearchResult] = useState();\n  const [activeSearchResultIndex, setActiveSearchResultIndex] = useState(0);\n  const dispatch = useDispatch();\n  const documentViewers = core.getDocumentViewers();\n  const documentViewersCount = documentViewers.length;\n  const debounceTime = 500;\n\n  const setSearchStatus = useCallback(async (status) => {\n    dispatch(actions.setSearchStatus(status));\n    if (status === 'SEARCH_IN_PROGRESS') {\n      dispatch(actions.setSearchInProgress(true));\n    }\n  }, [dispatch]);\n\n  const spreadsheetSearch = async (searchValue, modes) => {\n    if (!searchValue) {\n      setSearchStatus('SEARCH_NOT_INITIATED');\n      return;\n    }\n\n    setSearchStatus('SEARCH_IN_PROGRESS');\n\n    const searchModes = buildSearchModeArray(modes);\n    const results = await core\n      .getDocumentViewer()\n      .search(searchValue, searchModes)\n      .getAll();\n\n    setSearchResults(results);\n    setSearchStatus('SEARCH_DONE');\n    dispatch(actions.setSearchInProgress(false));\n  };\n\n  const debouncedSearch = useMemo(() => debounce(spreadsheetSearch, debounceTime), []);\n  useEffect(() => {\n    // First time useSearch is mounted we check if core has results\n    // and if it has, we make sure those are set. This will make sure if external search is done\n    // that the result will reflect on the UI those set in core\n    const activeDocumentViewer = core.getDocumentViewer(activeDocumentViewerKey);\n    const coreSearchResults = activeDocumentViewer.getPageSearchResults() || [];\n    if (coreSearchResults.length > 0) {\n      const activeSearchResult = core.getActiveSearchResult();\n      if (activeSearchResult) {\n        const newActiveSearchResultIndex = coreSearchResults.findIndex((searchResult) => {\n          return core.isSearchResultEqual(searchResult, activeSearchResult);\n        });\n        setSearchResults(coreSearchResults);\n        if (newActiveSearchResultIndex >= 0) {\n          setActiveSearchResult(coreSearchResults[newActiveSearchResultIndex]);\n          setActiveSearchResultIndex(newActiveSearchResultIndex);\n        }\n      } else {\n        setSearchResults(coreSearchResults);\n        setActiveSearchResult(coreSearchResults[0]);\n        setActiveSearchResultIndex(0);\n      }\n    }\n  }, []);\n\n  useEffect(()=>{\n    if (isSpreadsheetEditorMode()) {\n      const workbook = core.getDocument().getSpreadsheetEditorDocument().getWorkbook();\n      const sheetNames = [];\n      for (let i=0; i<workbook.sheetCount; i++) {\n        const sheet = workbook.getSheetAt(i);\n        sheetNames.push(sheet.name);\n      }\n\n      dispatch(actions.setPageLabels(sheetNames));\n      debouncedSearch(searchValue, { wholeWord, caseSensitive });\n    }\n  }, [searchValue, wholeWord, caseSensitive]);\n\n  useEffect(() => {\n    const activeDocumentViewer = core.getDocumentViewer(activeDocumentViewerKey);\n    function activeSearchResultChanged(newActiveSearchResult) {\n      const coreSearchResults = activeDocumentViewer.getPageSearchResults() || [];\n      const newActiveSearchResultIndex = coreSearchResults.findIndex((searchResult) => {\n        return core.isSearchResultEqual(searchResult, newActiveSearchResult);\n      });\n      if (newActiveSearchResultIndex >= 0) {\n        setActiveSearchResult(newActiveSearchResult);\n        setActiveSearchResultIndex(newActiveSearchResultIndex);\n        dispatch(actions.setNextResultValue(newActiveSearchResult));\n      }\n    }\n\n    function searchResultsChanged(newSearchResults = []) {\n      setSearchResults(newSearchResults);\n      if (newSearchResults && newSearchResults.length === 0) {\n        setActiveSearchResult(undefined);\n        setActiveSearchResultIndex(-1);\n      }\n    }\n\n    function searchInProgressEventHandler(isSearching) {\n      if (isSearching === undefined || isSearching === null) {\n        // if isSearching is not passed at all, we consider that to mean that search was reset to original state\n        setSearchStatus('SEARCH_NOT_INITIATED');\n      } else if (isSearching) {\n        setSearchStatus('SEARCH_IN_PROGRESS');\n      } else {\n        const defaultActiveSearchResult = activeDocumentViewer.getActiveSearchResult();\n\n        if (defaultActiveSearchResult) {\n          setActiveSearchResult(defaultActiveSearchResult);\n          // In core default active search result is the first result\n          const coreSearchResults = activeDocumentViewer.getPageSearchResults() || [];\n          const newActiveSearchResultIndex = coreSearchResults.findIndex((searchResult) => {\n            return core.isSearchResultEqual(searchResult, defaultActiveSearchResult);\n          });\n          setActiveSearchResultIndex(newActiveSearchResultIndex);\n          dispatch(actions.setNextResultValue(defaultActiveSearchResult));\n        }\n\n        setSearchStatus('SEARCH_DONE');\n      }\n    }\n    const documentViewers = core.getDocumentViewers();\n\n    documentViewers.forEach((documentViewer) => {\n      documentViewer.addEventListener('activeSearchResultChanged', activeSearchResultChanged);\n      documentViewer.addEventListener('searchResultsChanged', searchResultsChanged);\n      documentViewer.addEventListener('searchInProgress', searchInProgressEventHandler);\n    });\n    return () => {\n      documentViewers.forEach((documentViewer) => {\n        documentViewer.removeEventListener('activeSearchResultChanged', activeSearchResultChanged);\n        documentViewer.removeEventListener('searchResultsChanged', searchResultsChanged);\n        documentViewer.removeEventListener('searchInProgress', searchInProgressEventHandler);\n      });\n    };\n  }, [setActiveSearchResult, setActiveSearchResultIndex, setSearchStatus, dispatch, documentViewersCount, activeDocumentViewerKey]);\n\n  return {\n    searchStatus,\n    searchResults,\n    activeSearchResult,\n    activeSearchResultIndex,\n    setActiveSearchResultIndex,\n    setSearchStatus,\n  };\n}\n\nexport default useSearch;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from 'actions/index';\nimport selectors from 'selectors';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport SearchResult from 'components/SearchResult';\nimport SearchOverlay from 'components/SearchOverlay';\nimport Icon from 'components/Icon';\nimport getClassName from 'helpers/getClassName';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport { addSearchListener, removeSearchListener } from 'helpers/search';\nimport { isSpreadsheetEditorMode } from 'src/helpers/officeEditor';\nimport getDocument from 'src/core/getDocument';\nimport getRootNode from 'helpers/getRootNode';\n\n\nimport './SearchPanel.scss';\nimport useSearch from 'hooks/useSearch';\n\nconst propTypes = {\n  isOpen: PropTypes.bool,\n  isMobile: PropTypes.bool,\n  pageLabels: PropTypes.array,\n  currentWidth: PropTypes.number,\n  closeSearchPanel: PropTypes.func,\n  setActiveResult: PropTypes.func,\n  isInDesktopOnlyMode: PropTypes.bool,\n  isProcessingSearchResults: PropTypes.bool,\n  activeDocumentViewerKey: PropTypes.number,\n  isCustomPanel: PropTypes.bool,\n};\n\nfunction noop() { }\n\nfunction SearchPanel(props) {\n  const {\n    isOpen,\n    currentWidth,\n    pageLabels,\n    closeSearchPanel = noop,\n    setActiveResult = noop,\n    setNextResultValue = noop,\n    isMobile = false,\n    isInDesktopOnlyMode,\n    isProcessingSearchResults,\n    activeDocumentViewerKey,\n    dataElement = 'searchPanel',\n    isCustomPanel = false,\n  } = props;\n\n  const { t } = useTranslation();\n  const { searchStatus, searchResults, activeSearchResultIndex, setSearchStatus, setActiveSearchResultIndex } = useSearch(activeDocumentViewerKey);\n  const dispatch = useDispatch();\n  const onCloseButtonClick = React.useCallback(function onCloseButtonClick() {\n    if (closeSearchPanel) {\n      closeSearchPanel();\n    }\n  }, [closeSearchPanel]);\n\n  const onClickResult = React.useCallback(function onClickResult(resultIndex, result, activeDocumentViewerKey) {\n    setActiveSearchResultIndex(resultIndex);\n    setActiveResult(result, activeDocumentViewerKey);\n    if (!isInDesktopOnlyMode && isMobile) {\n      closeSearchPanel();\n    }\n\n    setNextResultValue(result);\n  }, [closeSearchPanel, isMobile]);\n\n  const isSearchInProgress = useSelector((state) => selectors.isSearchInProgress(state));\n\n  const searchEventListener = () => {\n    dispatch(actions.setSearchInProgress(false));\n  };\n\n  const adjustSpreadsheetTableWidth = (isUnmounting) => {\n    if (isSpreadsheetEditorMode()) {\n      const editorWrapper = getRootNode().getElementById('editorWrapper');\n      if (isUnmounting) {\n        editorWrapper.style.removeProperty('width');\n      } else {\n        const newWidth = `${window.innerWidth - (currentWidth)}px`;\n        editorWrapper.style.width = newWidth;\n      }\n      const editor = getDocument().getSpreadsheetEditorDocument().getEditor();\n      editor.onSizeChanged();\n    }\n  };\n\n  React.useEffect(() => {\n    adjustSpreadsheetTableWidth();\n  }, [currentWidth]);\n\n  React.useEffect(() => {\n    // componentDidMount\n    adjustSpreadsheetTableWidth();\n    addSearchListener(searchEventListener);\n  }, []);\n\n  React.useEffect(() => {\n    // componentWillUnmount\n    return () => {\n      adjustSpreadsheetTableWidth(true);\n      removeSearchListener(searchEventListener);\n    };\n  }, []);\n\n  const className = getClassName('Panel SearchPanel', { isOpen });\n  let style = {};\n  if (!isCustomPanel && (isInDesktopOnlyMode || !isMobile)) {\n    style = { width: `${currentWidth}px`, minWidth: `${currentWidth}px` };\n  }\n\n  return (\n    <DataElementWrapper\n      className={className}\n      dataElement={dataElement}\n      style={style}\n    >\n      {!isInDesktopOnlyMode && isMobile &&\n        <div\n          className=\"close-container\"\n        >\n          <button\n            className=\"close-icon-container\"\n            onClick={onCloseButtonClick}\n          >\n            <Icon\n              glyph=\"ic_close_black_24px\"\n              className=\"close-icon\"\n            />\n          </button>\n        </div>}\n      <SearchOverlay\n        searchStatus={searchStatus}\n        setSearchStatus={setSearchStatus}\n        searchResults={searchResults}\n        activeResultIndex={activeSearchResultIndex}\n        isPanelOpen={isOpen}\n        isSearchInProgress={isSearchInProgress}\n        activeDocumentViewerKey={activeDocumentViewerKey}\n      />\n      <SearchResult\n        t={t}\n        searchStatus={searchStatus}\n        searchResults={searchResults}\n        activeResultIndex={activeSearchResultIndex}\n        onClickResult={onClickResult}\n        pageLabels={pageLabels}\n        isProcessingSearchResults={isProcessingSearchResults}\n        isSearchInProgress={isSearchInProgress}\n        activeDocumentViewerKey={activeDocumentViewerKey}\n      />\n    </DataElementWrapper>\n  );\n}\n\nSearchPanel.propTypes = propTypes;\n\nexport default SearchPanel;\n","import React from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport useCore from 'hooks/useCore';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobileSize } from 'helpers/getDeviceSize';\nimport SearchPanel from './SearchPanel';\nimport DataElements from 'constants/dataElement';\nimport { RESIZE_BAR_WIDTH } from 'constants/panel';\n\nfunction SearchPanelContainer(props) {\n  const { core } = useCore();\n  const { dataElement = DataElements.SEARCH_PANEL, parentDataElement = undefined } = props;\n  const isMobile = isMobileSize();\n\n  const [\n    isOpen,\n    pageLabels,\n    shouldClearSearchPanelOnClose,\n    isInDesktopOnlyMode,\n    isProcessingSearchResults,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementOpen(state, dataElement),\n      selectors.getPageLabels(state),\n      selectors.shouldClearSearchPanelOnClose(state),\n      selectors.isInDesktopOnlyMode(state),\n      selectors.isProcessingSearchResults(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n  let currentWidth = useSelector((state) => (\n    !parentDataElement && dataElement === DataElements.SEARCH_PANEL ?\n      selectors.getSearchPanelWidth(state) :\n      selectors.getPanelWidth(state, parentDataElement || dataElement)\n  ));\n\n  const dispatch = useDispatch();\n  const closeSearchPanel = React.useCallback(\n    function closeSearchPanel() {\n      dispatch(actions.closeElements([dataElement]));\n    },\n    [dispatch],\n  );\n\n  const clearSearchInputValue = React.useCallback(\n    function clearSearchInputValue() {\n      dispatch(actions.setSearchValue(''));\n    },\n    [dispatch],\n  );\n\n  const setNextResultValue = React.useCallback(\n    function setNextResultValue(searchResults) {\n      dispatch(actions.setNextResultValue(searchResults));\n    },\n    [dispatch],\n  );\n\n  const setActiveResult = React.useCallback(function setActiveResult(result, activeDocumentViewerKey) {\n    if (activeDocumentViewerKey) {\n      const activeDocumentviewer = core.getDocumentViewer(activeDocumentViewerKey);\n      return activeDocumentviewer.setActiveSearchResult(result);\n    }\n  }, []);\n\n  /*\n  React.useEffect(function SearchPanelVisibilityChangedEffect() {\n    function clearSearchResultsOnPanelClose(event) {\n      if (!event && !event.detail) {\n        return;\n      }\n      const { detail } = event;\n      if (detail.element === 'searchPanel' && detail.isVisible === false) {\n        // clear search results when search panel is closed\n        core.clearSearchResults();\n        clearSearchInputValue();\n      }\n    }\n    if (isMobile) {\n      // for mobile we want to keep results in panel as search panel is on top of the content\n      // and user will need to close the panel to view the content.\n      return;\n    }\n    if (!shouldClearSearchPanelOnClose) {\n      return;\n    }\n    window.addEventListener('visibilityChanged',  clearSearchResultsOnPanelClose);\n    return function SearchPanelVisibilityChangedEffectCleanUp() {\n      window.removeEventListener('visibilityChanged',  clearSearchResultsOnPanelClose);\n    };\n  }, [isMobile, clearSearchInputValue, shouldClearSearchPanelOnClose]);\n   */\n\n  React.useEffect(\n    function clearSearchResult() {\n      if (!isInDesktopOnlyMode && isMobile) {\n        // for mobile we want to keep results in panel as search panel is on top of the content\n        // and user will need to close the panel to view the content.\n        return;\n      }\n\n      if (!isOpen && shouldClearSearchPanelOnClose) {\n        core.clearSearchResults();\n        clearSearchInputValue();\n      }\n    },\n    [isMobile, isOpen, shouldClearSearchPanelOnClose, isInDesktopOnlyMode],\n  );\n\n  React.useEffect(() => {\n    return () => {\n      if (!isInDesktopOnlyMode && isMobile) {\n        // for mobile we want to keep results in panel as search panel is on top of the content\n        // and user will need to close the panel to view the content.\n        return;\n      }\n\n      if (shouldClearSearchPanelOnClose) {\n        core.clearSearchResults();\n        clearSearchInputValue();\n      }\n    };\n  }, [isMobile, shouldClearSearchPanelOnClose, isInDesktopOnlyMode]);\n\n  if (dataElement !== DataElements.SEARCH_PANEL) {\n    // Adjust width for custom panels\n    currentWidth -= 16; // padding\n    currentWidth -= RESIZE_BAR_WIDTH;\n  }\n\n  const combinedProps = {\n    ...props,\n    isOpen,\n    currentWidth,\n    pageLabels,\n    closeSearchPanel,\n    setActiveResult,\n    setNextResultValue,\n    isMobile,\n    isInDesktopOnlyMode,\n    isProcessingSearchResults,\n    activeDocumentViewerKey,\n  };\n\n  return <SearchPanel {...combinedProps} />;\n}\n\nexport default SearchPanelContainer;\n","import SearchPanelContainer from './SearchPanelContainer';\n\nexport default SearchPanelContainer;\n"],"sourceRoot":""}