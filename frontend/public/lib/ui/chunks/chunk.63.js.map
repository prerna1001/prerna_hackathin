{"version":3,"sources":["webpack:///./src/ui/src/components/ErrorModal/ErrorModal.scss?af7e","webpack:///./src/ui/src/components/ErrorModal/ErrorModal.js","webpack:///./src/ui/src/components/ErrorModal/index.js"],"names":["module","exports","ErrorModal","_useSelector2","_slicedToArray","useSelector","state","selectors","getErrorMessage","getErrorTitle","isElementDisabled","DataElements","ERROR_MODAL","isElementOpen","shallowEqual","message","title","isDisabled","isOpen","dispatch","useDispatch","t","useTranslation","isTrialError","includes","useEffect","actions","closeElements","SIGNATURE_MODAL","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","PASSWORD_MODAL","FILTER_MODAL","window","addEventListener","e","escapePressListener","closeErrorModal","removeEventListener","shouldTranslate","startsWith","closeElement","open","buttonLabel","React","createElement","className","classNames","Modal","closed","data-element","ModalWrapper","closeButtonDataElement","onCloseClick","Button","dataElement","label","onClick"],"mappings":"qGACAA,EAAOC,QAAU,CAAC,kBAAoB,OAAO,mBAAqB,S,yvCCYlE,IAgFeC,EAhFI,WACjB,IAQCC,EAAAC,EAR4CC,aAC3C,SAACC,GAAK,MAAK,CACTC,IAAUC,gBAAgBF,GAC1BC,IAAUE,cAAcH,GACxBC,IAAUG,kBAAkBJ,EAAOK,IAAaC,aAChDL,IAAUM,cAAcP,EAAOK,IAAaC,gBAE9CE,KACD,GARMC,EAAOZ,EAAA,GAAEa,EAAKb,EAAA,GAAEc,EAAUd,EAAA,GAAEe,EAAMf,EAAA,GASnCgB,EAAWC,cACVC,EAAqBjB,EAAhBkB,cAAgB,GAApB,GAEFC,EAAe,SAACR,GACpB,OAAOA,aAAO,EAAPA,EAASS,SAAS,mBAG3BC,qBAAU,WACR,GAAIP,EAaF,OAZAC,EACEO,IAAQC,cAAc,CACpBhB,IAAaiB,gBACbjB,IAAakB,YACblB,IAAamB,cACbnB,IAAaoB,eACbpB,IAAaqB,eACbrB,IAAasB,gBAIjBC,OAAOC,iBAAiB,WAAW,SAACC,GAAC,OAAKC,YAAoBD,EAAGE,MAC1D,kBAAMJ,OAAOK,oBAAoB,UAAWF,QAEpD,CAAClB,EAAUD,IAEd,IAAMsB,EAAkBzB,EAAQ0B,WAAW,YAErCH,EAAkB,WACtBnB,EAASO,IAAQgB,aAAa/B,IAAaC,cACvCW,EAAaR,IACfmB,OAAOS,KAAK,yBAA0B,WAItCC,EAAcvB,EAAE,aAMpB,OAJIE,EAAaR,KACf6B,EAAc,iBAGT3B,EAAa,KAClB4B,IAAAC,cAAA,OACEC,UAAWC,IAAW,CACpBC,OAAO,EACP/C,YAAY,EACZyC,KAAMzB,EACNgC,QAAShC,IAEXiC,eAAcxC,IAAaC,aAE3BiC,IAAAC,cAACM,IAAY,CAAClC,OAAQA,EAAQF,MAAOA,GAAS,gBAC5CqC,uBAAwB,wBACxBC,aAAchB,GAEdO,IAAAC,cAAA,OAAKC,UAAU,qCACbF,IAAAC,cAAA,SAAIN,EAAkBnB,EAAEN,GAAWA,IAErC8B,IAAAC,cAAA,OAAKC,UAAU,uBACbF,IAAAC,cAACS,IAAM,CACLR,UAAU,uBACVS,YAAY,wBACZC,MAAOb,EACPc,QAASpB,QCnFNpC","file":"chunks/chunk.63.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useEffect } from 'react';\nimport classNames from 'classnames';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport Button from 'components/Button';\nimport { escapePressListener } from 'helpers/accessibility';\nimport ModalWrapper from '../ModalWrapper';\nimport DataElements from 'constants/dataElement';\n\nimport './ErrorModal.scss';\n\nconst ErrorModal = () => {\n  const [message, title, isDisabled, isOpen] = useSelector(\n    (state) => [\n      selectors.getErrorMessage(state),\n      selectors.getErrorTitle(state),\n      selectors.isElementDisabled(state, DataElements.ERROR_MODAL),\n      selectors.isElementOpen(state, DataElements.ERROR_MODAL),\n    ],\n    shallowEqual\n  );\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n\n  const isTrialError = (message) => {\n    return message?.includes('dev.apryse.com');\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      dispatch(\n        actions.closeElements([\n          DataElements.SIGNATURE_MODAL,\n          DataElements.PRINT_MODAL,\n          DataElements.LOADING_MODAL,\n          DataElements.PROGRESS_MODAL,\n          DataElements.PASSWORD_MODAL,\n          DataElements.FILTER_MODAL\n        ])\n      );\n\n      window.addEventListener('keydown', (e) => escapePressListener(e, closeErrorModal));\n      return () => window.removeEventListener('keydown', escapePressListener);\n    }\n  }, [dispatch, isOpen]);\n\n  const shouldTranslate = message.startsWith('message.');\n\n  const closeErrorModal = () => {\n    dispatch(actions.closeElement(DataElements.ERROR_MODAL));\n    if (isTrialError(message)) {\n      window.open('https://dev.apryse.com', '_blank');\n    }\n  };\n\n  let buttonLabel = t('action.ok');\n\n  if (isTrialError(message)) {\n    buttonLabel = 'Get trial key';\n  }\n\n  return isDisabled ? null : (\n    <div\n      className={classNames({\n        Modal: true,\n        ErrorModal: true,\n        open: isOpen,\n        closed: !isOpen,\n      })}\n      data-element={DataElements.ERROR_MODAL}\n    >\n      <ModalWrapper isOpen={isOpen} title={title || 'message.error'}\n        closeButtonDataElement={'errorModalCloseButton'}\n        onCloseClick={closeErrorModal}\n      >\n        <div className=\"modal-content error-modal-content\">\n          <p>{shouldTranslate ? t(message) : message}</p>\n        </div>\n        <div className=\"modal-footer footer\">\n          <Button\n            className=\"confirm modal-button\"\n            dataElement=\"closeErrorModalButton\"\n            label={buttonLabel}\n            onClick={closeErrorModal}\n          />\n        </div>\n      </ModalWrapper>\n    </div>\n  );\n};\n\nexport default ErrorModal;\n","import ErrorModal from './ErrorModal';\n\nexport default ErrorModal;\n"],"sourceRoot":""}