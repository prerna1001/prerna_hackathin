{"version":3,"sources":["webpack:///./src/ui/src/components/NoteTextPreview/NoteTextPreview.js","webpack:///./src/ui/src/components/ReactSelectWebComponentProvider/ReactSelectWebComponentProvider.js","webpack:///./src/ui/src/components/ReactSelectWebComponentProvider/index.js","webpack:///./src/ui/src/helpers/applyRedactions.js","webpack:///./src/ui/src/components/RedactionPanel/RedactionPanel.scss?a3d5","webpack:///./src/ui/src/components/RedactionPageGroup/RedactionPageGroup.scss?1e58","webpack:///./src/ui/src/components/RedactionSearchOverlay/RedactionSearchMultiSelect/RedactionSearchMultiSelect.scss?6c9f","webpack:///./src/ui/src/components/RedactionSearchOverlay/RedactionSearchOverlay.scss?d791","webpack:///./src/ui/src/components/RedactionSearchResults/RedactionSearchResults.scss?c725","webpack:///./src/ui/src/components/RedactionPanel/RedactionPanelContext.js","webpack:///./src/ui/src/components/RedactionTextPreview/RedactionTextPreviewContainer.js","webpack:///./src/ui/src/components/RedactionTextPreview/index.js","webpack:///./src/ui/src/components/RedactionPageGroup/RedactionItem/RedactionItem.js","webpack:///./src/ui/src/components/RedactionPageGroup/RedactionItem/RedactionItemContainer.js","webpack:///./src/ui/src/components/RedactionPageGroup/RedactionItem/index.js","webpack:///./src/ui/src/components/RedactionPageGroup/RedactionPageGroup.js","webpack:///./src/ui/src/components/RedactionPageGroup/RedactionPageGroupContainer.js","webpack:///./src/ui/src/components/RedactionPageGroup/index.js","webpack:///./src/ui/src/components/RedactionPanel/RedactionPanel.js","webpack:///./src/ui/src/components/CreatableMultiSelect/CreatableMultiSelect.js","webpack:///./src/ui/src/components/CreatableMultiSelect/index.js","webpack:///./src/ui/src/components/RedactionSearchOverlay/RedactionSearchMultiSelect/RedactionSearchMultiSelect.js","webpack:///./src/ui/src/components/RedactionSearchOverlay/RedactionSearchMultiSelect/index.js","webpack:///./src/ui/src/components/RedactionSearchOverlay/RedactionSearchOverlay.js","webpack:///./src/ui/src/helpers/multiSearch.js","webpack:///./src/ui/src/components/RedactionSearchOverlay/RedactionSearchOverlayContainer.js","webpack:///./src/ui/src/components/RedactionSearchOverlay/index.js","webpack:///./src/ui/src/components/RedactionSearchResultGroup/RedactionSearchResult/RedactionSearchResult.js","webpack:///./src/ui/src/components/RedactionSearchResultGroup/RedactionSearchResult/index.js","webpack:///./src/ui/src/components/RedactionSearchResultGroup/RedactionSearchResult/RedactionSearchResultContainer.js","webpack:///./src/ui/src/components/RedactionSearchResultGroup/RedactionSearchResultGroup.js","webpack:///./src/ui/src/components/RedactionSearchResultGroup/index.js","webpack:///./src/ui/src/constants/searchStatus.js","webpack:///./src/ui/src/components/RedactionSearchResults/RedactionSearchResults.js","webpack:///./src/ui/src/components/RedactionSearchResults/RedactionSearchResultsContainer.js","webpack:///./src/ui/src/components/RedactionSearchResults/index.js","webpack:///./src/ui/src/components/RedactionSearchPanel/RedactionSearchPanel.js","webpack:///./src/ui/src/hooks/useOnRedactionSearchCompleted/useOnRedactionSearchCompleted.js","webpack:///./src/ui/src/hooks/useOnRedactionSearchCompleted/index.js","webpack:///./src/ui/src/components/RedactionSearchPanel/index.js","webpack:///./src/ui/src/components/RedactionSearchPanel/RedactionSearchPanelContainer.js","webpack:///./src/ui/src/components/RedactionPanel/RedactionPanelContainer.js","webpack:///./src/ui/src/components/RedactionPanel/index.js"],"names":["NoteTextPreview","props","text","children","replace","panelWidth","linesToBreak","renderRichText","richTextStyle","resize","style","_props$comment","comment","_props$beforeContent","beforeContent","_useState2","_slicedToArray","useState","expanded","setExpand","_useState4","previewElementWidth","setPreviewWidth","_useState6","charsPerLine","setCharsperLine","_useState8","showPrompt","setShowPrompt","ref","React","useRef","t","useTranslation","textToDisplay","substring","prompt","noteTextPreviewClass","classNames","useEffect","textNodeWidth","current","clientWidth","useLayoutEffect","textWidth","context","document","createElement","getContext","font","measureText","width","getTextWidth","averageCharWidth","length","Math","floor","className","aria-live","onClick","event","stopPropagation","propTypes","PropTypes","number","func","any","bool","ReactSelectWebComponentProvider","_ref","emotionCache","useMemo","container","getRootNode","createCache","key","window","isApryseWebViewerWebComponent","CacheProvider","value","noop","annotations","onRedactionCompleted","arguments","undefined","activeDocumentViewerKey","dispatch","core","isWebViewerServerDocument","webViewerServerApply","webViewerApply","applyRedactions","then","results","url","downloadPdf","filename","includeAnnotations","externalURL","console","warn","warning","message","i18next","title","confirmBtnText","onConfirm","err","fireError","Promise","resolve","actions","showWarningMessage","module","exports","RedactionPanelContext","createContext","RedactionPanelProvider","useCore","selectedRedactionItemId","setSelectedRedactionItemId","isRedactionSearchActive","setIsRedactionSearchActive","activeSearchResultIndex","setActiveSearchResultIndex","onAnnotationSelected","action","redactionAnnotations","filter","annotation","Subject","selectedAnnotationId","Id","activeSearchResultChanged","newActiveSearchResult","newActiveSearchResultIndex","getPageSearchResults","findIndex","searchResult","isSearchResultEqual","addEventListener","removeEventListener","Provider","RedactionTextPreviewContainer","redactionPanelWidth","useSelector","state","selectors","getRedactionPanelWidth","shallowEqual","_extends","RedactionItem","isCustomUI","_selectors$getFeature","getFeatureFlags","customizableUI","iconColor","author","dateFormat","language","onRedactionItemDelete","onRedactionItemSelection","textPreview","isSelected","timezone","date","getLatestActivityDate","datetimeStr","toLocaleString","timeZone","Date","redactionPreview","formattedDate","dayjs","locale","format","dateAndAuthor","concat","label","_annotation$icon","icon","redactionType","redactionTypeMap","RedactionTextPreview","getContents","Button","ariaLabel","ariaCurrent","Icon","glyph","color","OverlayText","marginLeft","img","memo","RedactionItemContainer","_useContext","useContext","_useSelector2","getNoteDateFormat","getCurrentLanguage","getCustomNoteSelectionFunction","getTimezone","customNoteSelectionFunction","getCustomData","StrokeColor","toString","getDisplayAuthor","useCallback","deselectAllAnnotations","selectAnnotation","jumpToAnnotation","deleteAnnotations","RedactionPageGroup","pageNumber","redactionItems","CollapsibleSection","header","expansionDescription","headingLevel","map","redactionItem","oneOfType","string","array","RedactionPageGroupContainer","sortedRedactionItems","setSortedRedactionItems","getSortStrategies","getSortedNotes","RedactionPanel","applyAllRedactions","deleteAllRedactionAnnotations","redactionTypesDictionary","redactionPageMap","setRedactionPageMap","redactionPageNumbers","setRedactionPageNumbers","isTestMode","forEach","mapAnnotationToRedactionType","PageNumber","_toConsumableArray","Object","keys","testModeProps","noRedactionAnnotations","redactAllButtonClassName","disabled","clearAllButtonClassName","applyAllRedactionsWithFocusHandler","useFocusHandler","Fragment","initialItemCount","Virtuoso","data","itemContent","index","dataElement","DataElements","REDACT_ALL_MARKED_BUTTON","CreatableMultiSelect","id","rest","_objectWithoutProperties","_excluded","htmlFor","onTouchEndCapture","e","CreatableSelect","isMulti","inputId","defaultProps","getColorForMode","isDarkMode","darkModeColor","lightModeColor","isFocused","renderRedactionOption","RedactionOption","components","Option","object","isRequired","MultiValueLabel","_ref2","tabIndex","display","height","CustomControl","_ref3","Control","MultiValueRemove","updatedProps","_objectSpread","innerProps","onKeyDown","node","RedactionSearchMultiSelect","activeTheme","redactionSearchOptions","redactionGroup","options","styles","groupHeading","base","textTransform","fontSize","fontWeight","COMMON_COLORS","CUSTOM_UI_VARS","paddingBottom","paddingLeft","paddingTop","group","padding","menu","borderRadius","overflowY","margin","menuList","backgroundColor","multiValue","whiteSpace","multiValueRemove","boxShadow","option","outline","noOptionsMessage","valueContainer","maxHeight","isMobileSize","control","minHeight","borderColor","placeholder","input","getStyles","IndicatorsContainer","formatCreateLabel","buildSearchOptions","searchTerms","textSearch","caseSensitive","searchTerm","type","push","regex","ignoreCase","RedactionSearchOverlay","setSearchTerms","executeRedactionSearch","translatedOptions","DataElementWrapper","onFocus","onCreateOption","newValue","textTerm","updatedSearchTerms","onChange","multiSearch","store","getState","redactionSearchPatterns","getRedactionSearchPatterns","searchOptionsMap","reduce","_redactionSearchPatte","searchArray","searchType","searchRegex","source","searchString","join","searchTextFullFactory","searchTextFull","clearSearchResults","multiSearchFactory","RedactionSearchOverlayContainer","useStore","getActiveTheme","values","pattern","RedactionSearchResult","isChecked","onClickResult","isActive","ambientStr","displayResult","resultStrStart","resultStrEnd","resultStr","searchValue","slice","textBeforeSearchValue","textAfterSearchValue","displayRedactionSearchResult","searchResultClassname","active","aria-label","aria-current","Choice","checked","RedactionSearchResultContainer","checkResult","setActiveSearchResult","RedactionSearchResultGroup","searchResults","selectedSearchResultIndexes","setSelectedSearchResultIndexes","groupResultIndexes","result","allItemsChecked","setAllItemsChecked","allResultsSelected","allSelected","currentIndex","checkAllResults","target","resultIndex","RedactionSearchResults","redactionSearchResults","searchStatus","onCancelSearch","isProcessingRedactionResults","markSelectedResultsForRedaction","redactSelectedResults","redactionSearchResultPageMap","setRedactionSearchResultPageMap","selectedSearchResultIndexesMap","setSelectedSearchResultIndexesMap","selectedIndexes","setSelectedIndexes","pageNum","selectedIndexesMap","redactionSearchResult","noResults","role","isEmptyList","resultsContainerClass","emptyList","redactAllButtonClass","markAllForRedactionButtonClass","shouldShowResultsCounterOptions","SearchStatus","flexGrow","Spinner","searchResultIndexMap","resultGroupPageNumbers","renderSearchResults","ToolNames","Core","Tools","defaultRedactionStyles","Annotations","Color","TextColor","Font","createRedactionAnnotations","activeToolStyles","FillColor","_activeToolStyles$Fon","FontSize","TextAlign","redaction","RedactionAnnotation","page_num","Quads","quads","quad","getPoints","Utilities","calculateAutoFontSize","setContents","result_str","Author","getCurrentUser","setCustomData","RedactionSearchResultsContainer","useDispatch","getActiveToolStyles","getActiveToolName","activeToolName","tool","getTool","REDACTION","alternativeDefaultStyles","defaults","includes","getAnnotationManager","addAnnotations","RedactionSearchPanel","clearRedactionSearchResults","isMobile","closeElement","useOnRedactionSearchCompleted","setSearchStatus","setRedactionSearchResults","setIsProcessingRedactionResults","searchPatterns","mapResultToType","resultType","find","test","_ref$icon","onSearchResultsChanged","mappedResults","searchInProgressEventHandler","isSearching","setTimeout","ReactionSearchPanelContainer","_useOnRedactionSearch","RedactionPanelContainer","isElementOpen","isElementDisabled","isInDesktopOnlyMode","getCustomApplyRedactionsHandler","isOpen","isDisabled","customApplyRedactionsHandler","redactionAnnotationsList","isCustomPanel","defaultRedactionTypes","closeRedactionPanel","tempDataElement","minWidth","renderNull","setRenderNull","timeout","clearTimeout","dataElementToUse","originalApplyRedactions","callOnRedactionCompleted","RedactionPanelContainerWithProvider"],"mappings":"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","file":"chunks/chunk.31.js","sourcesContent":["import React, { useState, useEffect, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\n\nimport './NoteTextPreview.scss';\n\nfunction NoteTextPreview(props) {\n  /* This replace is to remove the break line that the React Quill component add into the text */\n  const text = props.children.replace(/\\n$/, '');\n  const {\n    panelWidth,\n    linesToBreak,\n    renderRichText,\n    richTextStyle,\n    resize,\n    style,\n    /* If text being previewed is a comment it gets a darker font color */\n    comment = false,\n    beforeContent = () => {},\n  } = props;\n  const [expanded, setExpand] = useState(false);\n  const [previewElementWidth, setPreviewWidth] = useState(null);\n  const [charsPerLine, setCharsperLine] = useState(null);\n  const [showPrompt, setShowPrompt] = useState(false);\n  const ref = React.useRef(null);// Must import this way in order to mock it properly\n  const { t } = useTranslation();\n\n  const onClickHandler = (event) => {\n    event.stopPropagation();\n    setExpand(!expanded);\n    resize && resize();\n  };\n\n  const textToDisplay = expanded ? text : text.substring(0, charsPerLine * linesToBreak);\n  const prompt = expanded ? t('action.showLess') : t('action.showMore');\n  const noteTextPreviewClass = classNames('note-text-preview', { 'preview-comment': comment });\n\n  useEffect(() => {\n    const textNodeWidth = ref.current.clientWidth;\n    setPreviewWidth(textNodeWidth);\n  }, [panelWidth]);\n\n  // useLayoutEffect to avoid a flicker before we get the final text prop\n  useLayoutEffect(() => {\n    function getTextWidth(text) {\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      context.font = '13px sans-serif';\n\n      return context.measureText(text).width;\n    }\n\n    const textWidth = getTextWidth(text);\n    const averageCharWidth = textWidth / text.length;\n    const charsPerLine = Math.floor(previewElementWidth / averageCharWidth);\n    setCharsperLine(charsPerLine);\n\n    const totalLines = textWidth / previewElementWidth;\n    setShowPrompt(totalLines > linesToBreak);\n  }, [text, previewElementWidth]);\n\n  return (\n    <div className={noteTextPreviewClass} ref={ref} style={style} aria-live=\"polite\">\n      {beforeContent()}\n      {renderRichText && richTextStyle\n        ? renderRichText(textToDisplay, richTextStyle, 0)\n        : textToDisplay} {showPrompt && <button className=\"note-text-preview-prompt\" onClick={onClickHandler}>{prompt}</button>}\n    </div>\n  );\n}\n\nNoteTextPreview.propTypes = {\n  panelWidth: PropTypes.number,\n  linesToBreak: PropTypes.number,\n  renderRichText: PropTypes.func,\n  richTextStyle: PropTypes.any,\n  resize: PropTypes.func,\n  style: PropTypes.any,\n  comment: PropTypes.bool,\n  beforeContent: PropTypes.func,\n};\n\nexport default NoteTextPreview;","import React, { useMemo } from 'react';\nimport createCache from '@emotion/cache';\nimport { CacheProvider } from '@emotion/react'; // Emotion's CacheProvider\nimport getRootNode from 'helpers/getRootNode';\n\nconst ReactSelectWebComponentProvider = ({ children }) => {\n  // Memoize the cache so it's created only once per container (shadow DOM root)\n  const emotionCache = useMemo(() => {\n    const container = getRootNode(); // Ensure we get the root node of the shadow DOM\n    return createCache({\n      key: 'wv-react-select-emotion', // Unique key for the cache\n      container, // Set the container to the shadow DOM root for styles insertion\n    });\n  }, []);\n\n  // Render with CacheProvider for emotion when inside a web component\n  return window.isApryseWebViewerWebComponent ? (\n    <CacheProvider value={emotionCache}>\n      {children}\n    </CacheProvider>\n  ) : (\n    children\n  );\n};\n\nexport default ReactSelectWebComponentProvider;","import ReactSelectWebComponentProvider from './ReactSelectWebComponentProvider';\n\nexport default ReactSelectWebComponentProvider;","import core from 'core';\nimport i18next from 'i18next';\n\nimport actions from 'actions';\nimport { fireError } from 'helpers/fireEvent';\nimport downloadPdf from 'helpers/downloadPdf';\n\nfunction noop() { }\n\nexport default (annotations, onRedactionCompleted = noop, activeDocumentViewerKey = 1) => (dispatch) => {\n  if (core.isWebViewerServerDocument()) {\n    // when are using Webviewer Server, it'll download the redacted document\n    return webViewerServerApply(annotations, dispatch, activeDocumentViewerKey);\n  }\n  return webViewerApply(annotations, onRedactionCompleted, dispatch, activeDocumentViewerKey);\n};\n\nconst webViewerServerApply = (annotations, dispatch, activeDocumentViewerKey) => core.applyRedactions(annotations, activeDocumentViewerKey).then((results) => {\n  if (results && results.url) {\n    return downloadPdf(dispatch, {\n      filename: 'redacted.pdf',\n      includeAnnotations: true,\n      externalURL: results.url,\n    });\n  }\n  console.warn('WebViewer Server did not return a valid result');\n});\n\nconst webViewerApply = (annotations, onRedactionCompleted, dispatch, activeDocumentViewerKey) => {\n  const message = i18next.t('warning.redaction.applyMessage');\n  const title = i18next.t('warning.redaction.applyTile');\n  const confirmBtnText = i18next.t('action.apply');\n\n  const warning = {\n    message,\n    title,\n    confirmBtnText,\n    onConfirm: () => {\n      core.applyRedactions(annotations, activeDocumentViewerKey)\n        .then(() => {\n          onRedactionCompleted();\n        })\n        .catch((err) => fireError(err));\n      return Promise.resolve();\n    },\n  };\n\n  return dispatch(actions.showWarningMessage(warning));\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useEffect } from 'react';\nimport useCore from 'hooks/useCore';\n\n\nconst RedactionPanelContext = React.createContext();\n\nconst RedactionPanelProvider = ({ children }) => {\n  const { core } = useCore();\n  const [selectedRedactionItemId, setSelectedRedactionItemId] = useState(null);\n  const [isRedactionSearchActive, setIsRedactionSearchActive] = useState(false);\n  const [activeSearchResultIndex, setActiveSearchResultIndex] = useState(-1);\n\n  useEffect(() => {\n    const onAnnotationSelected = (annotations, action) => {\n      if (action === 'selected') {\n        const redactionAnnotations = annotations.filter((annotation) => annotation.Subject === 'Redact');\n        // If multiple ones selected, we only use the first one\n        const selectedAnnotationId = redactionAnnotations.length > 0 ? redactionAnnotations[0].Id : null;\n        setSelectedRedactionItemId(selectedAnnotationId);\n      } else {\n        setSelectedRedactionItemId(null);\n      }\n    };\n\n    const activeSearchResultChanged = (newActiveSearchResult) => {\n      if (!newActiveSearchResult) {\n        return;\n      }\n      const coreSearchResults = core.getPageSearchResults() || [];\n      const newActiveSearchResultIndex = coreSearchResults.findIndex((searchResult) => {\n        return core.isSearchResultEqual(searchResult, newActiveSearchResult);\n      });\n      setActiveSearchResultIndex(newActiveSearchResultIndex);\n    };\n\n    core.addEventListener('annotationSelected', onAnnotationSelected);\n    core.addEventListener('activeSearchResultChanged', activeSearchResultChanged);\n\n    return () => {\n      core.removeEventListener('annotationSelected', onAnnotationSelected);\n      core.removeEventListener('activeSearchResultChanged', activeSearchResultChanged);\n    };\n  }, []);\n\n  const value = {\n    selectedRedactionItemId,\n    setSelectedRedactionItemId,\n    isRedactionSearchActive,\n    setIsRedactionSearchActive,\n    activeSearchResultIndex\n  };\n\n  return <RedactionPanelContext.Provider value={value}>{children}</RedactionPanelContext.Provider>;\n};\n\nexport { RedactionPanelProvider, RedactionPanelContext };\n","import React from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteTextPreview from '../NoteTextPreview/NoteTextPreview';\n\nconst RedactionTextPreviewContainer = (props) => {\n  const [redactionPanelWidth] = useSelector(\n    (state) => [\n      selectors.getRedactionPanelWidth(state),\n    ],\n    shallowEqual,\n  );\n\n  return (\n    <NoteTextPreview {...props} panelWidth={redactionPanelWidth} comment />\n  );\n};\n\nexport default RedactionTextPreviewContainer;","import RedactionTextPreviewContainer from './RedactionTextPreviewContainer';\n\nexport default RedactionTextPreviewContainer;","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Icon from 'src/components/Icon';\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport dayjs from 'dayjs';\nimport Button from 'components/Button';\nimport './RedactionItem.scss';\nimport RedactionTextPreview from 'components/RedactionTextPreview';\nimport classNames from 'classnames';\nimport { redactionTypeMap } from 'constants/redactionTypes';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nconst RedactionItem = (props) => {\n  // Remove if we get rid of legacy UI along with stylesheet changes\n  const [isCustomUI] = useSelector(\n    (state) => [\n      selectors.getFeatureFlags(state)?.customizableUI,\n    ]\n  );\n  const {\n    iconColor,\n    annotation,\n    author,\n    dateFormat,\n    language,\n    onRedactionItemDelete,\n    onRedactionItemSelection,\n    textPreview,\n    isSelected,\n    timezone,\n  } = props;\n  const { t } = useTranslation();\n\n  let date = getLatestActivityDate(annotation);\n\n  if (timezone) {\n    const datetimeStr = date.toLocaleString('en-US', { timeZone: timezone });\n    date = new Date(datetimeStr);\n  }\n\n  const formattedDate = date ? dayjs(date).locale(language).format(dateFormat) : t('option.notesPanel.noteContent.noDate');\n  const dateAndAuthor = `${author} - ${formattedDate}`;\n  const className = classNames('redaction-item', { 'redaction-item-selected': isSelected }, { 'modular-ui': isCustomUI });\n  const {\n    label,\n    icon = 'icon-text-redaction', // Default icon if none provided\n    redactionType\n  } = annotation;\n\n  let redactionPreview;\n\n  if (redactionType === redactionTypeMap['TEXT']) {\n    redactionPreview = (\n      <RedactionTextPreview linesToBreak={2}>\n        {textPreview}\n      </RedactionTextPreview>);\n  } else if (\n    redactionType === redactionTypeMap['FULL_PAGE']\n    || redactionType === redactionTypeMap['FULL_VIDEO_FRAME']\n    || redactionType === redactionTypeMap['REGION']\n    || redactionType === redactionTypeMap['AUDIO_REDACTION']\n    || redactionType === redactionTypeMap['FULL_VIDEO_FRAME_AND_AUDIO']\n  ) {\n    redactionPreview = t(label);\n  } else {\n    redactionPreview = annotation.getContents();\n  }\n\n  return (\n    <li className={className}>\n      <Button\n        className='redaction-item-button'\n        onClick={onRedactionItemSelection}\n        ariaLabel={`${redactionPreview} ${dateAndAuthor} ${t('action.select')}`}\n        ariaCurrent={isSelected}\n      />\n      <div className=\"redaction-icon-container\">\n        <Icon glyph={icon} color={iconColor} />\n      </div>\n      <div className=\"redaction-item-info\">\n        <div className=\"redaction-item-preview\">\n          {redactionPreview}\n        </div>\n        {\n          annotation.OverlayText ?\n            <div className=\"redaction-item-label-text\">\n              {t('option.stylePopup.labelText')}: {annotation.OverlayText}\n            </div> : null\n        }\n        <div className=\"redaction-item-date-author\">\n          {dateAndAuthor}\n        </div>\n      </div>\n      <Button\n        className='redaction-item-delete'\n        style={{ marginLeft: 'auto' }}\n        img={'icon-close'}\n        onClick={onRedactionItemDelete}\n        ariaLabel={`${redactionPreview} ${dateAndAuthor} ${t('action.delete')}`}\n      />\n    </li>\n  );\n};\n\nexport default React.memo(RedactionItem);","import React, { useCallback, useContext } from 'react';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport RedactionItem from './RedactionItem';\nimport useCore from 'hooks/useCore';\nimport { RedactionPanelContext } from '../../RedactionPanel/RedactionPanelContext';\n\nconst RedactionItemContainer = (props) => {\n  const { annotation } = props;\n  const { core } = useCore();\n\n  const { selectedRedactionItemId, setSelectedRedactionItemId } = useContext(RedactionPanelContext);\n\n  const [\n    dateFormat,\n    language,\n    customNoteSelectionFunction,\n    timezone,\n  ] = useSelector(\n    (state) => [\n      selectors.getNoteDateFormat(state),\n      selectors.getCurrentLanguage(state),\n      selectors.getCustomNoteSelectionFunction(state),\n      selectors.getTimezone(state)\n    ],\n    shallowEqual,\n  );\n\n  const textPreview = annotation.getCustomData('trn-annot-preview');\n  const iconColor = annotation.StrokeColor.toString();\n  const author = core.getDisplayAuthor(annotation['Author']);\n\n  const onRedactionItemSelection = useCallback(() => {\n    customNoteSelectionFunction && customNoteSelectionFunction(annotation);\n    core.deselectAllAnnotations();\n    core.selectAnnotation(annotation);\n    core.jumpToAnnotation(annotation);\n    setSelectedRedactionItemId(annotation.Id);\n  }, [annotation]);\n\n  const onRedactionItemDelete = useCallback(() => {\n    core.deleteAnnotations([annotation]);\n  }, [annotation]);\n\n  return (\n    <RedactionItem\n      dateFormat={dateFormat}\n      language={language}\n      timezone={timezone}\n      author={author}\n      annotation={annotation}\n      iconColor={iconColor}\n      textPreview={textPreview}\n      onRedactionItemDelete={onRedactionItemDelete}\n      onRedactionItemSelection={onRedactionItemSelection}\n      isSelected={selectedRedactionItemId === annotation.Id}\n    />\n  );\n};\n\nexport default RedactionItemContainer;\n","import RedactionItemContainer from './RedactionItemContainer';\n\nexport default RedactionItemContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RedactionItem from './RedactionItem';\nimport CollapsibleSection from 'components/CollapsibleSection';\nimport { useTranslation } from 'react-i18next';\n\nimport './RedactionPageGroup.scss';\n\nconst RedactionPageGroup = (props) => {\n  const {\n    pageNumber,\n    redactionItems,\n  } = props;\n\n  const { t } = useTranslation();\n\n  const header = () => {\n    return (\n      `${t('option.shared.page')} ${pageNumber}`\n    );\n  };\n\n  return (\n    <CollapsibleSection\n      className=\"redaction-page-group\"\n      header={header}\n      expansionDescription={`${t('option.shared.page')} ${pageNumber} ${t('redactionPanel.redactionItems')}`}\n      headingLevel={2}\n    >\n      <ul className=\"redaction-items\">\n        {redactionItems.map((redactionItem) => (\n          <RedactionItem\n            annotation={redactionItem}\n            key={`${redactionItem.Id}-${pageNumber}`}\n          />\n        ))}\n      </ul>\n    </CollapsibleSection>\n  );\n};\n\nRedactionPageGroup.propTypes = {\n  pageNumber: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  redactionItems: PropTypes.array,\n};\n\nexport default RedactionPageGroup;","import React, { useEffect, useState } from 'react';\nimport RedactionPageGroup from './RedactionPageGroup';\nimport { getSortStrategies } from 'constants/sortStrategies';\n\nconst RedactionPageGroupContainer = (props) => {\n  // Putting this in the container in case we want to allow users to change sort strategies\n  // which are stored in the application state\n  const { redactionItems } = props;\n  // Sorting strategies can be applied to any list of annotations\n  const [sortedRedactionItems, setSortedRedactionItems] = useState([]);\n  useEffect(() => {\n    setSortedRedactionItems(getSortStrategies()['position'].getSortedNotes(redactionItems));\n  }, [redactionItems]);\n  return (\n    <RedactionPageGroup\n      redactionItems={sortedRedactionItems}\n      {...props}\n    />\n  );\n};\n\nexport default RedactionPageGroupContainer;","import RedactionPageGroupContainer from './RedactionPageGroupContainer';\n\nexport default RedactionPageGroupContainer;","import React, { useEffect, useState, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport Icon from 'components/Icon';\nimport { Virtuoso } from 'react-virtuoso';\nimport { RedactionPanelContext } from './RedactionPanelContext';\nimport { mapAnnotationToRedactionType } from 'constants/redactionTypes';\nimport Button from 'components/Button';\n\nimport './RedactionPanel.scss';\nimport RedactionPageGroup from '../RedactionPageGroup';\nimport DataElements from 'src/constants/dataElement';\nimport useFocusHandler from 'hooks/useFocusHandler';\n\nconst RedactionPanel = (props) => {\n  const {\n    redactionAnnotations,\n    applyAllRedactions,\n    deleteAllRedactionAnnotations,\n    redactionTypesDictionary,\n  } = props;\n\n  const { t } = useTranslation();\n  const [redactionPageMap, setRedactionPageMap] = useState({});\n  const [redactionPageNumbers, setRedactionPageNumbers] = useState([]);\n  // The following prop is needed only for the tests to actually render a list of results\n  // it only is ever injected in the tests\n  const { isTestMode } = useContext(RedactionPanelContext);\n\n  useEffect(() => {\n    const redactionPageMap = {};\n    redactionAnnotations.forEach((annotation) => {\n      const redactionType = mapAnnotationToRedactionType(annotation);\n      const { label, icon } = redactionTypesDictionary[redactionType] || {\n        icon: 'icon-tool-redaction-area',\n        label: 'redactionPanel.redactionItem.regionRedaction'\n      };\n      annotation.label = label;\n      annotation.icon = icon;\n      annotation.redactionType = redactionType;\n\n      const pageNumber = annotation.PageNumber;\n      if (redactionPageMap[pageNumber] === undefined) {\n        redactionPageMap[pageNumber] = [annotation];\n      } else {\n        redactionPageMap[pageNumber] = [annotation, ...redactionPageMap[pageNumber]];\n      }\n    });\n\n    setRedactionPageMap(redactionPageMap);\n    setRedactionPageNumbers(Object.keys(redactionPageMap));\n  }, [redactionAnnotations]);\n\n  const renderRedactionPageGroups = () => {\n    // Needed for the tests to actually render a list of results\n    // Not needed for the actual app; if we set it it kills performance when there are a lot of annotations\n    const testModeProps = isTestMode ? { initialItemCount: redactionPageNumbers.length } : {};\n    return (\n      <div className=\"redaction-group-container\">\n        <Virtuoso\n          data={redactionPageNumbers}\n          itemContent={(index, pageNumber) => {\n            return (\n              <RedactionPageGroup\n                key={index}\n                pageNumber={pageNumber}\n                redactionItems={redactionPageMap[pageNumber]}\n              />);\n          }}\n          {...testModeProps}\n        />\n      </div>\n    );\n  };\n\n  const noRedactionAnnotations = (\n    <div className=\"no-marked-redactions\">\n      <div>\n        <Icon className=\"empty-icon\" glyph=\"icon-no-marked-redactions\" />\n      </div>\n      <div className=\"msg\">{t('redactionPanel.noMarkedRedactions')}</div>\n    </div>\n  );\n\n  const redactAllButtonClassName = classNames('redact-all-marked', { disabled: redactionAnnotations.length === 0 });\n  const clearAllButtonClassName = classNames('clear-all-marked', { disabled: redactionAnnotations.length === 0 });\n\n  const applyAllRedactionsWithFocusHandler = useFocusHandler(applyAllRedactions);\n  return (\n    <>\n      <h2 className=\"marked-redaction-counter\">\n        {t('redactionPanel.redactionCounter')}\n        <span>\n          {` (${redactionAnnotations.length})`}\n        </span>\n      </h2>\n      {redactionPageNumbers.length > 0 ? renderRedactionPageGroups() : noRedactionAnnotations}\n      <div className=\"redaction-panel-controls\">\n        <Button\n          disabled={redactionAnnotations.length === 0}\n          className={clearAllButtonClassName}\n          onClick={deleteAllRedactionAnnotations}\n          label={t('redactionPanel.clearMarked')}\n        />\n        <Button\n          disabled={redactionAnnotations.length === 0}\n          className={redactAllButtonClassName}\n          onClick={applyAllRedactionsWithFocusHandler}\n          dataElement={DataElements.REDACT_ALL_MARKED_BUTTON}\n          label={t('redactionPanel.redactAllMarked')}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default RedactionPanel;","import React from 'react';\nimport CreatableSelect from 'react-select/creatable';\nimport ReactSelectWebComponentProvider from '../ReactSelectWebComponentProvider';\nimport './CreatableMultiSelect.scss';\nimport PropTypes from 'prop-types';\n\nconst CreatableMultiSelect = ({ id, label, ...rest }) => {\n  return (\n    <ReactSelectWebComponentProvider>\n      <label htmlFor={id} className=\"creatable-multi-select-label\">{label}</label>\n      <div onTouchEndCapture={(e) => e.stopPropagation()}>\n        <CreatableSelect\n          isMulti\n          {...rest}\n          inputId={id}\n        />\n      </div>\n    </ReactSelectWebComponentProvider>\n  );\n};\n\nCreatableMultiSelect.propTypes = {\n  id: PropTypes.string,\n  label: PropTypes.string,\n};\n\nCreatableMultiSelect.defaultProps = {\n  id: '',\n  label: '',\n};\n\nexport default CreatableMultiSelect;","import CreatableMultiSelect from './CreatableMultiSelect';\n\nexport default CreatableMultiSelect;","import React from 'react';\nimport { components } from 'react-select';\nimport Icon from 'components/Icon';\nimport CreatableMultiSelect from 'components/CreatableMultiSelect';\nimport { useTranslation } from 'react-i18next';\nimport { COMMON_COLORS, CUSTOM_UI_VARS } from 'constants/commonColors';\nimport PropTypes from 'prop-types';\nimport './RedactionSearchMultiSelect.scss';\nimport { isMobileSize } from 'helpers/getDeviceSize';\n\nconst getColorForMode = (isDarkMode, darkModeColor, lightModeColor, isFocused = true) => {\n  if (isFocused) {\n    return isDarkMode ? darkModeColor : lightModeColor;\n  }\n  return 'transparent';\n};\n\nconst getContainerMaxHeight = () => {\n  if (isMobileSize()) {\n    return '55px';\n  }\n  return '70px';\n};\n\nconst getStyles = (isDarkMode) => ({\n  groupHeading: (base) => ({\n    ...base,\n    textTransform: 'none',\n    fontSize: '13px',\n    fontWeight: 'bold',\n    color: getColorForMode(isDarkMode, COMMON_COLORS['white'], CUSTOM_UI_VARS['text-color']),\n    paddingBottom: '8px',\n    paddingLeft: '8px',\n    paddingTop: '10px',\n  }),\n  group: (base) => ({\n    ...base,\n    padding: '0px',\n  }),\n  menu: (base) => ({\n    ...base,\n    padding: '0px 0px 0px 0px',\n    borderRadius: '4px',\n    overflowY: 'visible',\n    margin: '0'\n  }),\n  menuList: (base) => ({\n    ...base,\n    padding: '0px',\n    backgroundColor: getColorForMode(isDarkMode, COMMON_COLORS['black'], COMMON_COLORS['gray0']),\n    overflowY: 'visible',\n    borderRadius: '4px',\n  }),\n  multiValue: (base) => ({\n    ...base,\n    backgroundColor: getColorForMode(isDarkMode, COMMON_COLORS['blue1DarkMode'], COMMON_COLORS['gray2']),\n    padding: '2px 8px',\n    fontSize: '13px',\n    borderRadius: '4px',\n    overflowY: 'hidden',\n    whiteSpace: 'nowrap',\n    color: getColorForMode(isDarkMode, COMMON_COLORS['white'], CUSTOM_UI_VARS['text-color'])\n  }),\n  multiValueRemove: (base) => ({\n    ...base,\n    color: COMMON_COLORS['gray6'],\n    borderRadius: '4px',\n    marginLeft: '4px',\n    padding: '0px',\n    '&:hover': {\n      backgroundColor: COMMON_COLORS['gray2'],\n      boxShadow: `inset 0 0 0 1px ${COMMON_COLORS['blue6']}`,\n      color: COMMON_COLORS['gray6'],\n    },\n    'svg': {\n      color: COMMON_COLORS['gray6'],\n      height: '16px',\n      width: '16px',\n    },\n  }),\n  option: (base, { isFocused }) => ({\n    ...base,\n    display: 'flex',\n    fontSize: '13px',\n    padding: '6px 8px 0',\n    outline: isFocused ? 'var(--focus-visible-outline)' : undefined,\n    '&:hover': {\n      backgroundColor: getColorForMode(isDarkMode, COMMON_COLORS['blue1DarkMode'], CUSTOM_UI_VARS['primary-button-hover']),\n      color: COMMON_COLORS['gray0'],\n    },\n    backgroundColor: getColorForMode(isDarkMode, COMMON_COLORS['blue1DarkMode'], COMMON_COLORS['gray0']),\n    overflowY: 'visible',\n    whiteSpace: 'normal',\n    '&:last-child': {\n      borderRadius: '0 0 4px 4px',\n      paddingBottom: '6px',\n    },\n  }),\n  noOptionsMessage: (base) => ({\n    ...base,\n    color: CUSTOM_UI_VARS['text-color'],\n  }),\n  valueContainer: (base) => ({\n    ...base,\n    padding: '1px',\n    maxHeight: getContainerMaxHeight(),\n    overflowY: 'scroll',\n  }),\n  control: (base) => ({\n    ...base,\n    backgroundColor: getColorForMode(isDarkMode, COMMON_COLORS['gray10'], COMMON_COLORS['white']),\n    minHeight: '28px',\n    borderColor: getColorForMode(isDarkMode, COMMON_COLORS['gray8'], COMMON_COLORS['gray6']),\n    '&:focus-within': {\n      borderColor: getColorForMode(isDarkMode, COMMON_COLORS['gray8'], COMMON_COLORS['blue5']),\n    },\n    // override the default border color on focus\n    '&:hover': {\n      borderColor: getColorForMode(isDarkMode, COMMON_COLORS['gray8'], COMMON_COLORS['gray6']),\n    },\n    boxShadow: 'none !important',\n  }),\n  placeholder: (base) => ({\n    ...base,\n    fontSize: '13px',\n    color: getColorForMode(isDarkMode, COMMON_COLORS['gray7'], COMMON_COLORS['gray5']),\n    paddingLeft: '4px',\n  }),\n  input: (base) => ({\n    ...base,\n    fontSize: '13px',\n    color: getColorForMode(isDarkMode, COMMON_COLORS['white'], CUSTOM_UI_VARS['text-color']),\n    paddingLeft: '3px',\n  }),\n});\n\nconst renderRedactionOption = (icon, label) => (\n  <span className='redactionOption'>\n    {icon && <Icon glyph={icon} />}\n    {label}\n  </span>\n);\n\nconst RedactionOption = (props) => {\n  const { data } = props;\n  return (\n    <components.Option {...props}>\n      {renderRedactionOption(data.icon, data.label)}\n    </components.Option>\n  );\n};\n\nRedactionOption.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nconst MultiValueLabel = ({ data }) => {\n  return (\n    <div tabIndex={0} style={{ display: 'flex', height: '18px' }}>\n      {renderRedactionOption(data.icon, data.label)}\n    </div>\n  );\n};\n\nMultiValueLabel.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nconst CustomControl = ({ children, ...props }) => (\n  <components.Control {...props}>\n    <div className=\"redaction-search-multi-select-search-icon-container\">\n      <Icon className=\"redaction-search-multi-select-search-icon\" glyph=\"icon-header-search\" />\n    </div>\n    {children}\n  </components.Control>\n);\n\nconst MultiValueRemove = (props) => {\n  const { t } = useTranslation();\n  const label = props.data.label;\n\n  const handleKeyDown = (event) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      // Trigger the removal action when Enter or Space is pressed\n      event.stopPropagation();\n      props.innerProps.onClick();\n    }\n  };\n\n  const updatedProps = {\n    ...props,\n    innerProps: {\n      ...props.innerProps,\n      'aria-label': `${t('action.remove')} ${label}`,\n      tabIndex: 0,\n      onKeyDown: handleKeyDown, // Add the keydown handler for accessibility\n    }\n  };\n\n  return (\n    <components.MultiValueRemove {...updatedProps} />\n  );\n};\n\nCustomControl.propTypes = {\n  children: PropTypes.node,\n};\n\nconst RedactionSearchMultiSelect = (props) => {\n  const { t } = useTranslation();\n  const { activeTheme, redactionSearchOptions } = props;\n\n  const redactionGroup = [\n    {\n      label: t('redactionPanel.search.pattern'),\n      options: redactionSearchOptions,\n    },\n  ];\n\n  const isDarkMode = activeTheme === 'dark';\n  const styles = getStyles(isDarkMode);\n\n  return (\n    <CreatableMultiSelect\n      options={redactionGroup}\n      styles={styles}\n      components={{ Option: RedactionOption, MultiValueLabel, IndicatorsContainer: () => null, Control: CustomControl, MultiValueRemove }}\n      placeholder={''}\n      formatCreateLabel={(value) => `${t('component.searchPanel')} ${value}`}\n      id=\"redaction-search-multi-select\"\n      label={t('redactionPanel.redactionSearchPlaceholder')}\n      {...props}\n    />\n  );\n};\n\nRedactionSearchMultiSelect.propTypes = {\n  activeTheme: PropTypes.string.isRequired,\n  redactionSearchOptions: PropTypes.array.isRequired,\n};\n\nexport default RedactionSearchMultiSelect;\n","import RedactionSearchMultiSelect from './RedactionSearchMultiSelect';\n\nexport default RedactionSearchMultiSelect;","import React from 'react';\nimport DataElementWrapper from '../DataElementWrapper';\nimport RedactionSearchMultiSelect from './RedactionSearchMultiSelect';\nimport { redactionTypeMap } from 'constants/redactionTypes';\nimport './RedactionSearchOverlay.scss';\nimport { useTranslation } from 'react-i18next';\n\nconst buildSearchOptions = (searchTerms) => {\n  const options = {\n    textSearch: [],\n    caseSensitive: true,\n  };\n\n  if (!searchTerms) {\n    return options;\n  }\n\n  searchTerms.forEach((searchTerm) => {\n    const { type } = searchTerm;\n    if (type === redactionTypeMap['TEXT']) {\n      options.textSearch.push(searchTerm.label);\n    } else {\n      options[type] = true;\n    }\n    if (searchTerm.regex) {\n      options.caseSensitive = options.caseSensitive && !searchTerm.regex.ignoreCase;\n    }\n  });\n\n  return options;\n};\n\nconst RedactionSearchOverlay = (props) => {\n  const {\n    setIsRedactionSearchActive,\n    searchTerms,\n    setSearchTerms,\n    executeRedactionSearch,\n    activeTheme,\n    redactionSearchOptions,\n  } = props;\n  const [t] = useTranslation();\n\n  const translatedOptions = redactionSearchOptions.map((option) => ({\n    ...option,\n    label: t(option.label),\n  }));\n\n  const handleChange = (updatedSearchTerms) => {\n    setSearchTerms(updatedSearchTerms);\n    const options = buildSearchOptions(updatedSearchTerms);\n    executeRedactionSearch(options);\n  };\n\n  const handleCreate = (newValue) => {\n    const textTerm = {\n      label: newValue,\n      value: newValue,\n      type: redactionTypeMap['TEXT']\n    };\n    // Initially search terms are null so we safeguard against this\n    const nonNullSearchTerms = searchTerms || [];\n    const updatedSearchTerms = [...nonNullSearchTerms, textTerm];\n    setSearchTerms(updatedSearchTerms);\n    const options = buildSearchOptions(updatedSearchTerms);\n    options.caseSensitive = false;\n    executeRedactionSearch(options);\n  };\n\n  return (\n    <DataElementWrapper\n      className=\"RedactionSearchOverlay\"\n      dataElement=\"redactionSearchOverlay\"\n    >\n      <RedactionSearchMultiSelect\n        onFocus={() => setIsRedactionSearchActive(true)}\n        value={searchTerms}\n        onCreateOption={handleCreate}\n        onChange={handleChange}\n        activeTheme={activeTheme}\n        redactionSearchOptions={translatedOptions}\n      />\n\n    </DataElementWrapper>\n\n  );\n};\n\nexport default RedactionSearchOverlay;","import searchTextFullFactory from '../apis/searchTextFull';\nimport selectors from 'selectors';\nimport core from 'core';\n\n\nfunction multiSearch(store) {\n  return function multiSearch(searchTerms) {\n    const { getState } = store;\n    const state = getState();\n    const redactionSearchPatterns = selectors.getRedactionSearchPatterns(state);\n    // collect all regexes into an array\n    const searchOptionsMap = Object.keys(redactionSearchPatterns).reduce((map, key) => {\n      const { regex, type } = redactionSearchPatterns[key];\n      map[type] = regex;\n      return map;\n    }, {});\n\n\n    const options = {\n      regex: true,\n      caseSensitive: searchTerms.caseSensitive,\n    };\n\n    const { textSearch } = searchTerms;\n    const searchArray = [...textSearch];\n\n    // Now we can map type to regex\n    Object.keys(searchTerms).forEach((searchType) => {\n      const searchRegex = searchOptionsMap[searchType];\n      if (searchRegex) {\n        searchArray.push(searchRegex.source);\n      }\n    });\n\n    const searchString = searchArray.join('|');\n\n    // If search string is empty we return and clear searches or we send the search logic\n    // into an infinte loop\n    if (searchString === '') {\n      core.clearSearchResults();\n      return;\n    }\n\n    const searchTextFull = searchTextFullFactory();\n    searchTextFull(searchString, options);\n  };\n}\n\nexport default multiSearch;","import React, { useContext } from 'react';\nimport { useStore, useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\n\nimport RedactionSearchOverlay from './RedactionSearchOverlay';\nimport { RedactionPanelContext } from '../RedactionPanel/RedactionPanelContext';\nimport multiSearchFactory from '../../helpers/multiSearch';\n\n\nfunction executeRedactionSearch(options, store) {\n  const multiSearch = multiSearchFactory(store);\n  multiSearch(options);\n}\n\nconst RedactionSearchOverlayContainer = (props) => {\n  const { setIsRedactionSearchActive } = useContext(RedactionPanelContext);\n  const store = useStore();\n  const activeTheme = useSelector((state) => selectors.getActiveTheme(state));\n  const redactionSearchPatterns = useSelector((state) => selectors.getRedactionSearchPatterns(state), shallowEqual);\n  const redactionSearchOptions = Object.values(redactionSearchPatterns).map((pattern) => ({\n    ...pattern,\n    value: pattern.type,\n  }));\n\n  return (\n    <RedactionSearchOverlay\n      setIsRedactionSearchActive={setIsRedactionSearchActive}\n      executeRedactionSearch={(options = {}) => executeRedactionSearch(options, store)}\n      activeTheme={activeTheme}\n      redactionSearchOptions={redactionSearchOptions}\n      {...props}\n    />);\n};\n\nexport default RedactionSearchOverlayContainer;","import RedactionSearchOverlayContainer from './RedactionSearchOverlayContainer';\n\nexport default RedactionSearchOverlayContainer;","import React from 'react';\nimport Choice from 'components/Choice';\nimport Icon from 'components/Icon';\nimport './RedactionSearchResult.scss';\nimport classNames from 'classnames';\nimport { redactionTypeMap } from 'constants/redactionTypes';\nimport PropTypes from 'prop-types';\n\n// Alternatively wrap this in useCallback and declare inside component\nconst displayRedactionSearchResult = (props) => {\n  const { ambientStr, resultStrStart, resultStrEnd, resultStr, type } = props;\n  if (type === redactionTypeMap['TEXT']) {\n    const searchValue = ambientStr === '' ? resultStr : ambientStr.slice(resultStrStart, resultStrEnd);\n    const textBeforeSearchValue = ambientStr.slice(0, resultStrStart);\n    const textAfterSearchValue = ambientStr.slice(resultStrEnd);\n    return (\n      <>\n        {textBeforeSearchValue}\n        <span className=\"search-value\">{searchValue}</span>\n        {textAfterSearchValue}\n      </>\n    );\n  }\n  return resultStr;\n};\n\nconst RedactionSearchResult = (props) => {\n  const {\n    isChecked,\n    onChange,\n    onClickResult,\n    isActive,\n    icon,\n    ambientStr\n  } = props;\n\n  const displayResult = displayRedactionSearchResult(props);\n  const searchResultClassname = classNames('redaction-search-result', { active: isActive });\n\n  return (\n    <li className={searchResultClassname}>\n      <button\n        className='redaction-search-result-button'\n        onClick={onClickResult}\n        aria-label={ambientStr}\n        aria-current={isActive}\n      ></button>\n      <Choice\n        aria-label={`${ambientStr}`}\n        checked={isChecked}\n        onChange={onChange}\n      />\n      <Icon glyph={icon} />\n      <div className=\"redaction-search-result-info\">\n        {displayResult}\n      </div>\n    </li>\n  );\n};\n\nRedactionSearchResult.propTypes = {\n  isChecked: PropTypes.bool,\n  onChange: PropTypes.func,\n  onClickResult: PropTypes.func,\n  isActive: PropTypes.bool,\n  icon: PropTypes.string,\n  ambientStr: PropTypes.string,\n};\n\nexport default React.memo(RedactionSearchResult);","import RedactionSearchResultContainer from './RedactionSearchResultContainer';\n\nexport default RedactionSearchResultContainer;","import React, { useCallback, useContext } from 'react';\nimport RedactionSearchResult from './RedactionSearchResult';\nimport { RedactionPanelContext } from 'components/RedactionPanel/RedactionPanelContext';\nimport useCore from 'hooks/useCore';\n\nconst RedactionSearchResultContainer = (props) => {\n  const { core } = useCore();\n  const {\n    searchResult,\n    checked,\n    checkResult,\n  } = props;\n\n  const { activeSearchResultIndex } = useContext(RedactionPanelContext);\n\n  const { ambientStr, resultStrStart, resultStrEnd, resultStr, icon, index, type } = searchResult;\n\n  const onChange = useCallback((event) => {\n    checkResult(event, index);\n  }, [index, checkResult]);\n\n  const onClickResult = useCallback(() => {\n    core.setActiveSearchResult(searchResult);\n  }, [searchResult]);\n\n  return (\n    <RedactionSearchResult\n      ambientStr={ambientStr}\n      resultStrStart={resultStrStart}\n      resultStrEnd={resultStrEnd}\n      resultStr={resultStr}\n      icon={icon}\n      type={type}\n      isChecked={checked}\n      onChange={onChange}\n      onClickResult={onClickResult}\n      isActive={activeSearchResultIndex === index}\n    />\n  );\n};\n\nexport default RedactionSearchResultContainer;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport RedactionSearchResult from './RedactionSearchResult';\nimport Choice from 'components/Choice';\nimport { useTranslation } from 'react-i18next';\nimport CollapsibleSection from 'components/CollapsibleSection';\nimport './RedactionSearchResultGroup.scss';\n\nconst RedactionSearchResultGroup = (props) => {\n  const {\n    pageNumber,\n    searchResults,\n    selectedSearchResultIndexes,\n    setSelectedSearchResultIndexes,\n  } = props;\n\n  const { t } = useTranslation();\n  const groupResultIndexes = searchResults.map((result) => result.index);\n  const [allItemsChecked, setAllItemsChecked] = useState(false);\n\n  useEffect(() => {\n    const allResultsSelected = groupResultIndexes.reduce((allSelected, currentIndex) => {\n      return selectedSearchResultIndexes[currentIndex] && allSelected;\n    }, true);\n\n    setAllItemsChecked(allResultsSelected);\n  }, [selectedSearchResultIndexes, groupResultIndexes]);\n\n  const checkAllResults = useCallback((event) => {\n    const checked = event.target.checked;\n    groupResultIndexes.forEach((resultIndex) => {\n      selectedSearchResultIndexes[resultIndex] = checked;\n    });\n    setAllItemsChecked(checked);\n    setSelectedSearchResultIndexes({ ...selectedSearchResultIndexes });\n  }, [selectedSearchResultIndexes, groupResultIndexes]);\n\n  const checkResult = useCallback((event, index) => {\n    const checked = event.target.checked;\n    selectedSearchResultIndexes[index] = checked;\n    setSelectedSearchResultIndexes({ ...selectedSearchResultIndexes });\n  }, [selectedSearchResultIndexes]);\n\n  const header = () => {\n    return (\n      `${t('option.shared.page')} ${pageNumber}`\n    );\n  };\n\n  const style = {\n    width: '100%',\n  };\n\n  return (\n    <div className=\"redaction-search-results-page-number\">\n      <Choice\n        className=\"redaction-search-results-page-number-checkbox\"\n        aria-label={`${t('option.shared.page')} ${pageNumber}`}\n        checked={allItemsChecked}\n        onChange={(event) => {\n          event.stopPropagation();\n          checkAllResults(event);\n        }}\n      />\n      <CollapsibleSection header={header} style={style} expansionDescription={`${t('option.shared.page')} ${pageNumber}`}>\n        <ul className=\"redaction-search-results\">\n          {searchResults.map((searchResult, index) => (\n            <RedactionSearchResult\n              checked={selectedSearchResultIndexes[searchResult.index]}\n              checkResult={checkResult}\n              searchResult={searchResult}\n              key={`${index}-${pageNumber}`}\n            />)\n          )}\n        </ul>\n      </CollapsibleSection>\n    </div>\n  );\n};\n\nexport default RedactionSearchResultGroup;","import RedactionSearchResultGroup from './RedactionSearchResultGroup';\n\nexport default RedactionSearchResultGroup;","export default {\n  SEARCH_NOT_INITIATED: 'SEARCH_NOT_INITIATED',\n  SEARCH_IN_PROGRESS: 'SEARCH_IN_PROGRESS',\n  SEARCH_DONE: 'SEARCH_DONE',\n};","import React, { useState, useEffect, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport RedactionSearchResultGroup from 'components/RedactionSearchResultGroup';\nimport Spinner from 'components/Spinner';\nimport './RedactionSearchResults.scss';\nimport classNames from 'classnames';\nimport { Virtuoso } from 'react-virtuoso';\nimport SearchStatus from 'constants/searchStatus';\nimport { RedactionPanelContext } from '../RedactionPanel/RedactionPanelContext';\nimport Button from 'components/Button';\n\nfunction RedactionSearchResults(props) {\n  const {\n    redactionSearchResults,\n    searchStatus,\n    onCancelSearch,\n    isProcessingRedactionResults,\n    markSelectedResultsForRedaction,\n    redactSelectedResults,\n  } = props;\n\n  const { t } = useTranslation();\n  const [redactionSearchResultPageMap, setRedactionSearchResultPageMap] = useState({});\n  const [selectedSearchResultIndexesMap, setSelectedSearchResultIndexesMap] = useState({});\n  const [selectedIndexes, setSelectedIndexes] = useState([]);\n  // The following prop is needed only for the tests to actually render a list of results\n  // it only is ever injected in the tests\n  const { isTestMode } = useContext(RedactionPanelContext);\n\n\n  useEffect(() => {\n    const redactionSearchResultPageMap = {};\n    redactionSearchResults.forEach((result, index) => {\n      const pageNumber = result.pageNum;\n      result.index = index;\n      if (redactionSearchResultPageMap[pageNumber] === undefined) {\n        redactionSearchResultPageMap[pageNumber] = [result];\n      } else {\n        redactionSearchResultPageMap[pageNumber] = [...redactionSearchResultPageMap[pageNumber], result];\n      }\n    });\n\n    setRedactionSearchResultPageMap(redactionSearchResultPageMap);\n\n    const selectedIndexesMap = {};\n    redactionSearchResults.forEach((value, index) => {\n      selectedIndexesMap[index] = false;\n    });\n    setSelectedSearchResultIndexesMap(selectedIndexesMap);\n  }, [redactionSearchResults]);\n\n\n  useEffect(() => {\n    const selectedIndexes = redactionSearchResults.filter((redactionSearchResult, index) => {\n      return selectedSearchResultIndexesMap[index];\n    });\n\n    setSelectedIndexes(selectedIndexes);\n  }, [selectedSearchResultIndexesMap]);\n\n\n  const renderSearchResults = () => {\n    const resultGroupPageNumbers = Object.keys(redactionSearchResultPageMap);\n    if (resultGroupPageNumbers.length > 0) {\n      // Needed for the tests to actually render a list of results\n      const testModeProps = isTestMode ? { initialItemCount: resultGroupPageNumbers.length } : {};\n      return (\n        <Virtuoso\n          data={resultGroupPageNumbers}\n          itemContent={(index, pageNumber) => {\n            return (\n              <RedactionSearchResultGroup\n                key={index}\n                pageNumber={pageNumber}\n                searchResults={redactionSearchResultPageMap[pageNumber]}\n                selectedSearchResultIndexes={selectedSearchResultIndexesMap}\n                setSelectedSearchResultIndexes={setSelectedSearchResultIndexesMap}\n              />);\n          }}\n          {...testModeProps}\n        />);\n    }\n  };\n\n  const renderStartSearch = () => (\n    <div aria-label={t('redactionPanel.search.start')}>\n      {t('redactionPanel.search.start')}\n    </div>\n  );\n\n  const noResults = (\n    <div aria-label={t('message.noResults')}>\n      <p aria-live=\"assertive\" role=\"alert\" className=\"no-margin\">{t('message.noResults')}</p>\n    </div>\n  );\n\n  const renderSearchInProgress = () => (\n    <div >\n      <Spinner height=\"25px\" width=\"25px\" />\n    </div>\n  );\n\n  const onCancelHandler = () => {\n    setRedactionSearchResultPageMap({});\n    onCancelSearch();\n  };\n\n  const selectAllResults = () => {\n    const searchResultIndexMap = {};\n    redactionSearchResults.forEach((value, index) => {\n      searchResultIndexMap[index] = true;\n    });\n    setSelectedSearchResultIndexesMap(searchResultIndexMap);\n  };\n\n  const unselectAllResults = () => {\n    const searchResultIndexMap = {};\n    redactionSearchResults.forEach((value, index) => {\n      searchResultIndexMap[index] = false;\n    });\n    setSelectedSearchResultIndexesMap(searchResultIndexMap);\n  };\n\n  const onMarkAllForRedaction = () => {\n    markSelectedResultsForRedaction(selectedIndexes);\n    onCancelSearch();\n  };\n\n  const onRedactSelectedResults = () => {\n    redactSelectedResults(selectedIndexes);\n  };\n\n  const isEmptyList = redactionSearchResults.length === 0;\n\n  const resultsContainerClass = classNames('redaction-search-results-container', { emptyList: isEmptyList });\n  const redactAllButtonClass = classNames('redact-all-selected', { disabled: selectedIndexes.length === 0 });\n  const markAllForRedactionButtonClass = classNames('mark-all-selected', { disabled: selectedIndexes.length === 0 });\n  const shouldShowResultsCounterOptions = (searchStatus === SearchStatus['SEARCH_DONE'] && !isProcessingRedactionResults) || searchStatus === SearchStatus['SEARCH_NOT_INITIATED'];\n\n  return (\n    <>\n      <div className=\"redaction-search-counter-controls\">\n        {searchStatus === SearchStatus['SEARCH_IN_PROGRESS'] && (\n          <div style={{ flexGrow: 1 }}>\n            <Spinner height=\"18px\" width=\"18px\" />\n          </div>)}\n        {shouldShowResultsCounterOptions && (\n          <>\n            <div className=\"redaction-search-results-counter\">\n              <h4 aria-live=\"assertive\" role=\"alert\" className=\"no-margin\">\n                {t('redactionPanel.searchResults')}\n                <span>{` (${redactionSearchResults.length})`}</span>\n              </h4>\n            </div>\n            <Button\n              className={classNames({\n                'inactive': selectedIndexes.length < 1\n              })}\n              onClick={selectAllResults}\n              disabled={isEmptyList}\n              label={t('action.selectAll')}\n            />\n            <Button\n              className={classNames({\n                'inactive': selectedIndexes.length < 1\n              })}\n              disabled={isEmptyList}\n              onClick={unselectAllResults}\n              label={t('action.unselect')}\n            />\n          </>)}\n      </div>\n      <div className={resultsContainerClass} role=\"list\">\n        {searchStatus === SearchStatus['SEARCH_NOT_INITIATED'] && renderStartSearch()}\n        {(searchStatus === SearchStatus['SEARCH_IN_PROGRESS'] && isEmptyList && isProcessingRedactionResults) && renderSearchInProgress()}\n        {searchStatus === SearchStatus['SEARCH_DONE'] && isEmptyList && !isProcessingRedactionResults && noResults}\n        {(searchStatus === SearchStatus['SEARCH_IN_PROGRESS'] || searchStatus === SearchStatus['SEARCH_DONE']) && renderSearchResults()}\n      </div>\n      <div className=\"redaction-search-panel-controls\" >\n        <Button\n          onClick={onCancelHandler}\n          label={t('action.cancel')}\n          className=\"cancel\"\n        />\n        <Button\n          disabled={selectedIndexes.length === 0}\n          label={t('annotation.redact')}\n          className={redactAllButtonClass}\n          onClick={onRedactSelectedResults}\n        />\n        <Button\n          disabled={selectedIndexes.length === 0}\n          label={t('action.addMark')}\n          ariaLabel={t('action.addMark')}\n          className={markAllForRedactionButtonClass}\n          onClick={onMarkAllForRedaction}\n        />\n      </div >\n    </>\n  );\n}\n\nexport default RedactionSearchResults;\n","import React, { useCallback } from 'react';\nimport RedactionSearchResults from './RedactionSearchResults';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport applyRedactions from 'helpers/applyRedactions';\n// Helper function createRedactionAnnotations()\n// eslint-disable-next-line custom/use-core-hook-in-components\nimport core from 'core';\nimport useCore from 'hooks/useCore';\n\nconst { ToolNames } = window.Core.Tools;\n\nexport const defaultRedactionStyles = {\n  OverlayText: '',\n  StrokeColor: new window.Core.Annotations.Color(255, 0, 0),\n  TextColor: new window.Core.Annotations.Color(255, 0, 0, 1),\n  Font: 'Helvetica',\n};\n\nexport function createRedactionAnnotations(searchResults, activeToolStyles = defaultRedactionStyles) {\n  const {\n    StrokeColor,\n    OverlayText,\n    FillColor,\n    Font = 'Helvetica',\n    TextColor,\n    FontSize,\n    TextAlign,\n  } = activeToolStyles;\n  const redactionAnnotations = searchResults.map((result) => {\n    const redaction = new window.Core.Annotations.RedactionAnnotation();\n    redaction.PageNumber = result.page_num;\n    redaction.Quads = result.quads.map((quad) => quad.getPoints());\n    redaction.StrokeColor = StrokeColor;\n    redaction.OverlayText = OverlayText;\n    redaction.FillColor = FillColor;\n    redaction.Font = Font;\n    redaction.FontSize = FontSize;\n    if (window.Core.Annotations.Utilities.calculateAutoFontSize) {\n      redaction.FontSize = window.Core.Annotations.Utilities.calculateAutoFontSize(redaction);\n    }\n    redaction.TextColor = TextColor;\n    redaction.TextAlign = TextAlign;\n    redaction.setContents(result.result_str);\n    redaction.type = result.type;\n    redaction.Author = core.getCurrentUser();\n\n    if (result.type === 'text') {\n      redaction.setCustomData('trn-annot-preview', result.result_str);\n    }\n\n    redaction.setCustomData('trn-redaction-type', result.type);\n\n    return redaction;\n  });\n\n  return redactionAnnotations;\n}\n\nfunction RedactionSearchResultsContainer(props) {\n  const { onCancelSearch } = props;\n  const { core } = useCore();\n  const dispatch = useDispatch();\n  // activeToolStyles is an object so we do a shallowEqual to check equality\n  const [activeToolStyles, activeToolName] = useSelector(\n    (state) => [\n      selectors.getActiveToolStyles(state),\n      selectors.getActiveToolName(state)\n    ], shallowEqual);\n\n  const redactSelectedResults = (searchResults) => {\n    const redactionAnnotations = createRedactionAnnotations(searchResults, defaultRedactionStyles);\n    dispatch(applyRedactions(redactionAnnotations, onCancelSearch));\n  };\n\n  const markSelectedResultsForRedaction = useCallback((searchResults) => {\n    const tool = core.getTool(ToolNames.REDACTION);\n    const alternativeDefaultStyles = (tool && tool.defaults) ? tool.defaults : defaultRedactionStyles;\n    const redactionStyles = activeToolName.includes('Redaction') ? activeToolStyles : alternativeDefaultStyles;\n    const redactionAnnotations = createRedactionAnnotations(searchResults, redactionStyles);\n    const annotationManager = core.getAnnotationManager();\n    annotationManager.addAnnotations(redactionAnnotations);\n  }, [activeToolStyles, activeToolName]);\n\n  return (\n    <RedactionSearchResults\n      markSelectedResultsForRedaction={markSelectedResultsForRedaction}\n      redactSelectedResults={redactSelectedResults}\n      {...props}\n    />);\n}\n\nexport default RedactionSearchResultsContainer;","import RedactionSearchResultsContainer from './RedactionSearchResultsContainer';\n\nexport default RedactionSearchResultsContainer;","import React, { useContext, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport actions from 'actions';\nimport RedactionSearchOverlay from 'src/components/RedactionSearchOverlay';\nimport { RedactionPanelContext } from 'components/RedactionPanel/RedactionPanelContext';\nimport RedactionSearchResults from 'components/RedactionSearchResults';\nimport Icon from 'components/Icon';\nimport { isMobileSize } from 'helpers/getDeviceSize';\n\nconst RedactionSearchPanel = (props) => {\n  const dispatch = useDispatch();\n  const [searchTerms, setSearchTerms] = useState([]);\n  const { isRedactionSearchActive, setIsRedactionSearchActive } = useContext(RedactionPanelContext);\n  const onCancelSearch = () => {\n    setSearchTerms([]);\n    clearRedactionSearchResults();\n    setIsRedactionSearchActive(false);\n  };\n\n  const {\n    redactionSearchResults,\n    isProcessingRedactionResults,\n    clearRedactionSearchResults,\n    searchStatus,\n  } = props;\n\n  const isMobile = isMobileSize();\n\n  const onCloseButtonClick = () => {\n    dispatch(actions.closeElement('redactionPanel'));\n  };\n\n  return (\n    <>\n      {isMobile &&\n        <div\n          className=\"close-container\"\n        >\n          <button\n            className=\"close-icon-container\"\n            onClick={onCloseButtonClick}\n          >\n            <Icon\n              glyph=\"ic_close_black_24px\"\n              className=\"close-icon\"\n            />\n          </button>\n        </div>}\n      <RedactionSearchOverlay\n        searchTerms={searchTerms}\n        setSearchTerms={setSearchTerms}\n      />\n      {isRedactionSearchActive &&\n        <RedactionSearchResults\n          redactionSearchResults={redactionSearchResults}\n          onCancelSearch={onCancelSearch}\n          searchStatus={searchStatus}\n          isProcessingRedactionResults={isProcessingRedactionResults}\n        />\n      }\n    </>\n  );\n};\n\nexport default RedactionSearchPanel;","import { useEffect, useState, useCallback, useMemo } from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport core from 'core';\nimport { redactionTypeMap } from 'constants/redactionTypes';\nimport SearchStatus from 'constants/searchStatus';\n\nfunction useOnRedactionSearchCompleted() {\n  const [searchStatus, setSearchStatus] = useState(SearchStatus['SEARCH_NOT_INITIATED']);\n  const [redactionSearchResults, setRedactionSearchResults] = useState([]);\n  const [isProcessingRedactionResults, setIsProcessingRedactionResults] = useState(false);\n  const redactionSearchPatterns = useSelector((state) => selectors.getRedactionSearchPatterns(state), shallowEqual);\n\n  const searchPatterns = useMemo(() => {\n    return Object.keys(redactionSearchPatterns).reduce((map, key) => {\n      const { regex, type, icon } = redactionSearchPatterns[key];\n      map[type] = {\n        regex,\n        icon\n      };\n      return map;\n    }, {});\n  }, [redactionSearchPatterns]);\n\n  const mapResultToType = useCallback((result) => {\n    // Iterate through the patterns and return the first match\n    const { resultStr } = result;\n    const searchPatternKeys = Object.keys(searchPatterns);\n\n    const resultType = searchPatternKeys.find((key) => {\n      const { regex } = searchPatterns[key];\n      return regex.test(resultStr);\n    });\n\n    // If it didn't match any of the patterns, return the default type which is text\n    result.type = resultType === undefined ? redactionTypeMap['TEXT'] : resultType;\n    // And also set the icon to display in the panel. If no icon provided use the text icon\n    const { icon = 'icon-text-redaction' } = searchPatterns[result.type] || {};\n    result.icon = icon;\n    return result;\n  }, [searchPatterns]);// Dependency is an object but it is memoized so it will not re-create unless the patterns change\n\n  const clearRedactionSearchResults = useCallback(() => {\n    setRedactionSearchResults([]);\n    core.clearSearchResults();\n    setIsProcessingRedactionResults(false);\n  });\n\n  useEffect(() => {\n    function onSearchResultsChanged(results) {\n      const mappedResults = results.map(mapResultToType);\n      setIsProcessingRedactionResults(true);\n      setRedactionSearchResults(mappedResults);\n    }\n\n    core.addEventListener('searchResultsChanged', onSearchResultsChanged);\n    return () => {\n      core.removeEventListener('searchResultsChanged', onSearchResultsChanged);\n    };\n  }, [searchStatus]);\n\n  useEffect(() => {\n    function searchInProgressEventHandler(isSearching) {\n      if (isSearching === undefined || isSearching === null) {\n        // if isSearching is not passed at all, we consider that to mean that search was reset to original state\n        setSearchStatus(SearchStatus['SEARCH_NOT_INITIATED']);\n      } else if (isSearching) {\n        setSearchStatus(SearchStatus['SEARCH_IN_PROGRESS']);\n      } else {\n        setSearchStatus(SearchStatus['SEARCH_DONE']);\n        // Need a timeout due to timing issue as SEARCH_DONE is fired\n        // before final call to onSearchResultsChanged, otherwise we briefly show\n        // the NO RESULTS message before showing actual results.\n        setTimeout(() => {\n          setIsProcessingRedactionResults(false);\n        }, 100);\n      }\n    }\n\n    core.addEventListener('searchInProgress', searchInProgressEventHandler);\n\n    return () => {\n      core.removeEventListener('searchInProgress', searchInProgressEventHandler);\n    };\n  }, []);\n\n  return {\n    redactionSearchResults,\n    isProcessingRedactionResults,\n    clearRedactionSearchResults,\n    searchStatus,\n  };\n}\n\nexport default useOnRedactionSearchCompleted;","import useOnRedactionSearchCompleted from './useOnRedactionSearchCompleted';\n\nexport default useOnRedactionSearchCompleted;","import ReactionSearchPanelContainer from './RedactionSearchPanelContainer';\n\nexport default ReactionSearchPanelContainer;","import React from 'react';\nimport RedactionSearchPanel from './RedactionSearchPanel';\nimport useOnRedactionSearchCompleted from 'hooks/useOnRedactionSearchCompleted';\n\nconst ReactionSearchPanelContainer = () => {\n  const {\n    redactionSearchResults,\n    isProcessingRedactionResults,\n    clearRedactionSearchResults,\n    searchStatus,\n  } = useOnRedactionSearchCompleted();\n\n  return (\n    <RedactionSearchPanel\n      redactionSearchResults={redactionSearchResults}\n      isProcessingRedactionResults={isProcessingRedactionResults}\n      clearRedactionSearchResults={clearRedactionSearchResults}\n      searchStatus={searchStatus}\n    />\n  );\n};\n\nexport default ReactionSearchPanelContainer;","import React, { useContext, useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport RedactionPanel from './RedactionPanel';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport useCore from 'hooks/useCore';\nimport applyRedactions from 'helpers/applyRedactions';\nimport { RedactionPanelContext, RedactionPanelProvider } from './RedactionPanelContext';\nimport { isMobileSize } from 'helpers/getDeviceSize';\nimport DataElementWrapper from '../DataElementWrapper';\nimport Icon from 'components/Icon';\nimport RedactionSearchPanel from 'components/RedactionSearchPanel';\nimport { defaultRedactionTypes } from 'constants/redactionTypes';\n\nexport const RedactionPanelContainer = (props) => {\n  const { core } = useCore();\n  const [\n    isOpen,\n    isDisabled,\n    redactionPanelWidth,\n    isInDesktopOnlyMode,\n    customApplyRedactionsHandler,\n    redactionSearchPatterns,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementOpen(state, 'redactionPanel'),\n      selectors.isElementDisabled(state, 'redactionPanel'),\n      selectors.getRedactionPanelWidth(state),\n      selectors.isInDesktopOnlyMode(state),\n      selectors.getCustomApplyRedactionsHandler(state),\n      selectors.getRedactionSearchPatterns(state),\n    ],\n    shallowEqual,\n  );\n\n  const isMobile = isMobileSize();\n\n  const { redactionAnnotationsList, isCustomPanel, dataElement } = props;\n\n  const redactionTypesDictionary = useMemo(() => {\n    const storedRedactionTypes = Object.keys(redactionSearchPatterns).reduce((map, key) => {\n      const { label, type, icon } = redactionSearchPatterns[key];\n      map[type] = {\n        label,\n        icon,\n      };\n      return map;\n    }, {});\n\n    return { ...storedRedactionTypes, ...defaultRedactionTypes };\n  }, [redactionSearchPatterns]);\n\n  const deleteAllRedactionAnnotations = () => {\n    core.deleteAnnotations(redactionAnnotationsList);\n  };\n\n  const dispatch = useDispatch();\n  const applyAllRedactions = () => {\n    const originalApplyRedactions = () => {\n      const callOnRedactionCompleted = isCustomPanel ? closeRedactionPanel : () => {};\n      dispatch(applyRedactions(redactionAnnotationsList, callOnRedactionCompleted));\n    };\n    if (customApplyRedactionsHandler) {\n      customApplyRedactionsHandler(redactionAnnotationsList, originalApplyRedactions);\n    } else {\n      originalApplyRedactions();\n    }\n  };\n\n  const closeRedactionPanel = () => {\n    const tempDataElement = isCustomPanel ? dataElement : 'redactionPanel';\n    dispatch(actions.closeElement(tempDataElement));\n  };\n\n  const renderMobileCloseButton = () => {\n    return (\n      !isCustomPanel && (\n        <div className=\"close-container\">\n          <div className=\"close-icon-container\" onClick={closeRedactionPanel}>\n            <Icon glyph=\"ic_close_black_24px\" className=\"close-icon\" />\n          </div>\n        </div>\n      )\n    );\n  };\n\n  const style = isCustomPanel || (!isInDesktopOnlyMode && isMobile)\n    ? {}\n    : { width: `${redactionPanelWidth}px`, minWidth: `${redactionPanelWidth}px` };\n\n  const { isRedactionSearchActive } = useContext(RedactionPanelContext);\n\n  const [renderNull, setRenderNull] = useState(false);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setRenderNull(!isOpen);\n    }, 500);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [isOpen]);\n\n  if (isDisabled || (!isOpen && renderNull && !isCustomPanel)) {\n    return null;\n  }\n\n  const dataElementToUse = isCustomPanel ? dataElement : 'redactionPanel';\n\n  return (\n    <DataElementWrapper dataElement={dataElementToUse} className=\"Panel RedactionPanel\" style={style}>\n      {!isInDesktopOnlyMode && isMobile && renderMobileCloseButton()}\n      <RedactionSearchPanel />\n      {!isRedactionSearchActive && (\n        <RedactionPanel\n          redactionAnnotations={redactionAnnotationsList}\n          redactionTypesDictionary={redactionTypesDictionary}\n          applyAllRedactions={applyAllRedactions}\n          deleteAllRedactionAnnotations={deleteAllRedactionAnnotations}\n        />\n      )}\n    </DataElementWrapper>\n  );\n};\n\nRedactionPanelContainer.propTypes = {\n  redactionAnnotationsList: PropTypes.array,\n  isCustomPanel: PropTypes.bool,\n  dataElement: PropTypes.string,\n};\n\nRedactionPanelContainer.defaultProps = {\n  isCustomPanel: false,\n  dataElement: '',\n};\n\nconst RedactionPanelContainerWithProvider = (props) => {\n  return (\n    <RedactionPanelProvider>\n      <RedactionPanelContainer {...props} />\n    </RedactionPanelProvider>\n  );\n};\n\nexport default RedactionPanelContainerWithProvider;\n","import RedactionPanelContainerWithProvider from './RedactionPanelContainer';\n\nexport default RedactionPanelContainerWithProvider;"],"sourceRoot":""}