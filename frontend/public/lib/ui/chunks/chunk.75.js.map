{"version":3,"sources":["webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.scss?b1ac","webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.js","webpack:///./src/ui/src/components/OpenFileModal/index.js"],"names":["module","exports","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","OpenFileModal","_ref","isDisabled","isOpen","tabManager","closeElements","core","useCore","useTranslation","selectedTab","useSelector","state","selectors","getSelectedTab","_useState2","useState","src","setSrc","_useState4","extension","setExtension","_useState6","filename","setFilename","_useState8","size","setSize","_useState0","error","setError","_useState10","urlInputError","setUrlInputError","closeModal","DataElements","OPEN_FILE_MODAL","useEffect","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","ERROR_MODAL","MODEL3D_MODAL","handleAddTab","_ref2","_callee2","source","_extension","_filename","_size","_context2","acceptFormats","indexOf","performDocumentCreationChecks","_callee","useDb","_context","TabManager","MAX_FILE_SIZE","addTab","setActive","saveCurrentActiveTabState","useDB","console","_x","_x2","_x3","_x4","modalClass","classNames","Modal","open","closed","extensionRegExp","handleFileChange","_ref4","_callee3","file","ext","_filename2","_size2","_src","_context3","window","Core","Document","type","mimeTypeToExtension","exec","URL","createObjectURL","_x5","handleURLChange","_ref5","_callee4","url","_context4","trim","substring","lastIndexOf","split","_x6","getHashParameters","SupportedFileFormats","SERVER","CLIENT","reduce","uniqueArr","curr","React","createElement","className","data-element","onMouseDown","stopPropagation","ModalWrapper","title","closeButtonDataElement","onCloseClick","swipeToClose","closeHandler","Tabs","id","role","Tab","dataElement","TabPanel","FileInputPanel","onFileSelect","defaultValue","FilePickerPanel","onFileProcessed","urlError","fileError","extensionError","Button","label","style","width","onClick","useFocusOnClose","disabled","propTypes","PropTypes","bool","instanceOf","isRequired","func","mapDispatchToProps","actions","connect","isElementDisabled","isElementOpen","getTabManager"],"mappings":"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","file":"chunks/chunk.75.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useEffect, useState } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport TabManager from 'helpers/TabManager';\nimport classNames from 'classnames';\nimport getHashParameters from 'helpers/getHashParameters';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport { Tabs, Tab, TabPanel } from 'components/Tabs';\nimport FileInputPanel from 'components/PageReplacementModal/FileInputPanel';\nimport FilePickerPanel from 'components/PageReplacementModal/FilePickerPanel';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport DataElements from 'constants/dataElement';\nimport ModalWrapper from '../ModalWrapper';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\n\nimport '../PageReplacementModal/PageReplacementModal.scss';\nimport './OpenFileModal.scss';\nimport PropTypes from 'prop-types';\nimport useCore from 'src/hooks/useCore';\n\nconst OpenFileModal = ({ isDisabled, isOpen, tabManager, closeElements }) => {\n  const { core } = useCore();\n  const { t } = useTranslation();\n  const [selectedTab] = useSelector((state) => [\n    selectors.getSelectedTab(state, 'openFileModal'),\n  ]);\n  const [src, setSrc] = useState('');\n  const [extension, setExtension] = useState('pdf');\n  const [filename, setFilename] = useState();\n  const [size, setSize] = useState();\n  const [error, setError] = useState({ 'fileError': '', 'urlError': '', 'extensionError': '' });\n  const [urlInputError, setUrlInputError] = useState(null);\n\n  const closeModal = () => {\n    setSrc('');\n    setError({ 'fileError': '', 'urlError': '' });\n    setFilename(null);\n    setExtension('pdf');\n    setSize(null);\n    closeElements([DataElements.OPEN_FILE_MODAL]);\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      closeElements([\n        DataElements.PRINT_MODAL,\n        DataElements.LOADING_MODAL,\n        DataElements.PROGRESS_MODAL,\n        DataElements.ERROR_MODAL,\n        DataElements.MODEL3D_MODAL,\n      ]);\n    } else {\n      setSrc('');\n      setError({ 'fileError': '', 'urlError': '' });\n      setFilename(null);\n      setExtension(null);\n      setSize(null);\n    }\n  }, [isOpen]);\n\n  const handleAddTab = async (source, _extension, _filename, _size) => {\n    setUrlInputError(null);\n\n    if (!source) {\n      return setError({ 'urlError': 'URL or File must be provided' });\n    }\n\n    if (!_extension || acceptFormats.indexOf(_extension) === -1) {\n      return setError({ 'extensionError': 'Extension must be provided' });\n    }\n\n    await core.performDocumentCreationChecks(source)\n      .then(async () => {\n        const useDb = !_size || TabManager.MAX_FILE_SIZE > _size;\n        await tabManager.addTab(source, {\n          extension: _extension,\n          filename: _filename,\n          setActive: true,\n          saveCurrentActiveTabState: true,\n          useDB: useDb\n        });\n      }).catch((error) => {\n        setUrlInputError(t('message.urlInputFileLoadError'));\n        console.error('Error adding tab:', error);\n      });\n  };\n\n  const modalClass = classNames({\n    Modal: true,\n    OpenFileModal: true,\n    open: isOpen,\n    closed: !isOpen,\n  });\n\n  const extensionRegExp = /(?:\\.([^.?]+))?$/;\n\n  const handleFileChange = async (file) => {\n    setError(null);\n    if (!file) {\n      return;\n    }\n    if (file instanceof window.Core.Document) {\n      await handleAddTab(file, file.type, file.filename);\n    } else {\n      const ext = window.Core.mimeTypeToExtension[file.type] || extensionRegExp.exec(file.name)[1] || null;\n      const filename = file.name;\n      const size = file.size;\n      const src = URL.createObjectURL(file);\n      setSrc(src);\n      setFilename(filename);\n      setExtension(ext);\n      setSize(size);\n      await handleAddTab(file, ext, filename, size);\n    }\n  };\n\n  const handleURLChange = async (url) => {\n    setError(null);\n    setSrc(url.trim());\n    const filename = url.substring(url.lastIndexOf('/') + 1).split('?')[0];\n    setFilename(filename);\n    setExtension(extensionRegExp.exec(filename)[1]);\n    setSize(null);\n  };\n\n  const wvServer = !!getHashParameters('webviewerServerURL', null);\n  let acceptFormats = wvServer ? window.Core.SupportedFileFormats.SERVER : window.Core.SupportedFileFormats.CLIENT;\n  acceptFormats = acceptFormats.reduce((uniqueArr, curr) => {\n    if (uniqueArr.indexOf(curr) === -1) {\n      uniqueArr.push(curr);\n    }\n    return uniqueArr;\n  }, []);\n\n  return !isDisabled && (\n    <div className={modalClass} data-element={DataElements.OPEN_FILE_MODAL} onMouseDown={closeModal}>\n      <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\n        <ModalWrapper\n          title={t('OpenFile.newTab')}\n          isOpen={isOpen}\n          closeButtonDataElement={'openFileModalClose'}\n          onCloseClick={closeModal}\n          swipeToClose\n          closeHandler={closeModal}\n        >\n          <div className=\"swipe-indicator\" />\n          <Tabs className=\"open-file-modal-tabs\" id=\"openFileModal\">\n            <div className=\"tabs-header-container\">\n              <div role=\"tablist\" className=\"tab-list\">\n                <Tab dataElement=\"urlInputPanelButton\">\n                  <button role=\"tab\" className=\"tab-options-button\">\n                    {t('link.url')}\n                  </button>\n                </Tab>\n                <div className=\"tab-options-divider\" />\n                <Tab dataElement=\"filePickerPanelButton\">\n                  <button role=\"tab\" className=\"tab-options-button\">\n                    {t('option.pageReplacementModal.localFile')}\n                  </button>\n                </Tab>\n              </div>\n            </div>\n            <TabPanel dataElement=\"urlInputPanel\">\n              <div className=\"panel-body\">\n                <FileInputPanel\n                  onFileSelect={(url) => {\n                    handleURLChange(url);\n                  }}\n                  error={urlInputError}\n                  acceptFormats={acceptFormats}\n                  extension={(!src.length || !extension?.length) ? '' : extension}\n                  setExtension={setExtension}\n                  defaultValue={src}\n                />\n              </div>\n            </TabPanel>\n            <TabPanel dataElement=\"filePickerPanel\">\n              <div className=\"panel-body\">\n                <FilePickerPanel\n                  onFileProcessed={(file) => handleFileChange(file)}\n                />\n              </div>\n            </TabPanel>\n          </Tabs>\n          <div className=\"page-replacement-divider\" />\n          <div className=\"footer\">\n            {error?.urlError && <p className=\"error\">* {error.urlError}</p>}\n            {error?.fileError && <p className=\"error\">* {error.fileError}</p>}\n            {error?.extensionError && <p className=\"error\">* {error.extensionError}</p>}\n            <Button\n              className=\"modal-btn\"\n              dataElement=\"linkSubmitButton\"\n              label={t('OpenFile.addTab')}\n              style={{ width: 90 }}\n              onClick={useFocusOnClose(() => handleAddTab(src, extension, filename, size))}\n              disabled={selectedTab !== 'urlInputPanelButton' || (!src.length || !extension?.length)}\n            />\n          </div>\n        </ModalWrapper>\n      </div>\n    </div>\n  );\n};\n\nOpenFileModal.propTypes = {\n  isDisabled: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  tabManager: PropTypes.instanceOf(TabManager).isRequired,\n  closeElements: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  isDisabled: selectors.isElementDisabled(state, DataElements.OPEN_FILE_MODAL),\n  isOpen: selectors.isElementOpen(state, DataElements.OPEN_FILE_MODAL),\n  tabManager: selectors.getTabManager(state),\n});\n\nconst mapDispatchToProps = {\n  closeElements: actions.closeElements,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(OpenFileModal);\n","import OpenFileModal from './OpenFileModal';\n\nexport default OpenFileModal;\n"],"sourceRoot":""}