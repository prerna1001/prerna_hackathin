{"version":3,"sources":["webpack:///./src/ui/src/components/Note/Context.js","webpack:///./src/ui/src/helpers/setAnnotationRichTextStyle.js","webpack:///./src/ui/src/helpers/convertNewlinesToParagraphs.js","webpack:///./src/ui/src/helpers/quillModules.js","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/NoteTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/index.js","webpack:///./src/ui/src/helpers/NoteStateUtils.js","webpack:///./src/ui/src/components/NoteTextPreview/NoteTextPreview.js","webpack:///./src/ui/src/components/ModularComponents/NoteStateFlyout/NoteStateFlyout.js","webpack:///./src/ui/src/components/ModularComponents/NoteStateFlyout/index.js","webpack:///./src/ui/src/helpers/isAnnotationRenderedInDisplayMode.js","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss?0855","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss?adbb","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss?a0ba","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss?f63d","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss?a208","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss?f97a","webpack:///./src/ui/src/components/Note/Note.scss?c1fe","webpack:///./src/ui/src/components/NotesPanel/ReplyAttachmentPicker.js","webpack:///./src/ui/src/components/NotePopup/NotePopup.js","webpack:///./src/ui/src/components/NotePopup/NotePopupContainer.js","webpack:///./src/ui/src/components/NotePopup/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.js","webpack:///./src/ui/src/components/NoteState/NoteStateContainer.js","webpack:///./src/ui/src/components/NoteState/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicator.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicatorContainer.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/index.js","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.js","webpack:///./src/ui/src/components/NoteHeader/index.js","webpack:///./src/ui/src/components/NoteTextPreview/NoteTextPreviewContainer.js","webpack:///./src/ui/src/components/NoteTextPreview/index.js","webpack:///./src/ui/src/helpers/ReplyAttachmentManager.js","webpack:///./src/ui/src/helpers/sanitizeSVG.js","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.js","webpack:///./src/ui/src/components/ReplyAttachmentList/index.js","webpack:///./src/ui/src/helpers/setReactQuillContent.js","webpack:///./src/ui/src/components/NoteContent/NoteContent.js","webpack:///./src/ui/src/components/NoteContent/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.js","webpack:///./src/ui/src/components/Note/ReplyArea/index.js","webpack:///./src/ui/src/components/Note/NoteGroupSection.js","webpack:///./src/ui/src/helpers/annotationNoteConnectorLineHelper.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/index.js","webpack:///./src/ui/src/components/Note/Note.js","webpack:///./src/ui/src/components/Note/index.js","webpack:///./src/ui/src/components/InlineCommentingPopup/InlineCommentingPopup.scss?ecad","webpack:///./src/ui/src/components/InlineCommentingPopup/InlineCommentingPopup.js","webpack:///./src/ui/src/components/InlineCommentingPopup/InlineCommentingPopupContainer.js","webpack:///./src/ui/src/components/InlineCommentingPopup/index.js"],"names":["NoteContext","React","createContext","setAnnotationRichTextStyle","editor","annotation","richTextStyle","ops","getContents","breakpoint","forEach","item","_item$insert","attributes","isMention","insert","mention","value","denotationChar","cssStyle","undefined","bold","italic","color","underline","strike","concat","size","font","length","setRichTextStyle","convertNewlinesToParagraphs","valueSplit","split","map","text","join","Clipboard","Quill","quillShadowDOMWorkaround","window","Core","QuillPasteExtra","_Clipboard","quill","options","_classCallCheck","_callSuper","_inherits","_createClass","Keyboard","CustomKeyboard","_Keyboard","arguments","_defineProperty","_objectSpread","DEFAULTS","bindings","BlurInputModule","_this$noteContainer","_this","event","key","blurQuill","shouldSkipInput","preventDefault","moveFocus","shiftKey","this","noteContainer","root","closest","addEventListener","handleKeyDown","bind","blur","container","tabIndex","focus","backwards","_focusableElements$ne","focusableElements","Array","from","querySelectorAll","currentIndex","indexOf","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","globalUserData","formats","register","Mention","MentionBlot","mentionModule","allowedChars","mentionDenotationChars","mentionContainerClass","mentionListClass","listItemClass","renderItem","div","document","createElement","innerText","email","para","className","appendChild","source","searchTerm","renderList","_callee","mentionsSearchFunction","foundUsers","_context","mentionsManager","getMentionLookupCallback","apply","_next","_throw","CommentTextarea","forwardRef","_ref","ref","_ref$value","onChange","onKeyDown","onBlur","onFocus","userData","isReply","_useTranslation","useTranslation","i18n","languageKey","resolvedLanguage","language","isAddReplyAttachmentDisabled","useSelector","state","selectors","isElementDisabled","DataElements","NotesPanel","ADD_REPLY_ATTACHMENT_BUTTON","transformTextForQuill","baseModule","blurInput","onClick","stopPropagation","onScroll","ReactQuill","style","overflowY","ele","getEditor","ariaLabel","modules","theme","placeholder","Button","dataElement","img","title","_getRootNode$querySel","getRootNode","querySelector","click","propTypes","PropTypes","string","func","isRequired","onSubmit","NoteTextarea","props","forwardedRef","_useSelector2","_slicedToArray","getUserData","isNoteSubmissionWithEnterEnabled","getAutoFocusNoteOnAnnotationSelection","getIsNoteEditing","shallowEqual","canSubmitByEnter","resize","useContext","textareaRef","useRef","prevHeightRef","useLayoutEffect","_textareaRef$current","_textareaRef$current$","boxDOMElement","current","firstElementChild","boundingBox","getBoundingClientRect","height","textareaProps","el","throttle","content","delta","replace","getText","trim","target","doesDeltaContainMention","_textareaRef$current2","formattedText","getFormattedTextFromDeltas","mentionData","extractMentionDataFromStr","totalTextLength","plainTextValue","textareaEditor","setTimeout","setSelection","which","isSubmittingByEnter","isSubmittingByCtrlEnter","metaKey","ctrlKey","Fragment","createStateAnnotation","documentViewerKey","stateAnnotation","Annotations","StickyAnnotation","core","getCurrentUser","enableSkipAutoLink","displayAuthor","getDisplayAuthor","stateMessage","i18next","toLowerCase","contents","setContents","NoteTextPreview","children","panelWidth","linesToBreak","renderRichText","_props$comment","comment","_props$beforeContent","beforeContent","_useState2","useState","expanded","setExpand","_useState4","previewElementWidth","setPreviewWidth","_useState6","charsPerLine","setCharsperLine","_useState8","showPrompt","setShowPrompt","textToDisplay","substring","prompt","noteTextPreviewClass","classNames","useEffect","textNodeWidth","clientWidth","textWidth","context","getContext","measureText","width","getTextWidth","averageCharWidth","Math","floor","aria-live","number","any","bool","createFlyoutItem","option","icon","label","noteStateFlyoutItems","NoteStateFlyout","noteId","_props$handleStateCha","handleStateChange","_props$isMultiSelectM","isMultiSelectMode","dispatch","useDispatch","selectorSuffix","flyoutSelector","NOTE_STATE_FLYOUT","currentFlyout","getFlyout","noteStateFlyout","items","noteState","actions","updateFlyout","addFlyout","isAnnotationRenderedInDisplayMode","isAnnotationInVisiblePages","getDisplayModeObject","getVisiblePages","includes","PageNumber","isContinuousDisplayMode","module","exports","ReplyAttachmentPicker","annotationId","addAttachments","replyAttachmentHandler","getReplyAttachmentHandler","_ref2","file","attachment","url","files","name","type","_x","id","display","notePopupFlyoutItems","handleEdit","handleDelete","isEditable","isDeletable","noop","NotePopup","_props$handleEdit","_props$handleDelete","customizableUI","_selectors$getFeature","getFeatureFlags","NOTE_POPUP_FLYOUT","notePopupButtonClass","optionsClass","ToggleElementButton","toggleElement","disabled","NotePopupFlyout","handleClick","selection","filter","notePopupFlyout","NotePopupContainer","activeDocumentViewerKey","getActiveDocumentViewerKey","setIsEditing","noteIndex","useCore","_React$useState2","canModify","setCanModify","_React$useState4","canModifyContents","setCanModifyContents","onUpdateAnnotationPermission","removeEventListener","passProps","useCallback","FreeTextAnnotation","getAnnotationManager","isFreeTextEditingEnabled","trigger","deleteAnnotations","_toConsumableArray","getGroupedChildren","NoDelete","Id","_extends","object","NoteState","annotationState","getStatus","NoteStateContainer","isNoteStateDisabled","useFocusOnClose","newValue","addReply","annotationManager","addAnnotation","getRootAnnotation","pendingEditTextMap","pendingReplyMap","pendingAttachmentMap","NoteUnpostedCommentIndicator","hasUnpostedComment","setHasUnpostedComment","hasUnpostedReply","setHasUnpostedReply","hasUnpostedAttachment","setHasUnpostedAttachment","_pendingEditTextMap$a","_pendingReplyMap$anno","_pendingAttachmentMap","data-element","Tooltip","Icon","glyph","NoteUnpostedCommentIndicatorContainer","isDisabled","_React$useContext","iconColor","fillColor","noteDateFormat","isSelected","notesShowLastUpdatedDate","isUnread","renderAuthorName","isEditing","sortStrategy","activeTheme","isMultiSelected","handleMultiSelect","isGroupMember","showAnnotationNumbering","isTrackedChange","NoteHeader","timezone","date","dateCreated","NotesPanelSortStrategy","MODIFIED_DATE","CREATED_DATE","getLatestActivityDate","DateCreated","datetimeStr","toLocaleString","timeZone","Date","getDateCreatedInTimezone","noteDateAndTime","dayjs","locale","format","numberOfReplies","getReplies","_annotation$iconColor","_annotation$iconColor2","toHexString","getRichTextStyle","numberOfRichTextStyles","keys","textLength","firstRichTextStyle","_annotation$getEditor","majorityColors","getMajorityTextColors","getColorFromAnnotation","Theme","DARK","isDarkColorHex","COMMON_COLORS","LIGHT","isLightColorHex","getColorFromTheme","getColor","FillColor","annotationAssociatedNumber","getAssociatedNumber","annotationDisplayedAssociatedNumber","authorAndDateClass","noteHeaderClass","parent","showNoteState","showNotePopup","Choice","aria-label","checked","trackedChangeId","getCustomData","OFFICE_EDITOR_TRACKED_CHANGE_KEY","getOfficeEditor","acceptTrackedChange","iconClassName","rejectTrackedChange","NoteTextPreviewContainer","notePanelWidth","getNotesPanelWidth","_asyncToGenerator","icons","FileAttachmentUtils","decompressFileContent","_decompressFileContent","decompressWithFlateDecode","setAnnotationAttachments","_x2","_setAnnotationAttachments","_callee2","_args2","_context2","setAttachments","isImage","startsWith","getAttachmentIcon","_file$name","pop","readAsText","svg","toString","fileReader","FileReader","onload","result","isSVG","sanitizeSVG","svgText","forbiddenTags","clean","DOMPurify","addHook","_","hookEvent","tagName","allowedTags","push","sanitize","Blob","isDirty","isArray","_arrayWithHoles","next","_iterableToArrayLimit","_arrayLikeToArray","slice","constructor","test","_unsupportedIterableToArray","_nonIterableRest","ImagePreview","src","setSrc","isDirtySVG","setIsDirtySvg","fileToSanitize","isImageFromPDF","_yield$sanitizeSVG","File","URL","createObjectURL","processImagePreview","ReplyAttachmentList","_ref3","fileDeleted","getTabManager","isReplyAttachmentPreviewEnabled","tabManager","previewEnabled","_ref4","fileData","console","warn","addTab","filename","setActive","saveCurrentActiveTabState","onDownload","_ref5","_callee3","_t","_context3","saveAs","_x3","_x4","onDelete","getAttributtes","element","attr","decoration","setReactQuillContent","indexes","isNaN","lastIndex","textSlice","extend","LocalizedFormat","isNonReplyNoteRead","onReplyClicked","handleNoteClick","NoteContent","_customData","_ref$handleNoteClick","getNoteDateFormat","getIconColor","mapAnnotationToKey","getCurrentLanguage","canCollapseTextPreview","isNotesPanelTextCollapsingEnabled","canCollapseReplyPreview","isNotesPanelRepliesCollapsingEnabled","getActiveTheme","getTimezone","_useContext","searchInput","onTopNoteContentClicked","setPendingEditText","store","useStore","annotationMapKeys","TRACKED_CHANGE","attachments","getAttachments","annotationChangedListener","annotations","action","annot","useDidUpdate","finishNoteEditing","customData","highlightSearchInput","skipAutoLink","getSkipAutoLink","trackedChangeLabels","1","2","3","renderContents","fontColor","autolinkerContent","Autolinker","link","stripPrefix","stripTrailingSlash","replaceFn","match","href","getAnchorHref","anchorText","getAnchorText","offset","getOffset","getType","start","end","getMatchedText","highlightResult","fontWeight","contentToRender","strIdx","anchorData","forIdx","rel","getDataWithKey","JSON","parse","escape","sanitizeContent","contentsToRender","Link","getLinkDestination","textColor","Color","textAreaValue","thereIsNoUnpostedEdit","noteContentClass","unread","clicked","useMemo","contentStyle","ContentArea","onTextAreaValueChange","pendingText","textPreview","highlightSearchResult","shouldCollapseAnnotationText","isString","DataElementWrapper","paddingRight","header","getIsMentionEnabled","INLINE_COMMENT_POPUP","isElementOpen","NOTES_PANEL","isAnyCustomPanelOpen","autoFocusNoteOnAnnotationSelection","isMentionEnabled","isInlineCommentDisabled","isInlineCommentOpen","isNotesPanelOpen","_useContext2","setCurAnnotId","deleteAttachment","clearAttachments","shouldNotFocusOnInput","isMobile","setText","_mentionsManager$extr","ids","getLength","pendingAttachments","_mentionsManager$extr2","disableSkipAutoLink","extractMentionDataFromAnnot","mentions","setCustomData","stringify","drawAnnotationsFromList","contentClassName","_e$relatedTarget","_e$relatedTarget$getA","relatedTarget","getAttribute","getRichTextSpan","fontStyle","textDecoration","styles","indices","Number","sort","b","index","min","max","styleIndices","fullText","loweredText","loweredSearchInput","lastFoundInstance","allFoundPositions","regexSafeSearchInput","RegExp","position","idx","ReplyArea","onPendingReplyChange","_selectors$getIsReply","isDocumentReadOnly","getIsReplyDisabled","isReplyDisabled","isReplyDisabledForAnnotation","isNoteEditingTriggeredByAnnotationPopup","isContentEditable","setPendingReply","isExpandedFromSearch","scrollToSelectedAnnot","isFocused","setIsFocused","postReply","replyText","replyAnnotation","_replyAnnotation","createMentionReply","addAnnotations","createAnnotationReply","ifReplyNotAllowed","replyAreaClass","onMouseDown","handleNoteTextareaChange","isSubmitType","groupAnnotations","array","NoteGroupSection","isViewingGroupAnnots","setIsViewingGroupAnnots","ViewAllAnnotsButton","CloseAllAnnotsButton","groupAnnotation","selectAnnotation","jumpToAnnotation","openElement","adjustPointForWebcomponent","coordinates","add","_window","_window$isApryseWebVi","isApryseWebViewerWebComponent","appRect","getElementById","rootLeft","left","rootTop","top","x","LineConnectorPortal","mount","setAttribute","ANNOTATION_NOTE_CONNECTOR_LINE","removeChild","createPortal","noteContainerRef","isCustomPanelOpen","AnnotationNoteConnectorLine","_noteContainerRef$cur","getTopHeadersHeight","getBottomHeadersHeight","getDocumentContainerWidth","getDocumentContainerHeight","topHeadersHeight","bottomHeadersHeight","lineIsOpen","notePanelIsOpen","isLineDisabled","documentContainerWidth","documentContainerHeight","lineProperties","setLineProperties","onPageNumberUpdated","closeElement","scrollViewElement","getScrollViewElement","calculatePosition","debounce","_getAnnotationPositio","getAnnotationPosition","annotationBottomRight","bottomRight","annotationTopLeft","topLeft","newLines","_core$getScrollViewEl","scrollTop","scrollLeft","noteContainerRect","containerRect","bottom","topLineStyle","verticalLineStyle","bottomLineStyle","isPanelOnLeft","horizontalDistanceToAnnotation","annotationHeight","right","SELECTION_POINT_WIDTH","firstHorizontalLineLength","secondHorizontalLineLength","verticalDistanceToAnnotation","startPosition","abs","isAnnotationOffScreen","topLimit","diff","bottomLimit","visibility","getConnectorLines","leading","trailing","_getAnnotationPositio2","annotDeps","scrollViewDeps","documentAndHeaderDeps","positionAndSizeDeps","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptor","getOwnPropertyDescriptors","defineProperties","_typeof","toPrimitive","String","_toPrimitive","_toPropertyKey","isInNotesPanel","currId","Note","shouldHideConnectorLine","containerRef","containerHeightRef","isEditingMap","setIsEditingMap","unreadReplyIdSet","Set","getNoteTransformFunction","getCustomNoteSelectionFunction","getUnreadAnnotationIdSet","isCommentThreadExpansionEnabled","isRightClickAnnotationPopupEnabled","getIsOfficeEditorMode","getOfficeEditorEditMode","noteTransformFunction","customNoteSelectionFunction","unreadAnnotationIdSet","shouldExpandCommentThread","isOfficeEditorMode","officeEditorEditMode","replies","has","setAnnotationReadState","isRead","prevHeight","currHeight","round","notesPanelElement","child","parentNode","_document","getSelection","deselectAllAnnotations","OfficeEditorEditMode","PREVIEW","ANNOTATION_POPUP","moveCursorToTrackedChange","hasUnreadReplies","noteClass","repliesClass","hidden","reply","showReplyArea","values","some","val","handleReplyClicked","markAllRepliesRead","repliesSetToRead","selectAnnotations","getGroupAnnotations","isGroup","lastReplyId","isRenderableInCurrentDisplayMode","isRenderingConnectorLine","ariaLabelledby","ariaCurrent","isUndraggable","isNotesPanelClosed","popupRef","closeAndReset","commentingAnnotation","contextValue","annotationForAttachment","InlineCommentingPopup","isExpanded","setExpanded","inlineCommentPopup","Popup","open","trackedChangePopup","onMouseMove","INLINE_COMMENT_POPUP_EXPAND_BUTTON","INLINE_COMMENT_POPUP_CLOSE_BUTTON","Provider","Draggable","cancel","InlineCommentingPopupContainer","getNotesInLeftPanel","LEFT_PANEL","getActiveLeftPanel","isAnnotationNumberingEnabled","getSortStrategy","notesInLeftPanel","isLeftPanelOpen","activeLeftPanel","setPosition","isPhone","isMobileDevice","isIE","isNotesPanelOpenOrActive","useOnClickOutside","notesPanel","clickedInNotesPanel","contains","clickedInNoteStateFlyout","datePicker","getDatePicker","warningModal","getOpenedWarningModal","colorPicker","getOpenedColorPicker","setPopupPosition","getPopupPosition","handleResize","setPendingAttachmentMap","annotationID","setAnnotationForAttachment","setPendingEditTextMap","_useState0","setPendingReplyMap","pendingReply","_core$getDocument","getDocument","workerTypes","OFFICE_EDITOR","attachmentList","splice"],"mappings":"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","file":"chunks/chunk.29.js","sourcesContent":["import React from 'react';\n\nconst NoteContext = React.createContext();\n\nexport default NoteContext;","const setAnnotationRichTextStyle = (editor, annotation) => {\n  const richTextStyle = {};\n  const ops = editor.getContents().ops;\n  let breakpoint = 0;\n  ops.forEach((item) => {\n    const attributes = item.attributes;\n    const isMention = item.insert?.mention;\n    let value = item.insert;\n    if (isMention) {\n      const mention = item.insert.mention;\n      value = mention.denotationChar + mention.value;\n    }\n    const cssStyle = {};\n    if (attributes === null || attributes === undefined ? undefined : attributes.bold) {\n      cssStyle['font-weight'] = 'bold';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.italic) {\n      cssStyle['font-style'] = 'italic';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.color) {\n      cssStyle['color'] = attributes.color;\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.underline) {\n      cssStyle['text-decoration'] = 'word';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.strike) {\n      if (cssStyle['text-decoration']) {\n        cssStyle['text-decoration'] = `${cssStyle['text-decoration']} line-through`;\n      } else {\n        cssStyle['text-decoration'] = 'line-through';\n      }\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.size) {\n      cssStyle['font-size'] = attributes.size;\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.font) {\n      cssStyle['font-family'] = attributes.font;\n    }\n\n    richTextStyle[breakpoint] = cssStyle;\n    breakpoint += value.length;\n  });\n  annotation.setRichTextStyle(richTextStyle);\n};\n\nexport default setAnnotationRichTextStyle;\n","\n/**\n * @ignore\n * Converts text with newlines (\"\\n\") into <p>...</p> elements to ensure proper\n * multiline handling in the editor. If no newlines are present, the original\n * text is returned.\n *\n * @param {string} value - The text to convert.\n * @returns {string} The converted text with <p> tags around each line.\n */\nfunction convertNewlinesToParagraphs(value) {\n  if (!value) {\n    return value;\n  }\n  const valueSplit = value.split('\\n');\n  const containsNewlines = valueSplit.length > 1;\n  if (!containsNewlines) {\n    return value;\n  }\n\n  const contentArray = valueSplit;\n  return contentArray.map((text) => `<p>${text || '<br>'}</p>`).join('');\n}\n\nexport default convertNewlinesToParagraphs;","import { Quill } from 'react-quill-new';\n\n// Overriding clipboard module to fix cursor issue after pasting text\nconst Clipboard = Quill.import('modules/clipboard');\nconst { quillShadowDOMWorkaround } = window.Core;\n\nexport class QuillPasteExtra extends Clipboard {\n  constructor(quill, options) {\n    quillShadowDOMWorkaround(quill);\n    super(quill, options);\n  }\n}\n\n// We override the default keyboard module to disable the list autofill feature\nconst Keyboard = Quill.import('modules/keyboard');\n\nexport class CustomKeyboard extends Keyboard {\n  static DEFAULTS = {\n    ...Keyboard.DEFAULTS,\n    bindings: {\n      ...Keyboard.DEFAULTS.bindings,\n      'list autofill': undefined,\n    }\n  };\n}\n\nexport class BlurInputModule {\n  constructor(quill) {\n    this.quill = quill;\n    this.noteContainer = quill.root.closest('.Note');\n    this.shouldSkipInput = false;\n\n    this.noteContainer?.addEventListener('keydown', this.handleKeyDown.bind(this));\n  }\n\n  handleKeyDown = (event) => {\n    if (event.key === 'Escape') {\n      this.blurQuill();\n    } else if (event.key === 'Tab' && this.shouldSkipInput) {\n      event.preventDefault();\n      this.moveFocus(event.shiftKey);\n    }\n  };\n\n  blurQuill() {\n    this.shouldSkipInput = true;\n    this.quill.blur();\n    this.quill.container.tabIndex = 0;\n    this.quill.container.focus();\n  }\n\n  moveFocus(backwards) {\n    // .ql-container.ql-snow is the quill editor selector\n    const focusableElements = Array.from(\n      this.noteContainer.querySelectorAll('.ql-container.ql-snow, button.modular-ui')\n    );\n    const currentIndex = focusableElements.indexOf(this.quill.container);\n\n    if (currentIndex !== -1) {\n      const newIndex = backwards ? currentIndex - 1 : currentIndex + 1;\n      focusableElements[newIndex]?.focus();\n    }\n\n    this.shouldSkipInput = false;\n    this.quill.container.tabIndex = -1;\n  }\n}\n","import React from 'react';\nimport ReactQuill, { Quill } from 'react-quill-new';\nimport { Mention, MentionBlot } from 'quill-mention';\nimport mentionsManager from 'helpers/MentionsManager';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport DataElements from 'constants/dataElement';\nimport selectors from 'selectors';\nimport getRootNode from 'helpers/getRootNode';\nimport transformTextForQuill from 'helpers/convertNewlinesToParagraphs';\nimport { CustomKeyboard, BlurInputModule, QuillPasteExtra } from 'helpers/quillModules';\nimport '../../../constants/quill.scss';\nimport './CommentTextarea.scss';\n\nlet globalUserData = [];\n\n// These are the formats that will be accepted by quill\n// removed images and videos\nconst formats = [\n  'background',\n  'bold',\n  'color',\n  'font',\n  'code',\n  'italic',\n  'link',\n  'size',\n  'strike',\n  'script',\n  'underline',\n  'blockquote',\n  'header',\n  'indent',\n  'list',\n  'align',\n  'direction',\n  'code-block',\n  'formula',\n  'mention',\n];\n\nQuill.register('modules/keyboard', CustomKeyboard, true);\nQuill.register('modules/clipboard', QuillPasteExtra, true);\nQuill.register('modules/blurInput', BlurInputModule);\n// Register quill-mention manually so the \"mention\" format is available\nQuill.register({\n  'modules/mention': Mention,\n  'blots/mention': MentionBlot,\n});\n\n// mentionsModule has to be outside the funtion to be able to access it without it being destroyed and recreated\nconst mentionModule = {\n  mention: {\n    allowedChars: /^[A-Za-z\\s0-9\\-_]*$/,\n    mentionDenotationChars: ['@', '#'],\n    mentionContainerClass: 'mention__element',\n    mentionListClass: 'mention__suggestions__list',\n    listItemClass: 'mention__suggestions__item',\n    renderItem(item) {\n      // quill-mentions does not support jsx being returned\n      const div = document.createElement('div');\n      div.innerText = item.value;\n      if (item.email) {\n        const para = document.createElement('p');\n        para.innerText = item.email;\n        para.className = 'email';\n        div.appendChild(para);\n      }\n      return div;\n    },\n    async source(searchTerm, renderList) {\n      const mentionsSearchFunction = mentionsManager.getMentionLookupCallback();\n      const foundUsers = await mentionsSearchFunction(globalUserData, searchTerm);\n      renderList(foundUsers, searchTerm);\n    }\n  }\n};\n\nconst CommentTextarea = React.forwardRef(\n  (\n    {\n      value = '',\n      onChange,\n      onKeyDown,\n      onBlur,\n      onFocus,\n      userData,\n      isReply,\n    },\n    ref\n  ) => {\n    const { t, i18n } = useTranslation();\n    const languageKey = i18n.resolvedLanguage || i18n.language;\n\n    const isAddReplyAttachmentDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON));\n\n    globalUserData = userData;\n\n    const addAttachment = () => {\n      getRootNode().querySelector('#reply-attachment-picker')?.click();\n    };\n\n    const onClick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const onScroll = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    value = transformTextForQuill(value);\n    const baseModule = { blurInput: {} };\n\n    // onBlur and onFocus have to be outside in the div because of quill bug\n    return (\n      <div className='comment-textarea' onBlur={onBlur} onFocus={onFocus} onClick={onClick} onScroll={onScroll}>\n        <ReactQuill\n          key={languageKey}\n          className='comment-textarea ql-container ql-editor'\n          style={{ overflowY: 'visible' }}\n          ref={(ele) => {\n            if (ele) {\n              ele.getEditor().root.ariaLabel = `${isReply ? t('action.reply') : t('action.comment')}`;\n            }\n            return ref(ele);\n          }}\n          modules={userData && userData.length > 0 ? { ...baseModule, ...mentionModule } : baseModule }\n          theme=\"snow\"\n          value={value}\n          placeholder={`${isReply ? t('action.reply') : t('action.comment')}...`}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n          formats={formats}\n        />\n        {isReply && !isAddReplyAttachmentDisabled &&\n          <Button\n            className='add-attachment'\n            dataElement={DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON}\n            img='ic_fileattachment_24px'\n            title={`${t('action.add')} ${t('option.type.fileattachment')}`}\n            onClick={addAttachment}\n          />\n        }\n      </div>\n    );\n  });\n\nCommentTextarea.displayName = 'CommentTextarea';\n\nexport default CommentTextarea;\n","import React, { useLayoutEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport throttle from 'lodash/throttle';\nimport NoteContext from 'components/Note/Context';\nimport selectors from 'selectors';\nimport CommentTextarea from './CommentTextarea/CommentTextarea';\nimport mentionsManager from 'helpers/MentionsManager';\n\nconst propTypes = {\n  // same the value attribute of a HTML textarea element\n  value: PropTypes.string,\n  // same the placeholder attribute of a HTML textarea element\n  placeholder: PropTypes.string,\n  // same the onChange attribute of a HTML textarea element\n  onChange: PropTypes.func.isRequired,\n  // same the onBlur attribute of a HTML textarea element\n  onBlur: PropTypes.func,\n  // same the onBlur attribute of a HTML textarea element\n  onFocus: PropTypes.func,\n  // a function that will be invoked when Ctrl + Enter or Cmd + Enter or only Enter are pressed\n  onSubmit: PropTypes.func,\n};\n\nconst NoteTextarea = React.forwardRef((props, forwardedRef) => {\n  const [\n    userData,\n    canSubmitByEnter,\n  ] = useSelector(\n    (state) => [\n      selectors.getUserData(state),\n      selectors.isNoteSubmissionWithEnterEnabled(state),\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.getIsNoteEditing(state),\n    ],\n    shallowEqual,\n  );\n\n  const { resize } = useContext(NoteContext);\n  const textareaRef = useRef();\n  const prevHeightRef = useRef();\n\n  useLayoutEffect(() => {\n    // when the height of the textarea changes, we also want to call resize\n    // to clear the cell measurer cache and update the note height in the virtualized list\n    const boxDOMElement = textareaRef.current?.editor?.container.firstElementChild;\n    const boundingBox = boxDOMElement?.getBoundingClientRect() || {};\n    if (prevHeightRef.current && prevHeightRef.current !== boundingBox.height) {\n      resize();\n    }\n    prevHeightRef.current = boundingBox.height;\n    // we need value to be in the dependency array because the height will only change when value changes\n    // eslint-disable-next-line\n  }, [props.value, resize]);\n\n\n  const handleKeyDown = (e) => {\n    const enterKey = 13;\n    const enterKeyPressed = e.which === enterKey;\n    if (enterKeyPressed) {\n      const isSubmittingByEnter = canSubmitByEnter;\n      const isSubmittingByCtrlEnter = (e.metaKey || e.ctrlKey);\n\n      if (isSubmittingByEnter || isSubmittingByCtrlEnter) {\n        props.onSubmit(e);\n      }\n    }\n  };\n\n  const handleChange = (content, delta, source, editor) => {\n    // Removes Non-breaking Space and replaces with regular space\n    content = content.replace(/&nbsp;/g, ' ');\n\n    if (textareaRef.current) {\n      /* For the React Quill editor, the text won't ever be empty, at least a '\\n'\n       * will be there, so it is necessary to trim the value to check if it is empty\n       */\n      const isEmpty = editor && editor.getText().trim() === '' && content === '<p><br></p>';\n      let value = '';\n\n      if (!isEmpty) {\n        value = content.target ? content.target.value : content;\n      }\n      props.onChange(value);\n\n      // If the delta contains a mention, then move the cursor to the end of the editor.\n      // This is necessary instead of using debounce when mentioning a user because\n      // the debounce was generating the following bug\n      // https://apryse.atlassian.net/browse/WVR-2380\n      const deltaContainsMention = mentionsManager.doesDeltaContainMention(delta.ops);\n\n      if (deltaContainsMention) {\n        const formattedText = mentionsManager.getFormattedTextFromDeltas(delta.ops);\n        const mentionData = mentionsManager.extractMentionDataFromStr(formattedText);\n        const editortextValue = editor.getText();\n        const totalTextLength = editortextValue.length + mentionData.plainTextValue.length;\n        const textareaEditor = textareaRef.current?.editor;\n        setTimeout(() => textareaEditor?.setSelection(totalTextLength, totalTextLength), 1);\n      }\n    }\n  };\n\n  const textareaProps = {\n    ...props,\n    ref: (el) => {\n      textareaRef.current = el;\n      forwardedRef(el);\n    },\n    onChange: throttle(handleChange, 100),\n    onKeyDown: handleKeyDown,\n    userData,\n  };\n\n  return (\n    <>\n      <CommentTextarea {...textareaProps}/>\n    </>\n  );\n});\n\nNoteTextarea.displayName = 'NoteTextarea';\nNoteTextarea.propTypes = propTypes;\n\nexport default NoteTextarea;\n","import NoteTextarea from './NoteTextarea';\n\nexport default NoteTextarea;","import i18next from 'i18next';\nimport core from 'core';\n\nfunction createStateAnnotation(annotation, state, documentViewerKey = 1) {\n  // TODO: the code below is copied from annotManager.updateAnnotationState in WebViewer to work around the issue\n  // in https://github.com/PDFTron/webviewer-ui/issues/620\n  // the implement before wasn't causing any actual issues, but it was confusing and unnecessary to trigger two annotationChanged events when a status is set\n  // A proper fix should be done once https://trello.com/c/zWlkygNb/1023-consider-adding-a-setlocalizationhandler-to-corecontrols is implemented\n  // at that time, we could use the translation handler(t) internally in updateAnnotationState before setting the contents, and use that function instead in this component\n\n  const stateAnnotation = new window.Core.Annotations.StickyAnnotation();\n\n  stateAnnotation['InReplyTo'] = annotation['Id'];\n  stateAnnotation['X'] = annotation['X'];\n  stateAnnotation['Y'] = annotation['Y'];\n  stateAnnotation['PageNumber'] = annotation['PageNumber'];\n  stateAnnotation['Subject'] = 'Sticky Note';\n  stateAnnotation['Author'] = core.getCurrentUser();\n  stateAnnotation['State'] = state;\n  stateAnnotation['StateModel'] = state === 'Marked' || state === 'Unmarked' ? 'Marked' : 'Review';\n  stateAnnotation['Hidden'] = true;\n  stateAnnotation.enableSkipAutoLink();\n\n  const displayAuthor = core.getDisplayAuthor(stateAnnotation['Author'], documentViewerKey);\n  const stateMessage = i18next.t(`option.state.${state.toLowerCase()}`);\n  const contents = `${stateMessage} ${i18next.t('option.state.setBy')} ${displayAuthor}`;\n  stateAnnotation.setContents(contents);\n\n  return stateAnnotation;\n}\n\nexport {\n  createStateAnnotation,\n};\n","import React, { useState, useEffect, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\n\nimport './NoteTextPreview.scss';\n\nfunction NoteTextPreview(props) {\n  /* This replace is to remove the break line that the React Quill component add into the text */\n  const text = props.children.replace(/\\n$/, '');\n  const {\n    panelWidth,\n    linesToBreak,\n    renderRichText,\n    richTextStyle,\n    resize,\n    style,\n    /* If text being previewed is a comment it gets a darker font color */\n    comment = false,\n    beforeContent = () => {},\n  } = props;\n  const [expanded, setExpand] = useState(false);\n  const [previewElementWidth, setPreviewWidth] = useState(null);\n  const [charsPerLine, setCharsperLine] = useState(null);\n  const [showPrompt, setShowPrompt] = useState(false);\n  const ref = React.useRef(null);// Must import this way in order to mock it properly\n  const { t } = useTranslation();\n\n  const onClickHandler = (event) => {\n    event.stopPropagation();\n    setExpand(!expanded);\n    resize && resize();\n  };\n\n  const textToDisplay = expanded ? text : text.substring(0, charsPerLine * linesToBreak);\n  const prompt = expanded ? t('action.showLess') : t('action.showMore');\n  const noteTextPreviewClass = classNames('note-text-preview', { 'preview-comment': comment });\n\n  useEffect(() => {\n    const textNodeWidth = ref.current.clientWidth;\n    setPreviewWidth(textNodeWidth);\n  }, [panelWidth]);\n\n  // useLayoutEffect to avoid a flicker before we get the final text prop\n  useLayoutEffect(() => {\n    function getTextWidth(text) {\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      context.font = '13px sans-serif';\n\n      return context.measureText(text).width;\n    }\n\n    const textWidth = getTextWidth(text);\n    const averageCharWidth = textWidth / text.length;\n    const charsPerLine = Math.floor(previewElementWidth / averageCharWidth);\n    setCharsperLine(charsPerLine);\n\n    const totalLines = textWidth / previewElementWidth;\n    setShowPrompt(totalLines > linesToBreak);\n  }, [text, previewElementWidth]);\n\n  return (\n    <div className={noteTextPreviewClass} ref={ref} style={style} aria-live=\"polite\">\n      {beforeContent()}\n      {renderRichText && richTextStyle\n        ? renderRichText(textToDisplay, richTextStyle, 0)\n        : textToDisplay} {showPrompt && <button className=\"note-text-preview-prompt\" onClick={onClickHandler}>{prompt}</button>}\n    </div>\n  );\n}\n\nNoteTextPreview.propTypes = {\n  panelWidth: PropTypes.number,\n  linesToBreak: PropTypes.number,\n  renderRichText: PropTypes.func,\n  richTextStyle: PropTypes.any,\n  resize: PropTypes.func,\n  style: PropTypes.any,\n  comment: PropTypes.bool,\n  beforeContent: PropTypes.func,\n};\n\nexport default NoteTextPreview;","import { useLayoutEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport DataElements from 'src/constants/dataElement';\nimport actions from 'actions';\nimport selectors from 'selectors';\n\nconst createFlyoutItem = (option, icon, dataElement) => ({\n  icon,\n  label: `option.state.${option.toLowerCase()}`,\n  title: `option.state.${option.toLowerCase()}`,\n  option,\n  dataElement,\n});\n\nexport const noteStateFlyoutItems = [\n  createFlyoutItem('Accepted', 'icon-annotation-status-accepted', 'noteStateFlyoutAcceptedOption'),\n  createFlyoutItem('Rejected', 'icon-annotation-status-rejected', 'noteStateFlyoutRejectedOption'),\n  createFlyoutItem('Cancelled', 'icon-annotation-status-cancelled', 'noteStateFlyoutCancelledOption'),\n  createFlyoutItem('Completed', 'icon-annotation-status-completed', 'noteStateFlyoutCompletedOption'),\n  createFlyoutItem('None', 'icon-annotation-status-none', 'noteStateFlyoutNoneOption'),\n  createFlyoutItem('Marked', 'icon-annotation-status-marked', 'noteStateFlyoutMarkedOption'),\n  createFlyoutItem('Unmarked', 'icon-annotation-status-unmarked', 'noteStateFlyoutUnmarkedOption'),\n];\n\nconst NoteStateFlyout = (props) => {\n  const {\n    noteId,\n    handleStateChange = () => {},\n    isMultiSelectMode = false,\n  } = props;\n\n  const dispatch = useDispatch();\n\n  const selectorSuffix = isMultiSelectMode ? '' : `-${noteId}`;\n  const flyoutSelector = `${DataElements.NOTE_STATE_FLYOUT}${selectorSuffix}`;\n  const currentFlyout = useSelector((state) => selectors.getFlyout(state, flyoutSelector));\n\n  const handleClick = (noteState) => {\n    handleStateChange(noteState);\n  };\n\n  useLayoutEffect(() => {\n    const noteStateFlyout = {\n      dataElement: flyoutSelector,\n      className: 'NoteStateFlyout',\n      items: noteStateFlyoutItems.map((item) => {\n        return {\n          ...item,\n          onClick: () => handleClick(item.option),\n        };\n      }),\n    };\n\n    if (!currentFlyout) {\n      dispatch(actions.addFlyout(noteStateFlyout));\n    } else {\n      dispatch(actions.updateFlyout(noteStateFlyout.dataElement, noteStateFlyout));\n    }\n  }, [handleStateChange]);\n\n  return null;\n};\n\nNoteStateFlyout.propTypes = {\n  noteId: PropTypes.string,\n  handleStateChange: PropTypes.func,\n  isMultiSelectMode: PropTypes.bool,\n};\n\nexport default NoteStateFlyout;","import NoteStateFlyout from './NoteStateFlyout';\n\nexport default NoteStateFlyout;","export const isAnnotationRenderedInDisplayMode = (core, annotation) => {\n  const visiblePages = core.getDisplayModeObject().getVisiblePages();\n  const isAnnotationInVisiblePages = visiblePages.includes(annotation.PageNumber);\n  const isFocusableInCurrentDisplayMode = core.isContinuousDisplayMode() || (!core.isContinuousDisplayMode() && isAnnotationInVisiblePages);\n  return isFocusableInCurrentDisplayMode;\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nconst ReplyAttachmentPicker = ({ annotationId, addAttachments }) => {\n  const replyAttachmentHandler = useSelector((state) => selectors.getReplyAttachmentHandler(state));\n\n  const onChange = async (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      let attachment = file;\n      if (replyAttachmentHandler) {\n        const url = await replyAttachmentHandler(file);\n        attachment = {\n          url,\n          name: file.name,\n          size: file.size,\n          type: file.type\n        };\n      }\n      addAttachments(annotationId, [attachment]);\n    }\n  };\n\n  return (\n    <input\n      id=\"reply-attachment-picker\"\n      type=\"file\"\n      style={{ display: 'none' }}\n      onChange={onChange}\n      onClick={(e) => {\n        e.target.value = '';\n      }}\n    />\n  );\n};\n\nexport default ReplyAttachmentPicker;\n","import React, { useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport selectors from 'selectors';\nimport DataElements from 'src/constants/dataElement';\nimport actions from 'actions';\nimport './NotePopup.scss';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ToggleElementButton from 'components/ModularComponents/ToggleElementButton';\n\nconst createFlyoutItem = (option, icon, dataElement) => ({\n  icon,\n  label: `action.${option.toLowerCase()}`,\n  title: `action.${option.toLowerCase()}`,\n  option,\n  dataElement,\n});\n\nexport const notePopupFlyoutItems = [\n  createFlyoutItem('Edit', '', 'notePopupEdit'),\n  createFlyoutItem('Delete', '', 'notePopupDelete'),\n];\n\nconst propTypes = {\n  handleEdit: PropTypes.func,\n  handleDelete: PropTypes.func,\n  isEditable: PropTypes.bool,\n  isDeletable: PropTypes.bool,\n  noteId: PropTypes.string,\n};\n\nfunction noop() { }\n\nfunction NotePopup(props) {\n  const {\n    handleEdit = noop,\n    handleDelete = noop,\n    isEditable,\n    isDeletable,\n    isReply,\n    noteId,\n  } = props;\n\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n  const flyoutSelector = `${DataElements.NOTE_POPUP_FLYOUT}-${noteId}`;\n  const [t] = useTranslation();\n\n  const handleClick = (selection) => {\n    if (selection === 'Edit') {\n      handleEdit();\n    } else if (selection === 'Delete') {\n      handleDelete();\n    }\n  };\n\n  if (!isEditable && !isDeletable) {\n    return null;\n  }\n\n  const notePopupButtonClass = classNames('overflow note-popup-toggle-trigger');\n  const optionsClass = classNames('NotePopup options note-popup-options', { 'options-reply': isReply, 'modular-ui': customizableUI });\n  return (\n    <div className={optionsClass}>\n      <ToggleElementButton\n        dataElement={`notePopup-${noteId}`}\n        className={notePopupButtonClass}\n        img=\"icon-tools-more\"\n        title={t('formField.formFieldPopup.options')}\n        toggleElement={flyoutSelector}\n        disabled={false}\n      />\n      <NotePopupFlyout\n        flyoutSelector={flyoutSelector}\n        handleClick={handleClick}\n        isEditable={isEditable}\n        isDeletable={isDeletable}\n      />\n    </div>\n  );\n}\n\n\nconst NotePopupFlyout = ({\n  flyoutSelector,\n  handleClick,\n  isEditable,\n  isDeletable,\n}) => {\n  const dispatch = useDispatch();\n  const currentFlyout = useSelector((state) => selectors.getFlyout(state, flyoutSelector));\n  const [t] = useTranslation();\n\n  useLayoutEffect(() => {\n    let items = notePopupFlyoutItems;\n    if (!isEditable) {\n      items = items.filter((item) => item.option !== 'Edit');\n    } else if (!isDeletable) {\n      items = items.filter((item) => item.option !== 'Delete');\n    }\n\n    const notePopupFlyout = {\n      dataElement: flyoutSelector,\n      className: 'NotePopupFlyout',\n      items: items.map((item) => {\n        return {\n          ...item,\n          label: t(item.label),\n          title: t(item.title),\n          onClick: () => handleClick(item.option),\n        };\n      }),\n    };\n\n    if (!currentFlyout) {\n      dispatch(actions.addFlyout(notePopupFlyout));\n    } else {\n      dispatch(actions.updateFlyout(notePopupFlyout.dataElement, notePopupFlyout));\n    }\n  }, [isEditable, isDeletable]);\n\n  return null;\n};\n\nNotePopupFlyout.propTypes = {\n  flyoutSelector: PropTypes.string,\n  handleClick: PropTypes.func,\n  isEditable: PropTypes.bool,\n  isDeletable: PropTypes.bool,\n};\n\nNotePopup.propTypes = propTypes;\n\nexport default NotePopup;\n","import React from 'react';\nimport useCore from 'hooks/useCore';\nimport NotePopup from './NotePopup';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nfunction NotePopupContainer(props) {\n  const [\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n  const { annotation, setIsEditing, noteIndex } = props;\n  const { core } = useCore();\n  const [canModify, setCanModify] = React.useState(core.canModify(annotation));\n  const [canModifyContents, setCanModifyContents] = React.useState(core.canModifyContents(annotation));\n\n  React.useEffect(() => {\n    function onUpdateAnnotationPermission() {\n      setCanModify(core.canModify(annotation, activeDocumentViewerKey));\n      setCanModifyContents(core.canModifyContents(annotation, activeDocumentViewerKey));\n    }\n\n    onUpdateAnnotationPermission();\n    core.addEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, undefined, activeDocumentViewerKey);\n    return () => core.removeEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, activeDocumentViewerKey);\n  }, [annotation, activeDocumentViewerKey]);\n\n  const handleEdit = React.useCallback(() => {\n    const isFreeText = annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n    if (isFreeText && core.getAnnotationManager(activeDocumentViewerKey).isFreeTextEditingEnabled()) {\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationDoubleClicked', annotation);\n    } else {\n      setIsEditing(true, noteIndex);\n    }\n  }, [annotation, setIsEditing, noteIndex]);\n\n  const handleDelete = React.useCallback(() => {\n    core.deleteAnnotations([annotation, ...annotation.getGroupedChildren()], undefined, activeDocumentViewerKey);\n  }, [annotation]);\n\n  const isEditable = canModifyContents;\n  const isDeletable = canModify && !annotation?.NoDelete;\n  const noteId = (annotation) ? annotation.Id : '';\n\n  const passProps = {\n    handleEdit,\n    handleDelete,\n    isEditable,\n    isDeletable,\n    noteId,\n  };\n\n  return (\n    <NotePopup {...props} {...passProps} />\n  );\n}\n\nexport default NotePopupContainer;\n","import NotePopupContainer from './NotePopupContainer';\n\nexport default NotePopupContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport NoteStateFlyout from 'components/ModularComponents/NoteStateFlyout';\nimport ToggleElementButton from 'components/ModularComponents/ToggleElementButton';\nimport DataElements from 'constants/dataElement';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  handleStateChange: PropTypes.func\n};\n\nfunction NoteState(props) {\n  const {\n    annotation,\n    handleStateChange = () => { },\n  } = props;\n\n  const [t] = useTranslation();\n\n  const annotationState = annotation.getStatus();\n  const icon = `icon-annotation-status-${annotationState === '' ? 'none' : annotationState.toLowerCase()}`;\n  const id = annotation.Id;\n\n  return (\n    <>\n      <ToggleElementButton\n        dataElement={`noteState-${id}`}\n        title={t('option.notesOrder.status')}\n        img={icon}\n        toggleElement={`${DataElements.NOTE_STATE_FLYOUT}-${id}`}\n      />\n      <NoteStateFlyout\n        noteId={id}\n        handleStateChange={handleStateChange}\n      />\n    </>\n  );\n}\n\nNoteState.propTypes = propTypes;\n\nexport default NoteState;","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport useCore from 'hooks/useCore';\n\nimport NoteState from './NoteState';\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\n\nconst propTypes = {\n  annotation: PropTypes.object,\n};\n\nfunction NoteStateContainer(props) {\n  const { core } = useCore();\n  const activeDocumentViewerKey = useSelector((state) => selectors.getActiveDocumentViewerKey(state));\n  const isNoteStateDisabled = useSelector((state) => selectors.isElementDisabled(state, 'noteState'));\n\n  const { annotation } = props;\n\n  const handleStateChange = useFocusOnClose(useCallback(function handleStateChangeCallback(newValue) {\n    const stateAnnotation = createStateAnnotation(annotation, newValue, activeDocumentViewerKey);\n    annotation.addReply(stateAnnotation);\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n    annotationManager.addAnnotation(stateAnnotation);\n    annotationManager.trigger('addReply', [stateAnnotation, annotation, annotationManager.getRootAnnotation(annotation)]);\n  }, [annotation, activeDocumentViewerKey]));\n\n  return (!isNoteStateDisabled &&\n    <div>\n      <NoteState handleStateChange={handleStateChange} {...props} />\n    </div>\n  );\n}\n\nNoteStateContainer.propTypes = propTypes;\nexport default NoteStateContainer;\n","import NoteStateContainer from './NoteStateContainer';\n\nexport default NoteStateContainer;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Tooltip from 'components/Tooltip';\nimport Icon from 'components/Icon';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  annotationId: PropTypes.string,\n  ariaLabel: PropTypes.string,\n  pendingEditTextMap: PropTypes.object,\n  pendingReplyMap: PropTypes.object,\n  pendingAttachmentMap: PropTypes.object,\n};\n\nconst NoteUnpostedCommentIndicator = ({ annotationId, ariaLabel, pendingEditTextMap, pendingReplyMap, pendingAttachmentMap }) => {\n  const { t } = useTranslation();\n  const [hasUnpostedComment, setHasUnpostedComment] = useState(false);\n  const [hasUnpostedReply, setHasUnpostedReply] = useState(false);\n  const [hasUnpostedAttachment, setHasUnpostedAttachment] = useState(false);\n\n  useEffect(() => {\n    setHasUnpostedComment(pendingEditTextMap[annotationId]?.length > 0);\n    setHasUnpostedReply(pendingReplyMap[annotationId]?.length > 0);\n    setHasUnpostedAttachment(pendingAttachmentMap[annotationId]?.length > 0);\n  }, [pendingEditTextMap, pendingReplyMap, pendingAttachmentMap]);\n\n  return (\n    (hasUnpostedComment || hasUnpostedReply || hasUnpostedAttachment) ?\n      <div data-element=\"unpostedCommentIndicator\">\n        <Tooltip content={t('message.unpostedComment')}>\n          <div>\n            <Icon className=\"type-icon\" glyph={'icon-unposted-comment'} ariaLabel={ariaLabel}/>\n          </div>\n        </Tooltip>\n      </div> :\n      null\n  );\n};\n\nNoteUnpostedCommentIndicator.propTypes = propTypes;\n\nexport default NoteUnpostedCommentIndicator;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteContext from 'components/Note/Context';\nimport NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicator';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  annotationId: PropTypes.string,\n  ariaLabel: PropTypes.string,\n};\n\nconst NoteUnpostedCommentIndicatorContainer = ({ annotationId, ariaLabel }) => {\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, 'unpostedCommentIndicator'));\n  const { pendingEditTextMap, pendingReplyMap, pendingAttachmentMap } = React.useContext(NoteContext);\n\n  if (isDisabled) {\n    return null;\n  }\n  return (\n    <NoteUnpostedCommentIndicator\n      annotationId={annotationId}\n      ariaLabel={ariaLabel}\n      pendingEditTextMap={pendingEditTextMap}\n      pendingReplyMap={pendingReplyMap}\n      pendingAttachmentMap={pendingAttachmentMap}\n    />);\n};\n\nNoteUnpostedCommentIndicatorContainer.propTypes = propTypes;\n\nexport default NoteUnpostedCommentIndicatorContainer;","import NoteUnpostedCommentIndicatorContainer from './NoteUnpostedCommentIndicatorContainer';\n\nexport default NoteUnpostedCommentIndicatorContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NotePopup from 'components/NotePopup';\nimport NoteState from 'components/NoteState';\nimport Icon from 'components/Icon';\nimport NoteUnpostedCommentIndicator from 'components/NoteUnpostedCommentIndicator';\nimport Choice from 'components/Choice';\nimport Button from 'components/Button';\n\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport getColor from 'helpers/getColor';\nimport { isDarkColorHex, isLightColorHex } from 'helpers/color';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport useCore from 'hooks/useCore';\nimport { NotesPanelSortStrategy } from 'constants/sortStrategies';\nimport Theme from 'constants/theme';\nimport { OFFICE_EDITOR_TRACKED_CHANGE_KEY } from 'constants/officeEditor';\nimport { COMMON_COLORS } from 'constants/commonColors';\n\nimport './NoteHeader.scss';\n\nconst { Annotations } = window.Core;\n\nconst propTypes = {\n  icon: PropTypes.string,\n  iconColor: PropTypes.string,\n  color: PropTypes.string,\n  fillColor: PropTypes.string,\n  annotation: PropTypes.object,\n  language: PropTypes.string,\n  noteDateFormat: PropTypes.string,\n  isSelected: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  notesShowLastUpdatedDate: PropTypes.bool,\n  isUnread: PropTypes.bool,\n  renderAuthorName: PropTypes.func,\n  isNoteStateDisabled: PropTypes.bool,\n  isEditing: PropTypes.bool,\n  noteIndex: PropTypes.number,\n  sortStrategy: PropTypes.string,\n  activeTheme: PropTypes.string,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n  showAnnotationNumbering: PropTypes.bool,\n  isTrackedChange: PropTypes.bool,\n};\n\n/**\n * Determines the color to use for the comment box header, considering its icon color and rich text style.\n *\n * If the annotation contains rich text styles, the function analyzes the styles to select the most representative color.\n * - If there is only one rich text style and it covers more than half of the text, its color is used.\n * - If there are multiple rich text styles, the majority color is determined by `getMajorityTextColor`.\n * - Otherwise, the annotation's icon color is used.\n *\n * @param {Object} annotation - The annotation object containing color and rich text style information.\n * @param {string} iconColor - The property name for the icon color in the annotation object.\n * @returns {string|undefined} The determined color as a hex string, or undefined if not found.\n * @ignore\n */\nfunction getColorFromAnnotation(annotation, iconColor) {\n  let color = annotation[iconColor]?.toHexString?.();\n\n  const isFreeText = annotation instanceof Annotations.FreeTextAnnotation;\n\n  if (!isFreeText) {\n    return color;\n  }\n\n  // If the annotation has rich text style, we need to determine the color based on the rich text style\n  const richTextStyle = annotation.getRichTextStyle();\n\n  if (!richTextStyle) {\n    return color;\n  }\n\n  const numberOfRichTextStyles = Object.keys(richTextStyle).length;\n  const textLength = annotation.getContents().length;\n  const firstRichTextStyle = richTextStyle[0];\n  const isSingleColorRichText = numberOfRichTextStyles === 1 && firstRichTextStyle && firstRichTextStyle.color;\n  if (isSingleColorRichText) {\n    const richTextLength = textLength - Object.keys(richTextStyle)[0];\n    color = richTextLength / textLength > 0.5 ? firstRichTextStyle.color : color;\n  } else if (numberOfRichTextStyles > 1) {\n    const majorityColors = annotation.getEditor()?.getMajorityTextColors() || [];\n    color = majorityColors.length < 1 ? color : majorityColors[0];\n  }\n\n  return color;\n}\n\n/**\n * Returns a color from the common colors palette based on the active theme and the provided color.\n *\n * If the active theme is DARK and the color is a dark hex color, returns white.\n * If the active theme is LIGHT and the color is a light hex color, returns black.\n *\n * @param {Theme} activeTheme - The current theme (e.g., Theme.DARK or Theme.LIGHT).\n * @param {string} color - The hex color string to evaluate.\n * @returns {string|undefined} The selected color from COMMON_COLORS, or undefined if no condition matches.\n * @ignore\n */\nfunction getColorFromTheme(activeTheme, color) {\n  if (activeTheme === Theme.DARK && color && isDarkColorHex(color)) {\n    return COMMON_COLORS['white'];\n  } else if (activeTheme === Theme.LIGHT && color && isLightColorHex(color)) {\n    return COMMON_COLORS['black'];\n  }\n}\n\n/**\n * Returns the creation date of an annotation in the specified timezone.\n *\n * Depending on the sort strategy and settings, it either returns the latest activity date\n * or the original creation date of the annotation. If a timezone is provided, the date is\n * converted to that timezone.\n *\n * @param {string} sortStrategy - The strategy used for sorting notes (e.g., by modified or created date).\n * @param {boolean} notesShowLastUpdatedDate - Whether to show the last updated date for notes.\n * @param {Object} annotation - The annotation object containing date information.\n * @param {string} [timezone] - The IANA timezone string (e.g., 'America/New_York').\n * @returns {Date} The date created or last updated, optionally converted to the specified timezone.\n * @ignore\n */\nfunction getDateCreatedInTimezone(sortStrategy, notesShowLastUpdatedDate, annotation, timezone) {\n  const dateCreated = (\n    sortStrategy === NotesPanelSortStrategy.MODIFIED_DATE ||\n    (notesShowLastUpdatedDate && sortStrategy !== NotesPanelSortStrategy.CREATED_DATE)) ?\n    getLatestActivityDate(annotation) : annotation.DateCreated;\n\n  if (timezone && dateCreated) {\n    const datetimeStr = dateCreated.toLocaleString('en-US', { timeZone: timezone });\n    return new Date(datetimeStr);\n  }\n\n  return dateCreated;\n}\n\nfunction NoteHeader(props) {\n  const {\n    icon,\n    iconColor,\n    annotation,\n    language,\n    noteDateFormat,\n    isSelected,\n    setIsEditing,\n    notesShowLastUpdatedDate,\n    isReply,\n    isUnread,\n    renderAuthorName,\n    isNoteStateDisabled,\n    isEditing,\n    noteIndex,\n    sortStrategy,\n    activeTheme,\n    isMultiSelected,\n    isMultiSelectMode,\n    handleMultiSelect,\n    isGroupMember,\n    showAnnotationNumbering,\n    timezone,\n    isTrackedChange,\n  } = props;\n  const { core } = useCore();\n\n  const [t] = useTranslation();\n\n  let date = getDateCreatedInTimezone(sortStrategy, notesShowLastUpdatedDate, annotation, timezone);\n  const noteDateAndTime = date ? dayjs(date).locale(language).format(noteDateFormat) : t('option.notesPanel.noteContent.noDate');\n\n  const numberOfReplies = annotation.getReplies().length;\n\n  let color = getColorFromAnnotation(annotation, iconColor);\n  if (color === '') {\n    color = getColorFromTheme(activeTheme, color);\n  }\n  const fillColor = getColor(annotation.FillColor);\n\n  const annotationAssociatedNumber = annotation.getAssociatedNumber();\n  const annotationDisplayedAssociatedNumber = `#${annotationAssociatedNumber} - `;\n\n  const authorAndDateClass = classNames('author-and-date', { isReply });\n  const noteHeaderClass = classNames('NoteHeader', { parent: !isReply && !isGroupMember });\n\n  const acceptTrackedChange = (trackedChangeAnnot) => {\n    const trackedChangeId = trackedChangeAnnot.getCustomData(OFFICE_EDITOR_TRACKED_CHANGE_KEY);\n    core.getOfficeEditor().acceptTrackedChange(trackedChangeId);\n  };\n  const rejectTrackedChange = (trackedChangeAnnot) => {\n    const trackedChangeId = trackedChangeAnnot.getCustomData(OFFICE_EDITOR_TRACKED_CHANGE_KEY);\n    core.getOfficeEditor().rejectTrackedChange(trackedChangeId);\n  };\n\n  const showNoteState = !isNoteStateDisabled && !isReply && !isMultiSelectMode && !isGroupMember && !isTrackedChange;\n  const showNotePopup = !isEditing && isSelected && !isMultiSelectMode && !isGroupMember && !isTrackedChange;\n\n  return (\n    <div className={noteHeaderClass}>\n      {!isReply &&\n        <div className=\"type-icon-container\">\n          {isUnread &&\n            <div className=\"unread-notification\"></div>\n          }\n          <Icon className=\"type-icon\" glyph={icon} color={color} fillColor={fillColor} />\n        </div>\n      }\n      <div className={authorAndDateClass}>\n        <div className=\"author-and-overflow\">\n          <div className=\"author-and-time\">\n            <div className=\"author\">\n              {showAnnotationNumbering && annotationAssociatedNumber !== undefined &&\n                <span className=\"annotation-number\">{annotationDisplayedAssociatedNumber}</span>\n              }\n              {renderAuthorName(annotation)}\n            </div>\n            <div className=\"date-and-num-replies\">\n              <div className=\"date-and-time\">\n                {noteDateAndTime}\n                {isGroupMember && ` (Page ${annotation.PageNumber})`}\n              </div>\n              {numberOfReplies > 0 && !isSelected &&\n                <div className=\"num-replies-container\">\n                  <Icon className=\"num-reply-icon\" glyph='icon-chat-bubble' />\n                  <div className=\"num-replies\">{numberOfReplies}</div>\n                </div>}\n            </div>\n          </div>\n          <div className=\"state-and-overflow\">\n            {isMultiSelectMode && !isGroupMember && !isReply &&\n              <Choice\n                id={`note-multi-select-toggle_${annotation.Id}`}\n                aria-label={`${renderAuthorName(annotation)} ${t('option.notesPanel.toggleMultiSelect')}`}\n                checked={isMultiSelected}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  handleMultiSelect(!isMultiSelected);\n                }}\n              />\n            }\n            <NoteUnpostedCommentIndicator\n              annotationId={annotation.Id}\n              ariaLabel={`Unposted Comment, ${renderAuthorName(annotation)}, ${noteDateAndTime}`}\n            />\n            {showNoteState &&\n              <NoteState\n                annotation={annotation}\n                isSelected={isSelected}\n              />\n            }\n            {showNotePopup &&\n              <NotePopup\n                noteIndex={noteIndex}\n                annotation={annotation}\n                setIsEditing={setIsEditing}\n                isReply={isReply}\n              />\n            }\n            {isSelected && isTrackedChange && !isMultiSelectMode &&\n              <>\n                <Button\n                  title={t('officeEditor.accept')}\n                  img={'icon-menu-checkmark'}\n                  className=\"tracked-change-icon-wrapper accept\"\n                  onClick={() => acceptTrackedChange(annotation)}\n                  iconClassName=\"tracked-change-icon\"\n                />\n                <Button\n                  title={t('officeEditor.reject')}\n                  img={'icon-close'}\n                  className=\"tracked-change-icon-wrapper reject\"\n                  onClick={() => rejectTrackedChange(annotation)}\n                  iconClassName=\"tracked-change-icon\"\n                />\n              </>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nNoteHeader.propTypes = propTypes;\n\nexport default NoteHeader;\n","import NoteHeader from './NoteHeader';\n\nexport default NoteHeader;","import React from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteTextPreview from './NoteTextPreview';\n\nfunction NoteTextPreviewContainer(props) {\n  const [notePanelWidth] = useSelector(\n    (state) => [\n      selectors.getNotesPanelWidth(state),\n    ],\n    shallowEqual,\n  );\n\n  return (\n    <NoteTextPreview {...props} panelWidth={notePanelWidth} />\n  );\n}\n\nexport default NoteTextPreviewContainer;\n","import NoteTextPreviewContainer from './NoteTextPreviewContainer';\n\nexport default NoteTextPreviewContainer;","const icons = {\n  pdf: 'ic-file-pdf',\n  image: 'ic-file-img',\n  cad: 'ic-file-cad',\n  doc: 'ic-file-doc',\n  ppt: 'ic-file-ppt',\n  xls: 'ic-file-xls',\n  unknown: 'ic-file-etc'\n};\n\nconst FileAttachmentUtils = window.Core.Annotations.FileAttachmentUtils;\n\nexport async function decompressFileContent(file) {\n  return FileAttachmentUtils.decompressWithFlateDecode(file.content, file.type);\n}\n\nexport async function setAnnotationAttachments(annotation, files = []) {\n  await annotation.setAttachments(files);\n}\n\nexport function isImage(file) {\n  if (file.type && file.type.startsWith('image/')) {\n    return true;\n  }\n  return false;\n}\n\nexport function getAttachmentIcon(file) {\n  if (isImage(file)) {\n    return icons.image;\n  }\n  const extension = file.name?.split('.').pop().toLowerCase();\n  switch (extension) {\n    case 'pdf':\n      return icons.pdf;\n    case 'cad':\n      return icons.cad;\n    case 'doc':\n    case 'docx':\n      return icons.doc;\n    case 'ppt':\n    case 'pptx':\n      return icons.ppt;\n    case 'xls':\n    case 'xlsx':\n      return icons.xls;\n    default:\n      return icons.unknown;\n  }\n}\n","import DOMPurify from 'dompurify';\n\nconst SVG_MIME_TYPE = 'image/svg+xml';\n\nconst hasFileSize = (file) => {\n  return file.size !== undefined;\n};\n\n// Taken from https://github.com/mattkrick/sanitize-svg/blob/master/src/sanitizeSVG.ts#L31\nconst readAsText = (svg) => {\n  return new Promise((resolve) => {\n    if (!hasFileSize(svg)) {\n      resolve(svg.toString('utf-8'));\n    } else {\n      const fileReader = new FileReader();\n      fileReader.onload = () => resolve(fileReader.result);\n      fileReader.readAsText(svg);\n    }\n  });\n};\n\nexport const isSVG = (file) => {\n  return file.type === SVG_MIME_TYPE;\n};\n\nexport const sanitizeSVG = async (file) => {\n  const svgText = await readAsText(file);\n  if (!svgText) {\n    return { svg: file };\n  }\n\n  const forbiddenTags = [];\n  DOMPurify.addHook('uponSanitizeElement', (_, hookEvent) => {\n    const { tagName, allowedTags } = hookEvent;\n    if (!allowedTags[tagName]) {\n      forbiddenTags.push(tagName);\n    }\n  });\n\n  const clean = DOMPurify.sanitize(svgText);\n  const svg = new Blob([clean], { type: SVG_MIME_TYPE });\n  return { svg, isDirty: forbiddenTags.length > 0 };\n};","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport { saveAs } from 'file-saver';\nimport Button from 'components/Button';\nimport Icon from 'components/Icon';\nimport Tooltip from 'components/Tooltip';\nimport { getAttachmentIcon, isImage, decompressFileContent } from 'helpers/ReplyAttachmentManager';\nimport { isSVG, sanitizeSVG } from 'helpers/sanitizeSVG';\n\nimport './ReplyAttachmentList.scss';\n\nconst ImagePreview = ({ file }) => {\n  const [t] = useTranslation();\n\n  const [src, setSrc] = useState();\n  const [isDirtySVG, setIsDirtySvg] = useState(false);\n\n  useEffect(() => {\n    const processImagePreview = async () => {\n      setIsDirtySvg(false);\n      let fileToSanitize = file;\n\n      const isImageFromPDF = !(file instanceof File) && !file.url;\n      if (isImageFromPDF) {\n        fileToSanitize = await decompressFileContent(file);\n      }\n\n      if (file instanceof File || isImageFromPDF) {\n        if (isSVG(file)) {\n          const { svg, isDirty } = await sanitizeSVG(fileToSanitize);\n          setSrc(URL.createObjectURL(svg));\n          setIsDirtySvg(isDirty);\n        } else {\n          setSrc(URL.createObjectURL(fileToSanitize));\n        }\n      }\n    };\n    processImagePreview();\n  }, [file]);\n\n  return (\n    <div className={classNames({\n      'reply-attachment-preview': true,\n      'dirty': isDirtySVG,\n    })}>\n      <img src={src} />\n      {isDirtySVG && <span className=\"reply-attachment-preview-message\">{t('message.svgMalicious')}</span>}\n    </div>\n  );\n};\n\nconst ReplyAttachmentList = ({ files, isEditing, fileDeleted }) => {\n  const [tabManager, previewEnabled] = useSelector((state) => [\n    selectors.getTabManager(state),\n    selectors.isReplyAttachmentPreviewEnabled(state)\n  ]);\n  const [t] = useTranslation();\n\n  const onClick = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!tabManager) {\n      return console.warn('Can\\'t open attachment in non-multi-tab mode');\n    }\n\n    let fileData;\n    if (file instanceof File) {\n      fileData = file;\n    } else if (file.url) {\n      fileData = file.url;\n    } else {\n      fileData = await decompressFileContent(file);\n    }\n\n    fileData && tabManager.addTab(fileData, {\n      filename: file.name,\n      setActive: true,\n      saveCurrentActiveTabState: true\n    });\n  };\n\n  const onDelete = (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    fileDeleted(file);\n  };\n\n  const onDownload = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const fileData = file.url ? file.url : await decompressFileContent(file);\n    saveAs(fileData, file.name);\n  };\n\n  return (\n    <div className=\"reply-attachment-list\">\n      {files.map((file, i) => (\n        <div\n          className=\"reply-attachment\"\n          key={i}\n          onClick={(e) => onClick(e, file)}\n        >\n          {previewEnabled && isImage(file) && (\n            <ImagePreview file={file} />\n          )}\n          <div className=\"reply-attachment-info\">\n            <Icon\n              className=\"reply-attachment-icon\"\n              glyph={getAttachmentIcon(file)}\n            />\n            <Tooltip content={file.name}>\n              <div className=\"reply-file-name\">{file.name}</div>\n            </Tooltip>\n            {isEditing ? (\n              <Button\n                className=\"attachment-button\"\n                title={`${t('action.delete')} ${t('option.type.fileattachment')}`}\n                img='icon-close'\n                onClick={(e) => onDelete(e, file)}\n              />\n            ) : (\n              <Button\n                className=\"attachment-button\"\n                title={`${t('action.download')} ${t('option.type.fileattachment')}`}\n                img='icon-download'\n                onClick={(e) => onDownload(e, file)}\n              />\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ReplyAttachmentList;\n","import ReplyAttachmentList from './ReplyAttachmentList';\n\nexport default ReplyAttachmentList;","import mentionsManager from './MentionsManager';\n/*\n * Transforming RichText Style object into the Object acceptable by React Quill component.\n */\n\nconst setReactQuillContent = (annotation, editor) => {\n  const richTextStyle = annotation.getRichTextStyle();\n  const indexes = Object.keys(richTextStyle);\n  const formattedText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n  const text = mentionsManager.extractMentionDataFromStr(formattedText).plainTextValue;\n  const ops = [];\n\n  for (let i = 0; i < indexes.length; i++) {\n    const element = richTextStyle[indexes[i]];\n    const attr = getAttributtes(element);\n\n    if (isNaN(indexes[i])) {\n      continue;\n    }\n\n    const lastIndex = isNaN(indexes[i + 1]) ? text.length : indexes[i + 1];\n    const textSlice = text.slice(indexes[i], lastIndex);\n\n    ops.push({ insert: textSlice, attributes: attr });\n  }\n\n  editor.setContents(ops);\n  editor.setSelection(text.length, 0);\n};\n\nconst getAttributtes = (element) => {\n  const attr = {};\n  if (element['font-weight'] && element['font-weight'] !== 'normal') {\n    attr['bold'] = true;\n  }\n  if (element['font-style'] && element['font-style'] !== 'normal') {\n    attr['italic'] = true;\n  }\n  if (element['color']) {\n    attr['color'] = element['color'];\n  }\n  if (element['text-decoration']) {\n    const decoration = element['text-decoration'].split(' ');\n\n    if (decoration.includes('line-through')) {\n      attr['strike'] = true;\n    }\n    if (decoration.includes('word')) {\n      attr['underline'] = true;\n    }\n  }\n\n  return attr;\n};\n\nexport default setReactQuillContent;\n","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useDispatch, useSelector, useStore } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Autolinker from 'autolinker';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport isString from 'lodash/isString';\nimport escape from 'lodash/escape';\nimport NoteTextarea from 'components/NoteTextarea';\nimport NoteContext from 'components/Note/Context';\nimport NoteHeader from 'components/NoteHeader';\nimport NoteTextPreview from 'components/NoteTextPreview';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\nimport getLinkDestination from 'helpers/getLinkDestination';\n\nimport mentionsManager from 'helpers/MentionsManager';\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport setReactQuillContent from 'helpers/setReactQuillContent';\nimport { isDarkColorHex, isLightColorHex } from 'helpers/color';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\nimport { isMobile } from 'helpers/device';\nimport useCore from 'hooks/useCore';\nimport { getDataWithKey, mapAnnotationToKey, annotationMapKeys } from 'constants/map';\nimport Theme from 'constants/theme';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport DataElementWrapper from '../DataElementWrapper';\nimport { COMMON_COLORS } from 'constants/commonColors';\nimport Button from 'components/Button';\n\nimport './NoteContent.scss';\n\ndayjs.extend(LocalizedFormat);\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isEditing: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  noteIndex: PropTypes.number,\n  isUnread: PropTypes.bool,\n  isNonReplyNoteRead: PropTypes.bool,\n  onReplyClicked: PropTypes.func,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n  handleNoteClick: PropTypes.func,\n};\n\nconst NoteContent = ({\n  annotation,\n  isEditing,\n  setIsEditing,\n  noteIndex,\n  isUnread,\n  isNonReplyNoteRead,\n  onReplyClicked,\n  isMultiSelected,\n  isMultiSelectMode,\n  handleMultiSelect,\n  isGroupMember,\n  handleNoteClick = () => {},\n}) => {\n\n  const { core } = useCore();\n  const noteDateFormat = useSelector((state) => selectors.getNoteDateFormat(state));\n  const iconColor = useSelector((state) => selectors.getIconColor(state, mapAnnotationToKey(annotation), shallowEqual));\n  const isNoteStateDisabled = useSelector((state) => selectors.isElementDisabled(state, 'noteStateFlyout'));\n  const language = useSelector((state) => selectors.getCurrentLanguage(state));\n  const notesShowLastUpdatedDate = useSelector((state) => selectors.notesShowLastUpdatedDate(state));\n  const canCollapseTextPreview = useSelector((state) => selectors.isNotesPanelTextCollapsingEnabled(state));\n  const canCollapseReplyPreview = useSelector((state) => selectors.isNotesPanelRepliesCollapsingEnabled(state));\n  const activeTheme = useSelector((state) => selectors.getActiveTheme(state));\n  const timezone = useSelector((state) => selectors.getTimezone(state));\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n\n  const {\n    isSelected,\n    searchInput,\n    resize,\n    pendingEditTextMap,\n    onTopNoteContentClicked,\n    sortStrategy,\n    showAnnotationNumbering,\n    setPendingEditText\n  } = useContext(NoteContext);\n\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const store = useStore();\n\n  const isReply = annotation.isReply();\n  const isTrackedChange = mapAnnotationToKey(annotation) === annotationMapKeys.TRACKED_CHANGE;\n\n  const [attachments, setAttachments] = useState([]);\n\n  useEffect(() => {\n    setAttachments(annotation.getAttachments());\n  }, [annotation]);\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'modify') {\n        annotations.forEach((annot) => {\n          if (annot.Id === annotation.Id) {\n            setAttachments(annot.getAttachments());\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener);\n    };\n  }, [annotation]);\n\n  useDidUpdate(() => {\n    if (!isEditing) {\n      dispatch(actions.finishNoteEditing());\n    }\n\n    resize();\n  }, [isEditing]);\n\n  const renderAuthorName = useCallback(\n    (annotation) => {\n      const name = core.getDisplayAuthor(annotation['Author']);\n\n      return name ? (\n        highlightSearchInput(name, searchInput)\n      ) : (\n        t('option.notesPanel.noteContent.noName')\n      );\n    },\n    [searchInput],\n  );\n\n  const skipAutoLink = annotation.getSkipAutoLink && annotation.getSkipAutoLink();\n\n  const trackedChangeLabels = {\n    1: t('officeEditor.added'),\n    2: t('officeEditor.deleted'),\n    3: t('officeEditor.formatted'),\n  };\n\n  const renderContents = useCallback(\n    (contents, richTextStyle, fontColor, skipAutoLink) => {\n      const autolinkerContent = [];\n      if (!skipAutoLink) {\n        Autolinker.link(contents, {\n          stripPrefix: false,\n          stripTrailingSlash: false,\n          replaceFn(match) {\n            const href = match.getAnchorHref();\n            const anchorText = match.getAnchorText();\n            const offset = match.getOffset();\n\n            switch (match.getType()) {\n              case 'url':\n              case 'email':\n              case 'phone':\n                autolinkerContent.push({\n                  href,\n                  text: anchorText,\n                  start: offset,\n                  end: offset + match.getMatchedText().length\n                });\n            }\n          }\n        });\n      }\n\n      if (!autolinkerContent.length) {\n        const highlightResult = highlightSearchInput(contents, searchInput, richTextStyle);\n        const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n        const shouldCollapseReply = isReply && canCollapseReplyPreview;\n\n        /*\n         * Case there is no value on Search input, and the collapse of the text is allowed,\n         * just render the value with Text preview component\n         */\n        if (!searchInput && (shouldCollapseAnnotationText || shouldCollapseReply)) {\n          const beforeContent = () => {\n            if (!isTrackedChange) {\n              return null;\n            }\n\n            const text = trackedChangeLabels[annotation['TrackedChangeType']];\n            return text && (\n              <span style={{ color: annotation.FillColor.toString(), fontWeight: 700 }}>{text}</span>\n            );\n          };\n\n          return (\n            <NoteTextPreview\n              linesToBreak={3}\n              comment\n              renderRichText={renderRichText}\n              richTextStyle={richTextStyle}\n              resize={resize}\n              style={fontColor}\n              beforeContent={beforeContent}\n            >\n              {contents}\n            </NoteTextPreview>\n          );\n        }\n        return highlightResult;\n      }\n      const contentToRender = [];\n      let strIdx = 0;\n      // Iterate through each case detected by Autolinker, wrap all content\n      // before the current link in a span tag, and wrap the current link\n      // in our own anchor tag\n      autolinkerContent.forEach((anchorData, forIdx) => {\n        const { start, end, href } = anchorData;\n        if (strIdx < start) {\n          contentToRender.push(\n            <span key={`span_${forIdx}`}>\n              {\n                highlightSearchInput(\n                  contents,\n                  searchInput,\n                  richTextStyle,\n                  strIdx,\n                  start\n                )\n              }\n            </span>\n          );\n        }\n        contentToRender.push(\n          <a\n            href={href}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            key={`a_${forIdx}`}\n          >\n            {\n              highlightSearchInput(\n                contents,\n                searchInput,\n                richTextStyle,\n                start,\n                end\n              )\n            }\n          </a>\n        );\n        strIdx = end;\n      });\n      // Ensure any content after the last link is accounted for\n      if (strIdx < contents.length - 1) {\n        contentToRender.push(highlightSearchInput(\n          contents,\n          searchInput,\n          richTextStyle,\n          strIdx\n        ));\n      }\n      return contentToRender;\n    },\n    [searchInput]\n  );\n\n  const icon = isTrackedChange && annotation['TrackedChangeType'] === 3 ?\n    'ic-format-page' :\n    getDataWithKey(mapAnnotationToKey(annotation)).icon;\n\n  let customData;\n  try {\n    customData = JSON.parse(annotation.getCustomData('trn-mention'));\n  } catch (e) {\n    customData = annotation.getCustomData('trn-mention');\n  }\n\n  let contents = customData?.contents || annotation.getContents();\n  contents = sanitizeContent(contents);\n\n  // for link annotations we want to get their URL. We are unable to use \"getContents\" to get that data, need to use \"getLinkDestination\" instead\n  const contentsToRender = annotation instanceof window.Core.Annotations.Link ? getLinkDestination(annotation, store) : annotation.getContents();\n\n  const richTextStyle = annotation.getRichTextStyle();\n  let textColor = annotation['TextColor'];\n\n  if (activeTheme === Theme.DARK) {\n    if (textColor && isDarkColorHex(textColor.toHexString())) {\n      textColor = new window.Core.Annotations.Color(255, 255, 255, 1);\n    }\n\n    if (richTextStyle) {\n      const sections = Object.keys(richTextStyle);\n      sections.forEach((a) => {\n        if (richTextStyle[a]['color'] && isDarkColorHex(richTextStyle[a]['color'])) {\n          richTextStyle[a]['color'] = COMMON_COLORS['white'];\n        }\n      });\n    }\n  } else if (activeTheme === Theme.LIGHT) {\n    if (textColor && isLightColorHex(textColor.toHexString())) {\n      textColor = new window.Core.Annotations.Color(0, 0, 0, 1);\n    }\n\n    if (richTextStyle) {\n      const sections = Object.keys(richTextStyle);\n      sections.forEach((a) => {\n        if (richTextStyle[a]['color'] && isLightColorHex(richTextStyle[a]['color'])) {\n          richTextStyle[a]['color'] = COMMON_COLORS['black'];\n        }\n      });\n    }\n  }\n  // This is the text placeholder passed to the ContentArea\n  // It ensures that if we try and edit, we get the right placeholder\n  // depending on whether the comment has been saved to the annotation or not\n  const thereIsNoUnpostedEdit = typeof pendingEditTextMap[annotation.Id] === 'undefined';\n  let textAreaValue;\n  if (contents && thereIsNoUnpostedEdit) {\n    textAreaValue = contents;\n  } else {\n    textAreaValue = pendingEditTextMap[annotation.Id];\n  }\n\n  const handleNoteContentClicked = () => {\n    if (!isGroupMember) {\n      if (isReply) {\n        onReplyClicked(annotation);\n      } else if (!isEditing) {\n        // collapse expanded note when top noteContent is clicked if it's not being edited\n        onTopNoteContentClicked();\n      }\n    }\n  };\n\n  const noteContentClass = classNames({\n    NoteContent: true,\n    isReply,\n    unread: isUnread, // The note content itself is unread or it has unread replies\n    clicked: isNonReplyNoteRead, // The top note content is read\n    'modular-ui': customizableUI,\n  });\n\n  const content = useMemo(\n    () => {\n      const contentStyle = {};\n      if (textColor) {\n        contentStyle.color = textColor.toHexString();\n      }\n\n      return (\n        <>\n          {(isEditing && isSelected) ? (\n            <ContentArea\n              annotation={annotation}\n              noteIndex={noteIndex}\n              setIsEditing={setIsEditing}\n              textAreaValue={textAreaValue}\n              onTextAreaValueChange={setPendingEditText}\n              pendingText={pendingEditTextMap[annotation.Id]}\n            />\n          ) : (\n            contentsToRender && (\n              <div className={classNames('container', { 'reply-content': isReply })} onClick={handleNoteClick}>\n                {isReply && (attachments.length > 0) && (\n                  <ReplyAttachmentList\n                    files={attachments}\n                    isEditing={false}\n                  />\n                )}\n                {renderContents(contentsToRender, richTextStyle, contentStyle, skipAutoLink)}\n              </div>\n            )\n          )}\n        </>\n      );\n    },\n    [annotation, isSelected, isEditing, setIsEditing, contents, renderContents, textAreaValue, setPendingEditText, attachments]\n  );\n\n  const text = annotation.getCustomData('trn-annot-preview');\n  const textPreview = useMemo(\n    () => {\n      if (text === '') {\n        return null;\n      }\n\n      const highlightSearchResult = highlightSearchInput(text, searchInput);\n      const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n      // If we have a search result do not use text\n      // preview but instead show the entire text\n      if (isString(highlightSearchResult) && shouldCollapseAnnotationText) {\n        return (\n          <DataElementWrapper\n            onClick={handleNoteClick}\n            className=\"selected-text-preview\"\n            dataElement=\"notesSelectedTextPreview\">\n            <NoteTextPreview linesToBreak={3}>\n              {`\"${highlightSearchResult}\"`}\n            </NoteTextPreview>\n          </DataElementWrapper>\n        );\n      }\n      return (\n        <div className=\"selected-text-preview\" style={{ paddingRight: '12px' }}>\n          {highlightSearchResult}\n        </div>\n      );\n    }, [text, searchInput]);\n\n  const header = useMemo(\n    () => {\n      return (\n        <NoteHeader\n          icon={icon}\n          iconColor={iconColor}\n          annotation={annotation}\n          language={language}\n          noteDateFormat={noteDateFormat}\n          isSelected={isSelected}\n          setIsEditing={setIsEditing}\n          notesShowLastUpdatedDate={notesShowLastUpdatedDate}\n          isReply={isReply}\n          isUnread={isUnread}\n          renderAuthorName={renderAuthorName}\n          isNoteStateDisabled={isNoteStateDisabled}\n          isEditing={isEditing}\n          noteIndex={noteIndex}\n          sortStrategy={sortStrategy}\n          activeTheme={activeTheme}\n          handleMultiSelect={handleMultiSelect}\n          isMultiSelected={isMultiSelected}\n          isMultiSelectMode={isMultiSelectMode}\n          isGroupMember={isGroupMember}\n          showAnnotationNumbering={showAnnotationNumbering}\n          timezone={timezone}\n          isTrackedChange={isTrackedChange}\n        />\n      );\n    }, [icon, iconColor, annotation, language, noteDateFormat, isSelected, setIsEditing, notesShowLastUpdatedDate, isReply, isUnread, renderAuthorName, core.getDisplayAuthor(annotation['Author']), isNoteStateDisabled, isEditing, noteIndex, getLatestActivityDate(annotation), sortStrategy, handleMultiSelect, isMultiSelected, isMultiSelectMode, isGroupMember, timezone, isTrackedChange]\n  );\n\n  return (\n    <div className={noteContentClass} onClick={handleNoteContentClicked}>\n      {header}\n      {textPreview}\n      {content}\n    </div>\n  );\n};\n\nNoteContent.propTypes = propTypes;\n\nexport default NoteContent;\n\n// a component that contains the content textarea, the save button and the cancel button\nconst ContentArea = ({\n  annotation,\n  noteIndex,\n  setIsEditing,\n  textAreaValue,\n  onTextAreaValueChange,\n  pendingText\n}) => {\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isMentionEnabled,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    isNotesPanelOpen,\n    activeDocumentViewerKey,\n    isAnyCustomPanelOpen,\n  ] = useSelector((state) => [\n    selectors.getAutoFocusNoteOnAnnotationSelection(state),\n    selectors.getIsMentionEnabled(state),\n    selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n    selectors.getActiveDocumentViewerKey(state),\n    selectors.isAnyCustomPanelOpen(state),\n  ]);\n  const [t] = useTranslation();\n  const textareaRef = useRef();\n  const isReply = annotation.isReply();\n  const {\n    setCurAnnotId,\n    pendingAttachmentMap,\n    deleteAttachment,\n    clearAttachments,\n    addAttachments\n  } = useContext(NoteContext);\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n  const { core } = useCore();\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    if (isAnyCustomPanelOpen || (isNotesPanelOpen || isInlineCommentOpen) && textareaRef.current) {\n      const editor = textareaRef.current.getEditor();\n      const isFreeTextAnnnotation = annotation && annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n      isFreeTextAnnnotation && editor.setText('');\n\n      /**\n       * If there is a pending text we should update the annotation rich text style\n       * with this pending text style.\n       */\n      if (pendingText) {\n        setAnnotationRichTextStyle(editor, annotation);\n      } else if (editor.getContents()) {\n        setTimeout(() => {\n          // need setTimeout because textarea seem to rerender and unfocus\n          if (isMentionEnabled) {\n            textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n            const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n            if (ids.length) {\n              editor.setText(plainTextValue);\n            }\n          }\n\n          if (shouldNotFocusOnInput) {\n            return;\n          }\n\n          if (autoFocusNoteOnAnnotationSelection) {\n            textareaRef.current?.focus();\n            const annotRichTextStyle = annotation.getRichTextStyle();\n            if (annotRichTextStyle) {\n              setReactQuillContent(annotation, editor);\n            }\n          }\n        }, 100);\n      }\n\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      setTimeout(() => {\n        if (textLength) {\n          editor.setSelection(textLength, textLength);\n        }\n      }, 100);\n    }\n  }, [isNotesPanelOpen, isInlineCommentOpen, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    if (isReply && pendingAttachments.length === 0) {\n      // Load attachments\n      const attachments = annotation.getAttachments();\n      addAttachments(annotation.Id, attachments);\n    }\n  }, []);\n\n  const setContents = async (e) => {\n    // prevent the textarea from blurring out which will unmount these two buttons\n    e.preventDefault();\n\n    const editor = textareaRef.current.getEditor();\n    textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n    setAnnotationRichTextStyle(editor, annotation);\n\n    const hasTrailingNewlineToRemove = textAreaValue.length > 1 && textAreaValue[textAreaValue.length - 1] === '\\n';\n    if (hasTrailingNewlineToRemove) {\n      textAreaValue = textAreaValue.slice(0, textAreaValue.length - 1);\n    }\n\n    const skipAutoLink = annotation.getSkipAutoLink && annotation.getSkipAutoLink();\n    if (skipAutoLink) {\n      annotation.disableSkipAutoLink();\n    }\n\n    if (isMentionEnabled) {\n      const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n      // If modified, double check for ids\n      const annotMentionData = mentionsManager.extractMentionDataFromAnnot(annotation);\n      annotMentionData.mentions.forEach((mention) => {\n        if (plainTextValue.includes(mention.value)) {\n          ids.push(mention.id);\n        }\n      });\n\n      annotation.setCustomData('trn-mention', JSON.stringify({\n        contents: textAreaValue,\n        ids,\n      }));\n      annotation.setContents(plainTextValue);\n    } else {\n      annotation.setContents(textAreaValue);\n    }\n\n    await setAnnotationAttachments(annotation, pendingAttachmentMap[annotation.Id]);\n\n    const source = (annotation instanceof window.Core.Annotations.FreeTextAnnotation)\n      ? 'textChanged' : 'noteChanged';\n    core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[annotation], 'modify', { 'source': source }]);\n\n    if (annotation instanceof window.Core.Annotations.FreeTextAnnotation) {\n      core.drawAnnotationsFromList([annotation]);\n    }\n\n    setIsEditing(false, noteIndex);\n    // Only set comment to unposted state if it is not empty\n    if (textAreaValue !== '') {\n      onTextAreaValueChange(undefined, annotation.Id);\n    }\n    clearAttachments(annotation.Id);\n  };\n\n  const onBlur = (e) => {\n    if (e.relatedTarget?.getAttribute('data-element')?.includes('annotationCommentButton')) {\n      e.target.focus();\n      return;\n    }\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setCurAnnotId(annotation.Id);\n  };\n\n  const contentClassName = classNames('edit-content', { 'reply-content': isReply });\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (\n    <div className={contentClassName}>\n      {isReply && pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <NoteTextarea\n        ref={(el) => {\n          textareaRef.current = el;\n        }}\n        value={textAreaValue}\n        onChange={(value) => onTextAreaValueChange(value, annotation.Id)}\n        onSubmit={setContents}\n        isReply={isReply}\n        onBlur={onBlur}\n        onFocus={onFocus}\n      />\n      <div className=\"edit-buttons\">\n        <Button\n          className=\"cancel-button\"\n          label={t('action.cancel')}\n          onClick={(e) => {\n            e.stopPropagation();\n            setIsEditing(false, noteIndex);\n            // Clear pending text\n            onTextAreaValueChange(undefined, annotation.Id);\n            clearAttachments(annotation.Id);\n          }}\n        />\n        <Button\n          className={`save-button${!textAreaValue ? ' disabled' : ''}`}\n          disabled={!textAreaValue}\n          label={t('action.save')}\n          onClick={(e) => {\n            e.stopPropagation();\n            setContents(e);\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nContentArea.propTypes = {\n  noteIndex: PropTypes.number.isRequired,\n  annotation: PropTypes.object.isRequired,\n  setIsEditing: PropTypes.func.isRequired,\n  textAreaValue: PropTypes.string,\n  onTextAreaValueChange: PropTypes.func.isRequired,\n  pendingText: PropTypes.string\n};\n\nconst getRichTextSpan = (text, richTextStyle, key) => {\n  const style = {\n    fontWeight: richTextStyle['font-weight'],\n    fontStyle: richTextStyle['font-style'],\n    textDecoration: richTextStyle['text-decoration'],\n    color: richTextStyle['color']\n  };\n  if (style.textDecoration) {\n    style.textDecoration = style.textDecoration.replace('word', 'underline');\n  }\n  return (\n    <span style={style} key={key}>{text}</span>\n  );\n};\n\nconst renderRichText = (text, richTextStyle, start) => {\n  if (!richTextStyle || !text) {\n    return text;\n  }\n\n  const styles = {};\n  const indices = Object.keys(richTextStyle).map(Number).sort((a, b) => a - b);\n  for (let i = 0; i < indices.length; i++) {\n    let index = indices[i] - start;\n    index = Math.min(Math.max(index, 0), text.length);\n    styles[index] = richTextStyle[indices[i]];\n    if (index === text.length) {\n      break;\n    }\n  }\n\n  const contentToRender = [];\n  const styleIndices = Object.keys(styles).map(Number).sort((a, b) => a - b);\n  for (let i = 1; i < styleIndices.length; i++) {\n    contentToRender.push(getRichTextSpan(\n      text.slice(styleIndices[i - 1], styleIndices[i]),\n      styles[styleIndices[i - 1]],\n      `richtext_span_${i}`\n    ));\n  }\n\n  return contentToRender;\n};\n\nconst highlightSearchInput = (fullText, searchInput, richTextStyle, start = 0, end = fullText.length) => {\n  const text = fullText.slice(start, end);\n  const loweredText = text.toLowerCase();\n  const loweredSearchInput = searchInput.toLowerCase();\n  if (richTextStyle) {\n    richTextStyle['0'] = richTextStyle['0'] || {};\n    richTextStyle[fullText.length] = richTextStyle[fullText.length] || {};\n  }\n  let lastFoundInstance = loweredText.indexOf(loweredSearchInput);\n  if (!loweredSearchInput.trim() || lastFoundInstance === -1) {\n    return renderRichText(text, richTextStyle, start);\n  }\n  const contentToRender = [];\n  const allFoundPositions = [lastFoundInstance];\n  // Escape all RegExp special characters\n  const regexSafeSearchInput = loweredSearchInput.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  if (new RegExp(`(${regexSafeSearchInput})`, 'gi').test(loweredText)) {\n    while (lastFoundInstance !== -1) {\n      lastFoundInstance = loweredText.indexOf(loweredSearchInput, lastFoundInstance + loweredSearchInput.length);\n      if (lastFoundInstance !== -1) {\n        allFoundPositions.push(lastFoundInstance);\n      }\n    }\n  }\n  allFoundPositions.forEach((position, idx) => {\n    // Account for any content at the beginning of the string before the first\n    // instance of the searchInput\n    if (idx === 0 && position !== 0) {\n      contentToRender.push(renderRichText(text.substring(0, position), richTextStyle, start));\n    }\n    contentToRender.push(\n      <span className=\"highlight\" key={`highlight_span_${idx}`}>\n        {\n          renderRichText(\n            text.substring(position, position + loweredSearchInput.length),\n            richTextStyle,\n            start + position)\n        }\n      </span>\n    );\n    if (\n      // Ensure that we do not try to make an out-of-bounds access\n      position + loweredSearchInput.length < loweredText.length\n      // Ensure that this is the end of the allFoundPositions array\n      && position + loweredSearchInput.length !== allFoundPositions[idx + 1]\n    ) {\n      contentToRender.push(renderRichText(\n        text.substring(position + loweredSearchInput.length, allFoundPositions[idx + 1]),\n        richTextStyle,\n        start + position + loweredSearchInput.length\n      ));\n    }\n  });\n  return contentToRender;\n};\n\n/**\n * @ignore\n * Sanitizes the given content to prevent XSS attacks by converting HTML characters\n * into their encoded equivalents.\n *\n * @param {string} content - The content to sanitize.\n * @returns {string} The sanitized content, or the original content if no changes are needed.\n */\nfunction sanitizeContent(content) {\n  return content ? escape(content) : content;\n}\n","import NoteContent from './NoteContent';\n\nexport default NoteContent;","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport NoteContext from 'components/Note/Context';\nimport NoteTextarea from 'components/NoteTextarea';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\nimport Button from 'components/Button';\nimport classNames from 'classnames';\nimport useCore from 'hooks/useCore';\nimport mentionsManager from 'helpers/MentionsManager';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile } from 'src/helpers/device';\nimport DataElements from 'src/constants/dataElement';\n\nimport './ReplyArea.scss';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n};\n\n// a component that contains the reply textarea, the reply button and the cancel button\nconst ReplyArea = ({ annotation, isUnread, onPendingReplyChange }) => {\n  const { core } = useCore();\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isDocumentReadOnly,\n    isReplyDisabled,\n    isReplyDisabledForAnnotation,\n    isMentionEnabled,\n    isNoteEditingTriggeredByAnnotationPopup,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.isElementDisabled(state, 'noteReply'),\n      selectors.getIsReplyDisabled(state)?.(annotation),\n      selectors.getIsMentionEnabled(state),\n      selectors.getIsNoteEditing(state),\n      selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual\n  );\n  const {\n    isContentEditable,\n    isSelected,\n    pendingReplyMap,\n    setPendingReply,\n    isExpandedFromSearch,\n    scrollToSelectedAnnot,\n    setCurAnnotId,\n    pendingAttachmentMap,\n    clearAttachments,\n    deleteAttachment\n  } = useContext(NoteContext);\n  const [isFocused, setIsFocused] = useState(false);\n  const dispatch = useDispatch();\n  const textareaRef = useRef();\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n\n  useDidUpdate(() => {\n    if (!isFocused) {\n      dispatch(actions.finishNoteEditing());\n    }\n  }, [isFocused]);\n\n  useEffect(() => {\n    if (shouldNotFocusOnInput) {\n      return;\n    }\n\n    if (\n      isNoteEditingTriggeredByAnnotationPopup &&\n      isSelected &&\n      !isContentEditable &&\n      autoFocusNoteOnAnnotationSelection &&\n      textareaRef &&\n      textareaRef.current\n    ) {\n      textareaRef.current.focus();\n    }\n  }, [isContentEditable, isNoteEditingTriggeredByAnnotationPopup, isSelected, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    // when search item, should disable auto focus\n    if (!isExpandedFromSearch && scrollToSelectedAnnot) {\n      // use \"setTimeout\" to wait for element to be added before focusing to have the blinking text cursor appear\n      setTimeout(() => {\n        // calling focus() cause the \"NotePanel\" to scroll to note that being focused.\n        // we don't want to jump to the selected annotation when scrolling up and down, so only focus once\n        if (textareaRef && textareaRef.current && autoFocusNoteOnAnnotationSelection) {\n          textareaRef.current.focus();\n        }\n      }, 100);\n    }\n    if (textareaRef && textareaRef.current) {\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      const editor = textareaRef.current.getEditor();\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n      setTimeout(() => {\n        if (textareaRef.current) {\n          textareaRef.current.editor.setSelection(textLength, textLength);\n        }\n      }, 100);\n    }\n  }, []);\n\n  const postReply = async (e) => {\n    // prevent the textarea from blurring out\n    e.preventDefault();\n    e.stopPropagation();\n\n    const editor = textareaRef.current.getEditor();\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n\n    if (!replyText.trim()) {\n      return;\n    }\n\n    if (isMentionEnabled) {\n      const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\n      setAnnotationRichTextStyle(editor, replyAnnotation);\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n      core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\n    } else {\n      const replyAnnotation = core.createAnnotationReply(annotation, replyText);\n      setAnnotationRichTextStyle(editor, replyAnnotation);\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[replyAnnotation], 'modify', {}]);\n    }\n\n    setPendingReply('', annotation.Id);\n    clearAttachments(annotation.Id);\n  };\n\n  const ifReplyNotAllowed =\n    isDocumentReadOnly ||\n    isReplyDisabled ||\n    isReplyDisabledForAnnotation;\n\n  const replyAreaClass = classNames({\n    'reply-area': true,\n    unread: isUnread,\n  });\n\n  const handleNoteTextareaChange = (value) => {\n    setPendingReply(value, annotation.Id);\n    onPendingReplyChange && onPendingReplyChange();\n  };\n\n  const onBlur = () => {\n    setIsFocused(false);\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setIsFocused(true);\n    setCurAnnotId(annotation.Id);\n  };\n\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (ifReplyNotAllowed || !isSelected) ? null : (\n    <form onSubmit={postReply} className=\"reply-area-container\">\n      {pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <div className=\"reply-area-with-button\">\n        <div\n          className={replyAreaClass}\n          // stop bubbling up otherwise the note will be closed\n          // due to annotation deselection\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <NoteTextarea\n            ref={(el) => {\n              textareaRef.current = el;\n            }}\n            value={pendingReplyMap[annotation.Id]}\n            onChange={(value) => handleNoteTextareaChange(value)}\n            onSubmit={postReply}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            isReply\n          />\n        </div>\n        <div className=\"reply-button-container\">\n          <Button\n            img=\"icon-post-reply\"\n            className='reply-button'\n            title={'action.submit'}\n            disabled={!pendingReplyMap[annotation.Id]}\n            onClick={postReply}\n            isSubmitType\n          />\n        </div>\n      </div>\n    </form>\n  );\n};\n\nReplyArea.propTypes = propTypes;\n\nexport default ReplyArea;\n","import ReplyArea from './ReplyArea';\n\nexport default ReplyArea;","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport Button from 'components/Button';\nimport NoteContent from 'components/NoteContent';\nimport PropTypes from 'prop-types';\nimport useCore from 'hooks/useCore';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport classNames from 'classnames';\n\nconst propTypes = {\n  groupAnnotations: PropTypes.array.isRequired,\n  isMultiSelectMode: PropTypes.bool.isRequired,\n};\n\nconst NoteGroupSection = ({\n  groupAnnotations,\n  isMultiSelectMode,\n}) => {\n  const { core } = useCore();\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [isViewingGroupAnnots, setIsViewingGroupAnnots] = useState(false);\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n\n  const upArrow = 'icon-chevron-up';\n  const downArrow = 'icon-chevron-down';\n\n  const ViewAllAnnotsButton = (\n    <Button\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(true);\n      }}\n      className=\"text-button\"\n      ariaLabel={t('component.noteGroupSection.open')}\n      label={t('component.noteGroupSection.open')}\n      img={downArrow}\n    />\n  );\n  const CloseAllAnnotsButton = (\n    <Button\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(false);\n      }}\n      className=\"text-button\"\n      ariaLabel={t('component.noteGroupSection.close')}\n      label={t('component.noteGroupSection.close')}\n      img={upArrow}\n    />\n  );\n\n  return (\n    <div\n      className={classNames({\n        'group-section': true,\n        'modular-ui': customizableUI,\n      })}\n    >\n      {isViewingGroupAnnots ? CloseAllAnnotsButton : ViewAllAnnotsButton}\n      {isViewingGroupAnnots &&\n        groupAnnotations.map((groupAnnotation, i) => {\n          // Ignore the group primary annotation\n          if (i === 0) {\n            return null;\n          }\n          return (\n            <Button\n              key={groupAnnotation.Id}\n              className=\"group-child\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                core.selectAnnotation(groupAnnotation);\n                core.jumpToAnnotation(groupAnnotation);\n                dispatch(actions.openElement('annotationPopup'));\n              }}\n            >\n              <NoteContent\n                key={groupAnnotation.Id}\n                annotation={groupAnnotation}\n                isUnread={false}\n                isGroupMember={true}\n                isMultiSelectMode={isMultiSelectMode}\n              />\n            </Button>\n          );\n        })\n      }\n    </div>\n  );\n};\n\nNoteGroupSection.propTypes = propTypes;\n\nexport default NoteGroupSection;\n","import getRootNode from 'helpers/getRootNode';\nimport core from 'core';\n\n// This is the ratio of distance to the annotation that the right horizontal line should cover.\n// Ideally, this is long enough to get away from the edge.\nconst LINE_WIDTH_RATIO = 0.75;\n\nconst adjustPointForWebcomponent = (coordinates, add = false) => {\n  const { isApryseWebViewerWebComponent = false } = window;\n  if (!isApryseWebViewerWebComponent) {\n    return coordinates;\n  }\n  const appRect = getRootNode().getElementById('app').getBoundingClientRect();\n  const rootLeft = appRect.left;\n  const rootTop = appRect.top;\n  return add ? {\n    x: coordinates.x + rootLeft,\n    y: coordinates.y + rootTop,\n  } :{\n    x: coordinates.x - rootLeft,\n    y: coordinates.y - rootTop,\n  };\n};\n\nexport const getConnectorLines = ({\n  annotationTopLeft,\n  annotationBottomRight,\n  noteContainerRef,\n  bottomHeadersHeight,\n  topHeadersHeight,\n  activeDocumentViewerKey,\n}) => {\n  const { scrollTop, scrollLeft } = core.getScrollViewElement(activeDocumentViewerKey);\n  const noteContainerRect = noteContainerRef.current.getBoundingClientRect();\n  const containerRect = noteContainerRef.current.closest('.normal-notes-container, .virtualized-notes-container')?.getBoundingClientRect();\n  if (noteContainerRect.bottom < containerRect?.top || noteContainerRect.top > containerRect?.bottom) {\n    return {\n      topLineStyle: { display: 'none' },\n      verticalLineStyle: { display: 'none' },\n      bottomLineStyle: { display: 'none' },\n      isPanelOnLeft: false,\n    };\n  }\n  annotationTopLeft = adjustPointForWebcomponent(annotationTopLeft, true);\n  annotationBottomRight = adjustPointForWebcomponent(annotationBottomRight, true);\n  const annotationHeight = annotationTopLeft.y - annotationBottomRight.y;\n  const isPanelOnLeft = (annotationTopLeft.x - scrollLeft) > noteContainerRect.left;\n  let horizontalDistanceToAnnotation;\n  const SELECTION_POINT_WIDTH = 10;\n  if (isPanelOnLeft) {\n    horizontalDistanceToAnnotation = annotationTopLeft.x - noteContainerRect.right - scrollLeft;\n    horizontalDistanceToAnnotation -= SELECTION_POINT_WIDTH  + 4; // 4px is arrow width\n  }  else {\n    horizontalDistanceToAnnotation = noteContainerRect.left - annotationBottomRight.x + scrollLeft;\n    horizontalDistanceToAnnotation -= SELECTION_POINT_WIDTH;\n  }\n  const firstHorizontalLineLength = horizontalDistanceToAnnotation * LINE_WIDTH_RATIO;\n  const secondHorizontalLineLength = horizontalDistanceToAnnotation - firstHorizontalLineLength;\n  let verticalDistanceToAnnotation = annotationBottomRight.y - noteContainerRect.top + annotationHeight / 2 - scrollTop;\n  const startPosition = adjustPointForWebcomponent({\n    x: isPanelOnLeft ? noteContainerRect.right : noteContainerRect.left,\n    y: noteContainerRect.top,\n  });\n\n  const LINE_WIDTH = 2;\n  const topLineStyle = {\n    width: firstHorizontalLineLength + (isPanelOnLeft ? LINE_WIDTH : 0),\n    top: startPosition.y,\n    left: startPosition.x - (isPanelOnLeft ? 0 : firstHorizontalLineLength),\n  };\n  const verticalLineStyle = {\n    height: Math.abs(verticalDistanceToAnnotation) - LINE_WIDTH,\n    top: topLineStyle.top + LINE_WIDTH,\n    left: topLineStyle.left + (isPanelOnLeft ? firstHorizontalLineLength : 0),\n  };\n  if (verticalDistanceToAnnotation < 0) {\n    verticalLineStyle.top = topLineStyle.top - verticalLineStyle.height;\n  }\n  let isAnnotationOffScreen = false;\n  const appRect = getRootNode().getElementById('app').getBoundingClientRect();\n  const topLimit = topHeadersHeight;\n  if (topLimit > verticalLineStyle.top) {\n    const diff = verticalLineStyle.top - topLimit;\n    verticalLineStyle.top = topLimit;\n    verticalLineStyle.height += diff;\n    isAnnotationOffScreen = true;\n  }\n  const bottomLimit = appRect.height - bottomHeadersHeight;\n  if (verticalLineStyle.top + verticalLineStyle.height > bottomLimit) {\n    verticalLineStyle.height = bottomLimit - verticalLineStyle.top;\n    isAnnotationOffScreen = true;\n  }\n  const bottomLineStyle = {\n    width: secondHorizontalLineLength + (isPanelOnLeft ? LINE_WIDTH : 0),\n    top: startPosition.y + verticalDistanceToAnnotation,\n    left: verticalLineStyle.left + LINE_WIDTH - (!isPanelOnLeft ? secondHorizontalLineLength : LINE_WIDTH),\n    visibility: isAnnotationOffScreen ? 'hidden' : 'visible',\n  };\n  return {\n    topLineStyle,\n    verticalLineStyle,\n    bottomLineStyle,\n    isPanelOnLeft,\n  };\n};\n","import React, { useEffect, useState } from 'react';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport useCore from 'hooks/useCore';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { createPortal } from 'react-dom';\nimport { getAnnotationPosition } from 'helpers/getPopupPosition';\nimport getRootNode from 'helpers/getRootNode';\nimport DataElements from 'constants/dataElement';\nimport PropTypes from 'prop-types';\nimport { getConnectorLines } from 'helpers/annotationNoteConnectorLineHelper';\nimport classNames from 'classnames';\n\nimport './AnnotationNoteConnectorLine.scss';\nimport debounce from 'lodash/debounce';\n\nconst LineConnectorPortal = ({ children }) => {\n  const mount = getRootNode().querySelector('#line-connector-root');\n  const el = document.createElement('div');\n  el.setAttribute('data-element', DataElements.ANNOTATION_NOTE_CONNECTOR_LINE);\n\n  useEffect(() => {\n    mount.appendChild(el);\n    return () => mount.removeChild(el);\n  }, [el, mount]);\n\n  return createPortal(children, el);\n};\n\nconst propTypes = {\n  annotation: PropTypes.object,\n  noteContainerRef: PropTypes.object,\n  isCustomPanelOpen: PropTypes.bool,\n};\n\nconst AnnotationNoteConnectorLine = ({ annotation, noteContainerRef, isCustomPanelOpen }) => {\n  const { core } = useCore();\n  const [\n    topHeadersHeight,\n    bottomHeadersHeight,\n    lineIsOpen,\n    notePanelIsOpen,\n    isLineDisabled,\n    documentContainerWidth,\n    documentContainerHeight,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getTopHeadersHeight(state),\n      selectors.getBottomHeadersHeight(state),\n      selectors.isElementOpen(state, DataElements.ANNOTATION_NOTE_CONNECTOR_LINE),\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n      selectors.isElementDisabled(state, DataElements.ANNOTATION_NOTE_CONNECTOR_LINE),\n      selectors.getDocumentContainerWidth(state),\n      selectors.getDocumentContainerHeight(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n  const [lineProperties, setLineProperties] = useState();\n\n  useEffect(() => {\n    const onPageNumberUpdated = () => {\n      dispatch(actions.closeElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE));\n    };\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated, undefined, activeDocumentViewerKey);\n    return () => {\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated, activeDocumentViewerKey);\n    };\n  }, []);\n\n  const scrollViewElement = core.getScrollViewElement(activeDocumentViewerKey);\n\n  const calculatePosition = debounce(({\n    activeDocumentViewerKey,\n    bottomHeadersHeight,\n    topHeadersHeight,\n  }) => {\n    const {\n      bottomRight: annotationBottomRight,\n      topLeft: annotationTopLeft\n    } = getAnnotationPosition(annotation, activeDocumentViewerKey);\n    if (!noteContainerRef || !noteContainerRef.current) {\n      return;\n    }\n    const isAnnotationPositionInvalid = !(annotationBottomRight && annotationTopLeft);\n    if (isAnnotationPositionInvalid) {\n      return () => {\n        dispatch(actions.closeElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE));\n      };\n    }\n    const newLines = getConnectorLines({\n      annotationTopLeft,\n      annotationBottomRight,\n      noteContainerRef,\n      bottomHeadersHeight,\n      topHeadersHeight,\n      activeDocumentViewerKey,\n    });\n    setLineProperties(newLines);\n  }, 100, { leading: true, trailing: true });\n\n\n  const {\n    bottomRight: annotationBottomRight,\n    topLeft: annotationTopLeft\n  } = getAnnotationPosition(annotation, activeDocumentViewerKey);\n  const annotDeps = [\n    annotationBottomRight?.x,\n    annotationBottomRight?.y,\n    annotationTopLeft?.x,\n    annotationTopLeft?.y,\n  ];\n  const scrollViewDeps = [\n    scrollViewElement,\n    scrollViewElement?.scrollTop,\n    scrollViewElement?.scrollLeft,\n  ];\n  const documentAndHeaderDeps = [\n    documentContainerWidth,\n    documentContainerHeight,\n    activeDocumentViewerKey,\n    bottomHeadersHeight,\n    topHeadersHeight,\n  ];\n  const noteContainerRect = noteContainerRef?.current?.getBoundingClientRect();\n  const positionAndSizeDeps = [\n    noteContainerRect?.top,\n    noteContainerRect?.left,\n    noteContainerRect?.right,\n    noteContainerRect?.bottom,\n  ];\n  useEffect(() => {\n    calculatePosition({\n      activeDocumentViewerKey,\n      bottomHeadersHeight,\n      topHeadersHeight,\n    });\n  }, [\n    ...positionAndSizeDeps,\n    ...annotDeps,\n    ...scrollViewDeps,\n    ...documentAndHeaderDeps,\n  ]);\n\n  useEffect(() => {\n    const onPageNumberUpdated = () => {\n      dispatch(actions.closeElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE));\n    };\n\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated, undefined, activeDocumentViewerKey);\n\n    return () => {\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated, activeDocumentViewerKey);\n    };\n  }, [\n    dispatch,\n    activeDocumentViewerKey,\n  ]);\n\n  if (lineIsOpen && (notePanelIsOpen || isCustomPanelOpen) && !isLineDisabled && lineProperties) {\n    const {\n      topLineStyle,\n      verticalLineStyle,\n      bottomLineStyle,\n      isPanelOnLeft,\n    } = lineProperties;\n    return (\n      <LineConnectorPortal>\n        <div className=\"horizontalLine\" style={topLineStyle}/>\n        <div className=\"verticalLine\" style={verticalLineStyle}/>\n        <div className=\"horizontalLine\" style={bottomLineStyle}>\n          <div className={classNames('arrowHead', { 'arrow-right': isPanelOnLeft })} />\n        </div>\n      </LineConnectorPortal>\n    );\n  }\n  return null;\n};\n\nAnnotationNoteConnectorLine.propTypes = propTypes;\n\nexport default AnnotationNoteConnectorLine;\n","import AnnotationNoteConnectorLine from './AnnotationNoteConnectorLine';\n\nexport default AnnotationNoteConnectorLine;","import React, { useEffect, useRef, useContext, useState, useCallback } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport NoteContext from 'components/Note/Context';\nimport NoteContent from 'components/NoteContent';\nimport ReplyArea from 'components/Note/ReplyArea';\nimport NoteGroupSection from 'components/Note/NoteGroupSection';\nimport Button from 'components/Button';\n\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport useCore from 'hooks/useCore';\nimport AnnotationNoteConnectorLine from 'components/AnnotationNoteConnectorLine';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport DataElements from 'constants/dataElement';\nimport getRootNode from 'helpers/getRootNode';\nimport { mapAnnotationToKey, annotationMapKeys } from 'constants/map';\nimport { OfficeEditorEditMode, OFFICE_EDITOR_TRACKED_CHANGE_KEY } from 'constants/officeEditor';\n\nimport './Note.scss';\nimport { isAnnotationRenderedInDisplayMode } from 'src/helpers/isAnnotationRenderedInDisplayMode';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  isInNotesPanel: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n};\n\nlet currId = 0;\n\nconst Note = ({\n  annotation,\n  isMultiSelected,\n  isMultiSelectMode,\n  isInNotesPanel,\n  handleMultiSelect,\n  isCustomPanelOpen,\n  shouldHideConnectorLine,\n}) => {\n  const { core } = useCore();\n  const {\n    isSelected,\n    resize,\n    pendingEditTextMap,\n    isContentEditable,\n    isDocumentReadOnly,\n    isExpandedFromSearch,\n    // documentViewerKey,\n    setCurAnnotId,\n  } = useContext(NoteContext);\n  const containerRef = useRef();\n  const containerHeightRef = useRef();\n  const [isEditingMap, setIsEditingMap] = useState({});\n  const ids = useRef([]);\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const unreadReplyIdSet = new Set();\n\n  const [\n    noteTransformFunction,\n    customNoteSelectionFunction,\n    unreadAnnotationIdSet,\n    shouldExpandCommentThread,\n    isRightClickAnnotationPopupEnabled,\n    documentViewerKey,\n    isOfficeEditorMode,\n    officeEditorEditMode,\n  ] = useSelector(\n    (state) => [\n      selectors.getNoteTransformFunction(state),\n      selectors.getCustomNoteSelectionFunction(state),\n      selectors.getUnreadAnnotationIdSet(state),\n      selectors.isCommentThreadExpansionEnabled(state),\n      selectors.isRightClickAnnotationPopupEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n      selectors.getIsOfficeEditorMode(state),\n      selectors.getOfficeEditorEditMode(state),\n    ],\n    shallowEqual,\n  );\n\n  const setIsEditing = useCallback(\n    (isEditing, index) => {\n      setIsEditingMap((map) => ({\n        ...map,\n        [index]: isEditing,\n      }));\n    },\n    [setIsEditingMap],\n  );\n\n  const replies = annotation\n    .getReplies()\n    .sort((a, b) => a['DateCreated'] - b['DateCreated']);\n\n  replies.filter((r) => unreadAnnotationIdSet.has(r.Id)).forEach((r) => unreadReplyIdSet.add(r.Id));\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'delete') {\n        annotations.forEach((annot) => {\n          if (unreadAnnotationIdSet.has(annot.Id)) {\n            dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annot.Id }));\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener, undefined, documentViewerKey);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener, documentViewerKey);\n    };\n  }, [unreadAnnotationIdSet]);\n\n  useEffect(() => {\n    const prevHeight = containerHeightRef.current;\n    const currHeight = containerRef.current.getBoundingClientRect().height;\n    containerHeightRef.current = currHeight;\n\n    // have a prevHeight check here because we don't want to call resize on mount\n    // use Math.round because in some cases in IE11 these two numbers will differ in just 0.00001\n    // and we don't want call resize in this case\n    if (prevHeight && Math.round(prevHeight) !== Math.round(currHeight)) {\n      resize();\n    }\n  });\n\n  useEffect(() => {\n    if (noteTransformFunction) {\n      const notesPanelElement = getRootNode().querySelectorAll('.NotesPanel')[0];\n      ids.current.forEach((id) => {\n        const child = notesPanelElement.querySelector(`[data-webviewer-custom-element=${id}]`);\n        if (child) {\n          child.parentNode.removeChild(child);\n        }\n      });\n\n      ids.current = [];\n\n      const state = {\n        annotation,\n        isSelected,\n      };\n\n      noteTransformFunction(containerRef.current, state, (...params) => {\n        const element = document.createElement(...params);\n        const id = `custom-element-${currId}`;\n        currId++;\n        ids.current.push(id);\n        element.setAttribute('data-webviewer-custom-element', id);\n        element.addEventListener('mousedown', (e) => {\n          e.stopPropagation();\n        });\n\n        return element;\n      });\n    }\n  });\n\n  useEffect(() => {\n    // If this is not a new one, rebuild the isEditing map\n    const pendingText = pendingEditTextMap[annotation.Id];\n    if (pendingText !== '' && isContentEditable && !isDocumentReadOnly) {\n      setIsEditing(true, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing, annotation, isMultiSelectMode]);\n\n  useDidUpdate(() => {\n    if (isDocumentReadOnly || !isContentEditable) {\n      setIsEditing(false, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing]);\n\n  const handleNoteClick = async (e) => {\n    // stop bubbling up otherwise the note will be closed\n    // due to annotation deselection\n    e && e.stopPropagation();\n\n    const isTextSelected = window.getSelection().toString();\n    if (isTextSelected) {\n      return;\n    }\n\n    if (isMultiSelectMode) {\n      handleMultiSelect(!isMultiSelected);\n      return;\n    }\n    if (unreadAnnotationIdSet.has(annotation.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annotation.Id }));\n    }\n\n    customNoteSelectionFunction && customNoteSelectionFunction(annotation);\n    if (!isSelected) {\n      core.deselectAllAnnotations(documentViewerKey);\n\n      // Need this delay to ensure all other event listeners fire before we open the line\n      setTimeout(() => dispatch(actions.openElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE)), 300);\n    }\n    if (isInNotesPanel && !(isOfficeEditorMode && officeEditorEditMode === OfficeEditorEditMode.PREVIEW)) {\n      core.selectAnnotation(annotation, documentViewerKey);\n      setCurAnnotId(annotation.Id);\n      core.jumpToAnnotation(annotation, documentViewerKey);\n      if (!isRightClickAnnotationPopupEnabled) {\n        dispatch(actions.openElement(DataElements.ANNOTATION_POPUP));\n      }\n      if (isOfficeEditorMode) {\n        const trackedChangeId = annotation.getCustomData(OFFICE_EDITOR_TRACKED_CHANGE_KEY);\n        await core.getOfficeEditor().moveCursorToTrackedChange(trackedChangeId);\n      }\n    }\n  };\n\n  const hasUnreadReplies = unreadReplyIdSet.size > 0;\n\n  const noteClass = classNames({\n    Note: true,\n    expanded: isSelected,\n    'is-multi-selected': isMultiSelected,\n    unread: unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies,\n    'disabled': isOfficeEditorMode && officeEditorEditMode === OfficeEditorEditMode.PREVIEW,\n  });\n\n  const repliesClass = classNames({\n    replies: true,\n    hidden: !isSelected,\n  });\n\n  useEffect(() => {\n    // Must also restore the isEdit for  any replies, in case someone was editing a\n    // reply when a comment was placed above\n    if (!isMultiSelectMode) {\n      replies.forEach((reply, index) => {\n        const pendingText = pendingEditTextMap[reply.Id];\n        if ((pendingText !== '' && typeof pendingText !== 'undefined') && isSelected) {\n          setIsEditing(true, 1 + index);\n        }\n      });\n    }\n  }, [isSelected, isMultiSelectMode]);\n\n  useEffect(() => {\n    if (isMultiSelectMode) {\n      setIsEditing(false, 0);\n    }\n  }, [isMultiSelectMode]);\n\n  const showReplyArea = !Object.values(isEditingMap).some((val) => val);\n\n  const handleReplyClicked = (reply) => {\n    // set clicked reply as read\n    if (unreadReplyIdSet.has(reply.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: reply.Id }));\n      core.getAnnotationManager(documentViewerKey).selectAnnotation(reply);\n    }\n  };\n\n  const markAllRepliesRead = () => {\n    // set all replies to read state if user starts to type in reply textarea\n    if (unreadReplyIdSet.size > 0) {\n      const repliesSetToRead = replies.filter((r) => unreadReplyIdSet.has(r.Id));\n      core.getAnnotationManager(documentViewerKey).selectAnnotations(repliesSetToRead);\n      repliesSetToRead.forEach((r) => dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: r.Id })));\n    }\n  };\n\n  const groupAnnotations = core.getGroupAnnotations(annotation, documentViewerKey);\n  const isGroup = groupAnnotations.length > 1;\n  const isTrackedChange = mapAnnotationToKey(annotation) === annotationMapKeys.TRACKED_CHANGE;\n  // apply unread reply style to replyArea if the last reply is unread\n  const lastReplyId = replies.length > 0 ? replies[replies.length - 1].Id : null;\n  const isRenderableInCurrentDisplayMode =  isAnnotationRenderedInDisplayMode(core, annotation);\n  const isRenderingConnectorLine = isSelected && (isInNotesPanel || isCustomPanelOpen) && !shouldHideConnectorLine && isRenderableInCurrentDisplayMode;\n\n  return (\n    <div\n      ref={containerRef}\n      className={noteClass}\n      id={`note_${annotation.Id}`}\n    >\n      <Button\n        className='note-button'\n        onClick={(e) => handleNoteClick(e)}\n        ariaLabelledby={`note_${annotation.Id}`}\n        ariaCurrent={isSelected}\n        dataElement=\"expandNoteButton\"\n      />\n      <NoteContent\n        noteIndex={0}\n        annotation={annotation}\n        setIsEditing={setIsEditing}\n        handleNoteClick={handleNoteClick}\n        isEditing={isEditingMap[0]}\n        isNonReplyNoteRead={!unreadAnnotationIdSet.has(annotation.Id)}\n        isUnread={unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies}\n        handleMultiSelect={(e) => {\n          setCurAnnotId(annotation.Id);\n          handleMultiSelect(e);\n        }}\n        isMultiSelected={isMultiSelected}\n        isMultiSelectMode={isMultiSelectMode}\n      />\n      {(isSelected || isExpandedFromSearch || shouldExpandCommentThread) && !isTrackedChange && (\n        <>\n          {replies.length > 0 && (\n            <div className={repliesClass}>\n              {hasUnreadReplies && (\n                <Button\n                  dataElement=\"markAllReadButton\"\n                  className=\"mark-all-read-button\"\n                  label={t('action.markAllRead')}\n                  onClick={markAllRepliesRead}\n                />\n              )}\n              {replies.map((reply, i) => (\n                <div className=\"reply\" id={`note_reply_${reply.Id}`} key={`note_reply_${reply.Id}`}>\n                  <NoteContent\n                    noteIndex={i + 1}\n                    key={reply.Id}\n                    annotation={reply}\n                    setIsEditing={setIsEditing}\n                    isEditing={isEditingMap[i + 1]}\n                    onReplyClicked={handleReplyClicked}\n                    isUnread={unreadAnnotationIdSet.has(reply.Id)}\n                    handleMultiSelect={handleMultiSelect}\n                    isMultiSelected={isMultiSelected}\n                    isMultiSelectMode={isMultiSelectMode}\n                    handleNoteClick={handleNoteClick}\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n          {isGroup &&\n            <NoteGroupSection\n              groupAnnotations={groupAnnotations}\n              isMultiSelectMode={isMultiSelectMode}\n            />}\n          {showReplyArea && !isMultiSelectMode && (\n            <ReplyArea\n              isUnread={lastReplyId && unreadAnnotationIdSet.has(lastReplyId)}\n              onPendingReplyChange={markAllRepliesRead}\n              annotation={annotation}\n            />\n          )}\n        </>\n      )}\n      {isRenderingConnectorLine && (\n        <AnnotationNoteConnectorLine\n          annotation={annotation}\n          noteContainerRef={containerRef}\n          isCustomPanelOpen={isCustomPanelOpen}\n        />\n      )}\n    </div>\n  );\n};\n\nNote.propTypes = propTypes;\n\nexport default Note;\n","import Note from './Note';\n\nexport default Note;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState } from 'react';\nimport Draggable from 'react-draggable';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\n\nimport NoteContext from 'components/Note/Context';\nimport Note from 'components/Note';\nimport ReplyAttachmentPicker from 'components/NotesPanel/ReplyAttachmentPicker';\nimport Button from 'components/Button';\n\nimport DataElements from 'src/constants/dataElement';\n\nimport { mapAnnotationToKey, annotationMapKeys } from 'constants/map';\n\nimport './InlineCommentingPopup.scss';\n\nconst propTypes = {\n  isMobile: PropTypes.bool,\n  isUndraggable: PropTypes.bool,\n  isNotesPanelClosed: PropTypes.bool,\n  popupRef: PropTypes.any,\n  position: PropTypes.object,\n  closeAndReset: PropTypes.func,\n  commentingAnnotation: PropTypes.object,\n  contextValue: PropTypes.object,\n  annotationForAttachment: PropTypes.string,\n  addAttachments: PropTypes.func,\n};\n\nconst InlineCommentingPopup = ({\n  isMobile,\n  isUndraggable,\n  isNotesPanelClosed,\n  popupRef,\n  position,\n  closeAndReset,\n  commentingAnnotation,\n  contextValue,\n  annotationForAttachment,\n  addAttachments,\n}) => {\n  const [t] = useTranslation();\n  const [isExpanded, setExpanded] = useState(false);\n\n  const isTrackedChange = mapAnnotationToKey(commentingAnnotation) === annotationMapKeys.TRACKED_CHANGE;\n\n  const inlineCommentPopup = (\n    <div\n      className={classNames({\n        Popup: true,\n        InlineCommentingPopup: true,\n        open: isNotesPanelClosed,\n        trackedChangePopup: isTrackedChange,\n      })}\n      ref={popupRef}\n      data-element={DataElements.INLINE_COMMENT_POPUP}\n      style={{ ...position }}\n      onMouseMove={(e) => {\n        e.stopPropagation();\n      }}\n      onMouseDown={(e) => {\n        if (isMobile) {\n          e.stopPropagation();\n          closeAndReset();\n        }\n      }}\n      onKeyDown={(e) => {\n        if (e.key === 'Escape') {\n          closeAndReset();\n        }\n      }}\n    >\n      <div\n        className={classNames({\n          'inline-comment-container': true,\n          'expanded': isExpanded,\n        })}\n        onMouseDown={(e) => {\n          if (isMobile) {\n            e.stopPropagation();\n          }\n        }}\n      >\n        {isMobile && (\n          <div className='inline-comment-header'>\n            <Button\n              img={isExpanded ? 'icon-chevron-down' : 'icon-chevron-up'}\n              className=\"expand-arrow\"\n              dataElement={DataElements.INLINE_COMMENT_POPUP_EXPAND_BUTTON}\n              onClick={() => setExpanded(!isExpanded)}\n            />\n            <span className='inline-comment-header-title'>{t('action.comment')}</span>\n            <Button\n              img={'icon-close'}\n              dataElement={DataElements.INLINE_COMMENT_POPUP_CLOSE_BUTTON}\n              onClick={closeAndReset}\n            />\n          </div>\n        )}\n        <NoteContext.Provider value={contextValue}>\n          <Note\n            annotation={commentingAnnotation}\n            isMultiSelected={false}\n            isMultiSelectMode={false}\n            handleMultiSelect={() => { }}\n          />\n          <ReplyAttachmentPicker\n            annotationId={annotationForAttachment}\n            addAttachments={addAttachments}\n          />\n        </NoteContext.Provider>\n      </div>\n    </div>\n  );\n\n  return isUndraggable || isTrackedChange ? (\n    inlineCommentPopup\n  ) : (\n    <Draggable cancel=\".Button, .cell, svg, select, button, input, .quill, .note-text-preview\">{inlineCommentPopup}</Draggable>\n  );\n};\n\nInlineCommentingPopup.propTypes = propTypes;\n\nexport default InlineCommentingPopup;\n","import React, { useState, useRef, useCallback, useLayoutEffect } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport InlineCommentingPopup from './InlineCommentingPopup';\nimport useCore from 'hooks/useCore';\nimport { getAnnotationPopupPositionBasedOn as getPopupPosition } from 'helpers/getPopupPosition';\nimport { getOpenedWarningModal, getOpenedColorPicker, getDatePicker } from 'helpers/getElements';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile as isPhone, isIE, isMobileDevice } from 'helpers/device';\nimport DataElements from 'constants/dataElement';\nimport getRootNode from 'helpers/getRootNode';\nimport debounce from 'lodash/debounce';\nimport PropTypes from 'prop-types';\nimport { workerTypes } from 'constants/types';\n\nconst propTypes = {\n  annotation: PropTypes.object,\n  closeAndReset: PropTypes.func,\n};\n\nconst InlineCommentingPopupContainer = ({ annotation, closeAndReset }) => {\n  const { core } = useCore();\n  const [\n    isNotesPanelOpen,\n    notesInLeftPanel,\n    isLeftPanelOpen,\n    activeLeftPanel,\n    showAnnotationNumbering,\n    sortStrategy,\n    isDocumentReadOnly,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n      selectors.getNotesInLeftPanel(state),\n      selectors.isElementOpen(state, DataElements.LEFT_PANEL),\n      selectors.getActiveLeftPanel(state),\n      selectors.isAnnotationNumberingEnabled(state),\n      selectors.getSortStrategy(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n  const dispatch = useDispatch();\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const popupRef = useRef();\n  // on tablet, the behaviour will be like on desktop, except being draggable\n  const isMobile = isPhone();\n  const isUndraggable = isMobile || !!isMobileDevice || isIE;\n  const isNotesPanelOpenOrActive = isNotesPanelOpen || (notesInLeftPanel && isLeftPanelOpen && activeLeftPanel === 'notesPanel');\n  const sixtyFramesPerSecondIncrement = 16;\n\n  useOnClickOutside(popupRef, (e) => {\n    const notesPanel = getRootNode().querySelector('[data-element=\"notesPanel\"]');\n    const clickedInNotesPanel = notesPanel?.contains(e.target);\n    const noteStateFlyout = getRootNode().querySelector(`[data-element=\"noteStateFlyout-${annotation.Id}\"]`);\n    const clickedInNoteStateFlyout = noteStateFlyout?.contains(e.target);\n    const datePicker = getDatePicker();\n    const warningModal = getOpenedWarningModal();\n    const colorPicker = getOpenedColorPicker();\n\n    // the notes panel has mousedown handlers to handle the opening/closing states of this component\n    // we don't want this handler to run when clicked in the notes panel otherwise the opening/closing states may mess up\n    // for example: click on a note will call core.selectAnnotation which triggers the annotationSelected event\n    // and opens this component. If we don't exclude the notes panel this handler will run and close it after\n    if (!clickedInNotesPanel && !clickedInNoteStateFlyout && !warningModal && !colorPicker && !datePicker) {\n      dispatch(actions.closeElement(DataElements.INLINE_COMMENT_POPUP));\n    }\n  });\n\n  const isNotesPanelClosed = !isNotesPanelOpenOrActive;\n\n  const setPopupPosition = () => {\n    if (isNotesPanelClosed && popupRef.current && !isMobile) {\n      setPosition(getPopupPosition(annotation, popupRef, activeDocumentViewerKey));\n    }\n  };\n\n  useLayoutEffect(() => {\n    setPopupPosition();\n  }, [activeDocumentViewerKey, annotation]);\n\n  const handleResize = debounce(() => {\n    setPopupPosition();\n  }, sixtyFramesPerSecondIncrement, { 'trailing': true, 'leading': false });\n\n  useLayoutEffect(() => {\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  // TO-DO refactor: Lines 189-239 was copied from NotesPanel 228-275\n  const [pendingAttachmentMap, setPendingAttachmentMap] = useState({});\n  const addAttachments = (annotationID, attachments) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: [...(map[annotationID] || []), ...attachments]\n    }));\n  };\n\n  const [annotationForAttachment, setAnnotationForAttachment] = useState(undefined);\n\n  const [pendingEditTextMap, setPendingEditTextMap] = useState({});\n  const setPendingEditText = useCallback(\n    (pendingText, annotationID) => {\n      setPendingEditTextMap((map) => ({\n        ...map,\n        [annotationID]: pendingText,\n      }));\n    },\n    [setPendingEditTextMap],\n  );\n\n  const [pendingReplyMap, setPendingReplyMap] = useState({});\n  const setPendingReply = useCallback(\n    (pendingReply, annotationID) => {\n      setPendingReplyMap((map) => ({\n        ...map,\n        [annotationID]: pendingReply,\n      }));\n    },\n    [setPendingReplyMap],\n  );\n  const clearAttachments = (annotationID) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: []\n    }));\n  };\n  const deleteAttachment = (annotationID, attachment) => {\n    const attachmentList = pendingAttachmentMap[annotationID];\n    if (attachmentList?.length > 0) {\n      const index = attachmentList.indexOf(attachment);\n      if (index > -1) {\n        attachmentList.splice(index, 1);\n        setPendingAttachmentMap((map) => ({\n          ...map,\n          [annotationID]: [...attachmentList]\n        }));\n      }\n    }\n  };\n\n  const contextValue = {\n    searchInput: '',\n    resize: () => {\n      if (core.getDocument()?.getType() === workerTypes.OFFICE_EDITOR) {\n        setPosition(getPopupPosition(annotation, popupRef, activeDocumentViewerKey));\n      }\n    },\n    isSelected: true,\n    isContentEditable: core.canModifyContents(annotation) && !annotation.getContents(),\n    pendingEditTextMap,\n    setPendingEditText,\n    pendingReplyMap,\n    setPendingReply,\n    isDocumentReadOnly,\n    onTopNoteContentClicked: () => { },\n    isExpandedFromSearch: false,\n    scrollToSelectedAnnot: false,\n    sortStrategy,\n    showAnnotationNumbering,\n    setCurAnnotId: setAnnotationForAttachment,\n    pendingAttachmentMap,\n    addAttachments,\n    clearAttachments,\n    deleteAttachment,\n  };\n\n  return (\n    <InlineCommentingPopup\n      isMobile={isMobile}\n      isUndraggable={isUndraggable}\n      isNotesPanelClosed={isNotesPanelClosed}\n      popupRef={popupRef}\n      position={position}\n      closeAndReset={closeAndReset}\n      commentingAnnotation={annotation}\n      contextValue={contextValue}\n      annotationForAttachment={annotationForAttachment}\n      addAttachments={addAttachments}\n    />\n  );\n};\n\nInlineCommentingPopupContainer.propTypes = propTypes;\n\nexport default InlineCommentingPopupContainer;\n","import InlineCommentingPopupContainer from './InlineCommentingPopupContainer';\n\nexport default InlineCommentingPopupContainer;"],"sourceRoot":""}