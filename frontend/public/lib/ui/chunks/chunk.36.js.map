{"version":3,"sources":["webpack:///./src/ui/src/components/TextButton/TextButton.js","webpack:///./src/ui/src/components/TextButton/index.js","webpack:///./src/ui/src/constants/dnd.js","webpack:///./src/ui/src/components/PanelListItem/index.js","webpack:///./src/ui/src/components/Outline/Context.js","webpack:///./src/ui/src/components/OutlineContent/OutlineContent.js","webpack:///./src/ui/src/components/OutlineContent/index.js","webpack:///./src/ui/src/components/Outline/Outline.scss?0ca8","webpack:///./src/ui/src/components/OutlinesPanel/OutlinesPanel.scss?9f8b","webpack:///./src/ui/src/components/Outline/Outline.js","webpack:///./src/ui/src/components/Outline/index.js","webpack:///./src/ui/src/components/OutlinesPanel/OutlinesDragLayer.js","webpack:///./src/ui/src/components/OutlinesPanel/OutlinesPanel.js","webpack:///./src/ui/src/components/OutlinesPanel/index.js"],"names":["propTypes","img","PropTypes","string","label","oneOfType","number","dataElement","onClick","func","ariaLabel","ariaControls","role","disabled","bool","TextButton","props","React","createElement","Button","className","memo","ItemTypes","OUTLINE","PORTFOLIO","DropLocation","ON_TARGET_HORIZONTAL_MIDPOINT","ABOVE_TARGET","BELOW_TARGET","INITIAL","BUFFER_ROOM","PanelListItem","OutlineContext","createContext","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","_extends","assign","arguments","hasOwnProperty","apply","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","toPrimitive","String","Number","_toPrimitive","_toPropertyKey","_objectWithoutProperties","indexOf","_objectWithoutPropertiesLoose","propertyIsEnumerable","Outline","lazy","text","isRequired","outlinePath","isAdding","isExpanded","setIsExpanded","isOutlineRenaming","setOutlineRenaming","isOutlineChangingDest","setOutlineChangingDest","onCancel","textColor","children","array","setMultiSelected","moveOutlineInward","moveOutlineBeforeTarget","moveOutlineAfterTarget","OutlineContent","_ref4","outlineContext","useContext","_ref5","currentDestPage","currentDestText","editingOutlines","setEditingOutlines","isMultiSelectMode","isOutlineEditable","addNewOutline","renameOutline","updateOutlineDest","selectedOutlines","updateOutlines","removeOutlines","core","useCore","outlineScrollParentRef","customizableUI","useSelector","state","selectors","getFeatureFlags","shallowEqual","useTranslation","_useState2","useState","isDefault","setIsDefault","_useState4","outlineText","setOutlineText","inputRef","useRef","isSelected","includes","onAddOutline","trim","onRenameOutline","onCancelOutline","isRenameButtonDisabled","useEffect","current","focus","select","editingOutlinesClone","isOutlineEditing","textStyle","color","handleOnClick","_ref6","_callee","val","_t","_context","menuTypes","RENAME","SETDEST","DELETE","MOVE_UP","MOVE_DOWN","MOVE_LEFT","MOVE_RIGHT","setToolMode","outlineUtils","moveOutlineUp","moveOutlineDown","moveOutlineOutward","_next","_throw","_x","flyoutSelector","DataElements","BOOKMARK_OUTLINE_FLYOUT","contentMenuFlyoutOptions","shouldHideDeleteButton","currentFlyout","getFlyout","type","contextMenuMoreButtonOptions","flyoutToggleElement","moreOptionsDataElement","concat","checkboxOptions","id","checked","onChange","target","childOutlines","_useState6","scrollParent","setScrollParent","renderContent","useCallback","outline","key","getOutlineId","virtuosoComponents","useMemo","List","forwardRef","_ref","ref","_ref$className","style","listProps","_excluded","margin","object","Item","_ref2","itemChildren","itemProps","_excluded2","node","Scroller","_ref3","scrollerProps","_excluded3","scrollerStyle","overflowY","overflowX","height","clientHeight","createOutlineVirtuosoComponents","virtuosoScrollParent","renderVirtualizedChildren","Virtuoso","data","computeItemKey","index","components","customScrollParent","itemContent","labelHeader","enableMoreOptionsContextMenuFlyout","onDoubleClick","expanded","setIsExpandedHandler","virtualizedChildrenCount","virtualizedChildrenRenderer","placeholder","aria-label","onKeyDown","stopPropagation","fontStyle","isSubmitType","module","exports","connectDragSource","connectDragPreview","connectDropTarget","isDragging","isDraggedUpwards","isDraggedDownwards","_outlinesStateMap$out","_outlinesStateMap$out2","outlines","getOutlines","outlinesStateMap","getOutlinesStateMap","_useContext","setActiveOutlinePath","activeOutlinePath","isOutlineActive","setAddingNewOutline","isAddingNewOutline","shouldAutoExpandOutlines","getPath","isOutlineExpanded","isRenaming","setIsRenaming","isChangingDest","setChangingDest","_useState8","undefined","clearSingleClick","setClearSingleClick","dispatch","useDispatch","elementRef","getEmptyImage","captureDraggingState","opacity","useImperativeHandle","getNode","startsWith","shouldExpandOutline","useLayoutEffect","actions","setOutlinesStateMap","rgbObject","rValue","gValue","bValue","onSingleClick","goToOutline","isMobile","closeElement","isActive","DataElementWrapper","classNames","tabIndex","detail","setTimeout","clearTimeout","getName","getChildren","marginLeft","getNestedLevel","OutlineNested","DropTarget","hover","dropTargetMonitor","dropTargetContainer","dragObject","getItem","dragOutline","dragSourceNode","dropOutline","dropTargetNode","contains","dropLocation","dragIndex","hoverIndex","parent","dropTargetBoundingRect","getBoundingClientRect","dropTargetVerticalMiddlePoint","bottom","top","dropTargetClientY","getClientOffset","isOver","shallow","classList","add","remove","fireEvent","Events","DRAG_OUTLINE","targetOutline","draggedOutline","drop","DROP_OUTLINE","connect","dropTargetState","_dropTargetState$getI","_dropTargetState$getI2","dropTarget","DragSource","beginDrag","dragSourceMonitor","dragSourceContainer","sourceId","canDrag","isIE","console","warn","isFullPDFEnabled","dragSourceState","dragSource","dragPreview","layerStyles","position","pointerEvents","zIndex","left","width","getItemStyles","initialOffset","currentOffset","display","x","transform","WebkitTransform","OutlinesDragLayer","_useDragLayer","useDragLayer","dragLayerState","itemType","getItemType","item","getInitialSourceClientOffset","Fragment","renderDragItem","_asyncToGenerator","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","OutlineListItem","setSelectedOutlines","handleSetMultiSelected","path","currentSelected","OutlinesPanel","_ref2$isTest","isTest","isDisabled","isElementDisabled","OUTLINE_PANEL","outlineEditingEnabled","getOutlineEditingEnabled","currentPage","getCurrentPage","pageLabels","getPageLabels","featureFlags","isViewOnly","defaultDestText","areaDestinationText","defaultDestCoord","outlinesNotLoaded","documentLoaded","useDocumentLoadState","setCurrentDestText","currentDestCoord","setCurrentDestCoord","setCurrentDestPage","setIsOutlineEditable","_useState0","_useState10","setIsAddingNewOutline","_useState12","_useState14","isAnyOutlineRenaming","setIsAnyOutlineRenaming","_useState16","setIsMultiSelectMode","_useState18","outlinesPromiseRef","nextPathRef","TOOL_NAME","tool","getTool","panelRef","reject","outlinesPromise","promise","isComplete","onPromiseCompletion","setOutlines","workerType","getType","isSupportedType","workerTypes","PDF","IMAGE","evaluateOutlineEditable","onDocumentLoaded","addEventListener","removeEventListener","isAnyEditing","values","some","onSetDestination","annotation","getCustomData","onOutlinesBookmarksChanged","window","handlePanelClick","event","getCurrentDestViewerCoord","pageNum","getDocumentViewer","getDocument","getViewerCoordinates","_getCurrentDestViewer","outlineName","doc","pageRotation","tmp","getPageRotation","Core","PageRotation","E_90","E_270","addRootOutline","shouldEndAccessibleReadingOrderMode","clearOutlineDestination","defaultTool","_callee2","_getCurrentDestViewer2","_context2","setOutlineDestination","_x2","generalMoveOutlineAction","moveDirection","dragPath","dropPath","moveOutlineInTarget","_callee3","newName","_context3","setOutlineName","_x3","_x4","_ref7","_callee5","outlinesToRemove","confirmationWarning","_context5","sort","reverse","message","title","confirmBtnText","onConfirm","_onConfirm","_callee4","fullIndex","_context4","deleteOutline","showWarningMessage","_x5","createOutlinesPanelComponents","renderOutlineItem","testModeProps","initialItemCount","data-element","OUTLINE_MULTI_SELECT","Spinner","inPanel","Provider","DndProvider","backend","isMobileDevice","TouchBackend","HTML5Backend","_","OUTLINE_ADD_NEW_BUTTON_CONTAINER","OUTLINE_ADD_NEW_BUTTON"],"mappings":"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","file":"chunks/chunk.36.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '../Button';\n\nimport './TextButton.scss';\n\nconst propTypes = {\n  img: PropTypes.string,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  dataElement: PropTypes.string,\n  onClick: PropTypes.func,\n  ariaLabel: PropTypes.string,\n  ariaControls: PropTypes.string,\n  role: PropTypes.string,\n  disabled: PropTypes.bool\n};\n\nconst TextButton = (props) => {\n  const {\n    img,\n    dataElement,\n    onClick,\n    label,\n    ariaLabel,\n    ariaControls,\n    role,\n    disabled\n  } = props;\n\n  return (<Button\n    className='TextButton'\n    img={img}\n    label={label}\n    dataElement={dataElement}\n    onClick={onClick}\n    ariaLabel={ariaLabel}\n    ariaControls={ariaControls}\n    role={role}\n    disabled={disabled}\n  />);\n};\n\nTextButton.propTypes = propTypes;\n\nexport default React.memo(TextButton);","import TextButton from './TextButton';\n\nexport default TextButton;","export const ItemTypes = {\n  OUTLINE: 'outline',\n  PORTFOLIO: 'portfolio',\n};\n\nexport const DropLocation = {\n  ON_TARGET_HORIZONTAL_MIDPOINT: 'onTargetHorizontalMidPoint',\n  ABOVE_TARGET: 'aboveTarget',\n  BELOW_TARGET: 'belowTarget',\n  INITIAL: 'initial',\n};\n\nexport const BUFFER_ROOM = 8;","import PanelListItem from './PanelListItem';\n\nexport default PanelListItem;","import React from 'react';\n\nconst OutlineContext = React.createContext();\n\nexport default OutlineContext;","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState, lazy } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport useCore from 'hooks/useCore';\nimport selectors from 'selectors';\nimport { Virtuoso } from 'react-virtuoso';\nimport Button from '../Button';\nimport TextButton from '../TextButton';\nimport { menuTypes } from 'helpers/outlineFlyoutHelper';\nimport OutlineContext from '../Outline/Context';\nimport './OutlineContent.scss';\nimport '../../constants/bookmarksOutlinesShared.scss';\nimport DataElements from 'constants/dataElement';\nimport PanelListItem from '../PanelListItem';\nimport outlineUtils from 'helpers/OutlineUtils';\n\nconst Outline = lazy(() => import('../Outline'));\n\nexport const createOutlineVirtuosoComponents = (scrollParent) => {\n  const List = React.forwardRef(({ className = '', style, ...listProps }, ref) => (\n    <ul\n      {...listProps}\n      ref={ref}\n      className={className ? `${className} panel-list-children` : 'panel-list-children'}\n      style={{ ...style, margin: 0 }}\n    />\n  ));\n  List.displayName = 'OutlineChildrenList';\n  List.propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n  };\n\n  const Item = React.forwardRef(({ children: itemChildren, style, ...itemProps }, ref) => (\n    <li {...itemProps} ref={ref} style={style}>\n      {itemChildren}\n    </li>\n  ));\n  Item.displayName = 'OutlineChildrenItem';\n  Item.propTypes = {\n    children: PropTypes.node,\n    style: PropTypes.object,\n  };\n\n  const Scroller = React.forwardRef(({ style, ...scrollerProps }, ref) => {\n    const scrollerStyle = {\n      ...style,\n      overflowY: 'hidden',\n      overflowX: 'visible',\n    };\n    if (scrollerStyle.height === 0 || scrollerStyle.height === '0px') {\n      scrollerStyle.height = scrollParent?.clientHeight || style?.height || '100%';\n    }\n    return (\n      <div\n        {...scrollerProps}\n        ref={ref}\n        style={scrollerStyle}\n      />\n    );\n  });\n  Scroller.displayName = 'OutlineChildrenScroller';\n  Scroller.propTypes = {\n    style: PropTypes.object,\n  };\n\n  return { List, Item, Scroller };\n};\n\nconst propTypes = {\n  text: PropTypes.string.isRequired,\n  outlinePath: PropTypes.string,\n  isAdding: PropTypes.bool,\n  isExpanded: PropTypes.bool,\n  setIsExpanded: PropTypes.func,\n  isOutlineRenaming: PropTypes.bool,\n  setOutlineRenaming: PropTypes.func,\n  isOutlineChangingDest: PropTypes.bool,\n  setOutlineChangingDest: PropTypes.func,\n  onCancel: PropTypes.func,\n  textColor: PropTypes.string,\n  children: PropTypes.array,\n  setMultiSelected: PropTypes.func,\n  moveOutlineInward: PropTypes.func,\n  moveOutlineBeforeTarget: PropTypes.func,\n  moveOutlineAfterTarget: PropTypes.func,\n};\n\nconst OutlineContent = ({\n  text,\n  outlinePath,\n  isAdding,\n  isExpanded,\n  setIsExpanded,\n  isOutlineRenaming,\n  setOutlineRenaming,\n  isOutlineChangingDest,\n  setOutlineChangingDest,\n  onCancel,\n  textColor,\n  children,\n  setMultiSelected,\n  moveOutlineInward,\n  moveOutlineBeforeTarget,\n  moveOutlineAfterTarget\n}) => {\n  const outlineContext = useContext(OutlineContext);\n\n  const {\n    currentDestPage,\n    currentDestText,\n    editingOutlines,\n    setEditingOutlines,\n    isMultiSelectMode,\n    isOutlineEditable,\n    addNewOutline,\n    renameOutline,\n    updateOutlineDest,\n    selectedOutlines,\n    updateOutlines,\n    removeOutlines,\n  } = outlineContext || {};\n\n  const { core } = useCore();\n\n  const outlineScrollParentRef = outlineContext?.outlineScrollParentRef;\n\n  const featureFlags = useSelector((state) => selectors.getFeatureFlags(state), shallowEqual);\n  const customizableUI = featureFlags.customizableUI;\n\n  const [t] = useTranslation();\n  const TOOL_NAME = 'OutlineDestinationCreateTool';\n\n  const [isDefault, setIsDefault] = useState(false);\n  const [outlineText, setOutlineText] = useState(text);\n  const inputRef = useRef();\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      e.stopPropagation();\n      if (isAdding) {\n        onAddOutline();\n      }\n      if (isOutlineRenaming && !isRenameButtonDisabled()) {\n        onRenameOutline();\n      }\n    }\n    if (e.key === 'Escape') {\n      onCancelOutline();\n    }\n  };\n\n  const isSelected = selectedOutlines?.includes(outlinePath) || false;\n\n  const onAddOutline = () => {\n    addNewOutline(outlineText.trim() === '' ? '' : outlineText);\n  };\n\n  const onRenameOutline = () => {\n    setOutlineRenaming(false);\n    renameOutline(outlinePath, outlineText);\n  };\n\n  const onCancelOutline = () => {\n    updateOutlines();\n    if (isOutlineRenaming) {\n      setOutlineRenaming(false);\n      setOutlineText(text);\n    }\n    if (isOutlineChangingDest) {\n      setOutlineChangingDest(false);\n    }\n    if (isAdding) {\n      onCancel();\n    }\n  };\n\n  const isRenameButtonDisabled = () => {\n    return !outlineText || text === outlineText;\n  };\n\n  useEffect(() => {\n    if (outlineText !== text) {\n      setOutlineText(text);\n    }\n  }, [text]);\n\n  useEffect(() => {\n    if (isAdding || isOutlineRenaming) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n\n    setIsDefault(!isAdding && !isOutlineRenaming && !isOutlineChangingDest);\n  }, [isOutlineRenaming, isOutlineChangingDest]);\n\n  useEffect(() => {\n    const editingOutlinesClone = { ...editingOutlines };\n    const isOutlineEditing = isOutlineRenaming || isOutlineChangingDest;\n    if (isOutlineEditing) {\n      editingOutlinesClone[outlinePath] = (isOutlineEditing);\n    } else {\n      delete editingOutlinesClone[outlinePath];\n    }\n    setEditingOutlines({ ...editingOutlinesClone });\n  }, [isOutlineRenaming, isOutlineChangingDest]);\n\n  const textStyle = {\n    color: textColor || 'auto'\n  };\n\n  const handleOnClick = async (val) => {\n    switch (val) {\n      case menuTypes.RENAME:\n        setOutlineRenaming(true);\n        break;\n      case menuTypes.SETDEST:\n        setOutlineChangingDest(true);\n        core.setToolMode(TOOL_NAME);\n        break;\n      case menuTypes.DELETE:\n        removeOutlines([outlinePath]);\n        break;\n      case menuTypes.MOVE_UP: {\n        await outlineUtils.moveOutlineUp(outlinePath);\n        updateOutlines();\n        break;\n      }\n      case menuTypes.MOVE_DOWN: {\n        await outlineUtils.moveOutlineDown(outlinePath);\n        updateOutlines();\n        break;\n      }\n      case menuTypes.MOVE_LEFT: {\n        await outlineUtils.moveOutlineOutward(outlinePath);\n        updateOutlines();\n        break;\n      }\n      case menuTypes.MOVE_RIGHT: {\n        await outlineUtils.moveOutlineInward(outlinePath);\n        updateOutlines();\n        break;\n      }\n      default:\n        break;\n    }\n  };\n\n  const flyoutSelector = DataElements.BOOKMARK_OUTLINE_FLYOUT;\n  const currentFlyout = useSelector((state) => selectors.getFlyout(state, flyoutSelector));\n  const type = 'outline';\n\n  const contentMenuFlyoutOptions = {\n    shouldHideDeleteButton: false,\n    currentFlyout: currentFlyout,\n    flyoutSelector: flyoutSelector,\n    type: type,\n    handleOnClick: handleOnClick\n  };\n\n  const contextMenuMoreButtonOptions = {\n    flyoutToggleElement: 'bookmarkOutlineFlyout',\n    moreOptionsDataElement: `outline-more-button-${outlinePath}`,\n  };\n\n  const checkboxOptions = {\n    id:`outline-checkbox-${outlinePath}`,\n    checked: isSelected,\n    onChange: (e) => {\n      setMultiSelected(outlinePath, e.target.checked);\n    },\n    ariaLabel: text,\n    disabled: !isMultiSelectMode\n  };\n\n  const onDoubleClick = () => {\n    if (isOutlineEditable) {\n      setOutlineRenaming(true);\n    }\n  };\n\n  const childOutlines = Array.isArray(children) ? children : [];\n  const [scrollParent, setScrollParent] = useState(null);\n\n  useEffect(() => {\n    if (outlineScrollParentRef?.current) {\n      setScrollParent(outlineScrollParentRef.current);\n    }\n  }, [outlineScrollParentRef]);\n\n  const renderContent = useCallback((outline) => (\n    <Outline\n      key={outlineUtils.getOutlineId(outline)}\n      outline={outline}\n      setMultiSelected={setMultiSelected}\n      moveOutlineInward={moveOutlineInward}\n      moveOutlineBeforeTarget={moveOutlineBeforeTarget}\n      moveOutlineAfterTarget={moveOutlineAfterTarget}\n    />\n  ), [moveOutlineAfterTarget, moveOutlineBeforeTarget, moveOutlineInward, setMultiSelected]);\n\n  const virtuosoComponents = useMemo(\n    () => createOutlineVirtuosoComponents(scrollParent),\n    [scrollParent]\n  );\n\n  const virtuosoScrollParent = scrollParent ?? null;\n\n  const renderVirtualizedChildren = useCallback(() => (\n    <Virtuoso\n      data={childOutlines}\n      computeItemKey={(index, outline) => outlineUtils.getOutlineId(outline)}\n      components={virtuosoComponents}\n      {...(virtuosoScrollParent ? { customScrollParent: virtuosoScrollParent } : {})}\n      itemContent={(index, outline) => renderContent(outline)}\n    />\n  ), [childOutlines, renderContent, virtuosoComponents, virtuosoScrollParent]);\n\n\n  return (\n    <div className=\"bookmark-outline-label-row\">\n      {isAdding &&\n        <div className=\"bookmark-outline-label\">\n          {t('component.newOutlineTitle')}\n        </div>\n      }\n      {isOutlineRenaming &&\n        <div className=\"bookmark-outline-label\">\n          {t('component.outlineTitle')}\n        </div>\n      }\n\n      {isDefault &&\n        <PanelListItem\n          key={outlinePath}\n          labelHeader={text}\n          textColor={textColor}\n          enableMoreOptionsContextMenuFlyout={isOutlineEditable}\n          onDoubleClick={onDoubleClick}\n          checkboxOptions={checkboxOptions}\n          contentMenuFlyoutOptions={contentMenuFlyoutOptions}\n          contextMenuMoreButtonOptions={contextMenuMoreButtonOptions}\n          expanded={isExpanded}\n          setIsExpandedHandler={setIsExpanded}\n          virtualizedChildrenCount={childOutlines.length}\n          virtualizedChildrenRenderer={childOutlines.length ? renderVirtualizedChildren : null}\n        >\n          {!childOutlines.length && null}\n        </PanelListItem>\n      }\n\n      {isOutlineChangingDest &&\n        <div\n          className=\"bookmark-outline-text outline-text\"\n          style={textStyle}\n        >\n          {text}\n        </div>\n      }\n\n      {(isAdding || isOutlineRenaming) &&\n        <input\n          type=\"text\"\n          name=\"outline\"\n          ref={inputRef}\n          className=\"bookmark-outline-input\"\n          placeholder={customizableUI ? '' : t('component.outlineTitle')}\n          aria-label={t('component.newOutlineTitle')}\n          value={outlineText}\n          onKeyDown={handleKeyDown}\n          onChange={(e) => setOutlineText(e.target.value)}\n        />\n      }\n\n      {(isAdding || isOutlineChangingDest) &&\n        <div className=\"outline-destination\">\n          {t('component.destination')}: {t('component.bookmarkPage')} {currentDestPage},\n          <span style={{ fontStyle: 'italic' }}> {currentDestText}</span>\n        </div>\n      }\n\n      {(isAdding || isOutlineRenaming || isOutlineChangingDest) &&\n        <div className=\"bookmark-outline-editing-controls\">\n          <TextButton\n            className=\"bookmark-outline-cancel-button\"\n            label={t('action.cancel')}\n            ariaLabel={`${t('action.cancel')} ${t('component.outlineTitle')}`}\n            onClick={onCancelOutline}\n          />\n          {isAdding &&\n            <Button\n              className=\"bookmark-outline-save-button\"\n              label={t('action.add')}\n              isSubmitType={true}\n              onClick={onAddOutline}\n            />\n          }\n          {isOutlineRenaming &&\n            <Button\n              className=\"bookmark-outline-save-button\"\n              label={t('action.save')}\n              isSubmitType={true}\n              disabled={isRenameButtonDisabled()}\n              onClick={onRenameOutline}\n            />\n          }\n          {isOutlineChangingDest &&\n            <Button\n              className=\"bookmark-outline-save-button\"\n              label={t('action.save')}\n              isSubmitType={true}\n              onClick={() => {\n                setOutlineChangingDest(false);\n                updateOutlineDest(outlinePath);\n              }}\n            />\n          }\n        </div>\n      }\n    </div>\n  );\n};\n\nOutlineContent.propTypes = propTypes;\n\nexport default OutlineContent;\n","import OutlineContent from './OutlineContent';\n\nexport default OutlineContent;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useCallback, useContext, useEffect, useLayoutEffect, forwardRef, useImperativeHandle, useRef } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { DragSource, DropTarget } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { ItemTypes, DropLocation, BUFFER_ROOM } from 'constants/dnd';\n// For canDrag() function\n// eslint-disable-next-line custom/use-core-hook-in-components\nimport core from 'core';\nimport useCore from 'hooks/useCore';\nimport actions from 'actions';\nimport selectors from 'selectors';\n\nimport Events from 'constants/events';\nimport fireEvent from 'helpers/fireEvent';\nimport outlineUtils from 'helpers/OutlineUtils';\nimport { isMobile, isIE } from 'helpers/device';\nimport OutlineContext from './Context';\nimport OutlineContent from 'src/components/OutlineContent';\nimport DataElementWrapper from '../DataElementWrapper';\n\nimport './Outline.scss';\nimport '../../constants/bookmarksOutlinesShared.scss';\n\nconst propTypes = {\n  outline: PropTypes.object.isRequired,\n  setMultiSelected: PropTypes.func,\n  moveOutlineInward: PropTypes.func.isRequired,\n  moveOutlineBeforeTarget: PropTypes.func.isRequired,\n  moveOutlineAfterTarget: PropTypes.func.isRequired,\n  connectDragSource: PropTypes.func,\n  connectDragPreview: PropTypes.func,\n  connectDropTarget: PropTypes.func,\n  isDragging: PropTypes.bool,\n  isDraggedUpwards: PropTypes.bool,\n  isDraggedDownwards: PropTypes.bool,\n};\n\nexport const shouldExpandOutline = (activeOutlinePath, outlinePath) => {\n  return activeOutlinePath !== null\n    && activeOutlinePath !== outlinePath\n    && activeOutlinePath.startsWith(`${outlinePath}-`);\n};\n\nconst Outline = forwardRef(\n  function Outline(\n    {\n      outline,\n      setMultiSelected,\n      isDragging,\n      isDraggedUpwards,\n      isDraggedDownwards,\n      connectDragSource,\n      connectDragPreview,\n      connectDropTarget,\n      moveOutlineInward,\n      moveOutlineBeforeTarget,\n      moveOutlineAfterTarget\n    },\n    ref\n  ) {\n    const outlines = useSelector((state) => selectors.getOutlines(state));\n    const { core } = useCore();\n    const outlinesStateMap = useSelector(selectors.getOutlinesStateMap, shallowEqual);\n\n    const {\n      setActiveOutlinePath,\n      activeOutlinePath,\n      isOutlineActive,\n      setAddingNewOutline,\n      isAddingNewOutline,\n      isMultiSelectMode,\n      shouldAutoExpandOutlines,\n      isOutlineEditable,\n      updateOutlines,\n    } = useContext(OutlineContext);\n\n    const outlinePath = outlineUtils.getPath(outline);\n    const isOutlineExpanded = outlinesStateMap[outlinePath]?.isExpanded || false;\n    const isOutlineRenaming = outlinesStateMap[outlinePath]?.isRenaming || false;\n\n    const [isExpanded, setIsExpanded] = useState(shouldAutoExpandOutlines || isOutlineExpanded);\n    const [isRenaming, setIsRenaming] = useState(isOutlineRenaming);\n    const [isChangingDest, setChangingDest] = useState(false);\n    const [clearSingleClick, setClearSingleClick] = useState(undefined);\n\n    const dispatch = useDispatch();\n\n    const elementRef = useRef(null);\n    connectDragSource(elementRef);\n    connectDragPreview(getEmptyImage(), { captureDraggingState: true });\n    connectDropTarget(elementRef);\n    const opacity = isDragging ? 0.5 : 1;\n    useImperativeHandle(ref, () => ({\n      getNode: () => elementRef.current,\n    }));\n\n    useEffect(() => {\n      if (shouldExpandOutline(activeOutlinePath, outlinePath) || isOutlineExpanded) {\n        setIsExpanded(true);\n      }\n    }, [activeOutlinePath, isAddingNewOutline, outlinePath]);\n\n    useLayoutEffect(() => {\n      setIsExpanded(shouldAutoExpandOutlines);\n    }, [shouldAutoExpandOutlines]);\n\n    useLayoutEffect(() => {\n      setIsRenaming(isOutlineRenaming);\n      setChangingDest(false);\n\n      if (isAddingNewOutline && activeOutlinePath === outlinePath) {\n        setIsExpanded(true);\n      }\n    }, [outlines]);\n\n    useEffect(() => {\n      const isExpandedStateUpdated = isExpanded === isOutlineExpanded;\n      if (isExpandedStateUpdated) {\n        return;\n      }\n\n      dispatch(actions.setOutlinesStateMap(outlinePath, { isExpanded }));\n    }, [isExpanded]);\n\n    useEffect(() => {\n      const isRenamingStateUpdated = isRenaming === isOutlineRenaming;\n      if (isRenamingStateUpdated) {\n        return;\n      }\n\n      dispatch(actions.setOutlinesStateMap(outlinePath, { isRenaming }));\n    }, [isRenaming]);\n\n    const onSingleClick = useCallback(() => {\n      core.goToOutline(outline);\n\n      outlinePath === activeOutlinePath\n        ? setActiveOutlinePath(null)\n        : setActiveOutlinePath(outlinePath);\n\n\n      if (isAddingNewOutline) {\n        setAddingNewOutline(false);\n        updateOutlines();\n      }\n\n      if (isMobile()) {\n        dispatch(actions.closeElement('leftPanel'));\n      }\n    }, [dispatch, setActiveOutlinePath, activeOutlinePath, isAddingNewOutline, outline]);\n\n    const isActive = isOutlineActive(outline);\n\n    const convertRgbObjectToRgbString = (rgbObject) => {\n      const rValue = rgbObject['r'] * 255;\n      const gValue = rgbObject['g'] * 255;\n      const bValue = rgbObject['b'] * 255;\n      return `rgb(${rValue}, ${gValue}, ${bValue})`;\n    };\n\n    return (\n      <div\n        ref={(!isAddingNewOutline && isMultiSelectMode && isOutlineEditable) ? elementRef : null}\n        className=\"outline-drag-container\"\n        style={{ opacity }}\n      >\n        <div className=\"outline-drag-line\" style={{ opacity: isDraggedUpwards ? 1 : 0 }} />\n        <DataElementWrapper\n          className={classNames({\n            'bookmark-outline-single-container': true,\n            'editing': isRenaming || isChangingDest,\n            'default': !isRenaming && !isChangingDest,\n            'selected': isActive,\n          })}\n          tabIndex={0}\n          onKeyDown={(e) => {\n            e.key === 'Enter' && onSingleClick();\n            e.stopPropagation();\n          }}\n          onClick={(e) => {\n            e.stopPropagation();\n            if (!isRenaming && !isChangingDest && e.detail === 1) {\n              setClearSingleClick(setTimeout(onSingleClick, 300));\n            }\n          }}\n          onDoubleClick={() => {\n            if (!isRenaming && !isChangingDest) {\n              clearTimeout(clearSingleClick);\n            }\n          }}\n        >\n          <OutlineContent\n            text={outline.getName()}\n            outlinePath={outlinePath}\n            isOutlineRenaming={isRenaming}\n            setOutlineRenaming={setIsRenaming}\n            isOutlineChangingDest={isChangingDest}\n            setOutlineChangingDest={setChangingDest}\n            textColor={outline.color ? convertRgbObjectToRgbString(outline.color) : null}\n            setMultiSelected={setMultiSelected}\n            isExpanded={isExpanded}\n            setIsExpanded={setIsExpanded}\n            moveOutlineInward={moveOutlineInward}\n            moveOutlineBeforeTarget={moveOutlineBeforeTarget}\n            moveOutlineAfterTarget={moveOutlineAfterTarget}\n          >\n            {outline.getChildren()}\n          </OutlineContent>\n        </DataElementWrapper>\n\n        <div className=\"outline-drag-line\" style={{ opacity: isDraggedDownwards ? 1 : 0 }} />\n\n        {isAddingNewOutline && isActive && (\n          <DataElementWrapper className=\"bookmark-outline-single-container editing\">\n            <div\n              className=\"outline-treeview-toggle\"\n              style={{ marginLeft: outlineUtils.getNestedLevel(outline) * 12 }}\n            ></div>\n            <OutlineContent\n              isAdding={true}\n              text={''}\n              onCancel={() => setAddingNewOutline(false)}\n            />\n          </DataElementWrapper>\n        )}\n      </div>\n    );\n  }\n);\n\nOutline.propTypes = propTypes;\n\nconst OutlineNested = DropTarget(\n  ItemTypes.OUTLINE,\n  {\n    hover(props, dropTargetMonitor, dropTargetContainer) {\n      if (!dropTargetContainer) {\n        return;\n      }\n\n      const dragObject = dropTargetMonitor.getItem();\n      if (!dragObject) {\n        return;\n      }\n\n      const { dragOutline, dragSourceNode } = dragObject;\n      const { outline: dropOutline } = props;\n\n      const dropTargetNode = dropTargetContainer.getNode();\n      if (!dragSourceNode || !dropTargetNode) {\n        return;\n      }\n\n      const outlineIsBeingDraggedIntoDescendant = dragSourceNode.contains(dropTargetNode);\n      if (outlineIsBeingDraggedIntoDescendant) {\n        dragObject.dropTargetNode = undefined;\n        dragObject.dropLocation = DropLocation.INITIAL;\n        return;\n      }\n\n      dragObject.dropTargetNode = dropTargetNode;\n      const dragIndex = dragOutline.index;\n      const hoverIndex = dropOutline.index;\n      if (dragOutline.parent === dropOutline.parent && dragIndex === hoverIndex) {\n        return;\n      }\n\n      const dropTargetBoundingRect = dropTargetNode.getBoundingClientRect();\n      const dropTargetVerticalMiddlePoint = (dropTargetBoundingRect.bottom - dropTargetBoundingRect.top) / 2;\n      const clientOffset = dropTargetMonitor.getClientOffset();\n      const dropTargetClientY = clientOffset.y - dropTargetBoundingRect.top;\n      switch (true) {\n        case dropTargetClientY <= dropTargetVerticalMiddlePoint + BUFFER_ROOM && dropTargetClientY >= dropTargetVerticalMiddlePoint - BUFFER_ROOM:\n          dragObject.dropLocation = DropLocation.ON_TARGET_HORIZONTAL_MIDPOINT;\n          if (dropTargetMonitor.isOver({ shallow: true })) {\n            dropTargetNode.classList.add('isNesting');\n          }\n          setTimeout(() => {\n            if (dragObject?.dropTargetNode !== dropTargetNode) {\n              dropTargetNode.classList.remove('isNesting');\n            }\n          }, 100);\n          break;\n        case dropTargetClientY > dropTargetVerticalMiddlePoint + BUFFER_ROOM:\n          dragObject.dropLocation = DropLocation.BELOW_TARGET;\n          dropTargetNode.classList.remove('isNesting');\n          break;\n        case dropTargetClientY < dropTargetVerticalMiddlePoint - BUFFER_ROOM:\n          dragObject.dropLocation = DropLocation.ABOVE_TARGET;\n          dropTargetNode.classList.remove('isNesting');\n          break;\n        default:\n          dragObject.dropLocation = DropLocation.INITIAL;\n          dropTargetNode.classList.remove('isNesting');\n          break;\n      }\n      fireEvent(Events.DRAG_OUTLINE,\n        {\n          targetOutline: dropOutline,\n          draggedOutline: dragObject.dragOutline,\n          dropLocation: dragObject.dropLocation\n        }\n      );\n    },\n    drop(props, dropTargetMonitor, dropTargetContainer) {\n      if (!dropTargetContainer) {\n        return;\n      }\n      const dragObject = dropTargetMonitor.getItem();\n      const { dragOutline, dropTargetNode } = dragObject;\n      const { outline: dropOutline, moveOutlineInward, moveOutlineBeforeTarget, moveOutlineAfterTarget } = props;\n\n      if (!dropTargetNode) {\n        return;\n      }\n\n      switch (dragObject.dropLocation) {\n        case DropLocation.ON_TARGET_HORIZONTAL_MIDPOINT:\n          moveOutlineInward(dragOutline, dropOutline);\n          break;\n        case DropLocation.ABOVE_TARGET:\n          moveOutlineBeforeTarget(dragOutline, dropOutline);\n          break;\n        case DropLocation.BELOW_TARGET:\n          moveOutlineAfterTarget(dragOutline, dropOutline);\n          break;\n        default:\n          break;\n      }\n\n      dropTargetNode.classList.remove('isNesting');\n      fireEvent(Events.DROP_OUTLINE,\n        {\n          targetOutline: dropOutline,\n          draggedOutline: dragOutline,\n          dropLocation: dragObject.dropLocation\n        }\n      );\n      dragObject.dropLocation = DropLocation.INITIAL;\n    }\n  },\n  (connect, dropTargetState) => ({\n    connectDropTarget: connect.dropTarget(),\n    isDraggedUpwards: dropTargetState.isOver({ shallow: true }) && (dropTargetState.getItem()?.dropLocation === DropLocation.ABOVE_TARGET),\n    isDraggedDownwards: dropTargetState.isOver({ shallow: true }) && (dropTargetState.getItem()?.dropLocation === DropLocation.BELOW_TARGET),\n  })\n)(DragSource(\n  ItemTypes.OUTLINE,\n  {\n    beginDrag: (props, dragSourceMonitor, dragSourceContainer) => ({\n      sourceId: dragSourceMonitor.sourceId,\n      dragOutline: props.outline,\n      dragSourceNode: dragSourceContainer.getNode(),\n      dropLocation: DropLocation.INITIAL,\n    }),\n    canDrag() {\n      if (isIE) {\n        console.warn('Drag and drop outlines for IE11 is not supported');\n        return false;\n      }\n      if (!core.isFullPDFEnabled()) {\n        console.warn('Full API must be enabled to drag and drop outlines');\n        return false;\n      }\n      return true;\n    }\n  },\n  (connect, dragSourceState) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: dragSourceState.isDragging(),\n  })\n)(Outline));\n\nOutlineNested.propTypes = propTypes;\n\nexport default OutlineNested;\n","import Outline from './Outline';\n\nexport default Outline;\n","import React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { ItemTypes } from 'constants/dnd';\n\nconst layerStyles = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 99999,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%'\n};\n\nconst getItemStyles = (initialOffset, currentOffset) => {\n  if (!initialOffset || !currentOffset) {\n    return {\n      display: 'none'\n    };\n  }\n  const { x, y } = currentOffset;\n  const transform = `translate(calc(${x}px - 50%), calc(${y}px - 100%))`;\n  return {\n    transform,\n    WebkitTransform: transform,\n  };\n};\n\nexport const OutlinesDragLayer = () => {\n  const {\n    itemType,\n    item,\n    isDragging,\n    initialOffset,\n    currentOffset\n  } = useDragLayer((dragLayerState) => ({\n    itemType: dragLayerState.getItemType(),\n    item: dragLayerState.getItem(),\n    isDragging: dragLayerState.isDragging(),\n    initialOffset: dragLayerState.getInitialSourceClientOffset(),\n    currentOffset: dragLayerState.getClientOffset(),\n  }));\n\n  const renderDragItem = () => {\n    if (!item) {\n      return null;\n    }\n\n    const { dragOutline } = item;\n\n    switch (itemType) {\n      case ItemTypes.OUTLINE:\n        return (\n          <>\n            {dragOutline.getName()}\n          </>\n        );\n      default:\n        return null;\n    }\n  };\n\n  if (!isDragging) {\n    return null;\n  }\n\n  return (\n    <div style={layerStyles}>\n      <div\n        className=\"bookmark-outline-single-container preview\"\n        style={getItemStyles(initialOffset, currentOffset)}\n      >\n        {renderDragItem()}\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useLayoutEffect, useRef, useEffect, useMemo, useCallback } from 'react';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { DndProvider } from 'react-dnd';\nimport { isMobileDevice } from 'helpers/device';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport Outline from 'components/Outline';\nimport OutlineContext from 'components/Outline/Context';\nimport Button from 'components/Button';\nimport TextButton from '../TextButton';\nimport OutlineContent from 'components/OutlineContent';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport PropTypes from 'prop-types';\n\nimport useCore from 'hooks/useCore';\nimport outlineUtils from 'helpers/OutlineUtils';\nimport { shouldEndAccessibleReadingOrderMode } from 'helpers/accessibility';\nimport DataElements from 'constants/dataElement';\nimport defaultTool from 'constants/defaultTool';\nimport { workerTypes } from 'constants/types';\nimport getType from 'core/getType';\nimport actions from 'actions';\nimport selectors from 'selectors';\n\nimport '../../constants/bookmarksOutlinesShared.scss';\nimport './OutlinesPanel.scss';\nimport { OutlinesDragLayer } from './OutlinesDragLayer';\nimport classNames from 'classnames';\nimport { Virtuoso } from 'react-virtuoso';\nimport Spinner from 'components/Spinner';\nimport useDocumentLoadState from 'hooks/useDocumentLoadState';\n\nconst createOutlinesPanelComponents = (outlineScrollParentRef) => {\n  const Scroller = React.forwardRef((props, ref) => {\n    const setRef = (node) => {\n      outlineScrollParentRef.current = node;\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    };\n    return <div {...props} ref={setRef} />;\n  });\n  Scroller.displayName = 'OutlinesPanelScroller';\n\n  return { Scroller };\n};\n\nconst OutlineListItem = React.memo(({\n  outline,\n  setSelectedOutlines,\n  moveOutlineInward,\n  moveOutlineBeforeTarget,\n  moveOutlineAfterTarget,\n}) => {\n  const handleSetMultiSelected = useCallback((path, value) => {\n    setSelectedOutlines((currentSelected) => {\n      const isSelected = currentSelected.includes(path);\n\n      if (isSelected && !value) {\n        return currentSelected.filter((outlinePath) => outlinePath !== path);\n      }\n\n      if (!isSelected && value) {\n        return [...currentSelected, path];\n      }\n\n      return currentSelected;\n    });\n  }, [setSelectedOutlines]);\n\n  return (\n    <Outline\n      outline={outline}\n      setMultiSelected={handleSetMultiSelected}\n      moveOutlineInward={moveOutlineInward}\n      moveOutlineBeforeTarget={moveOutlineBeforeTarget}\n      moveOutlineAfterTarget={moveOutlineAfterTarget}\n    />\n  );\n});\n\nOutlineListItem.displayName = 'OutlineListItem';\nOutlineListItem.propTypes = {\n  outline: Outline.propTypes.outline,\n  setSelectedOutlines: PropTypes.func.isRequired,\n  moveOutlineInward: PropTypes.func.isRequired,\n  moveOutlineBeforeTarget: PropTypes.func.isRequired,\n  moveOutlineAfterTarget: PropTypes.func.isRequired,\n};\n\nconst OutlinesPanel = ({ isTest = false }) => {\n  const { core } = useCore();\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.OUTLINE_PANEL));\n  const outlines = useSelector(selectors.getOutlines, shallowEqual);\n  const outlineEditingEnabled = useSelector(selectors.getOutlineEditingEnabled);\n  const shouldAutoExpandOutlines = useSelector(selectors.shouldAutoExpandOutlines);\n  const currentPage = useSelector(selectors.getCurrentPage);\n  const pageLabels = useSelector(selectors.getPageLabels, shallowEqual);\n  const featureFlags = useSelector(selectors.getFeatureFlags, shallowEqual);\n  const isViewOnly = useSelector(selectors.isViewOnly);\n\n  const defaultDestText = 'Full Page';\n  const areaDestinationText = 'Area Selection';\n  const defaultDestCoord = { x: 0, y: 0 };\n  const outlinesNotLoaded = outlines === null;\n\n  const documentLoaded = useDocumentLoadState();\n  const [currentDestText, setCurrentDestText] = useState(defaultDestText);\n  const [currentDestCoord, setCurrentDestCoord] = useState(defaultDestCoord);\n  const [currentDestPage, setCurrentDestPage] = useState(currentPage);\n  const [isOutlineEditable, setIsOutlineEditable] = useState(false);\n  const [activeOutlinePath, setActiveOutlinePath] = useState(null);\n  const [isAddingNewOutline, setIsAddingNewOutline] = useState(false);\n  const [editingOutlines, setEditingOutlines] = useState({});\n  const [isAnyOutlineRenaming, setIsAnyOutlineRenaming] = useState(false);\n  const [isMultiSelectMode, setIsMultiSelectMode] = useState(false);\n  const [selectedOutlines, setSelectedOutlines] = useState([]);\n  const customizableUI = featureFlags.customizableUI;\n\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const outlinesPromiseRef = useRef(null);\n  const nextPathRef = useRef(null);\n  const TOOL_NAME = 'OutlineDestinationCreateTool';\n  const tool = core.getTool(TOOL_NAME);\n  const panelRef = useRef();\n  const outlineScrollParentRef = useRef(null);\n\n  useEffect(() => {\n    if (!documentLoaded && outlinesPromiseRef.current) {\n      outlinesPromiseRef.current.reject();\n      outlinesPromiseRef.current = null;\n    }\n  }, [documentLoaded]);\n\n  useEffect(() => {\n    if (outlinesNotLoaded && documentLoaded) {\n      const outlinesPromise = {};\n      outlinesPromise.promise = new Promise((resolve) => {\n        let isComplete = false;\n        const onPromiseCompletion = () => {\n          if (!isComplete) {\n            isComplete = true;\n            outlinesPromiseRef.current = null;\n            resolve();\n          }\n        };\n\n        outlinesPromise.resolve = onPromiseCompletion;\n        outlinesPromise.reject = onPromiseCompletion;\n\n        core.getOutlines((outlines) => {\n          if (isComplete) {\n            return;\n          }\n          outlinesPromiseRef.current = null;\n          dispatch(actions.setOutlines(outlines));\n          resolve();\n        });\n      });\n      outlinesPromiseRef.current = outlinesPromise;\n    }\n  }, [outlinesNotLoaded, documentLoaded]);\n\n  useLayoutEffect(() => {\n    setIsAddingNewOutline(false);\n\n    if (nextPathRef.current !== null) {\n      setActiveOutlinePath(nextPathRef.current);\n      nextPathRef.current = null;\n    }\n\n    const shouldResetMultiSelectedMode = !outlines || outlines.length === 0;\n    if (shouldResetMultiSelectedMode) {\n      setIsMultiSelectMode(false);\n    }\n  }, [outlines]);\n\n  useEffect(() => {\n    const workerType = getType();\n    const isSupportedType = (\n      workerType === workerTypes.PDF ||\n      workerType === workerTypes.IMAGE\n    );\n\n    const evaluateOutlineEditable = () => core.isFullPDFEnabled() && isSupportedType && outlineEditingEnabled && !isViewOnly;\n\n    setIsOutlineEditable(evaluateOutlineEditable());\n\n    const onDocumentLoaded = () => {\n      setIsOutlineEditable(evaluateOutlineEditable());\n    };\n\n    core.addEventListener('documentLoaded', onDocumentLoaded);\n    return () => core.removeEventListener('documentLoaded', onDocumentLoaded);\n  }, [outlineEditingEnabled]);\n\n  useEffect(() => {\n    const isAnyEditing = Object.values(editingOutlines).some((value) => value);\n    setIsAnyOutlineRenaming(isAnyEditing);\n  }, [editingOutlines, outlines]);\n\n  useEffect(() => {\n    const onSetDestination = (annotation) => {\n      setCurrentDestText(annotation['IsText'] ? annotation.getCustomData('trn-annot-preview') : areaDestinationText);\n      setCurrentDestCoord({ x: annotation['X'], y: annotation['Y'] });\n      setCurrentDestPage(annotation['PageNumber']);\n    };\n\n    const onOutlinesBookmarksChanged = () => {\n      core.getOutlines((outlines) => {\n        dispatch(actions.setOutlines(outlines));\n      });\n    };\n\n    const onDocumentLoaded = () => {\n      setActiveOutlinePath(null);\n    };\n\n    core.addEventListener('outlineSetDestination', onSetDestination);\n    window.addEventListener('outlineBookmarksChanged', onOutlinesBookmarksChanged);\n    core.addEventListener('documentLoaded', onDocumentLoaded);\n    return () => {\n      core.removeEventListener('outlineSetDestination', onSetDestination);\n      window.removeEventListener('outlineBookmarksChanged', onOutlinesBookmarksChanged);\n      core.removeEventListener('documentLoaded', onDocumentLoaded);\n    };\n  }, []);\n\n  useEffect(() => {\n    // deselect outlines when clicking inside of the outline panel\n    const handlePanelClick = (event) => {\n      if (event.target.classList.contains('bookmark-outline-row')) {\n        setActiveOutlinePath(null);\n        setSelectedOutlines([]);\n      }\n    };\n\n    if (panelRef.current) {\n      panelRef.current.addEventListener('click', handlePanelClick);\n    }\n\n    return () => {\n      if (panelRef.current) {\n        panelRef.current.removeEventListener('click', handlePanelClick);\n      }\n    };\n  }, []);\n\n  const getCurrentDestViewerCoord = (pageNum, { x, y }) => {\n    const doc = core.getDocumentViewer().getDocument();\n    // convert annotation coordinates to viewerCoordinates because PDFNet used PDF coordinates\n    return doc.getViewerCoordinates(pageNum, x, y);\n  };\n\n  const addNewOutline = async (name) => {\n    let { x, y } = getCurrentDestViewerCoord(currentDestPage, currentDestCoord);\n    let outlineName = name;\n    if (![defaultDestText, areaDestinationText].includes(currentDestText) && !name) {\n      outlineName = currentDestText.slice(0, 40);\n    } else if (!name) {\n      outlineName = t('message.untitled');\n    }\n\n    const doc = core.getDocumentViewer().getDocument();\n\n    const pageRotation = doc.getPageRotation(currentDestPage) / 90;\n    if (pageRotation === window.Core.PageRotation.E_90 || pageRotation === window.Core.PageRotation.E_270) {\n      const tmp = x;\n      x = y;\n      y = tmp;\n    }\n    if (outlines.length === 0) {\n      await outlineUtils.addRootOutline(outlineName, currentDestPage, x, y, 0);\n    } else {\n      await outlineUtils.addNewOutline(outlineName, activeOutlinePath, currentDestPage, x, y, 0);\n    }\n\n    updateOutlines();\n  };\n\n  const updateOutlines = () => {\n    shouldEndAccessibleReadingOrderMode();\n    core.getOutlines((outlines) => {\n      dispatch(actions.setOutlines(outlines));\n    });\n    clearOutlineDestination();\n    setEditingOutlines({});\n  };\n\n  const getPath = (outline) => {\n    return outlineUtils.getPath(outline);\n  };\n\n  const clearOutlineDestination = () => {\n    core.setToolMode(defaultTool);\n    setCurrentDestText(defaultDestText);\n    setCurrentDestCoord(defaultDestCoord);\n    setCurrentDestPage(currentPage);\n    tool.clearOutlineDestination();\n  };\n\n  const updateOutlineDest = async (outlinePath) => {\n    let { x, y } = getCurrentDestViewerCoord(currentDestPage, currentDestCoord);\n    const doc = core.getDocumentViewer().getDocument();\n    const pageRotation = doc.getPageRotation(currentDestPage) / 90;\n    if (pageRotation === window.Core.PageRotation.E_90 || pageRotation === window.Core.PageRotation.E_270) {\n      const tmp = x;\n      x = y;\n      y = tmp;\n    }\n    await outlineUtils.setOutlineDestination(outlinePath, currentDestPage, x, y, 0);\n    nextPathRef.current = outlinePath;\n    updateOutlines();\n  };\n\n  useEffect(() => {\n    if (currentDestText === defaultDestText) {\n      setCurrentDestPage(currentPage);\n    }\n  }, [currentDestText, currentPage]);\n\n  useEffect(() => {\n    if (isAddingNewOutline) {\n      core.setToolMode(TOOL_NAME);\n    } else {\n      clearOutlineDestination();\n    }\n  }, [isAddingNewOutline]);\n\n  const generalMoveOutlineAction = (dragOutline, dropOutline, moveDirection) => {\n    const dragPath = getPath(dragOutline);\n    const dropPath = getPath(dropOutline);\n    setSelectedOutlines([]);\n\n    moveDirection.call(outlineUtils, dragPath, dropPath).then((path) => {\n      updateOutlines();\n      nextPathRef.current = path;\n    });\n    core.goToOutline(dragOutline);\n  };\n\n  const moveOutlineAfterTarget = (dragOutline, dropOutline) => {\n    generalMoveOutlineAction(dragOutline, dropOutline, outlineUtils.moveOutlineAfterTarget);\n  };\n\n  const moveOutlineBeforeTarget = (dragOutline, dropOutline) => {\n    generalMoveOutlineAction(dragOutline, dropOutline, outlineUtils.moveOutlineBeforeTarget);\n  };\n\n  const moveOutlineInward = (dragOutline, dropOutline) => {\n    generalMoveOutlineAction(dragOutline, dropOutline, outlineUtils.moveOutlineInTarget);\n  };\n\n  const renameOutline = async (outlinePath, newName) => {\n    await outlineUtils.setOutlineName(outlinePath, newName);\n    updateOutlines();\n  };\n\n  const removeOutlines = async (outlinesToRemove) => {\n    outlinesToRemove.sort().reverse();\n    const confirmationWarning = {\n      message: t('warning.deleteOutline.message'),\n      title: t('warning.deleteOutline.title'),\n      confirmBtnText: t('action.delete'),\n      onConfirm: async () => {\n        for (let i = 0; i < outlinesToRemove.length; i++) {\n          const fullIndex = outlinesToRemove[i];\n          await outlineUtils.deleteOutline(fullIndex);\n        }\n        updateOutlines();\n        setActiveOutlinePath(null);\n        setSelectedOutlines([]);\n      },\n    };\n    dispatch(actions.showWarningMessage(confirmationWarning));\n  };\n\n  const virtuosoComponents = useMemo(\n    () => createOutlinesPanelComponents(outlineScrollParentRef),\n    [outlineScrollParentRef]\n  );\n\n  const renderOutlineItem = useCallback((index, outline) => (\n    <OutlineListItem\n      key={outlineUtils.getOutlineId(outline)}\n      outline={outline}\n      setSelectedOutlines={setSelectedOutlines}\n      moveOutlineInward={moveOutlineInward}\n      moveOutlineBeforeTarget={moveOutlineBeforeTarget}\n      moveOutlineAfterTarget={moveOutlineAfterTarget}\n    />\n  ), [moveOutlineAfterTarget, moveOutlineBeforeTarget, moveOutlineInward, setSelectedOutlines]);\n\n  if (isDisabled) {\n    return null;\n  }\n\n  const testModeProps = isTest ? { initialItemCount: outlines?.length } : {};\n\n  return (\n    <div\n      className={classNames('Panel OutlinesPanel bookmark-outline-panel', { 'modular-ui-panel': customizableUI })}\n      data-element={DataElements.OUTLINE_PANEL} ref={panelRef}\n    >\n      <div className=\"bookmark-outline-panel-header\">\n        <h2 className=\"header-title\">\n          {t('component.outlinesPanel')}\n        </h2>\n        {isOutlineEditable &&\n          (isMultiSelectMode ?\n            <TextButton\n              className=\"bookmark-outline-control-button\"\n              dataElement={DataElements.OUTLINE_MULTI_SELECT}\n              label={t('option.bookmarkOutlineControls.done')}\n              disabled={isAddingNewOutline}\n              onClick={() => setIsMultiSelectMode(false)}\n              ariaLabel={`${t('option.bookmarkOutlineControls.done')} ${t('action.edit')}`}\n            />\n            :\n            <TextButton\n              className=\"bookmark-outline-control-button\"\n              dataElement={DataElements.OUTLINE_MULTI_SELECT}\n              label={t('option.bookmarkOutlineControls.edit')}\n              disabled={isAddingNewOutline || outlinesNotLoaded || outlines.length === 0}\n              onClick={() => {\n                setIsMultiSelectMode(true);\n                setSelectedOutlines([]);\n              }}\n              ariaLabel={`${t('action.edit')} ${t('component.outlinesPanel')}`}\n            />\n          )\n        }\n      </div>\n      {outlinesNotLoaded && documentLoaded ? (\n        <Spinner inPanel width={'40px'} height={'40px'} />\n      ) : (\n        <OutlineContext.Provider\n          value={{\n            currentDestPage: pageLabels[currentDestPage - 1],\n            currentDestText,\n            setActiveOutlinePath,\n            activeOutlinePath,\n            isOutlineActive: (outline) => getPath(outline) === activeOutlinePath,\n            setIsAddingNewOutline,\n            isAddingNewOutline,\n            setEditingOutlines,\n            editingOutlines,\n            selectedOutlines,\n            isAnyOutlineRenaming,\n            isMultiSelectMode,\n            shouldAutoExpandOutlines,\n            isOutlineEditable,\n            addNewOutline,\n            updateOutlines,\n            renameOutline,\n            updateOutlineDest,\n            removeOutlines,\n            outlineScrollParentRef,\n          }}\n        >\n          <DndProvider backend={isMobileDevice ? TouchBackend : HTML5Backend}>\n            <OutlinesDragLayer />\n\n            <div className=\"bookmark-outline-row\">\n              {!isAddingNewOutline && (outlinesNotLoaded || outlines.length === 0) &&\n                <div className=\"msg msg-no-bookmark-outline\">{t('message.noOutlines')}</div>\n              }\n              {isAddingNewOutline && activeOutlinePath === null && (\n                <DataElementWrapper className=\"bookmark-outline-single-container editing\">\n                  <OutlineContent\n                    isAdding={true}\n                    text={''}\n                    onCancel={() => setIsAddingNewOutline(false)}\n                  />\n                </DataElementWrapper>\n              )}\n              <Virtuoso\n                className={classNames({ 'small-outlines-list': isAddingNewOutline })}\n                data={outlines || []}\n                components={virtuosoComponents}\n                computeItemKey={(_, outline) => outlineUtils.getOutlineId(outline)}\n                itemContent={renderOutlineItem}\n                {...testModeProps}\n              />\n            </div>\n          </DndProvider>\n\n          {isOutlineEditable &&\n            <DataElementWrapper\n              className=\"bookmark-outline-footer\"\n              dataElement={DataElements.OUTLINE_ADD_NEW_BUTTON_CONTAINER}\n            >\n              {isMultiSelectMode ?\n                <>\n                  <Button\n                    className=\"multi-selection-button\"\n                    img=\"icon-menu-add\"\n                    ariaLabel={`${t('action.add')} ${t('component.outlinesPanel')}`}\n                    disabled={selectedOutlines.length > 0 || isAddingNewOutline || isAnyOutlineRenaming}\n                    onClick={() => setIsAddingNewOutline(true)}\n                  />\n                  <Button\n                    className=\"multi-selection-button\"\n                    img=\"icon-delete-line\"\n                    disabled={selectedOutlines.length === 0 || isAnyOutlineRenaming}\n                    onClick={() => removeOutlines(selectedOutlines)}\n                  />\n                </>\n                :\n                <TextButton\n                  className=\"bookmark-outline-control-button add-new-button\"\n                  img=\"icon-menu-add\"\n                  dataElement={DataElements.OUTLINE_ADD_NEW_BUTTON}\n                  disabled={isAddingNewOutline || isAnyOutlineRenaming}\n                  label={`${t('action.add')} ${t('component.outlinePanel')}`}\n                  onClick={() => setIsAddingNewOutline(true)}\n                  ariaLabel={`${t('action.add')} ${t('component.outlinesPanel')}`}\n                />\n              }\n            </DataElementWrapper>\n          }\n        </OutlineContext.Provider>\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(OutlinesPanel);\n","import OutlinesPanel from './OutlinesPanel';\n\nexport default OutlinesPanel;\n"],"sourceRoot":""}