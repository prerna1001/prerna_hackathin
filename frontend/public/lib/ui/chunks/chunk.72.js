(window.webpackJsonpWebViewerUI=window.webpackJsonpWebViewerUI||[]).push([[72],{1784:function(e,t,r){e.exports={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"}},1860:function(e,t,r){"use strict";r.r(t);r(9),r(10),r(14),r(31),r(36),r(27),r(21),r(20),r(12),r(22),r(32),r(18),r(16),r(29),r(47),r(23),r(46),r(48),r(37),r(8),r(17),r(19),r(11),r(30),r(13);var n=r(0),o=r.n(n),a=r(3),i=r(2),u=r(33),c=r(6),l=(r(77),r(26),r(40),r(41),r(42),r(54),r(136),r(15)),f=r.n(l),s=r(307),p=r(44),b=r(106),y=r(154);r(1784);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof u?n:u,l=Object.create(c.prototype);return d(l,"_invoke",function(r,n,o){var a,u,c,l=0,f=o||[],s=!1,p={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,r){return a=t,u=0,c=e,p.n=r,i}};function b(r,n){for(u=r,c=n,t=0;!s&&l&&!o&&t<f.length;t++){var o,a=f[t],b=p.p,y=a[2];r>3?(o=y===n)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=b&&((o=r<2&&b<a[1])?(u=0,p.v=n,p.n=a[1]):b<y&&(o=r<3||a[0]>n||n>y)&&(a[4]=r,a[5]=n,p.n=y,u=0))}if(o||r>1)return i;throw s=!0,n}return function(o,f,y){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&b(f,y),u=f,c=y;(t=u<2?e:c)||!s;){a||(u?u<3?(u>1&&(p.n=-1),b(u,c)):p.n=c:p.v=c);try{if(l=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(s=p.n<0)?c:r.call(n,p))!==i)break}catch(t){a=e,u=1,c=t}finally{l=1}}return{value:t,done:s}}}(r,o,a),!0),l}var i={};function u(){}function c(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(d(t={},n,(function(){return this})),t),s=l.prototype=u.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,d(e,o,"GeneratorFunction")),e.prototype=Object.create(s),e}return c.prototype=l,d(s,"constructor",l),d(l,"constructor",c),c.displayName="GeneratorFunction",d(l,o,"GeneratorFunction"),d(s),d(s,o,"Generator"),d(s,n,(function(){return this})),d(s,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:a,m:p}})()}function d(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(d=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var a=function(t,r){d(e,t,(function(e){return this._invoke(t,r,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,r,n)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,u,"next",e)}function u(e){g(a,n,o,i,u,"throw",e)}i(void 0)}))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.fileInput,r=e.urlInput,a=e.error,i=e.setError,c=e.file,l=e.setFile,m=e.url,d=e.setURL,O=e.closeModal,j=e.isDisabled,g=e.isOpen,D=Object(u.a)().core,S=h(Object(s.a)(),1)[0],P=h(Object(n.useState)("url"),2),M=P[0],A=P[1],L=h(Object(n.useState)(""),2),k=L[0],I=L[1],R=o.a.createRef(),T=o.a.createRef(),_=function(e){var t=new window.Core.Annotations.Model3DAnnotation;t.set3DData(k),"url"===M&&t.set3DData(m,"url");var r=D.getZoom();t.X=e.layerX/r,t.Y=e.layerY/r,t.Width=300,t.Height=300,t.Author=D.getCurrentUser(),t.setPageNumber(D.getCurrentPage()),D.addAnnotations([t]),D.drawAnnotationsFromList([t]),D.removeEventListener("click",_)},N=function(e){return e.split(".").pop()},F=function(){var e=E(v().m((function e(t){var r,n,o;return v().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),"url"!==M){e.n=3;break}if("glb"===N(m)){e.n=1;break}return i(w(w({},a),{urlError:S("Model3D.formatError")})),e.a(2);case 1:return r=function(){var e=E(v().m((function e(t){var r;return v().w((function(e){for(;;)switch(e.n){case 0:return r=function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.onload=E(v().m((function e(){var n;return v().w((function(e){for(;;)switch(e.n){case 0:return(n=new FileReader).onloadend=function(){t(n.result)},e.n=1,n.readAsDataURL(r.response);case 1:return e.a(2)}}),e)}))),r.open("GET",e),r.responseType="blob",r.send()}))},e.n=1,r(t);case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=I,e.n=2,r(m);case 2:o=e.v,n(o),e.n=4;break;case 3:if("file"!==M){e.n=4;break}if("glb"===N(c.name)){e.n=4;break}return i(w(w({},a),{urlError:S("Model3D.formatError")})),e.a(2);case 4:O(),D.setToolMode("Pan"),D.getViewerElement().style.cursor="crosshair",D.addEventListener("click",_);case 5:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=f()({Modal:!0,Model3DModal:!0,open:g,closed:!g}),x=function(){var e=E(v().m((function e(t){var r,n;return v().w((function(e){for(;;)switch(e.n){case 0:return A("file"),r=t.target.files[0],l(r),n=function(e){return new Promise((function(){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return I(t.result)}}))},e.n=1,n(r);case 1:i({}),d("");case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=o.a.createElement("input",{className:"urlInput",type:"url",ref:r,value:m,onChange:function(e){return function(e){A("url"),d(e.trim()),i(""),t.current.value=null}(e.target.value)},onFocus:function(){return R.current.click()},placeholder:S("Model3D.enterurl")}),C=o.a.createElement("input",{type:"file",ref:t,onChange:x,accept:".glb",onFocus:function(){return T.current.click()}});return j?null:o.a.createElement(y.a,{onSwipedUp:O,onSwipedDown:O,preventDefaultTouchmoveEvent:!0},o.a.createElement("div",{className:U,"data-element":"Model3DModal",onMouseDown:O},o.a.createElement("div",{className:"container",onMouseDown:function(e){return e.stopPropagation()}},o.a.createElement("div",{className:"swipe-indicator"}),o.a.createElement("form",{onSubmit:F},o.a.createElement("div",{className:"col"},S("Model3D.enterurlOrLocalFile")),o.a.createElement(b.a,{dataElement:"3DAnnotationLink",id:"3D-annotation-link",name:"3DInput",className:"inputWrapper",ref:R,radio:!0,label:G,center:!0}),(null==a?void 0:a.urlError)&&o.a.createElement("p",{className:"error"},"* ",a.urlError),o.a.createElement(b.a,{dataElement:"3DAnnotationLocalFile",id:"3D-annotation-file",name:"3DInput",className:"inputWrapper",ref:T,radio:!0,label:C,center:!0}),(null==a?void 0:a.fileError)&&o.a.createElement("p",{className:"error"},"* ",a.fileError),o.a.createElement(p.a,{dataElement:"linkSubmitButton",label:S("action.draw"),onClick:F})))))};function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=["close3DModal"];function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=function(e){var t=e.close3DModal,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,M),a=Object(n.useCallback)((function(){t()}),[t]),i=L(L({},r),{},{closeModal:a});return o.a.createElement(S,i)},R=r(5);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var G=function(e){var t=Object(u.a)().core,r=Object(c.d)(),l=U(Object(n.useState)(""),2),f=l[0],s=l[1],p=U(Object(n.useState)({}),2),b=p[0],y=p[1],m=U(Object(n.useState)({fileError:"",urlError:""}),2),v=m[0],d=m[1],O=o.a.createRef(),w=o.a.createRef(),j=U(Object(c.e)((function(e){return[a.a.isElementDisabled(e,R.a.MODEL3D_MODAL),a.a.isElementOpen(e,R.a.MODEL3D_MODAL)]})),2),g=j[0],E=j[1];Object(n.useEffect)((function(){var e=function(){r(i.a.closeElement(R.a.MODEL3D_MODAL))};return t.addEventListener("toolUpdated",e),function(){return t.removeEventListener("toolUpdated",e)}}),[]),Object(n.useEffect)((function(){E&&(w.current.focus(),r(i.a.closeElements([R.a.PRINT_MODAL,R.a.LOADING_MODAL,R.a.PROGRESS_MODAL,R.a.ERROR_MODAL,R.a.OPEN_FILE_MODAL])))}),[r,E]);var h=N(N({},e),{},{isDisabled:g,isOpen:E,close3DModal:function(){r(i.a.closeElement(R.a.MODEL3D_MODAL)),s(""),y({}),d({}),O.current&&(O.current.value=null)},fileInput:O,urlInput:w,error:v,setError:d,file:b,setFile:y,url:f,setURL:s});return o.a.createElement(I,h)};t.default=G}}]);
//# sourceMappingURL=chunk.72.js.map