{"version":3,"sources":["webpack:///./src/ui/src/components/Element/Element.js","webpack:///./src/ui/src/components/Element/index.js","webpack:///./src/ui/src/components/MathSymbolsPicker/MathSymbolsPicker.scss?77f5","webpack:///./src/ui/src/components/RichTextPopup/RichTextPopup.scss?cea7","webpack:///./src/ui/src/helpers/getRichTextPopupPosition.js","webpack:///./src/ui/src/components/MathSymbolsPicker/MathSymbolsPicker.js","webpack:///./src/ui/src/components/MathSymbolsPicker/index.js","webpack:///./src/ui/src/components/RichTextPopup/RichTextPopup.js","webpack:///./src/ui/src/components/RichTextPopup/index.js"],"names":["Element","_React$PureComponent","_classCallCheck","_callSuper","arguments","_inherits","key","value","_this$props","this","props","isDisabled","className","dataElement","children","React","createElement","data-element","PureComponent","PropTypes","bool","string","isRequired","node","connect","state","ownProps","selectors","isElementDisabled","module","exports","annotation","popup","current","editorContainer","getRootNode","querySelector","concat","PageNumber","Id","scrollContainer","core","getScrollViewElement","padding","parseFloat","StrokeThickness","getZoom","cBox","getBoundingClientRect","shadowTop","shadowLeft","window","isApryseWebViewerWebComponent","_getRootNode$host","shadowRect","host","top","left","cInfo","topLeft","x","scrollLeft","y","scrollTop","bottomRight","right","bottom","pBox","calcPopupLeft","calcPopupTop","symbols","MathSymbolsPicker","_ref","onClickHandler","maxHeight","style","map","symbol","i","onClick","propTypes","object","editor","RichTextPopup","useCore","_useSelector2","_slicedToArray","useSelector","DataElements","RICH_TEXT_POPUP","isElementOpen","getCustomColors","isInDesktopOnlyMode","STYLE_POPUP_TEXT_STYLE_CONTAINER","STYLE_POPUP_COLORS_CONTAINER","getFonts","LEGACY_RICH_TEXT_POPUP","shallowEqual","isOpen","isPaletteDisabled","customColors","isTextStylePickerOpen","isColorPickerOpen","fonts","legacyPopup","_useState2","useState","symbolsVisible","setSymbolsVisible","_useState4","cssPosition","setCssPosition","_useState6","draggablePosition","setDraggablePosition","_useState8","format","setFormat","popupRef","useRef","editorRef","annotationRef","propertiesRef","dispatch","useDispatch","oldSelectionRef","_useState0","isAutoSizeFont","setAutoSizeFont","useEffect","actions","disableElements","ANNOTATION_STYLE_POPUP","closeElement","ANNOTATION_POPUP","enableElements","handleSelectionChange","range","oldRange","setSelection","index","length","getFormat","handleTextChange","_annotationRef$curren","_editorRef$current","isAutoSized","position","getRichTextPopupPosition","getSelection","addEventListener","removeEventListener","_ref2","_ref3","_stylesTemp$textDeco","_stylesTemp$textDeco2","_stylesTemp$textDeco3","_stylesTemp$textDeco4","_editorRef$current2","StrokeStyle","err","console","error","stylesTemp","getRichTextStyle","Font","FontSize","TextAlign","TextVerticalAlign","bold","italic","underline","includes","strikeout","size","font","calculatedFontSize","getCalculatedFontSize","handleEditorBlur","closeElements","setPopupPosition","useLayoutEffect","setPosition","debounce","scrollViewElement","getDocumentViewer","color","Core","Annotations","Color","Array","isArray","lastSelectedColor","TextColor","handleTextFormatChange","_editorRef$current$ge","newSelection","currentFormat","applyFormat","handleColorChange","_","toHexString","formatKey","_editorRef$current3","_editorRef$current4","isFullPDFEnabled","updated","_objectSpread","_defineProperty","syncDraggablePosition","e","_ref4","menuItems","toggleMenuItem","openElement","openTextStyle","openColors","strike","quillFont","quillFontSize","originalSize","isMobile","Draggable","onDrag","onStop","enableUserSelectHack","cancel","onMouseDown","type","preventDefault","classNames","Popup","open","closed","legacy","ref","Fragment","Button","isActive","img","title","HorizontalDivider","paddingTop","onTouchStart","role","i18next","t","Icon","glyph","TextStylePicker","onPropertyChange","property","_editorRef$current$ge3","blur","adjustFreeTextBoundingBox","setTimeout","getAnnotationManager","getEditBoxManager","focusBox","onRichTextStyleChange","propertyTranslation","resizeAnnotation","properties","stateless","isFreeText","onFreeTextSizeToggle","handleFreeTextAutoSizeToggle","isFreeTextAutoSize","isRichTextEditMode","ColorPalette","colorMapKey","onStyleChange","hasPadding","ColorPalettePicker","enableEdit","_editorRef$current$ge2","deleteText","insertText","memo"],"mappings":"s1DAMwB,I,MAElBA,EAAO,SAAAC,GAAA,SAAAD,IAAA,OAAAE,EAAA,KAAAF,GAAAG,EAAA,KAAAH,EAAAI,WAAA,O,qRAAAC,CAAAL,EAAAC,G,EAAAD,G,EAAA,EAAAM,IAAA,SAAAC,MAQX,WACE,IAAAC,EAAyDC,KAAKC,MAAtDC,EAAUH,EAAVG,WAAYC,EAASJ,EAATI,UAAWC,EAAWL,EAAXK,YAAaC,EAAQN,EAARM,SAE5C,OAAIH,EACK,KAIPI,IAAAC,cAAA,OAAKJ,UAAWA,EAAWK,eAAcJ,GACtCC,Q,0FAjBI,CAASC,IAAMG,e,EAAtBlB,E,EAAO,Y,EACQ,CACjBW,WAAYQ,IAAUC,KACtBR,UAAWO,IAAUE,OAAOC,WAC5BT,YAAaM,IAAUE,OAAOC,WAC9BR,SAAUK,IAAUI,O,kGAkBxB,IAIeC,eAJS,SAACC,EAAOC,GAAQ,MAAM,CAC5Cf,WAAYgB,IAAUC,kBAAkBH,EAAOC,EAASb,gBAG3CW,CAAyBxB,GCjCzBA,O,qBCDf6B,EAAOC,QAAU,CAAC,kBAAoB,OAAO,mBAAqB,S,qBCAlED,EAAOC,QAAU,CAAC,kBAAoB,OAAO,mBAAqB,S,+ZCGnD,WAACC,EAAYC,GAC1B,GAAKA,GAAUA,EAAMC,QAArB,CAGA,IAAMC,EAAkBC,cAAcC,cAAc,uBAADC,OAC1BN,EAAWO,WAAU,0BAAAD,OAAyBN,EAAWQ,GAAE,OAGpF,GAAKL,EAAL,CAGA,IAAMM,EAAkBC,IAAKC,uBACvBC,EAAU,EAAIC,WAAWb,EAAWc,iBAAmBJ,IAAKK,UAC5DC,EAAOb,EAAgBc,wBACzBC,EAAY,EACZC,EAAa,EACjB,GAAIC,OAAOC,8BAA+B,KAAAC,EAClCC,EAA+B,QAArBD,EAAGlB,cAAcoB,YAAI,IAAAF,OAAA,EAAlBA,EAAoBL,wBACvCC,EAAYK,EAAWE,IACvBN,EAAaI,EAAWG,KAE1B,IAAMC,EAAQ,CACZC,QAAS,CACPC,EAAGb,EAAKU,KAAOjB,EAAgBqB,WAAalB,EAC5CmB,EAAGf,EAAKS,IAAMhB,EAAgBuB,UAAYpB,GAE5CqB,YAAa,CACXJ,EAAGb,EAAKkB,MAAQzB,EAAgBqB,WAAalB,EAC7CmB,EAAGf,EAAKmB,OAAS1B,EAAgBuB,UAAYpB,IAG3CwB,EAAOnC,EAAMC,QAAQe,wBAC3B,MAAO,CACLS,KAAMW,YAAcV,EAAOS,GAAQjB,EACnCM,IAAKa,YAAaX,EAAOS,GAAQlB,M,SClC/BqB,G,cAAU,CACd,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,MClGaC,EDqGW,SAAHC,GAAsC,IAAhCC,EAAcD,EAAdC,eAAgBC,EAASF,EAATE,UAC3C,OACE3D,IAAAC,cAAA,OACEJ,UAAU,+BACV+D,MAAO,CAAED,UAAW,GAAFrC,OAAKqC,EAAS,QAE/BJ,EAAQM,KAAI,SAACC,EAAQC,GAAC,OACrB/D,IAAAC,cAAA,UACEV,IAAKwE,EACLlE,UAAU,iBACVmE,QAAS,WACPN,EAAeI,KAGhBA,Q,+xEE1FX,IAAMG,EAAY,CAChBjD,WAAYZ,IAAU8D,OACtBC,OAAQ/D,IAAU8D,QAGdE,EAAgB,SAAHX,GAA+B,IAAzBzC,EAAUyC,EAAVzC,WAAYmD,EAAMV,EAANU,OAC3BzC,EAAS2C,cAAT3C,KAwBP4C,EAAAC,EAbGC,aACF,SAAC9D,GAAK,MAAK,CACTE,IAAUC,kBAAkBH,EAAO+D,IAAaC,iBAChD9D,IAAU+D,cAAcjE,EAAO+D,IAAaC,iBAC5C9D,IAAUC,kBAAkBH,EAAO,gBACnCE,IAAUgE,gBAA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","file":"chunks/chunk.48.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport selectors from 'selectors';\n\nimport './Element.scss';\n\nclass Element extends React.PureComponent {\n  static propTypes = {\n    isDisabled: PropTypes.bool,\n    className: PropTypes.string.isRequired,\n    dataElement: PropTypes.string.isRequired,\n    children: PropTypes.node,\n  };\n\n  render() {\n    const { isDisabled, className, dataElement, children } = this.props;\n\n    if (isDisabled) {\n      return null;\n    }\n\n    return (\n      <div className={className} data-element={dataElement}>\n        {children}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  isDisabled: selectors.isElementDisabled(state, ownProps.dataElement),\n});\n\nexport default connect(mapStateToProps)(Element);","import Element from './Element';\n\nexport default Element;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import { calcPopupLeft, calcPopupTop } from 'helpers/getPopupPosition';\r\nimport core from 'core';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\nexport default (annotation, popup) => {\r\n  if (!popup || !popup.current) {\r\n    return;\r\n  }\r\n  const editorContainer = getRootNode().querySelector(\r\n    `#pageWidgetContainer${annotation.PageNumber} [id=\"freetext-editor-${annotation.Id}\"]`\r\n  );\r\n\r\n  if (!editorContainer) {\r\n    return;\r\n  }\r\n  const scrollContainer = core.getScrollViewElement();\r\n  const padding = 2 * parseFloat(annotation.StrokeThickness) * core.getZoom();\r\n  const cBox = editorContainer.getBoundingClientRect();\r\n  let shadowTop = 0;\r\n  let shadowLeft = 0;\r\n  if (window.isApryseWebViewerWebComponent) {\r\n    const shadowRect = getRootNode().host?.getBoundingClientRect();\r\n    shadowTop = shadowRect.top;\r\n    shadowLeft = shadowRect.left;\r\n  }\r\n  const cInfo = {\r\n    topLeft: {\r\n      x: cBox.left + scrollContainer.scrollLeft - padding,\r\n      y: cBox.top + scrollContainer.scrollTop - padding\r\n    },\r\n    bottomRight: {\r\n      x: cBox.right + scrollContainer.scrollLeft + padding,\r\n      y: cBox.bottom + scrollContainer.scrollTop + padding\r\n    }\r\n  };\r\n  const pBox = popup.current.getBoundingClientRect();\r\n  return {\r\n    left: calcPopupLeft(cInfo, pBox) - shadowLeft,\r\n    top: calcPopupTop(cInfo, pBox) - shadowTop,\r\n  };\r\n};\r\n","import React from 'react';\n\nimport './MathSymbolsPicker.scss';\n\nconst symbols = [\n  '\\u002B',\n  '\\u2212',\n  '\\u00D7',\n  '\\u00F7',\n  '\\u003D',\n  '\\u2260',\n  '\\u00B1',\n  '\\u00AC',\n  '\\u003C',\n  '\\u003E',\n  '\\u22DC',\n  '\\u22DD',\n  '\\u00B0',\n  '\\u00B9',\n  '\\u00B2',\n  '\\u00B3',\n  '\\u0192',\n  '\\u0025',\n  '\\u2030',\n  '\\u2031',\n  '\\u2200',\n  '\\u2201',\n  '\\u2202',\n  '\\u2203',\n  '\\u2204',\n  '\\u2205',\n  '\\u2206',\n  '\\u2207',\n  '\\u2208',\n  '\\u2209',\n  '\\u220A',\n  '\\u220B',\n  '\\u220C',\n  '\\u220D',\n  '\\u220E',\n  '\\u220F',\n  '\\u2210',\n  '\\u2211',\n  '\\u2213',\n  '\\u2214',\n  '\\u2215',\n  '\\u2216',\n  '\\u2217',\n  '\\u2218',\n  '\\u2219',\n  '\\u221A',\n  '\\u221B',\n  '\\u221C',\n  '\\u221D',\n  '\\u221E',\n  '\\u221F',\n  '\\u2220',\n  '\\u2221',\n  '\\u2222',\n  '\\u2223',\n  '\\u2224',\n  '\\u2225',\n  '\\u2226',\n  '\\u2227',\n  '\\u2228',\n  '\\u2229',\n  '\\u222A',\n  '\\u222B',\n  '\\u222C',\n  '\\u222D',\n  '\\u222E',\n  '\\u222F',\n  '\\u2230',\n  '\\u2231',\n  '\\u2232',\n  '\\u2233',\n  '\\u2234',\n  '\\u2235',\n  '\\u2236',\n  '\\u2237',\n  '\\u2238',\n  '\\u2239',\n  '\\u223A',\n  '\\u223B',\n  '\\u223C',\n  '\\u223D',\n  '\\u223E',\n  '\\u223F',\n  '\\u2240',\n  '\\u2241',\n  '\\u2242',\n  '\\u2243',\n  '\\u2244',\n  '\\u2245',\n  '\\u2246',\n  '\\u2247',\n  '\\u2248',\n  '\\u2249',\n  '\\u224A',\n  '\\u224B',\n  '\\u224C'\n];\n\nconst MathSymbolsPicker = ({ onClickHandler, maxHeight }) => {\n  return (\n    <div\n      className=\"mathSymbolsContainer padding\"\n      style={{ maxHeight: `${maxHeight}px` }}\n    >\n      {symbols.map((symbol, i) => (\n        <button\n          key={i}\n          className=\"cell-container\"\n          onClick={() => {\n            onClickHandler(symbol);\n          }}\n        >\n          {symbol}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nexport default MathSymbolsPicker;","import MathSymbolsPicker from './MathSymbolsPicker';\n\nexport default MathSymbolsPicker;","import React, { useState, useEffect, useRef, useLayoutEffect } from 'react';\r\nimport Draggable from 'react-draggable';\r\nimport classNames from 'classnames';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\nimport debounce from 'lodash/debounce';\r\nimport PropTypes from 'prop-types';\r\nimport Element from 'components/Element';\r\nimport ColorPalette from 'components/ColorPalette';\r\nimport Button from 'components/Button';\r\nimport HorizontalDivider from 'components/HorizontalDivider';\r\nimport { isMobile } from 'helpers/device';\r\nimport useCore from 'hooks/useCore';\r\nimport getRichTextPopupPosition from 'helpers/getRichTextPopupPosition';\r\nimport adjustFreeTextBoundingBox from 'helpers/adjustFreeTextBoundingBox';\r\nimport MathSymbolsPicker from '../MathSymbolsPicker';\r\nimport ColorPalettePicker from 'components/ColorPalettePicker';\r\n\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\n\r\nimport './RichTextPopup.scss';\r\nimport DataElements from 'constants/dataElement';\r\nimport i18next from 'i18next';\r\nimport Icon from 'components/Icon';\r\nimport TextStylePicker from 'components/TextStylePicker';\r\nimport handleFreeTextAutoSizeToggle from 'src/helpers/handleFreeTextAutoSizeToggle';\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object,\r\n  editor: PropTypes.object,\r\n};\r\n\r\nconst RichTextPopup = ({ annotation, editor }) => {\r\n  const { core } = useCore();\r\n  const [\r\n    isDisabled,\r\n    isOpen,\r\n    isPaletteDisabled,\r\n    customColors,\r\n    isInDesktopOnlyMode,\r\n    isTextStylePickerOpen,\r\n    isColorPickerOpen,\r\n    fonts,\r\n    legacyPopup,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.isElementDisabled(state, DataElements.RICH_TEXT_POPUP),\r\n      selectors.isElementOpen(state, DataElements.RICH_TEXT_POPUP),\r\n      selectors.isElementDisabled(state, 'colorPalette'),\r\n      selectors.getCustomColors(state, 'customColors'),\r\n      selectors.isInDesktopOnlyMode(state),\r\n      selectors.isElementOpen(state, DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER),\r\n      selectors.isElementOpen(state, DataElements.STYLE_POPUP_COLORS_CONTAINER),\r\n      selectors.getFonts(state),\r\n      !selectors.isElementDisabled(state, DataElements.LEGACY_RICH_TEXT_POPUP),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n  const [symbolsVisible, setSymbolsVisible] = useState(false);\r\n  const [cssPosition, setCssPosition] = useState({ left: 0, top: 0 });\r\n  const [draggablePosition, setDraggablePosition] = useState({ x: 0, y: 0 });\r\n  const [format, setFormat] = useState({});\r\n  const popupRef = useRef(null);\r\n  const editorRef = useRef(null);\r\n  const annotationRef = useRef(null);\r\n  const propertiesRef = useRef({});\r\n  const dispatch = useDispatch();\r\n  const oldSelectionRef = useRef();\r\n  const symbolsAreaHeight = 150; // max height for the math symbols area\r\n  const [isAutoSizeFont, setAutoSizeFont] = useState(annotation.isAutoSizeFont());\r\n\r\n  useEffect(() => {\r\n    // Have to disable instead of closing because annotation popup will reopen itself\r\n    dispatch(actions.disableElements([DataElements.ANNOTATION_STYLE_POPUP]));\r\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\r\n    return () => {\r\n      dispatch(actions.enableElements([DataElements.ANNOTATION_STYLE_POPUP]));\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleSelectionChange = (range, oldRange) => {\r\n      const shouldRestoreLostSelection = !range && oldRange && editorRef.current;\r\n      if (shouldRestoreLostSelection) {\r\n        editorRef.current.setSelection(oldRange.index, oldRange.length);\r\n      }\r\n      if (range && editorRef.current) {\r\n        setFormat(getFormat(range));\r\n      }\r\n    };\r\n    const handleTextChange = () => {\r\n      if (annotationRef.current?.isAutoSized() && popupRef.current) {\r\n        const position = getRichTextPopupPosition(\r\n          annotationRef.current,\r\n          popupRef,\r\n        );\r\n        setCssPosition(position);\r\n      }\r\n\r\n      setFormat(getFormat(editorRef.current?.getSelection()));\r\n    };\r\n    core.addEventListener('editorSelectionChanged', handleSelectionChange);\r\n    core.addEventListener('editorTextChanged', handleTextChange);\r\n    return () => {\r\n      core.removeEventListener('editorSelectionChanged', handleSelectionChange);\r\n      core.removeEventListener('editorTextChanged', handleTextChange);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // when the editor is focused, we want to reset any previous drag movements so that\r\n    // the popup will be positioned centered to the editor\r\n    setDraggablePosition({ x: 0, y: 0 });\r\n\r\n    editorRef.current = editor;\r\n    annotationRef.current = annotation;\r\n    let StrokeStyle = 'solid';\r\n    try {\r\n      StrokeStyle = (annotation['Style'] === 'dash')\r\n        ? `${annotation['Style']},${annotation['Dashes']}`\r\n        : annotation['Style'];\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    const richTextStyles = annotation.getRichTextStyle();\r\n    const stylesTemp = richTextStyles[0];\r\n    propertiesRef.current = {\r\n      Font: annotation.Font,\r\n      FontSize: annotation.FontSize,\r\n      TextAlign: annotation.TextAlign,\r\n      TextVerticalAlign: annotation.TextVerticalAlign,\r\n      bold: stylesTemp?.['font-weight'] === 'bold' ?? false,\r\n      italic: stylesTemp?.['font-style'] === 'italic' ?? false,\r\n      underline: stylesTemp?.['text-decoration']?.includes('underline') || stylesTemp?.['text-decoration']?.includes('word'),\r\n      strikeout: stylesTemp?.['text-decoration']?.includes('line-through') ?? false,\r\n      size: stylesTemp?.['font-size'],\r\n      font: stylesTemp?.['font-family'],\r\n      StrokeStyle,\r\n      calculatedFontSize: annotation.getCalculatedFontSize()\r\n    };\r\n\r\n    setFormat(getFormat(editorRef.current?.getSelection()));\r\n\r\n    if (oldSelectionRef.current) {\r\n      editorRef.current.setSelection(oldSelectionRef.current);\r\n      oldSelectionRef.current = null;\r\n    }\r\n  }, [annotation, editor]);\r\n\r\n  useEffect(() => {\r\n    const handleEditorBlur = () => {\r\n      dispatch(actions.closeElements([DataElements.RICH_TEXT_POPUP]));\r\n      editorRef.current = null;\r\n      annotationRef.current = null;\r\n    };\r\n    core.addEventListener('editorBlur', handleEditorBlur);\r\n    return () => {\r\n      core.removeEventListener('editorBlur', handleEditorBlur);\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const setPopupPosition = () => {\r\n    if (popupRef.current) {\r\n      const position = getRichTextPopupPosition(\r\n        annotation,\r\n        popupRef,\r\n      );\r\n      setCssPosition(position);\r\n    }\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    setPopupPosition();\r\n  }, [annotation]);\r\n\r\n  // useLayoutEffect so the popup can adjust position smoothly without flashing\r\n  useLayoutEffect(() => {\r\n    const setPosition = debounce(() => {\r\n      if (popupRef.current) {\r\n        setPopupPosition();\r\n      }\r\n    }, 100);\r\n\r\n    const scrollViewElement = core.getDocumentViewer().getScrollViewElement();\r\n    scrollViewElement?.addEventListener('scroll', setPosition);\r\n\r\n    return () => scrollViewElement?.removeEventListener('scroll', setPosition);\r\n\r\n    // The popup position should be updated when the math symbols are visible or hidden\r\n  }, [annotation, symbolsVisible]);\r\n\r\n  const getFormat = (range) => {\r\n    if (!range) {\r\n      return {};\r\n    }\r\n\r\n    const format = editorRef.current.getFormat(range.index, range.length);\r\n\r\n    if (typeof format.color === 'string') {\r\n      format.color = new window.Core.Annotations.Color(format.color);\r\n    } else if (Array.isArray(format.color)) {\r\n      // the selection contains multiple color, so we set the current color to the last selected color\r\n      const lastSelectedColor = new window.Core.Annotations.Color(format.color[format.color.length - 1]);\r\n      format.color = lastSelectedColor;\r\n    } else if (!format.color) {\r\n      format.color = annotationRef.current.TextColor;\r\n    }\r\n\r\n    return format;\r\n  };\r\n\r\n  const handleTextFormatChange = (format) => () => {\r\n    let { index, length } = editorRef.current.getSelection();\r\n    if (length === 0) {\r\n      oldSelectionRef.current = { index, length };\r\n      const newSelection = editorRef.current.getSelection();\r\n      index = newSelection.index;\r\n      length = newSelection.length;\r\n    }\r\n\r\n    const currentFormat = editorRef.current.getFormat(index, length);\r\n    applyFormat(format, !currentFormat[format]);\r\n  };\r\n\r\n  const handleSymbolsClick = () => {\r\n    setSymbolsVisible(!symbolsVisible);\r\n  };\r\n\r\n  const handleColorChange = (_, color) => {\r\n    applyFormat('color', color.toHexString());\r\n  };\r\n\r\n  const applyFormat = (formatKey, value) => {\r\n    if (formatKey === 'size') {\r\n      editorRef.current?.format('applyCustomFontSize', value);\r\n    } else {\r\n      editorRef.current?.format(formatKey, value);\r\n    }\r\n\r\n    if (formatKey === 'color') {\r\n      value = new window.Core.Annotations.Color(value);\r\n    }\r\n\r\n    if (core.isFullPDFEnabled() && formatKey === 'font') {\r\n      const updated = {\r\n        ...format,\r\n        'original-font-family': value\r\n      };\r\n      return setFormat(updated);\r\n    }\r\n    // format the entire editor doesn't trigger the editorTextChanged event, so we set the format state here\r\n    setFormat({\r\n      ...format,\r\n      [formatKey]: value\r\n    });\r\n  };\r\n\r\n  const syncDraggablePosition = (e, { x, y }) => {\r\n    setDraggablePosition({ x, y });\r\n  };\r\n\r\n  const insertSymbols = (symbol) => {\r\n    const { index, length } = editorRef.current.getSelection();\r\n    // if user selected some text, then we want to first delete the selected content\r\n    if (length > 0) {\r\n      editorRef.current.deleteText(index, length);\r\n    }\r\n    // insert symbol at the selected index\r\n    editorRef.current.insertText(index, symbol);\r\n    editorRef.current.setSelection(index + 1);\r\n  };\r\n\r\n  const menuItems = {\r\n    [DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER]: isTextStylePickerOpen,\r\n    [DataElements.STYLE_POPUP_COLORS_CONTAINER]: isColorPickerOpen,\r\n  };\r\n  const toggleMenuItem = (dataElement) => {\r\n    if (!menuItems[dataElement]) {\r\n      dispatch(actions.openElement(dataElement));\r\n    } else {\r\n      dispatch(actions.closeElement(dataElement));\r\n    }\r\n  };\r\n  const openTextStyle = () => toggleMenuItem(DataElements.STYLE_POPUP_TEXT_STYLE_CONTAINER);\r\n  const openColors = () => toggleMenuItem(DataElements.STYLE_POPUP_COLORS_CONTAINER);\r\n\r\n  const onPropertyChange = (property, value) => {\r\n    const { index, length } = editorRef.current.getSelection();\r\n    const annotation = annotationRef.current;\r\n    annotation[property] = value;\r\n    editorRef.current.blur();\r\n    if (property === 'FontSize' || property === 'Font') {\r\n      adjustFreeTextBoundingBox(annotation);\r\n    }\r\n    setTimeout(() => {\r\n      oldSelectionRef.current = { index, length };\r\n      const editBoxManager = core.getAnnotationManager().getEditBoxManager();\r\n      editBoxManager.focusBox(annotation);\r\n    }, 0);\r\n  };\r\n\r\n  const onRichTextStyleChange = (property, value) => {\r\n    const propertyTranslation = {\r\n      'font-weight': 'bold',\r\n      'font-style': 'italic',\r\n      'underline': 'underline',\r\n      'line-through': 'strike',\r\n      'font-family': 'font',\r\n      'font-size': 'size',\r\n    };\r\n    if (property === 'font-family' || property === 'font-size') {\r\n      applyFormat(propertyTranslation[property], value);\r\n      const annotation = annotationRef.current;\r\n      if (annotation.isAutoSized()) {\r\n        const editBoxManager = core.getAnnotationManager().getEditBoxManager();\r\n        editBoxManager.resizeAnnotation(annotation);\r\n      }\r\n    } else {\r\n      handleTextFormatChange(propertyTranslation[property])();\r\n    }\r\n  };\r\n\r\n\r\n  propertiesRef.current.bold = format.bold;\r\n  propertiesRef.current.italic = format.italic;\r\n  propertiesRef.current.underline = format.underline;\r\n  propertiesRef.current.strikeout = format.strike;\r\n  propertiesRef.current.quillFont = format['original-font-family'] || format.font || propertiesRef.current.Font;\r\n  propertiesRef.current.quillFontSize = format.originalSize || propertiesRef.current.FontSize;\r\n\r\n  // TODO for now don't show it in mobile\r\n  return isDisabled || (isMobile() && !isInDesktopOnlyMode) ? null : (\r\n    <Draggable\r\n      position={draggablePosition}\r\n      onDrag={syncDraggablePosition}\r\n      onStop={syncDraggablePosition}\r\n      enableUserSelectHack={false}\r\n      // don't allow drag when clicking on a button element or a color cell\r\n      cancel=\".Button, .cell, .mathSymbolsContainer, .Dropdown, .Dropdown__item\"\r\n      // prevent the blur event from being triggered when clicking on toolbar buttons\r\n      // otherwise we can't style the text since a blur event is triggered before a click event\r\n      onMouseDown={(e) => {\r\n        if (e.type !== 'touchstart') {\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n    >\r\n      <div\r\n        className={classNames({\r\n          Popup: true,\r\n          RichTextPopup: true,\r\n          open: isOpen,\r\n          closed: !isOpen,\r\n          legacy: legacyPopup,\r\n        })}\r\n        ref={popupRef}\r\n        data-element={DataElements.RICH_TEXT_POPUP}\r\n        style={{ ...cssPosition }}\r\n      >\r\n        {\r\n          legacyPopup ? (<>\r\n            <Element className=\"rich-text-format-legacy\" dataElement=\"richTextFormats\">\r\n              <Button\r\n                isActive={format.bold}\r\n                dataElement=\"richTextBoldButton\"\r\n                onClick={handleTextFormatChange('bold')}\r\n                img=\"icon-text-bold\"\r\n                title=\"option.richText.bold\"\r\n              />\r\n              <Button\r\n                isActive={format.italic}\r\n                dataElement=\"richTextItalicButton\"\r\n                onClick={handleTextFormatChange('italic')}\r\n                img=\"icon-text-italic\"\r\n                title=\"option.richText.italic\"\r\n              />\r\n              <Button\r\n                isActive={format.underline}\r\n                dataElement=\"richTextUnderlineButton\"\r\n                onClick={handleTextFormatChange('underline')}\r\n                img=\"ic_annotation_underline_black_24px\"\r\n                title=\"option.richText.underline\"\r\n              />\r\n              <Button\r\n                isActive={format.strike}\r\n                dataElement=\"richTextStrikeButton\"\r\n                onClick={handleTextFormatChange('strike')}\r\n                img=\"ic_annotation_strikeout_black_24px\"\r\n                title=\"option.richText.strikeout\"\r\n              />\r\n              <Button\r\n                dataElement=\"mathSymbolsButton\"\r\n                onClick={handleSymbolsClick}\r\n                img=\"ic_thumbnails_grid_black_24px\"\r\n                title=\"option.mathSymbols\"\r\n              />\r\n            </Element>\r\n            <HorizontalDivider style={{ paddingTop: 0 }} />\r\n          </>) :\r\n            (<>\r\n              <div className=\"collapsible-menu\" onClick={openTextStyle} onTouchStart={openTextStyle} role={'toolbar'}>\r\n                <div className=\"menu-title\">\r\n                  {i18next.t('option.stylePopup.textStyle')}\r\n                </div>\r\n                <Icon glyph={`icon-chevron-${isTextStylePickerOpen ? 'up' : 'down'}`} />\r\n              </div>\r\n              {isTextStylePickerOpen && (\r\n                <div className=\"menu-items\">\r\n                  <TextStylePicker\r\n                    fonts={fonts}\r\n                    onPropertyChange={onPropertyChange}\r\n                    onRichTextStyleChange={onRichTextStyleChange}\r\n                    properties={propertiesRef.current}\r\n                    stateless={true}\r\n                    isFreeText={true}\r\n                    onFreeTextSizeToggle={() => handleFreeTextAutoSizeToggle(annotation, setAutoSizeFont, isAutoSizeFont)}\r\n                    isFreeTextAutoSize={isAutoSizeFont}\r\n                    isRichTextEditMode={true}\r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"divider\" />\r\n              {!isPaletteDisabled &&\r\n                <div className=\"collapsible-menu\" onClick={openColors} onTouchStart={openColors} role={'toolbar'}>\r\n                  <div className=\"menu-title\">\r\n                    {i18next.t('option.stylePopup.colors')}\r\n                  </div>\r\n                  <Icon glyph={`icon-chevron-${isColorPickerOpen ? 'up' : 'down'}`} />\r\n                </div>\r\n              }\r\n            </>\r\n            )}\r\n        {!isPaletteDisabled && (legacyPopup || isColorPickerOpen) && (\r\n          <>\r\n            <ColorPalette\r\n              colorMapKey=\"freeText\"\r\n              color={format.color}\r\n              property=\"TextColor\"\r\n              onStyleChange={handleColorChange}\r\n              hasPadding\r\n            />\r\n            {customColors.length > 0 && (\r\n              <ColorPalettePicker\r\n                color={format.color}\r\n                property=\"TextColor\"\r\n                onStyleChange={handleColorChange}\r\n                enableEdit={false}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        {symbolsVisible && <MathSymbolsPicker onClickHandler={insertSymbols} maxHeight={symbolsAreaHeight} />}\r\n      </div>\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nRichTextPopup.propTypes = propTypes;\r\n\r\nexport default React.memo(RichTextPopup);\r\n","import RichTextPopup from './RichTextPopup';\r\n\r\nexport default RichTextPopup;"],"sourceRoot":""}