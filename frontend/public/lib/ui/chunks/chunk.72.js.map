{"version":3,"sources":["webpack:///./src/ui/src/components/Model3DModal/Model3DModal.scss?e60d","webpack:///./src/ui/src/components/Model3DModal/Model3DModal.js","webpack:///./src/ui/src/components/Model3DModal/Model3DModalContainer.js","webpack:///./src/ui/src/components/Model3DModal/Model3DModalRedux.js","webpack:///./src/ui/src/components/Model3DModal/index.js"],"names":["module","exports","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","toPrimitive","String","Number","_toPrimitive","_toPropertyKey","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_slicedToArray","Array","isArray","_arrayWithHoles","next","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","Model3DModal","_ref","fileInput","urlInput","error","setError","file","setFile","url","setURL","closeModal","isDisabled","isOpen","core","useCore","useTranslation","_useState2","useState","typeOfInput","setTypeOfInput","_useState4","base64","setBase64","urlInputRadio","React","createRef","fileInputRadio","draw3DAnnotation","model3DAnnotation","window","Core","Annotations","Model3DAnnotation","set3DData","zoom","getZoom","X","layerX","Y","layerY","Width","Height","Author","getCurrentUser","setPageNumber","getCurrentPage","addAnnotations","drawAnnotationsFromList","removeEventListener","getExtension","fileName","split","pop","drawModel3DHandler","_ref2","_callee3","base64StrGenerator","_t","_t2","_context3","preventDefault","_ref3","_callee2","urlToBase64Str","_context2","xhr","XMLHttpRequest","onload","_callee","reader","_context","FileReader","onloadend","result","readAsDataURL","response","open","responseType","send","_x2","setToolMode","getViewerElement","style","cursor","addEventListener","_x","modalClass","classNames","Modal","closed","handleFileChange","_ref5","_callee4","event","fileToBase64","_context4","target","files","_x3","urlInputElement","createElement","className","type","ref","onChange","trim","current","handleURLChange","onFocus","click","placeholder","fileInputElement","accept","Swipeable","onSwipedUp","onSwipedDown","preventDefaultTouchmoveEvent","data-element","onMouseDown","stopPropagation","onSubmit","Choice","dataElement","id","radio","label","center","urlError","fileError","Button","onClick","Model3DModalContainer","props","close3DModal","rest","_objectWithoutProperties","_excluded","useCallback","newProps","Model3DModalRedux","dispatch","useDispatch","_useState6","_useSelector2","useSelector","state","selectors","isElementDisabled","DataElements","MODEL3D_MODAL","isElementOpen","useEffect","onToolUpdated","actions","closeElement","focus","closeElements","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","ERROR_MODAL","OPEN_FILE_MODAL"],"mappings":"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","file":"chunks/chunk.72.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState } from 'react';\r\nimport classNames from 'classnames';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'components/Button';\r\nimport useCore from 'hooks/useCore';\r\nimport Choice from 'components/Choice';\r\n\r\nimport { Swipeable } from 'react-swipeable';\r\nimport './Model3DModal.scss';\r\n\r\nconst Model3DModal = ({\r\n  fileInput,\r\n  urlInput,\r\n  error,\r\n  setError,\r\n  file,\r\n  setFile,\r\n  url,\r\n  setURL,\r\n  closeModal,\r\n  isDisabled,\r\n  isOpen,\r\n}) => {\r\n  const { core } = useCore();\r\n  const [t] = useTranslation();\r\n\r\n  const [typeOfInput, setTypeOfInput] = useState('url');\r\n  const [base64, setBase64] = useState('');\r\n  const urlInputRadio = React.createRef();\r\n  const fileInputRadio = React.createRef();\r\n\r\n  const draw3DAnnotation = (e) => {\r\n    const defaultW = 300;\r\n    const defaultH = 300;\r\n\r\n    const model3DAnnotation = new window.Core.Annotations.Model3DAnnotation();\r\n    model3DAnnotation.set3DData(base64);\r\n    if (typeOfInput === 'url') {\r\n      model3DAnnotation.set3DData(url, 'url');\r\n    }\r\n    // reset x and y position with current zoom level\r\n    const zoom = core.getZoom();\r\n    model3DAnnotation.X = e.layerX / zoom;\r\n    model3DAnnotation.Y = e.layerY / zoom;\r\n    model3DAnnotation.Width = defaultW;\r\n    model3DAnnotation.Height = defaultH;\r\n    model3DAnnotation.Author = core.getCurrentUser();\r\n    model3DAnnotation.setPageNumber(core.getCurrentPage());\r\n    core.addAnnotations([model3DAnnotation]);\r\n    core.drawAnnotationsFromList([model3DAnnotation]);\r\n    core.removeEventListener('click', draw3DAnnotation);\r\n  };\r\n\r\n  const getExtension = (fileName) => {\r\n    return fileName.split('.').pop();\r\n  };\r\n\r\n  const drawModel3DHandler = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (typeOfInput === 'url') {\r\n      // convert url to base 64\r\n      if (getExtension(url) !== 'glb') {\r\n        setError({ ...error, ...{ 'urlError': t('Model3D.formatError') } });\r\n        return;\r\n      }\r\n      const base64StrGenerator = async (url) => {\r\n        // build base64 string from the given file url\r\n        const urlToBase64Str = (url) => {\r\n          return new Promise(function(resolve) {\r\n            const xhr = new XMLHttpRequest();\r\n            xhr.onload = async function() {\r\n              const reader = new FileReader();\r\n              reader.onloadend = function() {\r\n                resolve(reader.result);\r\n              };\r\n              await reader.readAsDataURL(xhr.response);\r\n            };\r\n            xhr.open('GET', url);\r\n            xhr.responseType = 'blob';\r\n            xhr.send();\r\n          });\r\n        };\r\n        // eslint-disable-next-line no-return-await\r\n        return await urlToBase64Str(url);\r\n      };\r\n      setBase64(await base64StrGenerator(url));\r\n    } else if (typeOfInput === 'file') {\r\n      if (getExtension(file.name) !== 'glb') {\r\n        setError({ ...error, ...{ 'urlError': t('Model3D.formatError') } });\r\n        return;\r\n      }\r\n    }\r\n\r\n    closeModal();\r\n    core.setToolMode('Pan');\r\n    // eslint-disable-next-line no-undef\r\n    const viewer = core.getViewerElement();\r\n    viewer.style.cursor = 'crosshair';\r\n    core.addEventListener('click', draw3DAnnotation);\r\n  };\r\n\r\n  const modalClass = classNames({\r\n    Modal: true,\r\n    Model3DModal: true,\r\n    open: isOpen,\r\n    closed: !isOpen,\r\n  });\r\n\r\n  const handleFileChange = async (event) => {\r\n    setTypeOfInput('file');\r\n    const file = event.target.files[0];\r\n    setFile(file);\r\n    const fileToBase64 = (file) => new Promise(() => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        return setBase64(reader.result);\r\n      };\r\n    });\r\n    await fileToBase64(file);\r\n    setError({});\r\n    setURL('');\r\n  };\r\n\r\n  const handleURLChange = (url) => {\r\n    setTypeOfInput('url');\r\n    setURL(url.trim());\r\n    setError('');\r\n    fileInput.current.value = null;\r\n  };\r\n\r\n  const urlInputElement = (\r\n    <input\r\n      className=\"urlInput\"\r\n      type=\"url\"\r\n      ref={urlInput}\r\n      value={url}\r\n      onChange={(e) => handleURLChange(e.target.value)}\r\n      onFocus={() => urlInputRadio.current.click()}\r\n      placeholder={t('Model3D.enterurl')}\r\n    />\r\n  );\r\n\r\n  const fileInputElement = (\r\n    <input\r\n      type=\"file\"\r\n      ref={fileInput}\r\n      onChange={handleFileChange}\r\n      accept=\".glb\"\r\n      onFocus={() => fileInputRadio.current.click()}\r\n    />\r\n  );\r\n\r\n  return isDisabled ? null : (\r\n    <Swipeable onSwipedUp={closeModal} onSwipedDown={closeModal} preventDefaultTouchmoveEvent>\r\n      <div className={modalClass} data-element=\"Model3DModal\" onMouseDown={closeModal}>\r\n        <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\r\n          <div className=\"swipe-indicator\" />\r\n          <form onSubmit={drawModel3DHandler}>\r\n            <div className=\"col\">{t('Model3D.enterurlOrLocalFile')}</div>\r\n            <Choice\r\n              dataElement=\"3DAnnotationLink\"\r\n              id=\"3D-annotation-link\"\r\n              name=\"3DInput\"\r\n              className=\"inputWrapper\"\r\n              ref={urlInputRadio}\r\n              radio\r\n              label={urlInputElement}\r\n              center\r\n            />\r\n            {error?.urlError && <p className=\"error\">* {error.urlError}</p>}\r\n            <Choice\r\n              dataElement=\"3DAnnotationLocalFile\"\r\n              id=\"3D-annotation-file\"\r\n              name=\"3DInput\"\r\n              className=\"inputWrapper\"\r\n              ref={fileInputRadio}\r\n              radio\r\n              label={fileInputElement}\r\n              center\r\n            />\r\n            {error?.fileError && <p className=\"error\">* {error.fileError}</p>}\r\n            <Button dataElement=\"linkSubmitButton\" label={t('action.draw')} onClick={drawModel3DHandler} />\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </Swipeable>\r\n  );\r\n};\r\n\r\nexport default Model3DModal;\r\n","import React, { useCallback } from 'react';\r\nimport Model3DModal from './Model3DModal';\r\n\r\nfunction Model3DModalContainer(props) {\r\n  const { close3DModal, ...rest } = props;\r\n\r\n  const closeModal = useCallback(() => {\r\n    close3DModal();\r\n  }, [close3DModal]);\r\n\r\n  const newProps = {\r\n    ...rest,\r\n    closeModal,\r\n  };\r\n\r\n  return <Model3DModal {...newProps} />;\r\n}\r\n\r\nexport default Model3DModalContainer;\r\n","import React, { useEffect, useState } from 'react';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport useCore from 'hooks/useCore';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Model3DModalContainer from './Model3DModalContainer';\nimport DataElements from 'constants/dataElement';\n\nfunction Model3DModalRedux(props) {\n  const { core } = useCore();\n  const dispatch = useDispatch();\n  const [url, setURL] = useState('');\n  const [file, setFile] = useState({});\n  const [error, setError] = useState({ 'fileError': '', 'urlError': '' });\n  const fileInput = React.createRef();\n  const urlInput = React.createRef();\n\n\n  const [isDisabled, isOpen] = useSelector((state) => [\n    selectors.isElementDisabled(state, DataElements.MODEL3D_MODAL),\n    selectors.isElementOpen(state, DataElements.MODEL3D_MODAL),\n  ]);\n\n  const close3DModal = () => {\n    dispatch(actions.closeElement(DataElements.MODEL3D_MODAL));\n    setURL('');\n    setFile({});\n    setError({});\n    if (fileInput.current) {\n      fileInput.current.value = null;\n    }\n  };\n\n\n  // Hack to close modal if hotkey to open other tool is used.\n  useEffect(() => {\n    const onToolUpdated = () => {\n      dispatch(actions.closeElement(DataElements.MODEL3D_MODAL));\n    };\n    core.addEventListener('toolUpdated', onToolUpdated);\n    return () => core.removeEventListener('toolUpdated', onToolUpdated);\n  }, []);\n\n  useEffect(() => {\n    if (isOpen) {\n      urlInput.current.focus();\n      dispatch(actions.closeElements([\n        DataElements.PRINT_MODAL,\n        DataElements.LOADING_MODAL,\n        DataElements.PROGRESS_MODAL,\n        DataElements.ERROR_MODAL,\n        DataElements.OPEN_FILE_MODAL,\n      ]));\n    }\n  }, [dispatch, isOpen]);\n\n\n  const newProps = {\n    ...props,\n    isDisabled,\n    isOpen,\n    close3DModal,\n    fileInput,\n    urlInput,\n    error,\n    setError,\n    file,\n    setFile,\n    url,\n    setURL\n  };\n  return <Model3DModalContainer {...newProps} />;\n}\n\nexport default Model3DModalRedux;\n","import Model3DModalRedux from './Model3DModalRedux';\n\nexport default Model3DModalRedux;"],"sourceRoot":""}