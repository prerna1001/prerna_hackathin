{"version":3,"sources":["webpack:///./src/ui/src/components/FileAttachmentPanel/FileAttachmentPanel.scss?01c8","webpack:///./src/ui/src/components/FileAttachmentPanel/FileAttachmentPanel.js","webpack:///./src/ui/src/components/FileAttachmentPanel/index.js"],"names":["module","exports","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","getActualFileName","filename","match","renderAttachment","onClickCallback","key","showFileIdProcessSpinner","fileExtension","split","pop","toUpperCase","handleKeyDown","event","React","createElement","className","onClick","onKeyDown","style","cursor","background","border","padding","type","concat","Spinner","inPanel","height","width","initialFilesDefault","embeddedFiles","fileAttachmentAnnotations","FileAttachmentPanel","_ref","_ref$initialFiles","initialFiles","core","useCore","useTranslation","dispatch","useDispatch","_useState2","useState","fileAttachments","setFileAttachments","isMultiTab","useSelector","selectors","getIsMultiTab","tabManager","getTabManager","_useState4","setFileIdProcessSpinner","useEffect","updateFileAttachments","_ref2","_callee","attachments","_context","getFileAttachments","clearSpinner","addEventListener","removeEventListener","entries","Icon","glyph","panelData","panelNames","FILE_ATTACHMENT","icon","attachmentPanelItemOnClick","_ref3","_callee2","fileAttachmentAnnot","blob","newTabId","_t","_context2","actions","openElement","DataElements","LOADING_MODAL","getFileData","addTab","closeElement","LEFT_PANEL","setActiveTab","console","error","ERROR_MODAL","getAnnotationManager","trigger","_x","map","file","idx","getEmbeddedFileData","fileObject","saveAs","_ref4","_ref5","pageNumber","fileAttachmentAnnotsPerPage","setCurrentPage","selectAnnotation"],"mappings":"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","file":"chunks/chunk.64.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { getFileAttachments, getEmbeddedFileData } from 'helpers/getFileAttachments';\r\nimport Spinner from '../Spinner';\r\nimport { saveAs } from 'file-saver';\r\nimport Icon from 'components/Icon';\r\nimport useCore from 'hooks/useCore';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport DataElements from 'constants/dataElement';\r\n\r\nimport './FileAttachmentPanel.scss';\r\nimport { panelData, panelNames } from 'constants/panel';\r\n\r\nconst getActualFileName = (filename) => {\r\n  const fileNameRegex = /[^\\\\\\/]+$/g;\r\n  return filename.match(fileNameRegex)[0];\r\n};\r\n\r\nconst renderAttachment = (filename, onClickCallback, key, showFileIdProcessSpinner) => {\r\n  filename = getActualFileName(filename);\r\n  const fileExtension = filename.split('.').pop().toUpperCase();\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === 'Enter' || event.key === ' ') {\r\n      onClickCallback();\r\n    }\r\n  };\r\n\r\n  if (showFileIdProcessSpinner === key) {\r\n    return (\r\n      <li key={key}>\r\n        <button\r\n          className='embedSpinner'\r\n          onClick={onClickCallback}\r\n          onKeyDown={handleKeyDown}\r\n          style={{ cursor: 'pointer', background: 'none', border: 'none', padding: 0 }}\r\n          type=\"button\"\r\n        >\r\n          {`[${fileExtension}] ${filename}`}<Spinner inPanel height={'15px'} width={'15px'}/>\r\n        </button>\r\n      </li>\r\n    );\r\n  }\r\n  return (\r\n    <li key={key}>\r\n      <button\r\n        className='embedSpinner'\r\n        onClick={onClickCallback}\r\n        onKeyDown={handleKeyDown}\r\n        style={{ cursor: 'pointer', background: 'none', border: 'none', padding: 0 }}\r\n        type=\"button\"\r\n      >\r\n        {`[${fileExtension}] ${filename}`}\r\n      </button>\r\n    </li>\r\n  );\r\n};\r\n\r\n\r\n\r\nconst initialFilesDefault = { embeddedFiles: [], fileAttachmentAnnotations: [] };\r\n\r\nconst FileAttachmentPanel = ({ initialFiles = initialFilesDefault }) => {\r\n  const { core } = useCore();\r\n  const [t] = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const [fileAttachments, setFileAttachments] = useState(initialFiles);\r\n  const isMultiTab = useSelector(selectors.getIsMultiTab);\r\n  const tabManager = useSelector(selectors.getTabManager);\r\n  const [showFileIdProcessSpinner, setFileIdProcessSpinner] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const updateFileAttachments = async () => {\r\n      const attachments = await getFileAttachments();\r\n      setFileAttachments(attachments);\r\n    };\r\n    const clearSpinner = () => {\r\n      setFileIdProcessSpinner(null);\r\n    };\r\n    core.addEventListener('annotationChanged', updateFileAttachments);\r\n    core.addEventListener('documentLoaded', updateFileAttachments);\r\n    core.addEventListener('fileAttachmentDataAvailable', clearSpinner);\r\n    updateFileAttachments();\r\n    return () => {\r\n      core.removeEventListener('annotationChanged', updateFileAttachments);\r\n      core.removeEventListener('documentLoaded', updateFileAttachments);\r\n      core.removeEventListener('fileAttachmentDataAvailable', clearSpinner);\r\n    };\r\n  }, []);\r\n\r\n  if (\r\n    fileAttachments.embeddedFiles.length === 0 &&\r\n    Object.entries(fileAttachments.fileAttachmentAnnotations).length === 0\r\n  ) {\r\n    return (\r\n      <div className=\"fileAttachmentPanel\">\r\n        <div className=\"empty-panel-container\">\r\n          <Icon className=\"empty-icon\" glyph={panelData[panelNames.FILE_ATTACHMENT].icon}/>\r\n          <div className=\"empty-message\">{t('message.noAttachments')}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const attachmentPanelItemOnClick = async (fileAttachmentAnnot) => {\r\n    if (isMultiTab) {\r\n      dispatch(actions.openElement(DataElements.LOADING_MODAL));\r\n      try {\r\n        const blob = await fileAttachmentAnnot.getFileData();\r\n        const filename = getActualFileName(fileAttachmentAnnot.filename);\r\n        const newTabId = await tabManager.addTab(blob, { filename });\r\n        dispatch(actions.closeElement(DataElements.LOADING_MODAL));\r\n        dispatch(actions.closeElement(DataElements.LEFT_PANEL));\r\n        await tabManager.setActiveTab(newTabId);\r\n      } catch (error) {\r\n        console.error('Error opening file attachment:', error);\r\n        dispatch(actions.openElement(DataElements.ERROR_MODAL));\r\n        dispatch(actions.closeElement(DataElements.LOADING_MODAL));\r\n      } finally {\r\n        setFileIdProcessSpinner(null);\r\n      }\r\n    } else {\r\n      return core.getAnnotationManager().trigger('annotationDoubleClicked', fileAttachmentAnnot);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fileAttachmentPanel\">\r\n      <div className=\"section\">\r\n        {fileAttachments.embeddedFiles.length ? <h2 className=\"title\">{t('message.embeddedFiles')}</h2> : null}\r\n        <ul className=\"downloadable\">\r\n          {fileAttachments.embeddedFiles.map((file, idx) => renderAttachment(\r\n            getActualFileName(file.filename),\r\n            () => {\r\n              setFileIdProcessSpinner(`embeddedFile_${idx}`);\r\n              getEmbeddedFileData(file.fileObject).then((blob) => {\r\n                saveAs(blob, getActualFileName(file.filename));\r\n              }).finally(() => {\r\n                setFileIdProcessSpinner(null);\r\n              });\r\n            },\r\n            `embeddedFile_${idx}`,\r\n            showFileIdProcessSpinner\r\n          )\r\n          )}\r\n        </ul>\r\n      </div>\r\n\r\n      {Object.entries(fileAttachments.fileAttachmentAnnotations).map(([pageNumber, fileAttachmentAnnotsPerPage]) => {\r\n        return (\r\n          <div key={pageNumber} className=\"section\">\r\n            <h2 className=\"title\">\r\n              {t('message.pageNum')} {pageNumber}\r\n            </h2>\r\n            <ul className=\"downloadable\">\r\n              {fileAttachmentAnnotsPerPage.map((fileAttachmentAnnot, idx) => renderAttachment(\r\n                getActualFileName(fileAttachmentAnnot.filename),\r\n                () => {\r\n                  setFileIdProcessSpinner(`fileAttachmentAnnotation_${idx}`);\r\n                  core.setCurrentPage(fileAttachmentAnnot['PageNumber']);\r\n                  core.selectAnnotation(fileAttachmentAnnot);\r\n                  attachmentPanelItemOnClick(fileAttachmentAnnot);\r\n                },\r\n                `fileAttachmentAnnotation_${idx}`,\r\n                showFileIdProcessSpinner\r\n              ),\r\n              )}\r\n            </ul>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileAttachmentPanel;\r\n","import FileAttachmentPanel from './FileAttachmentPanel';\r\n\r\nexport default FileAttachmentPanel;\r\n"],"sourceRoot":""}