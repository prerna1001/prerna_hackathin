{"version":3,"sources":["webpack:///./src/ui/src/components/CreateStampModal/CustomStampForums.scss?7ee8","webpack:///./src/ui/src/components/CreateStampModal/CreateStampModal.scss?480a","webpack:///./src/ui/src/components/CreateStampModal/CustomStampForums.js","webpack:///./src/ui/src/components/CreateStampModal/CreateStampModal.js","webpack:///./src/ui/src/components/CreateStampModal/index.js"],"names":["module","exports","FALLBACK_DATE_TIME_FORMAT","date","time","timeFirst","dateTimeFormatToString","format","useDate","arguments","length","undefined","useTime","concat","propTypes","state","PropTypes","object","setState","func","setEmptyInput","fonts","array","openColorPicker","getCustomColorAndRemove","openDeleteModal","dateTimeFormats","stampTool","userName","string","CustomStampForums","_ref","core","useCore","updateTimestampLabel","usernameChk","dateChk","dateTime","tmpText","defaultDateTimeFormat","_useState2","_slicedToArray","useState","setDateTime","_useState4","usernameCheckbox","setUsernameCheckbox","_useState6","dateCheckbox","setDateCheckbox","_useState8","timeCheckbox","setTimeCheckbox","_useState0","stampTextInputValue","setStampText","t","useTranslation","txt","_useState10","timestampFormat","setTimestampFormat","_useState12","tooltipVisible","setTooltipVisible","tooltipRef","useRef","currentUser","getCurrentUser","currentDateTime","Date","toLocaleString","handleClickOutside","event","current","contains","target","useEffect","document","addEventListener","removeEventListener","handleTooltipClick","canvasRef","canvasContainerRef","inputRef","updateCanvas","title","subtitle","newState","parameters","canvas","width","height","color","textColor","canvasParent","font","bold","italic","underline","strikeout","drawCustomStamp","dataURL","toDataURL","_objectSpread","handleRichTextStyleChange","style","_defineProperty","stampInputLabel","getHexColor","givenColor","A","toHexString","toLowerCase","COMMON_COLORS","openPicker","addNew","type","isText","handleVisiblityChanged","e","_e$detail","detail","element","isVisible","colorToBeAdded","setTextColor","setBackgroundColor","toolColors","window","Core","Tools","RubberStampCreateTool","push","setTextColors","setBackgroundColors","getInstanceNode","instance","UI","Events","VISIBILITY_CHANGED","deleteColor","newColors","textColors","filter","textColorToBeDeleted","backgroundColors","backgroundColorToBeDeleted","setTextColorToBeDeleted","setBackgroundColorToBeDeleted","_useState14","_useState16","backgroundColor","_useState18","_useState20","_useState22","_useState24","handleTextColorChange","newColor","handleBackgroundColorChange","formatsList","dateTimeDropdownItems","Array","from","Set","map","React","createElement","className","ref","role","aria-label","htmlFor","id","classNames","value","onChange","Icon","glyph","aria-live","Dropdown","labelledById","items","ariaLabel","onClickItem","currentSelectionKey","getCustomItemStyle","item","fontFamily","maxHeight","Button","dataElement","onClick","img","isActive","ariaPressed","ColorPalettePicker","setColorToBeDeleted","colorToBeDeleted","customColors","onStyleChange","handleColorOnClick","handleOnClick","ariaLabelledBy","toolTipXOffset","disableTitle","enableEdit","colorsAreHex","aria-labelledby","Choice","checked","label","newDateTime","tabIndex","onKeyDown","key","preventDefault","background","border","padding","display","alignItems","cursor","newFormat","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","apply","_next","_throw","isArray","_arrayWithHoles","next","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","toString","slice","constructor","name","test","fillColors","CustomStampModal","stampToolArray","getToolsFromAllDocumentViewers","store","useStore","emptyInput","customStampModalOverlayRef","modalWrapperRef","_useSelector2","useSelector","selectors","isElementOpen","DataElements","CUSTOM_STAMP_MODAL","getFonts","getDateTimeFormats","getUserName","isOpen","dispatch","useDispatch","updateOverflow","currentModalOverlayElement","modalElementContainer","customStampModalRect","getBoundingClientRect","modalContainerRect","enableScrollBar","overflow","useLayoutEffect","deselectAllAnnotations","closeModal","useFocusOnClose","actions","closeElement","_callee","onConfirm","message","confirmBtnText","warning","_context","showWarningMessage","_x","modalClass","Modal","open","closed","createCustomStamp","_ref2","_callee2","_iterator","_step","annot","standardStampCount","customStampCount","_t","_context2","setToolMode","_createForOfIteratorHelper","s","addCustomStamp","createCustomStampAnnotation","setRubberStamp","showPreview","getStandardStamps","getCustomStamps","setSelectedStampIndex","onCreateCustomStampClick","data-element","ModalWrapper","closeHandler","onCloseClick","swipeToClose","onMouseDown","stopPropagation","customColor","getCustomColor","getState","setCustomColor","openElement","isModalOpen","disabled","CreateStampModal"],"mappings":"qGACAA,EAAOC,QAAU,CAAC,kBAAoB,OAAO,mBAAqB,S,qBCAlED,EAAOC,QAAU,CAAC,kBAAoB,OAAO,mBAAqB,S,2nFCelE,IAAMC,EAA4B,CAChCC,KAAM,aACNC,KAAM,UACNC,WAAW,GAGPC,EAAyB,SAACC,GAA2C,IAAnCC,IAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAASG,IAAOH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAC7D,OAAKD,EAMAI,EAMEL,EAAOF,UAAS,GAAAQ,OAClBN,EAAOH,KAAI,KAAAS,OAAIN,EAAOJ,MAAI,GAAAU,OAC1BN,EAAOJ,KAAI,KAAAU,OAAIN,EAAOH,MAPpBG,EAAOJ,KAGLI,EAAOJ,KAFL,GAPJI,EAAOH,KAGLG,EAAOH,KAFL,IAePU,EAAY,CAChBC,MAAOC,IAAUC,OACjBC,SAAUF,IAAUG,KACpBC,cAAeJ,IAAUG,KACzBE,MAAOL,IAAUM,MACjBC,gBAAiBP,IAAUG,KAC3BK,wBAAyBR,IAAUG,KACnCM,gBAAiBT,IAAUG,KAC3BO,gBAAiBV,IAAUM,MAC3BK,UAAWX,IAAUC,OACrBW,SAAUZ,IAAUa,QAGhBC,EAAoB,SAAHC,GAWjB,IAVJhB,EAAKgB,EAALhB,MACAG,EAAQa,EAARb,SACAE,EAAaW,EAAbX,cACAC,EAAKU,EAALV,MACAE,EAAeQ,EAAfR,gBACAC,EAAuBO,EAAvBP,wBACAC,EAAeM,EAAfN,gBACAC,EAAeK,EAAfL,gBACAC,EAASI,EAATJ,UACAC,EAAQG,EAARH,SAEQI,EAASC,cAATD,KACFE,EAAuB,SAACC,EAAaC,EAASC,GAClD,IAAIC,EAAU,GAOd,OANIH,IACFG,GAAW,mBAETF,IACFE,GAAWD,GAENC,GAGHC,EAAwBb,GAAmBA,EAAgB,GAAKA,EAAgB,GAAKxB,EACJsC,EAAAC,EAAvDC,mBAASpC,EAAuBiC,IAAuB,GAAhFF,EAAQG,EAAA,GAAEG,EAAWH,EAAA,GACkCI,EAAAH,EAAdC,oBAAS,GAAK,GAAvDG,EAAgBD,EAAA,GAAEE,EAAmBF,EAAA,GACUG,EAAAN,EAAdC,oBAAS,GAAK,GAA/CM,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GACkBG,EAAAT,EAAdC,oBAAS,GAAK,GAA/CS,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GAEyBG,EAAAZ,EAAjBC,mBAAS,SAAQ,GAAtDY,EAAmBD,EAAA,GAAEE,EAAYF,EAAA,GACjCG,EAAqBf,EAAhBgB,cAAgB,GAApB,GAEFC,EAAMxB,EAAqBW,EAAkBG,EAAcX,GACNsB,EAAAlB,EAAbC,mBAASgB,GAAI,GAApDE,EAAeD,EAAA,GAAEE,EAAkBF,EAAA,GAEiBG,EAAArB,EAAfC,oBAAS,GAAM,GAApDqB,EAAcD,EAAA,GAAEE,GAAiBF,EAAA,GAClCG,GAAaC,iBAAO,MACpBC,GAAcnC,EAAKoC,iBACnBC,IAAkB,IAAIC,MAAOC,iBAE7BC,GAAqB,SAACC,GACtBR,GAAWS,UAAYT,GAAWS,QAAQC,SAASF,EAAMG,SAC3DZ,IAAkB,IAItBa,qBAAU,WAOR,OANId,EACFe,SAASC,iBAAiB,QAASP,IAEnCM,SAASE,oBAAoB,QAASR,IAGjC,WACLM,SAASE,oBAAoB,QAASR,OAEvC,CAACT,IAEJ,IAAMkB,GAAqB,WACzBjB,IAAmBD,IAUfmB,GAAYhB,mBACZiB,GAAqBjB,mBACrBkB,GAAWlB,mBAEXmB,GAAe,SAACC,EAAOC,GAA+B,IAArBC,EAAQ/E,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGM,EAC1C0E,EAAa,CACjBC,OAAQR,GAAUR,QAClBY,QACAC,WACAI,MAAO,IACPC,OAAQ,IACRC,MAAOL,EAASK,MAChBC,UAAWN,EAASM,UACpBC,aAAcZ,GAAmBT,QACjCsB,KAAMR,EAASQ,KACfC,KAAMT,EAASS,KACfC,OAAQV,EAASU,OACjBC,UAAWX,EAASW,UACpBC,UAAWZ,EAASY,WAGhBT,EAAQhE,EAAU0E,gBAAgBZ,GAClCa,EAAUpB,GAAUR,QAAQ6B,YAElCrF,EAAQsF,IAAC,GACJhB,GAAQ,IACXG,QACAL,QACAC,WACAK,OAAQH,EAAWG,OACnBU,cAWJzB,qBAAU,WACRQ,GAAa/B,EAAqBM,EAAiB7C,KAClD,CAACa,IAEJ,IAuCM6E,GAA4B,SAACC,GACjCrB,GAAa/B,EAAqBM,EAAe4C,IAAA,GAC5CzF,GAAK,GAAA4F,EAAA,GACPD,GAAS3F,EAAM2F,OASdE,GAAkBpD,EAAE,qCAEpBqD,GAAc,SAACC,GACnB,OAAIA,GAAcA,EAAWC,EACpBD,EAAWE,cAAcC,cAE3BC,IAAqB,OAExBC,GAAa,SAACC,EAAQC,GAC1B,IAAMC,EAAkB,SAATD,EACf9F,IACA,IAAMgG,EAAyB,SAACC,GAC9B,IAAAC,EAA+BD,EAAEE,OAAzBC,EAAOF,EAAPE,QAASC,EAASH,EAATG,UACjB,GAAgB,qBAAZD,IAAmCC,EAAW,CAChD,IAAM/B,EAAQrE,IACd,GAAIqE,EAAO,CACT,IAAMgC,EAAiBhB,GAAYhB,GACnCyB,EAASQ,GAAaD,GAAkBE,GAAmBF,GAC3D,IAAMG,EAAaC,OAAOC,KAAKC,MAAMC,sBAAsBd,EAAS,cAAgB,eACpFU,EAAWK,KAAKR,GAChBP,EAASgB,GAAcN,GAAcO,GAAoBP,GACzDjH,EAAKyF,IAAA,GACAzF,GAAK,GAAA4F,EAAA,GACPW,EAAS,YAAc,QAAUO,IAEpCxC,GAAa/B,EAAqBM,EAAiB7C,GAErDyH,cAAkBC,SAASC,GAAG1D,oBAAoB2D,IAAOC,mBAAoBrB,KAGjFiB,cAAkBC,SAASC,GAAG3D,iBAAiB4D,IAAOC,mBAAoBrB,IAEtEsB,GAAc,SAACxB,GACnB,IAAMC,EAAkB,SAATD,EACf5F,GAAgB,WACd,IAAMqH,EAAYxB,EAChByB,GAAWC,QAAO,SAACnD,GAAK,OAAKA,IAAUoD,MACvCC,GAAiBF,QAAO,SAACnD,GAAK,OAAKA,IAAUsD,MAC/C7B,EAASgB,GAAcQ,GAAaP,GAAoBO,GACxDxB,EAAS8B,GAAwB,MAAQC,GAA8B,MACvEpB,OAAOC,KAAKC,MAAMC,sBAAsBd,EAAS,cAAgB,eAAiBwB,MAI0BQ,GAAA7G,EAAhEC,mBAASuF,OAAOC,KAAKC,MAAMC,sBAAmC,aAAE,GAAzGc,GAAgBI,GAAA,GAAEf,GAAmBe,GAAA,GACoFC,GAAA9G,EAAlFC,mBAAS3B,EAAM8E,OAASoC,OAAOC,KAAKC,MAAMC,sBAAmC,YAAE,IAAG,GAAzHoB,GAAeD,GAAA,GAAExB,GAAkBwB,GAAA,GACwCE,GAAAhH,EAAdC,mBAAS,MAAK,GAA3EyG,GAA0BM,GAAA,GAAEJ,GAA6BI,GAAA,GAEoCC,GAAAjH,EAAhEC,mBAASuF,OAAOC,KAAKC,MAAMC,sBAAmC,aAAE,GAA7FW,GAAUW,GAAA,GAAEpB,GAAaoB,GAAA,GACqEC,GAAAlH,EAAnEC,mBAASuF,OAAOC,KAAKC,MAAMC,sBAAmC,YAAE,IAAG,GAA9FtC,GAAS6D,GAAA,GAAE7B,GAAY6B,GAAA,GACwCC,GAAAnH,EAAdC,mBAAS,MAAK,GAA/DuG,GAAoBW,GAAA,GAAER,GAAuBQ,GAAA,GAG9CC,GAAwB,SAACC,GAC7BhC,GAAagC,GACb/I,EAAKyF,IAAA,GACAzF,GAAK,IACR+E,UAAWgE,IAEbzE,GAAa/B,EAAqBM,EAAiB7C,IAK/CgJ,GAA8B,SAACD,GACnC/B,GAAmB+B,GACnB/I,EAAKyF,IAAA,GACAzF,GAAK,IACR8E,MAAOiE,IAETzE,GAAa/B,EAAqBM,EAAiB7C,IAI/CiJ,GAActI,GAAmB,CAACxB,GAClC+J,GAAwBC,MAAMC,KAAK,IAAIC,IAC3CJ,GAAYK,KAAI,SAAC9J,GAAM,OAAKD,EAAuBC,EAAQyC,EAAcG,QACxE6F,QAAO,SAACzI,GAAM,MAAgB,KAAXA,KAGtB,OACE+J,IAAAC,cAAA,OAAKC,UAAU,oBACbF,IAAAC,cAAA,OAAKC,UAAU,mBAAmBC,IAAKtF,IACrCmF,IAAAC,cAAA,UACEC,UAAU,sBACVC,IAAKvF,GACLwF,KAAM,MACNC,aAAA,GAAA9J,OAAe2C,EAAE,8CAA6C,KAAA3C,OAAIyC,EAAmB,MAAAzC,OAAKsD,GAAW,KAAAtD,OAAIwD,OAG7GiG,IAAAC,cAAA,OAAKC,UAAU,oBACbF,IAAAC,cAAA,OAAKC,UAAU,yBACbF,IAAAC,cAAA,SAAOK,QAAQ,iBAAiBJ,UAAU,eAAc,IAAE5D,GAAgB,KAC1E0D,IAAAC,cAAA,SACEM,GAAG,iBACHL,UAAWM,IAAW,yBAA0B,CAAE,OAAUxH,IAC5DmH,IAAKrF,GACLiC,KAAK,OACLsD,aAAY/D,GACZmE,MAAOzH,EACP0H,SAlKgB,SAACxD,GACzB,IAAMuD,EAAQvD,EAAE5C,OAAOmG,OAAS,GAChCxH,EAAawH,GACb3J,GAAe2J,GACf1F,GAAa0F,EAAOnH,OAgKZN,GAAuBgH,IAAAC,cAACU,IAAI,CAACC,MAAM,aAAaV,UAAU,aAAaE,KAAK,iBAC9EJ,IAAAC,cAAA,OAAKC,UAAU,oBAAoBW,YAAU,cACzC7H,GAAuBgH,IAAAC,cAAA,KAAGC,UAAU,aAAahH,EAAE,oCAGzD8G,IAAAC,cAAA,OAAKC,UAAU,kBACbF,IAAAC,cAAA,OAAKC,UAAU,iBAAiBK,GAAG,kCAAiC,IAAErH,EAAE,qCAAqC,KAC7G8G,IAAAC,cAAA,OAAKC,UAAU,wBACbF,IAAAC,cAACa,IAAQ,CACPP,GAAG,oBACHQ,aAAa,iCACbC,MAAOjK,EACPkK,UAAW/H,EAAE,qCACbgI,YA7Ia,SAACxF,GACxBX,GAAa/B,EAAqBM,EAAe4C,IAAA,GAC5CzF,GAAK,IACRiF,WA2IQyF,oBAAqB1K,EAAMiF,MAAQ3E,EAAM,GACzCqK,mBAAoB,SAACC,GAAI,MAAM,CAAEC,WAAYD,IAC7CE,UAAW,MAEbvB,IAAAC,cAACuB,IAAM,CACLC,YAAY,sBACZC,QA/HO,WAAH,OAASvF,GAA0B,SAgIvCwF,IAAI,iBACJ3G,MAAM,uBACN4G,SAAUnL,EAAMkF,KAChBkG,YAAapL,EAAMkF,OAErBqE,IAAAC,cAACuB,IAAM,CACLC,YAAY,wBACZC,QAtIS,WAAH,OAASvF,GAA0B,WAuIzCwF,IAAI,mBACJ3G,MAAM,yBACN4G,SAAUnL,EAAMmF,OAChBiG,YAAapL,EAAMmF,SAErBoE,IAAAC,cAACuB,IAAM,CACLC,YAAY,2BACZC,QA5IY,WAAH,OAASvF,GAA0B,cA6I5CwF,IAAI,2BACJ3G,MAAM,4BACN4G,SAAUnL,EAAMoF,UAChBgG,YAAapL,EAAMoF,YAErBmE,IAAAC,cAACuB,IAAM,CACLC,YAAY,2BACZC,QArJY,WAAH,OAASvF,GAA0B,cAsJ5CwF,IAAI,4CACJ3G,MAAM,4BACN4G,SAAUnL,EAAMqF,UAChB+F,YAAapL,EAAMqF,cAIzBkE,IAAAC,cAAA,OAAKC,UAAU,mBACbF,IAAAC,cAAA,OAAKM,GAAG,yBAAyBL,UAAU,kBACxChH,EAAE,sCAEL8G,IAAAC,cAAA,OAAKC,UAAU,0BACbF,IAAAC,cAAC6B,IAAkB,CACjBvF,YAAaA,GACbhB,MAAOC,GACPuG,oBAAqBjD,GACrBkD,iBAAkBrD,GAClBsD,aAAcxD,GACdyD,cAAe1E,GACf2E,mBAAoB5C,GACpB6C,cAAe7C,GACftI,gBApHgB,SAAC6F,GAAM,OAAKD,GAAWC,EAAQ,SAqH/C3F,gBA5GkB,WAAH,OAASoH,GAAY,SA6GpC8D,eAAgB,yBAChBC,gBAAiB,EACjBC,cAAY,EACZC,YAAU,EACVC,cAAY,MAIlBzC,IAAAC,cAAA,OAAKC,UAAU,mBACbF,IAAAC,cAAA,OAAKM,GAAG,+BAA+BL,UAAU,kBAC9ChH,EAAE,4CAEL8G,IAAAC,cAAA,OAAKC,UAAU,0BACbF,IAAAC,cAAC6B,IAAkB,CACjBvF,YAAaA,GACbhB,MAAO2D,GACP6C,oBAAqBhD,GACrBiD,iBAAkBnD,GAClBoD,aAAcrD,GACdsD,cAAezE,GACf0E,mBAAoB1C,GACpB2C,cAAe3C,GACfxI,gBAjIsB,SAAC6F,GAAM,OAAKD,GAAWC,EAAQ,SAkIrD3F,gBAzHwB,WAAH,OAASoH,GAAY,SA0H1C8D,eAAgB,+BAChBC,gBAAiB,EACjBC,cAAY,EACZC,YAAU,EACVC,cAAY,MAIlBzC,IAAAC,cAAA,OAAKC,UAAU,uBACbF,IAAAC,cAAA,OAAKM,GAAG,kBAAkBL,UAAU,kBACjChH,EAAE,0CAEL8G,IAAAC,cAAA,OAAKC,UAAU,mBAAmBE,KAAK,QAAQsC,kBAAgB,mBAC7D1C,IAAAC,cAAC0C,IAAM,CACLpC,GAAG,mBACHqC,QAASrK,EACTmI,SAnPmB,WAC7BlI,GAAqBD,GACrB,IAAMa,EAAMxB,GAAsBW,EAAmBG,GAAgBG,EAAed,GACpFwB,EAAmBH,GACnB2B,GAAa/B,EAAqBI,IAgPxByJ,MAAO3J,EAAE,sCAEX8G,IAAAC,cAAC0C,IAAM,CACLpC,GAAG,eACHqC,QAASlK,EACTgI,SA3QqB,WAC/B/H,GAAiBD,GACjB,IAAMoK,EAAc9M,EAAuBiC,GAAwBS,EAAcG,GACjFR,EAAYyK,GACZ,IAAM1J,EAAMxB,EAAqBW,GAAoBG,GAAgBG,EAAeiK,GACpFvJ,EAAmBH,GACnB2B,GAAa/B,EAAqBI,IAsQxByJ,MAAO3J,EAAE,kCAEX8G,IAAAC,cAAC0C,IAAM,CACLpC,GAAG,eACHqC,QAAS/J,EACT6H,SAxQqB,WAC/B5H,GAAiBD,GACjB,IAAMiK,EAAc9M,EAAuBiC,EAAuBS,GAAeG,GACjFR,EAAYyK,GACZ,IAAM1J,EAAMxB,EAAqBW,EAAmBG,IAAiBG,EAAeiK,GACpFvJ,EAAmBH,GACnB2B,GAAa/B,EAAqBI,IAmQxByJ,MAAO3J,EAAE,qCAIbR,GAAgBG,IAAiBmH,IAAAC,cAAA,OAAKC,UAAU,yBAChDF,IAAAC,cAAA,OAAKC,UAAU,iBAAiBK,GAAG,kCAAkCrH,EAAE,uCACvE8G,IAAAC,cAAA,UACEC,UAAU,aACVC,IAAKxG,GACL+H,QAAS/G,GACT0F,aAAA,GAAA9J,OAAe2C,EAAE,6CACjB6D,KAAK,SACLgG,SAAS,IACTC,UAnVY,SAAC7I,GACH,UAAdA,EAAM8I,KAAiC,MAAd9I,EAAM8I,MACjC9I,EAAM+I,iBACNvI,OAiVMyB,MAAO,CACL+G,WAAY,OACZC,OAAQ,OACRC,QAAS,EACTC,QAAS,OACTC,WAAY,aACZC,OAAQ,YAGVxD,IAAAC,cAACU,IAAI,CAACC,MAAM,cACXnH,GACEuG,IAAAC,cAAA,OAAKC,UAAU,2BACdF,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,OAAKhH,EAAE,kCACzC8G,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,OAAKhH,EAAE,gCACzC8G,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,OAAKhH,EAAE,iCACzC8G,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,OAAKhH,EAAE,gCAAgC,WACzE8G,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,OAAKhH,EAAE,gCAAgC,WACzE8G,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,OAAKhH,EAAE,mCACzC8G,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,OAAKhH,EAAE,mCACzC8G,IAAAC,cAAA,OAAKC,UAAU,oBAAmB,eAKxCF,IAAAC,cAACa,IAAQ,CACPP,GAAG,oCACHQ,aAAa,iCACbC,MAAOrB,GACPsB,UAAS,GAAA1K,OAAK2C,EAAE,sCAAqC,OAAA3C,OAAMwB,GAC3DoJ,oBAAqBpJ,EACrBmJ,YA9RiB,SAACuC,GAC1BpL,EAAYoL,GACZ,IAAMrK,EAAMxB,EAAqBW,EAAmBG,GAAgBG,EAAe4K,GACnFlK,EAAmBH,GACnB2B,GAAa/B,EAAqBI,IA2R1BmI,UAAW,UAQvB/J,EAAkBhB,UAAYA,EAEfgB,Q,k1BChff,IAAA0F,EAAAhE,EAAAwK,EAAA,mBAAAC,cAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,aAAA,yBAAAC,EAAAN,EAAAE,EAAAE,EAAAE,GAAA,IAAAC,EAAAL,KAAAM,qBAAAC,EAAAP,EAAAO,EAAAC,EAAAC,OAAAC,OAAAL,EAAAC,WAAA,OAAAK,EAAAH,EAAA,mBAAAV,EAAAE,EAAAE,GAAA,IAAAE,EAAAC,EAAAG,EAAAI,EAAA,EAAAC,EAAAX,GAAA,GAAAY,GAAA,EAAAC,EAAA,CAAAF,EAAA,EAAAb,EAAA,EAAAgB,EAAA1H,EAAA2H,EAAAC,EAAAN,EAAAM,EAAAC,KAAA7H,EAAA,GAAA4H,EAAA,SAAA5L,EAAAwK,GAAA,OAAAM,EAAA9K,EAAA+K,EAAA,EAAAG,EAAAlH,EAAAyH,EAAAf,EAAAF,EAAAmB,IAAA,SAAAC,EAAApB,EAAAE,GAAA,IAAAK,EAAAP,EAAAU,EAAAR,EAAA1K,EAAA,GAAAwL,GAAAF,IAAAV,GAAA5K,EAAAuL,EAAArO,OAAA8C,IAAA,KAAA4K,EAAAE,EAAAS,EAAAvL,GAAA4L,EAAAH,EAAAF,EAAAO,EAAAhB,EAAA,GAAAN,EAAA,GAAAI,EAAAkB,IAAApB,KAAAQ,EAAAJ,GAAAC,EAAAD,EAAA,OAAAC,EAAA,MAAAD,EAAA,GAAAA,EAAA,GAAA9G,GAAA8G,EAAA,IAAAc,KAAAhB,EAAAJ,EAAA,GAAAoB,EAAAd,EAAA,KAAAC,EAAA,EAAAU,EAAAC,EAAAhB,EAAAe,EAAAf,EAAAI,EAAA,IAAAc,EAAAE,IAAAlB,EAAAJ,EAAA,GAAAM,EAAA,GAAAJ,KAAAoB,KAAAhB,EAAA,GAAAN,EAAAM,EAAA,GAAAJ,EAAAe,EAAAf,EAAAoB,EAAAf,EAAA,OAAAH,GAAAJ,EAAA,SAAAmB,EAAA,MAAAH,GAAA,EAAAd,EAAA,gBAAAE,EAAAW,EAAAO,GAAA,GAAAR,EAAA,QAAAS,UAAA,oCAAAP,GAAA,IAAAD,GAAAK,EAAAL,EAAAO,GAAAf,EAAAQ,EAAAL,EAAAY,GAAA9L,EAAA+K,EAAA,EAAA/G,EAAAkH,KAAAM,GAAA,CAAAV,IAAAC,IAAA,GAAAA,EAAA,IAAAU,EAAAf,GAAA,GAAAkB,EAAAb,EAAAG,IAAAO,EAAAf,EAAAQ,EAAAO,EAAAC,EAAAR,GAAA,OAAAI,EAAA,EAAAR,EAAA,IAAAC,IAAAH,EAAA,QAAA5K,EAAA8K,EAAAF,GAAA,MAAA5K,IAAAgM,KAAAlB,EAAAI,IAAA,MAAAa,UAAA,wCAAA/L,EAAAiM,KAAA,OAAAjM,EAAAkL,EAAAlL,EAAAuH,MAAAwD,EAAA,IAAAA,EAAA,YAAAA,IAAA/K,EAAA8K,EAAA,SAAA9K,EAAAgM,KAAAlB,GAAAC,EAAA,IAAAG,EAAAa,UAAA,oCAAAnB,EAAA,YAAAG,EAAA,GAAAD,EAAA9G,OAAA,IAAAhE,GAAAwL,EAAAC,EAAAf,EAAA,GAAAQ,EAAAV,EAAAwB,KAAAtB,EAAAe,MAAAE,EAAA,YAAA3L,GAAA8K,EAAA9G,EAAA+G,EAAA,EAAAG,EAAAlL,EAAA,QAAAsL,EAAA,UAAA/D,MAAAvH,EAAAiM,KAAAT,IAAA,CAAAhB,EAAAI,EAAAE,IAAA,GAAAI,EAAA,IAAAS,EAAA,YAAAV,KAAA,SAAAiB,KAAA,SAAAC,KAAAnM,EAAAmL,OAAAiB,eAAA,IAAArB,EAAA,GAAAL,GAAA1K,IAAA,GAAA0K,QAAAW,EAAArL,EAAA,GAAA0K,GAAA,0BAAA1K,GAAAkL,EAAAiB,EAAAnB,UAAAC,EAAAD,UAAAG,OAAAC,OAAAL,GAAA,SAAAO,EAAAtH,GAAA,OAAAmH,OAAAkB,eAAAlB,OAAAkB,eAAArI,EAAAmI,IAAAnI,EAAAsI,UAAAH,EAAAd,EAAArH,EAAA4G,EAAA,sBAAA5G,EAAAgH,UAAAG,OAAAC,OAAAF,GAAAlH,EAAA,OAAAkI,EAAAlB,UAAAmB,EAAAd,EAAAH,EAAA,cAAAiB,GAAAd,EAAAc,EAAA,cAAAD,KAAAK,YAAA,oBAAAlB,EAAAc,EAAAvB,EAAA,qBAAAS,EAAAH,GAAAG,EAAAH,EAAAN,EAAA,aAAAS,EAAAH,EAAAR,GAAA,0BAAAW,EAAAH,EAAA,sDAAAsB,EAAA,kBAAAC,EAAA3B,EAAA4B,EAAApB,OAAA,SAAAD,EAAArH,EAAAwG,EAAAE,EAAA1K,GAAA,IAAA8K,EAAAK,OAAAwB,eAAA,IAAA7B,EAAA,gBAAA9G,GAAA8G,EAAA,GAAAO,EAAA,SAAArH,EAAAwG,EAAAE,EAAA1K,GAAA,GAAAwK,EAAAM,IAAA9G,EAAAwG,EAAA,CAAAjD,MAAAmD,EAAAkC,YAAA5M,EAAA6M,cAAA7M,EAAA8M,UAAA9M,IAAAgE,EAAAwG,GAAAE,MAAA,KAAAE,EAAA,SAAAJ,EAAAE,GAAAW,EAAArH,EAAAwG,GAAA,SAAAxG,GAAA,YAAA+I,QAAAvC,EAAAE,EAAA1G,OAAA4G,EAAA,UAAAA,EAAA,WAAAA,EAAA,eAAA5G,EAAAwG,EAAAE,EAAA1K,GAAA,SAAAgN,EAAAtC,EAAA1K,EAAAgE,EAAAwG,EAAAI,EAAAe,EAAAZ,GAAA,QAAAD,EAAAJ,EAAAiB,GAAAZ,GAAAG,EAAAJ,EAAAvD,MAAA,MAAAmD,GAAA,YAAA1G,EAAA0G,GAAAI,EAAAmB,KAAAjM,EAAAkL,GAAA+B,QAAAC,QAAAhC,GAAAiC,KAAA3C,EAAAI,GAAA,SAAAwC,EAAA1C,GAAA,sBAAA1K,EAAA,KAAAgE,EAAA/G,UAAA,WAAAgQ,SAAA,SAAAzC,EAAAI,GAAA,IAAAe,EAAAjB,EAAA2C,MAAArN,EAAAgE,GAAA,SAAAsJ,EAAA5C,GAAAsC,EAAArB,EAAAnB,EAAAI,EAAA0C,EAAAC,EAAA,OAAA7C,GAAA,SAAA6C,EAAA7C,GAAAsC,EAAArB,EAAAnB,EAAAI,EAAA0C,EAAAC,EAAA,QAAA7C,GAAA4C,OAAA,gBAAArO,EAAAuL,EAAAxG,GAAA,gBAAAwG,GAAA,GAAA9D,MAAA8G,QAAAhD,GAAA,OAAAA,EAAAiD,CAAAjD,IAAA,SAAAA,EAAAsB,GAAA,IAAA9L,EAAA,MAAAwK,EAAA,yBAAAC,QAAAD,EAAAC,OAAAE,WAAAH,EAAA,uBAAAxK,EAAA,KAAAgE,EAAA0G,EAAAI,EAAAI,EAAAS,EAAA,GAAAL,GAAA,EAAAV,GAAA,SAAAE,GAAA9K,IAAAgM,KAAAxB,IAAAkD,KAAA,IAAA5B,EAAA,IAAAX,OAAAnL,OAAA,OAAAsL,GAAA,cAAAA,GAAAtH,EAAA8G,EAAAkB,KAAAhM,IAAAiM,QAAAN,EAAA9G,KAAAb,EAAAuD,OAAAoE,EAAAzO,SAAA4O,GAAAR,GAAA,UAAAd,GAAAI,GAAA,EAAAF,EAAAF,EAAA,gBAAAc,GAAA,MAAAtL,EAAA,SAAAkL,EAAAlL,EAAA,SAAAmL,OAAAD,QAAA,kBAAAN,EAAA,MAAAF,GAAA,OAAAiB,GAAAgC,CAAAnD,EAAAxG,IAAA4J,EAAApD,EAAAxG,IAAA,qBAAA+H,UAAA,6IAAA8B,GAAA,SAAAD,EAAApD,EAAAmB,GAAA,GAAAnB,EAAA,qBAAAA,EAAA,OAAAsD,EAAAtD,EAAAmB,GAAA,IAAA3L,EAAA,GAAA+N,SAAA/B,KAAAxB,GAAAwD,MAAA,uBAAAhO,GAAAwK,EAAAyD,cAAAjO,EAAAwK,EAAAyD,YAAAC,MAAA,QAAAlO,GAAA,QAAAA,EAAA0G,MAAAC,KAAA6D,GAAA,cAAAxK,GAAA,2CAAAmO,KAAAnO,GAAA8N,EAAAtD,EAAAmB,QAAA,YAAAmC,EAAAtD,EAAAmB,IAAA,MAAAA,KAAAnB,EAAAtN,UAAAyO,EAAAnB,EAAAtN,QAAA,QAAA8G,EAAA,EAAA0G,EAAAhE,MAAAiF,GAAA3H,EAAA2H,EAAA3H,IAAA0G,EAAA1G,GAAAwG,EAAAxG,GAAA,OAAA0G,EAcA,IACM0D,EAAa3J,OAAOC,KAAKC,MAAMC,sBAAmC,YAkKzDyJ,EAhKU,WACvB,IAAQ7P,EAASC,cAATD,KACmFQ,EAAAC,EAAjEC,mBAAS,CAAEsD,KAAM,YAAaC,MAAM,EAAMJ,MAAO+L,EAAW,KAAK,GAApF7Q,EAAKyB,EAAA,GAAEtB,EAAQsB,EAAA,GAChBsP,EAAiB9P,EAAK+P,+BANZ,+BAOTvO,EAAqBf,EAAhBgB,cAAgB,GAApB,GACFuO,EAAQC,cACqCrP,EAAAH,EAAfC,oBAAS,GAAM,GAA5CwP,EAAUtP,EAAA,GAAExB,EAAawB,EAAA,GAC1BuP,EAA6BjO,iBAAO,MACpCkO,EAAkBlO,iBAAO,MAM7BmO,EAAA5P,EALiD6P,aAAY,SAACvR,GAAK,MAAK,CACxEwR,IAAUC,cAAczR,EAAO0R,IAAaC,oBAC5CH,IAAUI,SAAS5R,GACnBwR,IAAUK,mBAAmB7R,GAC7BwR,IAAUM,YAAY9R,OACtB,GALK+R,EAAMT,EAAA,GAAEhR,EAAKgR,EAAA,GAAE3Q,EAAe2Q,EAAA,GAAEzQ,EAAQyQ,EAAA,GAMzCU,EAAWC,cAEXC,EAAiB,WACrB,IAAMC,EAA6Bf,EAA2BzN,QAC9D,GAAKwO,EAAL,CAIA,IAAMC,EAAwBf,EAAgB1N,QAC9C,GAAKyO,EAAL,CAIA,IAAMC,EAAuBF,EAA2BG,wBAClDC,EAAqBH,EAAsBE,wBAC3CE,EAAkBH,EAAqBxN,OAAS,GAAK0N,EAAmB1N,QAAUwN,EAAqBxN,OAG3GuN,EAAsBzM,MAAM8M,SAD1BD,EACqC,OAEA,aAI3CE,2BAAgB,WACd,GAAKX,EAML,OAHAG,IACAhL,OAAOlD,iBAAiB,SAAUkO,GAE3B,WACLhL,OAAOjD,oBAAoB,SAAUiO,MAEtC,CAACH,IAEJjO,qBAAU,WACJiO,GACF9Q,EAAK0R,2BAEN,CAACZ,IAEJ,IAAMa,EAAaC,aAAgB,WACjCb,EAASc,IAAQC,aAAarB,IAAaC,wBAavCjR,EAAe,eAAAM,EAAA6O,EAAAZ,IAAAE,GAAG,SAAA6D,EAAOC,GAAS,IAAAC,EAAA3O,EAAA4O,EAAAC,EAAA,OAAAnE,IAAAC,GAAA,SAAAmE,GAAA,cAAAA,EAAAlG,GAAA,OAChC+F,EAAUzQ,EAAE,qCACZ8B,EAAQ9B,EAAE,mCACV0Q,EAAiB1Q,EAAE,aAEnB2Q,EAAU,CACdF,UACA3O,QACA4O,iBACAF,aAEFjB,EAASc,IAAQQ,mBAAmBF,IAAU,cAAAC,EAAAjF,EAAA,MAAA4E,OAC/C,gBAZoBO,GAAA,OAAAvS,EAAA8O,MAAA,KAAApQ,YAAA,GAcf8T,EAAazJ,IAAW,CAC5B0J,OAAO,EACP3C,kBAAkB,EAClB4C,KAAM3B,EACN4B,QAAS5B,IAGL6B,EAAiB,eAAAC,EAAAhE,EAAAZ,IAAAE,GAAG,SAAA2E,IAAA,IAAAC,EAAAC,EAAApT,EAAAqT,EAAAC,EAAAC,EAAAC,EAAA,OAAAnF,IAAAC,GAAA,SAAAmF,GAAA,cAAAA,EAAArG,EAAAqG,EAAAlH,GAAA,OACxBlM,EAAKqT,YAhGS,+BAgGcP,EAAAQ,EACJxD,GAAcsD,EAAArG,EAAA,EAAA+F,EAAAS,IAAA,WAAAR,EAAAD,EAAA5G,KAAAuB,KAAE,CAAF2F,EAAAlH,EAAA,QACJ,OADvBvM,EAASoT,EAAAhK,OACRyK,eAAezU,GAAOqU,EAAAlH,EAAA,EACZvM,EAAU8T,4BAA4B1U,GAAM,OAArD,OAALiU,EAAKI,EAAAlG,EAAAkG,EAAAlH,EAAG,EACRvM,EAAU+T,eAAeV,GAAM,OACrCrT,EAAUgU,cAAc,OAAAP,EAAAlH,EAAA,eAAAkH,EAAAlH,EAAA,eAAAkH,EAAArG,EAAA,EAAAoG,EAAAC,EAAAlG,EAAA4F,EAAAtN,EAAA2N,GAAA,cAAAC,EAAArG,EAAA,EAAA+F,EAAAhG,IAAAsG,EAAAtG,EAAA,UAE1BiE,EAASc,IAAQC,aAAarB,IAAaC,qBACrCuC,EAAqBnD,EAAe,GAAG8D,oBAAoBlV,OAC3DwU,EAAmBpD,EAAe,GAAG+D,kBAAkBnV,OAC7DqS,EAASc,IAAQiC,sBAAsBb,EAAqBC,EAAmB,IAAI,eAAAE,EAAAjG,EAAA,MAAA0F,EAAA,sBACpF,kBAZsB,OAAAD,EAAA/D,MAAA,KAAApQ,YAAA,GAcjBsV,EAA2BnC,aAAgB,WAC3C1B,GAGJyC,OAGF,OACE7B,EACExI,IAAAC,cAAA,OACEC,UAAW+J,EACXyB,eAAcvD,IAAaC,mBAC3BjI,IAAK0H,GAEL7H,IAAAC,cAAC0L,IAAY,CACXxL,IAAK2H,EACL9M,MAAO9B,EAAE,qCACT0S,aAAcvC,EACdwC,aAAcxC,EACdb,OAAQA,EACRsD,cAAY,GAEZ9L,IAAAC,cAAA,OAAKC,UAAU,YAAY6L,YAAa,SAAC7O,GAAC,OAAKA,EAAE8O,oBAC/ChM,IAAAC,cAACzI,EAAiB,CAChBL,gBAAiBA,EACjBD,wBAlEoB,WAC9B,IAAM+U,EAAchE,IAAUiE,eAAexE,EAAMyE,YAEnD,OADA1D,EAASc,IAAQ6C,eAAe,OACzBH,GAgEGhV,gBAvEY,WACtBwR,EAASc,IAAQ8C,YAAY,sBAuEnBC,YAAa9D,EACb/R,MAAOA,EACPG,SAAUA,EACVyS,WAAYA,EACZvS,cAAeA,EACfC,MAAOA,EACPK,gBAAiBA,EACjBC,UAAWmQ,EAAe,GAC1BlQ,SAAUA,IAEZ0I,IAAAC,cAAA,OAAKC,UAAU,UACbF,IAAAC,cAACuB,IAAM,CACLqB,MAAO3J,EAAE,iBACT8B,MAAO9B,EAAE,iBACTwI,QAAS+J,EACTc,SAAU3E,EACV1H,UAAU,qBAOpB,MC5KSsM","file":"chunks/chunk.51.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Choice from 'components/Choice';\nimport Dropdown from 'components/Dropdown';\nimport Button from 'components/Button';\nimport Icon from 'components/Icon';\nimport ColorPalettePicker from 'components/ColorPalettePicker/ColorPalettePicker'; // ColorPalletPicker inner import required as we are not using the redux outer container\nimport Events from 'constants/events';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport useCore from 'hooks/useCore';\n\nimport './CustomStampForums.scss';\nimport { getInstanceNode } from 'helpers/getRootNode';\nimport { COMMON_COLORS } from 'constants/commonColors';\n\nconst FALLBACK_DATE_TIME_FORMAT = {\n  date: 'MM/DD/YYYY',\n  time: 'hh:mm A',\n  timeFirst: false,\n};\n\nconst dateTimeFormatToString = (format, useDate = true, useTime = true) => {\n  if (!useDate) {\n    if (!format.time) {\n      return '';\n    }\n    return format.time;\n  }\n  if (!useTime) {\n    if (!format.date) {\n      return '';\n    }\n    return format.date;\n  }\n  return format.timeFirst ?\n    `${format.time} ${format.date}` :\n    `${format.date} ${format.time}`;\n};\n\nconst propTypes = {\n  state: PropTypes.object,\n  setState: PropTypes.func,\n  setEmptyInput: PropTypes.func,\n  fonts: PropTypes.array,\n  openColorPicker: PropTypes.func,\n  getCustomColorAndRemove: PropTypes.func,\n  openDeleteModal: PropTypes.func,\n  dateTimeFormats: PropTypes.array,\n  stampTool: PropTypes.object,\n  userName: PropTypes.string,\n};\n\nconst CustomStampForums = ({\n  state,\n  setState,\n  setEmptyInput,\n  fonts,\n  openColorPicker,\n  getCustomColorAndRemove,\n  openDeleteModal,\n  dateTimeFormats,\n  stampTool,\n  userName,\n}) => {\n  const { core } = useCore();\n  const updateTimestampLabel = (usernameChk, dateChk, dateTime) => {\n    let tmpText = '';\n    if (usernameChk) {\n      tmpText += '[$currentUser] ';\n    }\n    if (dateChk) {\n      tmpText += dateTime;\n    }\n    return tmpText;\n  };\n\n  const defaultDateTimeFormat = dateTimeFormats && dateTimeFormats[0] ? dateTimeFormats[0] : FALLBACK_DATE_TIME_FORMAT;\n  const [dateTime, setDateTime] = useState(dateTimeFormatToString(defaultDateTimeFormat));\n  const [usernameCheckbox, setUsernameCheckbox] = useState(true);\n  const [dateCheckbox, setDateCheckbox] = useState(true);\n  const [timeCheckbox, setTimeCheckbox] = useState(true);\n\n  const [stampTextInputValue, setStampText] = useState('Draft');\n  const [t] = useTranslation();\n\n  const txt = updateTimestampLabel(usernameCheckbox, dateCheckbox, dateTime);\n  const [timestampFormat, setTimestampFormat] = useState(txt);\n\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n  const tooltipRef = useRef(null);\n  const currentUser = core.getCurrentUser();\n  const currentDateTime = new Date().toLocaleString();\n\n  const handleClickOutside = (event) => {\n    if (tooltipRef.current && !tooltipRef.current.contains(event.target)) {\n      setTooltipVisible(false);\n    }\n  };\n\n  useEffect(() => {\n    if (tooltipVisible) {\n      document.addEventListener('click', handleClickOutside);\n    } else {\n      document.removeEventListener('click', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [tooltipVisible]);\n\n  const handleTooltipClick = () => {\n    setTooltipVisible(!tooltipVisible);\n  };\n\n  const handleKeyDown = (event) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault(); // Prevent default action for space key\n      handleTooltipClick();\n    }\n  };\n\n  const canvasRef = useRef();\n  const canvasContainerRef = useRef();\n  const inputRef = useRef();\n\n  const updateCanvas = (title, subtitle, newState = state) => {\n    const parameters = {\n      canvas: canvasRef.current,\n      title,\n      subtitle,\n      width: 300,\n      height: 100,\n      color: newState.color,\n      textColor: newState.textColor,\n      canvasParent: canvasContainerRef.current,\n      font: newState.font,\n      bold: newState.bold,\n      italic: newState.italic,\n      underline: newState.underline,\n      strikeout: newState.strikeout,\n    };\n\n    const width = stampTool.drawCustomStamp(parameters);\n    const dataURL = canvasRef.current.toDataURL();\n\n    setState({\n      ...newState,\n      width,\n      title,\n      subtitle,\n      height: parameters.height,\n      dataURL,\n    });\n  };\n\n  const handleInputChange = (e) => {\n    const value = e.target.value || '';\n    setStampText(value);\n    setEmptyInput(!value);\n    updateCanvas(value, timestampFormat);\n  };\n\n  useEffect(() => {\n    updateCanvas(stampTextInputValue, timestampFormat, state);\n  }, [userName]);\n\n  const handleDateCheckboxChange = () => {\n    setDateCheckbox(!dateCheckbox);\n    const newDateTime = dateTimeFormatToString(defaultDateTimeFormat, !dateCheckbox, timeCheckbox);\n    setDateTime(newDateTime);\n    const txt = updateTimestampLabel(usernameCheckbox, (!dateCheckbox || timeCheckbox), newDateTime);\n    setTimestampFormat(txt);\n    updateCanvas(stampTextInputValue, txt);\n  };\n\n  const handleTimeCheckboxChange = () => {\n    setTimeCheckbox(!timeCheckbox);\n    const newDateTime = dateTimeFormatToString(defaultDateTimeFormat, dateCheckbox, !timeCheckbox);\n    setDateTime(newDateTime);\n    const txt = updateTimestampLabel(usernameCheckbox, (dateCheckbox || !timeCheckbox), newDateTime);\n    setTimestampFormat(txt);\n    updateCanvas(stampTextInputValue, txt);\n  };\n\n  const handleUsernameCheckbox = () => {\n    setUsernameCheckbox(!usernameCheckbox);\n    const txt = updateTimestampLabel(!usernameCheckbox, (dateCheckbox || timeCheckbox), dateTime);\n    setTimestampFormat(txt);\n    updateCanvas(stampTextInputValue, txt);\n  };\n\n  const handleFontChange = (font) => {\n    updateCanvas(stampTextInputValue, timestampFormat, {\n      ...state,\n      font,\n    });\n  };\n\n  const onDateFormatChange = (newFormat) => {\n    setDateTime(newFormat);\n    const txt = updateTimestampLabel(usernameCheckbox, (dateCheckbox || timeCheckbox), newFormat);\n    setTimestampFormat(txt);\n    updateCanvas(stampTextInputValue, txt);\n  };\n\n  const handleRichTextStyleChange = (style) => {\n    updateCanvas(stampTextInputValue, timestampFormat, {\n      ...state,\n      [style]: !state[style],\n    });\n  };\n\n  const toggleBold = () => handleRichTextStyleChange('bold');\n  const toggleItalic = () => handleRichTextStyleChange('italic');\n  const toggleStrikeout = () => handleRichTextStyleChange('strikeout');\n  const toggleUnderline = () => handleRichTextStyleChange('underline');\n\n  const stampInputLabel = t('option.customStampModal.stampText');\n\n  const getHexColor = (givenColor) => {\n    if (givenColor && givenColor.A) {\n      return givenColor.toHexString().toLowerCase();\n    }\n    return COMMON_COLORS['black'];\n  };\n  const openPicker = (addNew, type) => {\n    const isText = type === 'text';\n    openColorPicker();\n    const handleVisiblityChanged = (e) => {\n      const { element, isVisible } = e.detail;\n      if (element === 'ColorPickerModal' && !isVisible) {\n        const color = getCustomColorAndRemove();\n        if (color) {\n          const colorToBeAdded = getHexColor(color);\n          isText ? setTextColor(colorToBeAdded) : setBackgroundColor(colorToBeAdded);\n          const toolColors = window.Core.Tools.RubberStampCreateTool[isText ? 'TEXT_COLORS' : 'FILL_COLORS'];\n          toolColors.push(colorToBeAdded);\n          isText ? setTextColors(toolColors) : setBackgroundColors(toolColors);\n          state = {\n            ...state,\n            [isText ? 'textColor' : 'color']: colorToBeAdded,\n          };\n          updateCanvas(stampTextInputValue, timestampFormat, state);\n        }\n        getInstanceNode().instance.UI.removeEventListener(Events.VISIBILITY_CHANGED, handleVisiblityChanged);\n      }\n    };\n    getInstanceNode().instance.UI.addEventListener(Events.VISIBILITY_CHANGED, handleVisiblityChanged);\n  };\n  const deleteColor = (type) => {\n    const isText = type === 'text';\n    openDeleteModal(() => {\n      const newColors = isText ?\n        textColors.filter((color) => color !== textColorToBeDeleted) :\n        backgroundColors.filter((color) => color !== backgroundColorToBeDeleted);\n      isText ? setTextColors(newColors) : setBackgroundColors(newColors);\n      isText ? setTextColorToBeDeleted(null) : setBackgroundColorToBeDeleted(null);\n      window.Core.Tools.RubberStampCreateTool[isText ? 'TEXT_COLORS' : 'FILL_COLORS'] = newColors;\n    });\n  };\n\n  const [backgroundColors, setBackgroundColors] = useState(window.Core.Tools.RubberStampCreateTool['FILL_COLORS']);\n  const [backgroundColor, setBackgroundColor] = useState(state.color || window.Core.Tools.RubberStampCreateTool['FILL_COLORS'][0]);\n  const [backgroundColorToBeDeleted, setBackgroundColorToBeDeleted] = useState(null);\n\n  const [textColors, setTextColors] = useState(window.Core.Tools.RubberStampCreateTool['TEXT_COLORS']);\n  const [textColor, setTextColor] = useState(window.Core.Tools.RubberStampCreateTool['TEXT_COLORS'][0]);\n  const [textColorToBeDeleted, setTextColorToBeDeleted] = useState(null);\n\n  const openColorPickerText = (addNew) => openPicker(addNew, 'text');\n  const handleTextColorChange = (newColor) => {\n    setTextColor(newColor);\n    state = {\n      ...state,\n      textColor: newColor,\n    };\n    updateCanvas(stampTextInputValue, timestampFormat, state);\n  };\n  const handleTextColorDelete = () => deleteColor('text');\n\n  const openColorPickerBackground = (addNew) => openPicker(addNew, 'fill');\n  const handleBackgroundColorChange = (newColor) => {\n    setBackgroundColor(newColor);\n    state = {\n      ...state,\n      color: newColor,\n    };\n    updateCanvas(stampTextInputValue, timestampFormat, state);\n  };\n  const handleBackgroundColorDelete = () => deleteColor('fill');\n\n  const formatsList = dateTimeFormats || [FALLBACK_DATE_TIME_FORMAT];\n  const dateTimeDropdownItems = Array.from(new Set(\n    formatsList.map((format) => dateTimeFormatToString(format, dateCheckbox, timeCheckbox))\n  )).filter((format) => format !== '');\n\n\n  return (\n    <div className=\"text-customstamp\">\n      <div className=\"canvas-container\" ref={canvasContainerRef}>\n        <canvas\n          className=\"custom-stamp-canvas\"\n          ref={canvasRef}\n          role={'img'}\n          aria-label={`${t('option.customStampModal.previewCustomStamp')} ${stampTextInputValue}, ${currentUser} ${currentDateTime}`}\n        />\n      </div>\n      <div className=\"scroll-container\">\n        <div className=\"stamp-input-container\">\n          <label htmlFor=\"stampTextInput\" className=\"stamp-label\"> {stampInputLabel}*</label>\n          <input\n            id=\"stampTextInput\"\n            className={classNames('text-customstamp-input', { 'error': !stampTextInputValue })}\n            ref={inputRef}\n            type=\"text\"\n            aria-label={stampInputLabel}\n            value={stampTextInputValue}\n            onChange={handleInputChange}\n          />\n          {!stampTextInputValue && <Icon glyph=\"icon-alert\" className=\"error-icon\" role=\"presentation\" />}\n          <div className=\"empty-stamp-input\" aria-live=\"assertive\" >\n            {!stampTextInputValue && <p className=\"no-margin\">{t('message.emptyCustomStampInput')}</p>}\n          </div>\n        </div>\n        <div className=\"font-container\">\n          <div className=\"stamp-sublabel\" id=\"custom-stamp-font-family-label\"> {t('option.customStampModal.fontStyle')} </div>\n          <div className=\"font-inner-container\">\n            <Dropdown\n              id='custom-stamp-font'\n              labelledById='custom-stamp-font-family-label'\n              items={fonts}\n              ariaLabel={t('option.customStampModal.fontStyle')}\n              onClickItem={handleFontChange}\n              currentSelectionKey={state.font || fonts[0]}\n              getCustomItemStyle={(item) => ({ fontFamily: item })}\n              maxHeight={200}\n            />\n            <Button\n              dataElement=\"stampTextBoldButton\"\n              onClick={toggleBold}\n              img=\"icon-menu-bold\"\n              title=\"option.richText.bold\"\n              isActive={state.bold}\n              ariaPressed={state.bold}\n            />\n            <Button\n              dataElement=\"stampTextItalicButton\"\n              onClick={toggleItalic}\n              img=\"icon-menu-italic\"\n              title=\"option.richText.italic\"\n              isActive={state.italic}\n              ariaPressed={state.italic}\n            />\n            <Button\n              dataElement=\"stampTextUnderlineButton\"\n              onClick={toggleUnderline}\n              img=\"icon-menu-text-underline\"\n              title=\"option.richText.underline\"\n              isActive={state.underline}\n              ariaPressed={state.underline}\n            />\n            <Button\n              dataElement=\"stampTextStrikeoutButton\"\n              onClick={toggleStrikeout}\n              img=\"icon-tool-text-manipulation-strikethrough\"\n              title=\"option.richText.strikeout\"\n              isActive={state.strikeout}\n              ariaPressed={state.strikeout}\n            />\n          </div>\n        </div>\n        <div className=\"color-container\">\n          <div id='stamp-text-color-label' className=\"stamp-sublabel\">\n            {t('option.customStampModal.textColor')}\n          </div>\n          <div className=\"colorpalette-container\">\n            <ColorPalettePicker\n              getHexColor={getHexColor}\n              color={textColor}\n              setColorToBeDeleted={setTextColorToBeDeleted}\n              colorToBeDeleted={textColorToBeDeleted}\n              customColors={textColors}\n              onStyleChange={setTextColor}\n              handleColorOnClick={handleTextColorChange}\n              handleOnClick={handleTextColorChange}\n              openColorPicker={openColorPickerText}\n              openDeleteModal={handleTextColorDelete}\n              ariaLabelledBy={'stamp-text-color-label'}\n              toolTipXOffset={-7}\n              disableTitle\n              enableEdit\n              colorsAreHex\n            />\n          </div>\n        </div>\n        <div className=\"color-container\">\n          <div id=\"stamp-background-color-label\" className=\"stamp-sublabel\">\n            {t('option.customStampModal.backgroundColor')}\n          </div>\n          <div className=\"colorpalette-container\">\n            <ColorPalettePicker\n              getHexColor={getHexColor}\n              color={backgroundColor}\n              setColorToBeDeleted={setBackgroundColorToBeDeleted}\n              colorToBeDeleted={backgroundColorToBeDeleted}\n              customColors={backgroundColors}\n              onStyleChange={setBackgroundColor}\n              handleColorOnClick={handleBackgroundColorChange}\n              handleOnClick={handleBackgroundColorChange}\n              openColorPicker={openColorPickerBackground}\n              openDeleteModal={handleBackgroundColorDelete}\n              ariaLabelledBy={'stamp-background-color-label'}\n              toolTipXOffset={-7}\n              disableTitle\n              enableEdit\n              colorsAreHex\n            />\n          </div>\n        </div>\n        <div className=\"timestamp-container\">\n          <div id=\"timestamp-label\" className=\"stamp-sublabel\">\n            {t('option.customStampModal.timestampText')}\n          </div>\n          <div className=\"timeStamp-choice\" role=\"group\" aria-labelledby=\"timestamp-label\">\n            <Choice\n              id=\"default-username\"\n              checked={usernameCheckbox}\n              onChange={handleUsernameCheckbox}\n              label={t('option.customStampModal.Username')}\n            />\n            <Choice\n              id=\"default-date\"\n              checked={dateCheckbox}\n              onChange={handleDateCheckboxChange}\n              label={t('option.customStampModal.Date')}\n            />\n            <Choice\n              id=\"default-time\"\n              checked={timeCheckbox}\n              onChange={handleTimeCheckboxChange}\n              label={t('option.customStampModal.Time')}\n            />\n          </div>\n        </div>\n        {(dateCheckbox || timeCheckbox) && <div className=\"date-format-container\">\n          <div className=\"stamp-sublabel\" id=\"custom-stamp-date-format-label\">{t('option.customStampModal.dateFormat')}</div>\n          <button\n            className=\"hover-icon\"\n            ref={tooltipRef}\n            onClick={handleTooltipClick}\n            aria-label={`${t('option.customStampModal.dateToolTipLabel')}`}\n            type=\"button\"\n            tabIndex=\"0\"\n            onKeyDown={handleKeyDown}\n            style={{\n              background: 'none',\n              border: 'none',\n              padding: 0,\n              display: 'flex',\n              alignItems: 'flex-start', // Aligns the content to the top\n              cursor: 'pointer'\n            }}\n          >\n            <Icon glyph=\"icon-info\" />\n            {tooltipVisible &&\n              (<div className=\"date-format-description\">\n                <div className=\"date-format-cell\">M = {t('option.customStampModal.month')}</div>\n                <div className=\"date-format-cell\">D = {t('option.customStampModal.day')}</div>\n                <div className=\"date-format-cell\">Y = {t('option.customStampModal.year')}</div>\n                <div className=\"date-format-cell\">H = {t('option.customStampModal.hour')} (24hr)</div>\n                <div className=\"date-format-cell\">h = {t('option.customStampModal.hour')} (12hr)</div>\n                <div className=\"date-format-cell\">m = {t('option.customStampModal.minute')}</div>\n                <div className=\"date-format-cell\">s = {t('option.customStampModal.second')}</div>\n                <div className=\"date-format-cell\">A = AM/PM</div>\n              </div>\n              )\n            }\n          </button>\n          <Dropdown\n            id='custom-stamp-date-format-dropdown'\n            labelledById='custom-stamp-date-format-label'\n            items={dateTimeDropdownItems}\n            ariaLabel={`${t('option.customStampModal.dateFormat')} - ${dateTime}`}\n            currentSelectionKey={dateTime}\n            onClickItem={onDateFormatChange}\n            maxHeight={200}\n          />\n        </div>}\n      </div>\n    </div>\n  );\n};\n\nCustomStampForums.propTypes = propTypes;\n\nexport default CustomStampForums;\n","import React, { useEffect, useState, useRef, useLayoutEffect } from 'react';\nimport classNames from 'classnames';\nimport { useSelector, useDispatch, useStore } from 'react-redux';\nimport useCore from 'hooks/useCore';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { useTranslation } from 'react-i18next';\nimport CustomStampForums from './CustomStampForums';\nimport Button from 'components/Button';\nimport DataElements from 'constants/dataElement';\nimport ModalWrapper from 'components/ModalWrapper';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\n\nimport './CreateStampModal.scss';\n\nconst TOOL_NAME = 'AnnotationCreateRubberStamp';\nconst fillColors = window.Core.Tools.RubberStampCreateTool['FILL_COLORS'];\n\nconst CustomStampModal = () => {\n  const { core } = useCore();\n  const [state, setState] = useState({ font: 'Helvetica', bold: true, color: fillColors[0] });\n  const stampToolArray = core.getToolsFromAllDocumentViewers(TOOL_NAME);\n  const [t] = useTranslation();\n  const store = useStore();\n  const [emptyInput, setEmptyInput] = useState(false);\n  const customStampModalOverlayRef = useRef(null);\n  const modalWrapperRef = useRef(null);\n  const [isOpen, fonts, dateTimeFormats, userName] = useSelector((state) => [\n    selectors.isElementOpen(state, DataElements.CUSTOM_STAMP_MODAL),\n    selectors.getFonts(state),\n    selectors.getDateTimeFormats(state),\n    selectors.getUserName(state),\n  ]);\n  const dispatch = useDispatch();\n\n  const updateOverflow = () => {\n    const currentModalOverlayElement = customStampModalOverlayRef.current;\n    if (!currentModalOverlayElement) {\n      return;\n    }\n\n    const modalElementContainer = modalWrapperRef.current;\n    if (!modalElementContainer) {\n      return;\n    }\n\n    const customStampModalRect = currentModalOverlayElement.getBoundingClientRect();\n    const modalContainerRect = modalElementContainer.getBoundingClientRect();\n    const enableScrollBar = customStampModalRect.height > 0 && modalContainerRect.height >= customStampModalRect.height;\n\n    if (enableScrollBar) {\n      modalElementContainer.style.overflow = 'auto';\n    } else {\n      modalElementContainer.style.overflow = 'visible';\n    }\n  };\n\n  useLayoutEffect(() => {\n    if (!isOpen) {\n      return;\n    }\n    updateOverflow();\n    window.addEventListener('resize', updateOverflow);\n\n    return () => {\n      window.removeEventListener('resize', updateOverflow);\n    };\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (isOpen) {\n      core.deselectAllAnnotations();\n    }\n  }, [isOpen]);\n\n  const closeModal = useFocusOnClose(() => {\n    dispatch(actions.closeElement(DataElements.CUSTOM_STAMP_MODAL));\n  });\n\n  const openColorPicker = () => {\n    dispatch(actions.openElement('ColorPickerModal'));\n  };\n\n  const getCustomColorAndRemove = () => {\n    const customColor = selectors.getCustomColor(store.getState());\n    dispatch(actions.setCustomColor(null));\n    return customColor;\n  };\n\n  const openDeleteModal = async (onConfirm) => {\n    const message = t('warning.colorPicker.deleteMessage');\n    const title = t('warning.colorPicker.deleteTitle');\n    const confirmBtnText = t('action.ok');\n\n    const warning = {\n      message,\n      title,\n      confirmBtnText,\n      onConfirm,\n    };\n    dispatch(actions.showWarningMessage(warning));\n  };\n\n  const modalClass = classNames({\n    Modal: true,\n    CustomStampModal: true,\n    open: isOpen,\n    closed: !isOpen,\n  });\n\n  const createCustomStamp = async () => {\n    core.setToolMode(TOOL_NAME);\n    for (const stampTool of stampToolArray) {\n      stampTool.addCustomStamp(state);\n      const annot = await stampTool.createCustomStampAnnotation(state);\n      await stampTool.setRubberStamp(annot);\n      stampTool.showPreview();\n    }\n    dispatch(actions.closeElement(DataElements.CUSTOM_STAMP_MODAL));\n    const standardStampCount = stampToolArray[0].getStandardStamps().length;\n    const customStampCount = stampToolArray[0].getCustomStamps().length;\n    dispatch(actions.setSelectedStampIndex(standardStampCount + customStampCount - 1));\n  };\n\n  const onCreateCustomStampClick = useFocusOnClose(() => {\n    if (emptyInput) {\n      return;\n    }\n    createCustomStamp();\n  });\n\n  return (\n    isOpen ?\n      <div\n        className={modalClass}\n        data-element={DataElements.CUSTOM_STAMP_MODAL}\n        ref={customStampModalOverlayRef}\n      >\n        <ModalWrapper\n          ref={modalWrapperRef}\n          title={t('option.customStampModal.modalName')}\n          closeHandler={closeModal}\n          onCloseClick={closeModal}\n          isOpen={isOpen}\n          swipeToClose\n        >\n          <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\n            <CustomStampForums\n              openDeleteModal={openDeleteModal}\n              getCustomColorAndRemove={getCustomColorAndRemove}\n              openColorPicker={openColorPicker}\n              isModalOpen={isOpen}\n              state={state}\n              setState={setState}\n              closeModal={closeModal}\n              setEmptyInput={setEmptyInput}\n              fonts={fonts}\n              dateTimeFormats={dateTimeFormats}\n              stampTool={stampToolArray[0]}\n              userName={userName}\n            />\n            <div className=\"footer\">\n              <Button\n                label={t('action.create')}\n                title={t('action.create')}\n                onClick={onCreateCustomStampClick}\n                disabled={emptyInput}\n                className=\"stamp-create\"\n              />\n            </div>\n          </div>\n        </ModalWrapper>\n      </div>\n      :\n      null\n  );\n};\n\nexport default CustomStampModal;\n","import CreateStampModal from './CreateStampModal';\n\nexport default CreateStampModal;\n"],"sourceRoot":""}