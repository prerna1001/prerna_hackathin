{"version":3,"sources":["webpack:///./src/ui/src/components/ContextMenuPopup/ContextMenuPopup.scss?a8b8","webpack:///./src/ui/src/components/ContextMenuPopup/ContextMenuPopup.js","webpack:///./src/ui/src/components/ContextMenuPopup/index.js"],"names":["module","exports","OfficeActionItem","_ref","dataElement","onClick","img","title","_ref$shortcut","shortcut","_ref$disabled","disabled","t","_slicedToArray","useTranslation","dispatch","useDispatch","React","createElement","className","classNames","e","actions","closeElement","DataElements","CONTEXT_MENU_POPUP","stopPropagation","tabIndex","data-element","onKeyDown","key","Icon","glyph","ContextMenuPopup","_ref2","clickPosition","core","useCore","isOpen","useSelector","state","selectors","isElementOpen","isDisabled","isElementDisabled","isRightClickAnnotationPopupEnabled","isMultiViewerMode","activeDocumentViewerKey","getActiveDocumentViewerKey","isCursorInTable","isSpreadsheetEditorModeEnabled","spreadsheetEditorEditMode","getSpreadsheetEditorEditMode","isReadOnlyMode","SpreadsheetEditorEditMode","VIEW_ONLY","_useState2","useState","isSpreadsheetAndReadOnlyMode","setIsSpreadsheetAndReadOnlyMode","store","useStore","_useState4","left","top","position","setPosition","popupRef","useRef","isMobile","isMobileDevice","isMobileCSS","useOnClickOutside","useEffect","closeElements","ANNOTATION_POPUP","TEXT_POPUP","INLINE_COMMENT_POPUP","useLayoutEffect","_popupRef$current$get","current","getBoundingClientRect","width","height","documentContainerSelector","concat","documentContainer","getRootNode","querySelector","containerBox","_adjustPopupPosition","adjustPopupPosition","clickPos","_getOffsetAdjustments","getOffsetAdjustments","offsetLeft","offsetTop","window","scrollX","scrollY","right","bottom","isApryseWebViewerWebComponent","_getRootNode","host","hostBoundingRect","scrollLeft","scrollTop","modifierKey","isMac","modifierKeyShort","handlePaste","withFormatting","arguments","length","undefined","isFirefox","message","keyboardShortcut","confirmBtnText","warning","onConfirm","setTimeout","getViewerElement","focus","onCancel","showWarningMessage","getOfficeEditor","pasteText","contextMenuPopup","open","closed","isOfficeEditor","isOfficeEditorMode","ref","style","_objectSpread","FocusTrap","locked","Fragment","OFFICE_EDITOR_CUT","cutSelectedText","isTextSelected","OFFICE_EDITOR_COPY","copySelectedText","OFFICE_EDITOR_PASTE","OFFICE_EDITOR_PASTE_WITHOUT_FORMATTING","OFFICE_EDITOR_DELETE","removeSelection","isImageSelected","OFFICE_EDITOR_INSERT_ROW_ABOVE","insertRows","OFFICE_EDITOR_INSERT_ROW_BELOW","OFFICE_EDITOR_INSERT_COLUMN_RIGHT","insertColumns","OFFICE_EDITOR_INSERT_COLUMN_LEFT","OFFICE_EDITOR_DELETE_ROW","removeRows","OFFICE_EDITOR_DELETE_COLUMN","removeColumns","OFFICE_EDITOR_DELETE_TABLE","removeTable","CustomizablePopup","childrenClassName","ActionButton","label","setToolModeAndGroup","isIE","Draggable","cancel","memo"],"mappings":"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","file":"chunks/chunk.61.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useState, useEffect, useRef, useLayoutEffect } from 'react';\nimport classNames from 'classnames';\nimport Draggable from 'react-draggable';\nimport { useSelector, useDispatch, useStore } from 'react-redux';\nimport FocusTrap from 'components/FocusTrap';\nimport { useTranslation } from 'react-i18next';\nimport ActionButton from 'components/ActionButton';\nimport CustomizablePopup from 'components/CustomizablePopup';\nimport Icon from 'components/Icon';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport setToolModeAndGroup from 'helpers/setToolModeAndGroup';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport useCore from 'hooks/useCore';\nimport { isMobile as isMobileCSS, isIE, isMobileDevice, isFirefox, isMac } from 'helpers/device';\nimport { isOfficeEditorMode } from 'helpers/officeEditor';\nimport getRootNode from 'helpers/getRootNode';\nimport DataElements from 'constants/dataElement';\nimport { SpreadsheetEditorEditMode } from 'constants/spreadsheetEditor';\n\nimport './ContextMenuPopup.scss';\n\nconst OfficeActionItem = ({ dataElement, onClick, img, title, shortcut = '', disabled = false }) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n\n  const onKeyDown = (e) => {\n    if (e.key === 'Enter' && !disabled) {\n      onClick();\n      dispatch(actions.closeElement(DataElements.CONTEXT_MENU_POPUP));\n    }\n  };\n\n  return (\n    <div\n      className={classNames('office-action-item', { disabled })}\n      onClick={(e) => {\n        if (!disabled) {\n          onClick();\n          dispatch(actions.closeElement(DataElements.CONTEXT_MENU_POPUP));\n        }\n        // prevent bubbling up click event to control when context menu is closed within this component\n        e.stopPropagation();\n      }}\n      tabIndex={disabled ? -1 : 0}\n      data-element={dataElement}\n      onKeyDown={onKeyDown}\n    >\n      <div className=\"icon-title\">\n        {img && <Icon glyph={img} disabled={disabled} />}\n        {!img && <span className=\"Icon\"></span>}\n        <div>{t(title)}</div>\n      </div>\n      <div className=\"shortcut\">{shortcut}</div>\n    </div>\n  );\n};\n\nconst ContextMenuPopup = ({\n  clickPosition,\n}) => {\n  const { core } = useCore();\n\n  const isOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.CONTEXT_MENU_POPUP));\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.CONTEXT_MENU_POPUP));\n  const isRightClickAnnotationPopupEnabled = useSelector(selectors.isRightClickAnnotationPopupEnabled);\n  const isMultiViewerMode = useSelector(selectors.isMultiViewerMode);\n  const activeDocumentViewerKey = useSelector(selectors.getActiveDocumentViewerKey);\n  const isCursorInTable = useSelector(selectors.isCursorInTable);\n  const isSpreadsheetEditorModeEnabled = useSelector(selectors.isSpreadsheetEditorModeEnabled);\n  const spreadsheetEditorEditMode = useSelector(selectors.getSpreadsheetEditorEditMode);\n  const isReadOnlyMode = spreadsheetEditorEditMode === SpreadsheetEditorEditMode.VIEW_ONLY;\n\n  const [isSpreadsheetAndReadOnlyMode, setIsSpreadsheetAndReadOnlyMode] = useState(isSpreadsheetEditorModeEnabled && isReadOnlyMode);\n\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  // this is hacky, hopefully we can remove this when tool group button is restructured\n  const store = useStore();\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const popupRef = useRef();\n  // if right click menu is not turned on, on tablet + phone, ContextMenuPopup won't be available\n  // if it's on, on tablet + phone, it will be available without being draggable\n  const isMobile = !!isMobileDevice || isMobileCSS();\n\n  useOnClickOutside(popupRef, () => {\n    dispatch(actions.closeElement(DataElements.CONTEXT_MENU_POPUP));\n  });\n\n  useEffect(() => {\n    if (isOpen) {\n      dispatch(\n        actions.closeElements([\n          DataElements.ANNOTATION_POPUP,\n          DataElements.TEXT_POPUP,\n          DataElements.INLINE_COMMENT_POPUP,\n        ])\n      );\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    const isReadOnlyMode = spreadsheetEditorEditMode === SpreadsheetEditorEditMode.VIEW_ONLY;\n    setIsSpreadsheetAndReadOnlyMode(isSpreadsheetEditorModeEnabled && isReadOnlyMode);\n  }, [isSpreadsheetEditorModeEnabled, spreadsheetEditorEditMode]);\n\n  useLayoutEffect(() => {\n    if (isSpreadsheetAndReadOnlyMode) {\n      return;\n    }\n\n    const { width, height } = popupRef.current.getBoundingClientRect();\n    const documentContainerSelector = isMultiViewerMode ? `#DocumentContainer${activeDocumentViewerKey}` : '.DocumentContainer';\n    const documentContainer = getRootNode().querySelector(documentContainerSelector);\n    if (!documentContainer) {\n      return;\n    }\n\n    const containerBox = documentContainer.getBoundingClientRect();\n    const { left, top } = adjustPopupPosition(clickPosition, containerBox, width, height);\n    setPosition({ left, top });\n  }, [clickPosition, isMultiViewerMode, activeDocumentViewerKey, isSpreadsheetAndReadOnlyMode]);\n\n  /**\n   * Adjusts the position of the popup relative to the container.\n   */\n  const adjustPopupPosition = (clickPos, containerBox, width, height) => {\n    let { left, top } = clickPos;\n    const { offsetLeft, offsetTop } = getOffsetAdjustments();\n\n    left -= offsetLeft + window.scrollX;\n    top -= offsetTop + window.scrollY;\n\n    const horizontalGap = 2;\n    const verticalGap = 2;\n\n    if (left < containerBox.left - offsetLeft) {\n      left = containerBox.left + horizontalGap - offsetLeft;\n    }\n\n    if (left + width > containerBox.right - offsetLeft) {\n      left = containerBox.right - width - horizontalGap - offsetLeft;\n    }\n\n    if (top < containerBox.top - offsetTop) {\n      top = containerBox.top + verticalGap - offsetTop;\n    }\n\n    if (top + height > containerBox.bottom - offsetTop) {\n      top = containerBox.bottom - offsetTop - height - verticalGap;\n    }\n\n    return { left, top };\n  };\n\n  /**\n   * Retrieves offset adjustments if the app is running inside a Web Component.\n   */\n  const getOffsetAdjustments = () => {\n    let offsetLeft = 0;\n    let offsetTop = 0;\n\n    if (window.isApryseWebViewerWebComponent) {\n      const host = getRootNode()?.host;\n      const hostBoundingRect = host?.getBoundingClientRect();\n\n      if (hostBoundingRect) {\n        offsetLeft = hostBoundingRect.left;\n        offsetTop = hostBoundingRect.top;\n\n        // Include host scroll offsets\n        offsetLeft += host.scrollLeft;\n        offsetTop += host.scrollTop;\n      }\n    }\n    return { offsetLeft, offsetTop };\n  };\n\n  const modifierKey = isMac ? '⌘ Command' : 'Ctrl';\n  const modifierKeyShort = isMac ? '⌘Cmd' : 'Ctrl';\n\n  const handlePaste = (withFormatting = true) => {\n    if (!isFirefox) {\n      core.getOfficeEditor().pasteText(withFormatting);\n      return;\n    }\n\n    const title = withFormatting ? t('officeEditor.pastingTitle') : t('officeEditor.pastingWithoutFormatTitle');\n    const message = withFormatting ? t('officeEditor.pastingMessage') : t('officeEditor.pastingWithoutFormatMessage');\n    const keyboardShortcut = withFormatting ? `${modifierKey} + V` : `${modifierKey} + Shift + V`;\n    const confirmBtnText = t('action.close');\n\n    const warning = {\n      message: `${message}:\\n\\n${keyboardShortcut}`,\n      title,\n      confirmBtnText,\n      onConfirm: () => {\n        // setTimeout needed because the focus can not be set immediately after closing the warning modal\n        setTimeout(() => {\n          core.getViewerElement().focus();\n        });\n      },\n      onCancel: () => {\n        setTimeout(() => {\n          core.getViewerElement().focus();\n        });\n      },\n    };\n    dispatch(actions.showWarningMessage(warning));\n\n  };\n\n  if (isDisabled) {\n    return null;\n  }\n\n  const contextMenuPopup = (\n    <div\n      className={classNames('Popup', 'ContextMenuPopup', {\n        open: isOpen,\n        closed: !isOpen,\n        isOfficeEditor: isOfficeEditorMode(),\n        'is-vertical': isRightClickAnnotationPopupEnabled && !isOfficeEditorMode(),\n        'is-horizontal': !isRightClickAnnotationPopupEnabled && !isOfficeEditorMode(),\n      })}\n      ref={popupRef}\n      data-element={DataElements.CONTEXT_MENU_POPUP}\n      style={{ ...position }}\n      onClick={() => dispatch(actions.closeElement(DataElements.CONTEXT_MENU_POPUP))}\n    >\n      <FocusTrap locked={isOpen && position.top !== 0 && position.left !== 0}>\n        <div className=\"container\">\n          {isOfficeEditorMode() ? (\n            <>\n              <OfficeActionItem\n                title=\"action.cut\"\n                img=\"icon-cut\"\n                dataElement={DataElements.OFFICE_EDITOR_CUT}\n                onClick={() => core.getOfficeEditor().cutSelectedText()}\n                shortcut={`${modifierKeyShort}+X`}\n                disabled={!core.getOfficeEditor().isTextSelected()}\n              />\n              <OfficeActionItem\n                title=\"action.copy\"\n                img=\"icon-copy\"\n                dataElement={DataElements.OFFICE_EDITOR_COPY}\n                onClick={() => core.getOfficeEditor().copySelectedText()}\n                shortcut={`${modifierKeyShort}+C`}\n                disabled={!core.getOfficeEditor().isTextSelected()}\n              />\n              <OfficeActionItem\n                title=\"action.paste\"\n                img=\"icon-paste\"\n                dataElement={DataElements.OFFICE_EDITOR_PASTE}\n                onClick={() => handlePaste()}\n                shortcut={`${modifierKeyShort}+V`}\n              />\n              <OfficeActionItem\n                title=\"action.pasteWithoutFormatting\"\n                img=\"icon-paste-without-formatting\"\n                dataElement={DataElements.OFFICE_EDITOR_PASTE_WITHOUT_FORMATTING}\n                onClick={() => handlePaste(false)}\n                shortcut={`${modifierKeyShort}+Shift+V`}\n              />\n              {!isCursorInTable && (\n                <OfficeActionItem\n                  title=\"action.delete\"\n                  img=\"icon-delete-line\"\n                  dataElement={DataElements.OFFICE_EDITOR_DELETE}\n                  onClick={() => core.getOfficeEditor().removeSelection()}\n                  disabled={!(core.getOfficeEditor().isTextSelected() || core.getOfficeEditor().isImageSelected())}\n                />\n              )}\n              {isCursorInTable && (\n                <>\n                  <div className=\"divider\"></div>\n                  <OfficeActionItem\n                    title=\"officeEditor.insertRowAbove\"\n                    dataElement={DataElements.OFFICE_EDITOR_INSERT_ROW_ABOVE}\n                    onClick={() => core.getOfficeEditor().insertRows(1, true)}\n                  />\n                  <OfficeActionItem\n                    title=\"officeEditor.insertRowBelow\"\n                    dataElement={DataElements.OFFICE_EDITOR_INSERT_ROW_BELOW}\n                    onClick={() => core.getOfficeEditor().insertRows(1, false)}\n                  />\n                  <OfficeActionItem\n                    title=\"officeEditor.insertColumnRight\"\n                    dataElement={DataElements.OFFICE_EDITOR_INSERT_COLUMN_RIGHT}\n                    onClick={() => core.getOfficeEditor().insertColumns(1, true)}\n                  />\n                  <OfficeActionItem\n                    title=\"officeEditor.insertColumnLeft\"\n                    dataElement={DataElements.OFFICE_EDITOR_INSERT_COLUMN_LEFT}\n                    onClick={() => core.getOfficeEditor().insertColumns(1, false)}\n                  />\n                  <OfficeActionItem\n                    title=\"officeEditor.deleteRow\"\n                    dataElement={DataElements.OFFICE_EDITOR_DELETE_ROW}\n                    onClick={() => core.getOfficeEditor().removeRows()}\n                  />\n                  <OfficeActionItem\n                    title=\"officeEditor.deleteColumn\"\n                    dataElement={DataElements.OFFICE_EDITOR_DELETE_COLUMN}\n                    onClick={() => core.getOfficeEditor().removeColumns()}\n                  />\n                  <OfficeActionItem\n                    title=\"officeEditor.deleteTable\"\n                    dataElement={DataElements.OFFICE_EDITOR_DELETE_TABLE}\n                    onClick={() => core.getOfficeEditor().removeTable()}\n                  />\n                </>\n              )}\n            </>\n          ) : (\n            <CustomizablePopup\n              dataElement={DataElements.CONTEXT_MENU_POPUP}\n              childrenClassName='main-menu-button'\n            >\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"panToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'tool.pan' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'tool.pan' : ''}\n                img=\"icon-header-pan\"\n                onClick={() => setToolModeAndGroup(store, 'Pan')}\n              />\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"stickyToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'annotation.stickyNote' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'annotation.stickyNote' : ''}\n                img=\"icon-tool-comment-line\"\n                onClick={() => setToolModeAndGroup(store, 'AnnotationCreateSticky')}\n              />\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"highlightToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'annotation.highlight' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'annotation.highlight' : ''}\n                img=\"icon-tool-highlight\"\n                onClick={() => setToolModeAndGroup(store, 'AnnotationCreateTextHighlight')\n                }\n              />\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"freeHandToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'annotation.freehand' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'annotation.freehand' : ''}\n                img=\"icon-tool-pen-line\"\n                onClick={() => setToolModeAndGroup(store, 'AnnotationCreateFreeHand')}\n              />\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"freeHandHighlightToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'annotation.freeHandHighlight' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'annotation.freeHandHighlight' : ''}\n                img=\"icon-tool-pen-highlight\"\n                onClick={() => setToolModeAndGroup(store, 'AnnotationCreateFreeHandHighlight')}\n              />\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"freeTextToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'annotation.freetext' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'annotation.freetext' : ''}\n                img=\"icon-tool-text-free-text\"\n                onClick={() => setToolModeAndGroup(store, 'AnnotationCreateFreeText')}\n              />\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"markInsertTextToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'annotation.markInsertText' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'annotation.markInsertText' : ''}\n                img=\"ic-insert text\"\n                onClick={() => setToolModeAndGroup(store, 'AnnotationCreateMarkInsertText')}\n              />\n              <ActionButton\n                className=\"main-menu-button\"\n                dataElement=\"markReplaceTextToolButton\"\n                label={isRightClickAnnotationPopupEnabled ? 'annotation.markReplaceText' : ''}\n                title={!isRightClickAnnotationPopupEnabled ? 'annotation.markReplaceText' : ''}\n                img=\"ic-replace text\"\n                onClick={() => setToolModeAndGroup(store, 'AnnotationCreateMarkReplaceText')}\n              />\n            </CustomizablePopup>\n          )}\n        </div>\n      </FocusTrap>\n    </div>\n  );\n\n  if (isSpreadsheetAndReadOnlyMode) {\n    return null;\n  }\n\n  return isIE || isMobile ? (\n    contextMenuPopup\n  ) : (\n    <Draggable cancel=\".Button, .cell, .sliders-container svg, select, button, input\">{contextMenuPopup}</Draggable>\n  );\n};\n\nexport default React.memo(ContextMenuPopup);\n","import ContextMenuPopup from './ContextMenuPopup';\n\nexport default ContextMenuPopup;"],"sourceRoot":""}