(window.webpackJsonpWebViewerUI=window.webpackJsonpWebViewerUI||[]).push([[59],{1771:function(e,t,n){e.exports={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"}},1874:function(e,t,n){"use strict";n.r(t);n(9),n(10),n(14),n(21),n(20),n(12),n(43),n(22),n(18),n(16),n(29),n(634),n(267),n(8),n(137),n(17),n(19),n(11),n(136),n(13);var r=n(0),a=n.n(r),o=n(15),l=n.n(o),i=n(6),c=n(307),u=n(44),s=n(33),f=n(56),d=n(115);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=m(e.split("/"),2),n=t[0],r=t[1];return Number(n)/Number(r)},p=n(2),y=n(3),E=n(154),g=n(5);n(1771);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=e.Measure.axis[0].factor;switch(e.Scale[1][1]){case"ft-in":return e.getLineLength()*t/12;case"in":default:return e.getLineLength()*t}},S=/^\d*(\.\d*)?$/,j=/^\d*(\s\d\/\d*)$/,w=/^(\d\/\d*)*$/,I=function(){var e=Object(s.a)().core,t=h(Object(i.e)((function(e){return[y.a.isElementOpen(e,g.a.CALIBRATION_MODAL),y.a.isElementDisabled(e,g.a.CALIBRATION_MODAL),y.a.getMeasurementUnits(e)]}),i.c),3),n=t[0],o=t[1],m=t[2],v=Object(i.d)(),O=h(Object(r.useState)(null),2),I=O[0],N=O[1],L=h(Object(r.useState)(""),2),M=L[0],_=L[1],D=h(Object(r.useState)(0),2),C=D[0],T=D[1],F=h(Object(r.useState)(""),2),x=F[0],R=F[1],B=h(Object(r.useState)(!1),2),U=B[0],H=B[1],$=h(Object(c.a)(),1)[0],k=Object(r.useRef)(null);Object(r.useEffect)((function(){var t;n&&(null==k||null===(t=k.current)||void 0===t||t.focus()),W(e.getSelectedAnnotations())}),[n]),Object(r.useEffect)((function(){var t=function(e,t){"selected"===t?W(e):"deselected"===t&&(N(null),_(""),R(""),T(0))};return e.addEventListener("annotationSelected",t),function(){return e.removeEventListener("annotationSelected",t)}}),[]),Object(r.useEffect)((function(){var t=function(e,t){"modify"===t&&1===e.length&&e[0]===I&&(_(A(I).toFixed(2)),R(I.Scale[1][1]))};return e.addEventListener("annotationChanged",t),function(){return e.removeEventListener("annotationChanged",t)}}),[I]);var W=function(e){if(1===(null==e?void 0:e.length)&&"distanceMeasurement"===Object(f.g)(e[0])){var t=e[0];N(t);var n=A(t).toFixed(2);_(n),R(t.Scale[1][1]),T(parseFloat(n))}},J=function(e){return I.Scale=e,V()},V=function(){var e=A(I),t=C/e,n=I.Scale;return[[n[0][0],n[0][1]],[n[1][0]*t,x]]},G=function(){v(p.a.closeElements([g.a.CALIBRATION_MODAL]))};return o||!I?null:a.a.createElement(E.a,{onSwipedUp:G,onSwipedDown:G,preventDefaultTouchmoveEvent:!0},a.a.createElement("div",{className:l()({Modal:!0,CalibrationModal:!0,open:n,closed:!n}),onMouseDown:G}," ",a.a.createElement("div",{className:"container",onMouseDown:function(e){return e.stopPropagation()}},a.a.createElement("div",{className:"swipe-indicator"}),a.a.createElement("div",{className:"calibration__header"},$("component.calibration")),a.a.createElement("div",{className:"calibration__body"},a.a.createElement("div",null,$("message.enterMeasurement")),a.a.createElement("div",{className:"calibration__input"},a.a.createElement("input",{className:U?"error":"",ref:k,type:"text",value:M,onChange:function(e){H(!1),_(e.target.value)},onBlur:function(e){var t=e.target.value.trim();if(""===t&&H(!0),S.test(t))0!==parseFloat(t)?(T(parseFloat(t)),_(t)):H(!0);else if(j.test(t)){var n=h(t.split(" "),2),r=n[0],a=n[1];if(Number.isFinite(b(a))){var o=Number(r)+b(a);T(parseFloat(o)),_(o)}else H(!0)}else if(w.test(t))if(Number.isFinite(b(t))){var l=b(t);T(parseFloat(l)),_(l)}else H(!0);else H(!0)}}),a.a.createElement("select",{className:"unitToInput",value:x,onChange:function(e){R(e.target.value)}},m.to.map((function(e){return a.a.createElement("option",{key:e,value:e},e)})))),U?a.a.createElement("div",{className:"errorMeasurement"},$("message.errorEnterMeasurement")):null),a.a.createElement("div",{className:"calibration__footer"},a.a.createElement(u.a,{dataElement:"passwordSubmitButton",label:$("action.apply"),onClick:function(){var t=V(),n=J(t);e.setAnnotationStyles(I,{Scale:n}),Object(d.a)("AnnotationCreateDistanceMeasurement","Scale",n),v(p.a.closeElements([g.a.CALIBRATION_MODAL]))},disabled:U})))))};t.default=I}}]);
//# sourceMappingURL=chunk.59.js.map