{"version":3,"sources":["webpack:///./src/ui/src/components/PageReplacementModal/FileListPanel/FileListPanel.scss?8ede","webpack:///./src/ui/src/components/PageReplacementModal/FileSelectedPanel/FileSelectedPanel.scss?6e12","webpack:///./src/ui/src/components/PageReplacementModal/FileListPanel/index.js","webpack:///./src/ui/src/components/PageReplacementModal/FileListPanel/FileListPanel.js","webpack:///./src/ui/src/components/PageReplacementModal/FileSelectedPanel/FileSelectedPanel.js","webpack:///./src/ui/src/components/PageReplacementModal/FileSelectedPanel/FileSelectedPanelContainer.js","webpack:///./src/ui/src/components/PageReplacementModal/FileSelectedPanel/index.js","webpack:///./src/ui/src/components/PageReplacementModal/PageReplacementModal.js","webpack:///./src/ui/src/components/PageReplacementModal/PageReplacementModalContainer.js","webpack:///./src/ui/src/components/PageReplacementModal/PageReplacementModalRedux.js","webpack:///./src/ui/src/components/PageReplacementModal/index.js"],"names":["module","exports","FileListPanel","_ref","defaultValue","onFileSelect","_ref$list","list","id","elements","map","item","i","isSelected","modalClass","classNames","selected","thumbnail","hasOwnProperty","src","url","toDataURL","img","React","createElement","className","getFileThumbnail","tabIndex","key","onClick","find","onRowClick","onKeyDown","event","onRowKeyDown","filename","FileSelectedPanel","forwardRef","ref","closeThisModal","clearLoadedFile","pageIndicesToReplace","sourceDocument","replacePagesHandler","documentInViewer","closeModalWarning","t","_slicedToArray","useTranslation","_useState2","useState","index","currentDocSelectedPageNumbers","setCurrentDocSelectedPageNumbers","_useState4","sourceDocSelectedPageNumbers","setSourceDocSelectedPageNumbers","_useState6","selectedThumbnails","setSelectedThumbnails","_useState8","isLoading","setIsLoading","_useState0","sourceDocumentName","setSourceDocumentName","_useState10","currentDocumentName","setCurrentDocumentName","_useState12","sourceDocumentPageCount","setSourceDocumentPageCount","_useState14","hasPageNumberError","setHasPageNumberError","_useState16","sourceDocPagesNumberError","setSourceDocPagesNumberError","isTablet","isTabletSize","isMobile","isMobileSize","getPageNumbersFromSelectedThumbnails","selectedPageNumbers","pageNumber","push","parseInt","useEffect","pageCount","getPageCount","selectedPages","getTruncatedName","documentName","length","concat","slice","getFilename","onSourceDocumentNumberInputChange","selectedPagesMap","reduce","_objectSpread","_defineProperty","onCloseHandler","loadedDocumentPageCount","onMouseDown","e","stopPropagation","ModalWrapper","title","closeButtonDataElement","onCloseClick","swipeToClose","closeHandler","backButtonDataElement","onBackClick","PageNumberInput","onSelectedPageNumbersChange","pageNumbers","onBlurHandler","onError","usePageIndexes","PageThumbnailsGrid","document","onThumbnailSelected","undefined","onfileLoadedHandler","isFileSelected","disabled","Button","pagesToReplaceIntoDocument","label","pageIndex","isReplaceButtonDisabled","displayName","FileSelectedPanelContainer","props","useCore","core","getDocument","_extends","replacePages","r","Symbol","n","iterator","o","toStringTag","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","Array","isArray","_arrayWithHoles","next","_iterableToArrayLimit","_arrayLikeToArray","toString","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","isValidUrlRegex","RegExp","options","loadAsPDF","PageReplacementModal","closeModal","selectableFiles","isOpen","selectedThumbnailPageIndexes","selectedTab","source","setSource","error","setError","selectedDoc","setSelectedDoc","setIsFileSelected","selectedTabInternal","setSelectedTabInternal","dispatch","useDispatch","customizableUI","useSelector","state","_selectors$getFeature","selectors","getFeatureFlags","el","getRootNode","querySelector","exitPageReplacementWarning","Modal","open","closed","srcString","handleSelection","_ref2","_callee","_t","_context","onSelect","createDocument","console","fileProcessedHandler","_ref3","_callee2","file","_context2","getInstanceNode","instance","Core","Document","_x","isSelectBtnDisabled","isFilePanelEnabled","clearDocument","data-element","Tabs","role","Fragment","Tab","dataElement","TabPanel","selection","FileInputPanel","FilePickerPanel","fileInputId","onFileProcessed","allowMultiple","noFile","PageReplacementModalContainer","closePageReplacement","rest","_objectWithoutProperties","_excluded","useCallback","newProps","PageReplacementModalRedux","getPageReplacementFileList","isElementOpen","DataElements","PAGE_REPLACEMENT_MODAL","getSelectedThumbnailPageIndexes","getSelectedTab","actions","closeElement"],"mappings":"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","file":"chunks/chunk.54.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import FileListPanel from './FileListPanel';\n\nexport default FileListPanel;","import React from 'react';\nimport classNames from 'classnames';\nimport './FileListPanel.scss';\n\nconst FileListPanel = ({ defaultValue, onFileSelect, list = [] }) => {\n  const { id } = defaultValue || {};\n\n  const onRowClick = (id) => {\n    onFileSelect(list.find((item) => item.id === id));\n  };\n\n  const onRowKeyDown = (event, id) => {\n    if (event.key === 'Enter') {\n      onFileSelect(list.find((item) => item.id === id));\n    }\n  };\n\n  const getFileThumbnail = (item) => {\n    if (item.hasOwnProperty('thumbnail')) {\n      let src = null;\n      const thumbnail = item.thumbnail;\n      if (thumbnail.url) {\n        src = thumbnail.url;\n      } else if (thumbnail.toDataURL) {\n        src = thumbnail.toDataURL();\n      }\n      // If thumbnail doesnt have a url or is canvas then we just show a blank square\n      const img = <img src={src} className=\"li-div-img\" />;\n      return (<div className=\"li-div\">{img}</div>);\n    }\n    return null;\n  };\n\n  const elements = list.map((item, i) => {\n    const isSelected = id === item.id;\n    const modalClass = classNames({\n      selected: isSelected\n    });\n\n    const thumbnail = getFileThumbnail(item);\n\n    return (\n      <li tabIndex=\"0\" key={i} onClick={() => onRowClick(item.id)} onKeyDown={(event) => onRowKeyDown(event, item.id)} className={modalClass}>\n        {thumbnail}\n        <div className=\"li-div-txt\" >{item.filename}</div>\n      </li>\n    );\n  });\n\n  return (\n    <div className=\"FileListPanel\">\n      <ul>\n        {elements}\n      </ul>\n    </div>\n  );\n};\n\nexport default FileListPanel;\n","import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport PageNumberInput from '../PageNumberInput';\nimport '../PageReplacementModal.scss';\nimport './FileSelectedPanel.scss';\nimport PageThumbnailsGrid from 'src/components/PageThumbnailsGrid';\nimport { isMobileSize, isTabletSize } from 'helpers/getDeviceSize';\nimport ModalWrapper from 'components/ModalWrapper';\n\nconst MAX_NAME_LENGTH_BEFORE_TRUNCATION = 25;\nconst TRUNCATION_LENGTH = 10;\nconst TABLET_TRUNCATION_LENGTH = 4;\n\n// Need to forward the ref so the FocusTrap works correctly\nconst FileSelectedPanel = React.forwardRef((\n  {\n    closeThisModal,\n    clearLoadedFile,\n    pageIndicesToReplace,\n    sourceDocument,\n    replacePagesHandler,\n    documentInViewer,\n    closeModalWarning,\n  }, ref) => {\n  const [t] = useTranslation();\n\n  const [currentDocSelectedPageNumbers, setCurrentDocSelectedPageNumbers] = useState(pageIndicesToReplace.map((index) => index + 1));\n  const [sourceDocSelectedPageNumbers, setSourceDocSelectedPageNumbers] = useState([]);\n  const [selectedThumbnails, setSelectedThumbnails] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [sourceDocumentName, setSourceDocumentName] = useState(null);\n  const [currentDocumentName, setCurrentDocumentName] = useState(null);\n  const [sourceDocumentPageCount, setSourceDocumentPageCount] = useState(0);\n  const [hasPageNumberError, setHasPageNumberError] = useState(false);\n  const [sourceDocPagesNumberError, setSourceDocPagesNumberError] = useState('');\n\n  const isTablet = isTabletSize();\n\n  const isMobile = isMobileSize();\n\n  const getPageNumbersFromSelectedThumbnails = () => {\n    const selectedPageNumbers = [];\n\n    for (const pageNumber in selectedThumbnails) {\n      if (selectedThumbnails[pageNumber]) {\n        selectedPageNumbers.push(parseInt(pageNumber));\n      }\n    }\n    return selectedPageNumbers;\n  };\n\n  useEffect(() => {\n    if (sourceDocument) {\n      const pageCount = sourceDocument.getPageCount();\n      const selectedPages = {};\n      for (let i = 1; i <= pageCount; i++) {\n        selectedPages[i] = true;\n      }\n      setSelectedThumbnails(selectedPages);\n    }\n  }, [sourceDocument]);\n\n  useEffect(() => {\n    setSourceDocSelectedPageNumbers(getPageNumbersFromSelectedThumbnails());\n  }, [selectedThumbnails]);\n\n  useEffect(() => {\n    function getTruncatedName(documentName) {\n      let truncatedName;\n      if (documentName.length > MAX_NAME_LENGTH_BEFORE_TRUNCATION) {\n        if (isTablet && !isMobile) {\n          truncatedName = `\"${documentName.slice(0, TABLET_TRUNCATION_LENGTH)}...${documentName.slice(documentName.length)}\"`;\n        } else {\n          truncatedName = `\"${documentName.slice(0, TRUNCATION_LENGTH)}...${documentName.slice(documentName.length - TRUNCATION_LENGTH)}\"`;\n        }\n      } else {\n        truncatedName = `\"${documentName}\"`;\n      }\n\n      return truncatedName;\n    }\n\n    if (sourceDocument) {\n      const pageCount = sourceDocument.getPageCount();\n      setSourceDocumentPageCount(pageCount);\n      setSourceDocumentName(getTruncatedName(sourceDocument.getFilename()));\n      setCurrentDocumentName(getTruncatedName(documentInViewer.getFilename()));\n    }\n  }, [sourceDocument]);\n\n  const replacePages = () => {\n    const pagesToReplaceIntoDocument = getPageNumbersFromSelectedThumbnails();\n    replacePagesHandler(sourceDocument, currentDocSelectedPageNumbers, pagesToReplaceIntoDocument);\n    closeThisModal();\n  };\n\n  const deselectAllThumbnails = () => {\n    setSelectedThumbnails({});\n  };\n\n  const onThumbnailSelected = (pageNumber) => {\n    if (selectedThumbnails[pageNumber] === undefined) {\n      selectedThumbnails[pageNumber] = true;\n    } else {\n      selectedThumbnails[pageNumber] = !selectedThumbnails[pageNumber];\n    }\n    setSelectedThumbnails({ ...selectedThumbnails });\n  };\n\n  const isReplaceButtonDisabled = () => {\n    if (currentDocSelectedPageNumbers.length < 1 || hasPageNumberError || sourceDocPagesNumberError) {\n      return true;\n    }\n    for (const pageIndex in selectedThumbnails) {\n      if (selectedThumbnails[pageIndex]) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  const onSourceDocumentNumberInputChange = (selectedPageNumbers) => {\n    if (selectedPageNumbers.length > 0) {\n      setSourceDocPagesNumberError('');\n    }\n    const selectedPagesMap = selectedPageNumbers.reduce((map, pageNumber) => ({ ...map, [pageNumber]: true }), {});\n    setSelectedThumbnails({ ...selectedPagesMap });\n  };\n\n  const handlePageNumbersChanged = (pageNumbers) => {\n    if (pageNumbers.length > 0) {\n      setHasPageNumberError(false);\n      setCurrentDocSelectedPageNumbers(pageNumbers);\n    }\n  };\n\n  const handlePageNumberError = () => {\n    setHasPageNumberError(true);\n  };\n\n  const handleSourcePageNumbersChanged = (pageNumbers) => {\n    if (pageNumbers.length > 0) {\n      setSourceDocSelectedPageNumbers(pageNumbers);\n      onSourceDocumentNumberInputChange(pageNumbers);\n    } else {\n      getPageNumbersFromSelectedThumbnails();\n    }\n  };\n\n  const onCloseHandler = () => {\n    closeModalWarning();\n  };\n\n  const loadedDocumentPageCount = documentInViewer.getPageCount();\n\n  return (\n    <div className=\"fileSelectedPanel container\" onMouseDown={(e) => e.stopPropagation()} ref={ref}>\n      <ModalWrapper\n        title={t('component.pageReplaceModalTitle')}\n        closeButtonDataElement={'pageReplacementModalClose'}\n        onCloseClick={onCloseHandler}\n        swipeToClose\n        closeHandler={onCloseHandler}\n        backButtonDataElement={'insertFromFileBackButton'}\n        onBackClick={clearLoadedFile}\n      >\n        <div className=\"modal-body\">\n          <div className=\"replace-page-input-container\">\n            <div className=\"page-replacement-text\">{t('option.pageReplacementModal.pageReplaceInputLabel')}:</div>\n            <div className=\"replace-page-input-current-doc-containers\">\n              <PageNumberInput\n                selectedPageNumbers={currentDocSelectedPageNumbers}\n                pageCount={loadedDocumentPageCount}\n                onSelectedPageNumbersChange={handlePageNumbersChanged}\n                onBlurHandler={setCurrentDocSelectedPageNumbers}\n                onError={handlePageNumberError}\n              />\n            </div>\n            <div className=\"replace-page-input\"><span className=\"page-replace-doc-name\">{currentDocumentName}</span></div>\n            <div className=\"page-replacement-text\">{t('option.pageReplacementModal.pageReplaceInputFromSource')}:</div>\n            <PageNumberInput\n              selectedPageNumbers={sourceDocSelectedPageNumbers}\n              pageCount={sourceDocumentPageCount}\n              onSelectedPageNumbersChange={handleSourcePageNumbersChanged}\n              onBlurHandler={onSourceDocumentNumberInputChange}\n              usePageIndexes={true}\n            />\n            <div className=\"replace-page-input\"><span className=\"page-replace-doc-name\">{sourceDocumentName}</span></div>\n          </div>\n          <div className={classNames('modal-body-container', { isLoading })}>\n            <PageThumbnailsGrid\n              document={sourceDocument}\n              onThumbnailSelected={onThumbnailSelected}\n              selectedThumbnails={selectedThumbnails}\n              onfileLoadedHandler={setIsLoading}\n            />\n          </div>\n        </div>\n        <div className=\"page-replacement-divider\" />\n        <div className={classNames('footer', { isFileSelected: !isLoading })}>\n          <button className={classNames('deselect-thumbnails', { disabled: isLoading })} onClick={deselectAllThumbnails} disabled={isLoading}>\n            {t('action.deselectAll')}\n          </button>\n          <Button\n            className=\"modal-btn replace-btn\"\n            onClick={() => replacePages()}\n            label={t('action.replace')}\n            disabled={isReplaceButtonDisabled()}\n          />\n        </div>\n      </ModalWrapper>\n    </div >\n  );\n});\n\nFileSelectedPanel.displayName = 'FileSelectedPanel';\n\nexport default FileSelectedPanel;\n","import React from 'react';\nimport FileSelectedPanel from './FileSelectedPanel';\nimport { replacePages } from '../../../helpers/pageManipulationFunctions';\nimport useCore from 'hooks/useCore';\n\n// Need to forward the ref to keep the focus trap working correctly\nconst FileSelectedPanelContainer = React.forwardRef((props, ref) => {\n  const { core } = useCore();\n  const documentInViewer = core.getDocument();\n\n  return (\n    <FileSelectedPanel\n      {...props}\n      documentInViewer={documentInViewer}\n      replacePagesHandler={replacePages}\n      ref={ref}\n    />\n  );\n});\n\nFileSelectedPanelContainer.displayName = 'FileSelectedPanelContainer';\n\nexport default FileSelectedPanelContainer;\n","import FileSelectedPanelContainer from './FileSelectedPanelContainer';\n\nexport default FileSelectedPanelContainer;","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport selectors from 'selectors';\nimport useCore from 'hooks/useCore';\nimport { useTranslation } from 'react-i18next';\nimport FileListPanel from './FileListPanel';\nimport FileInputPanel from './FileInputPanel';\nimport FilePickerPanel from './FilePickerPanel';\nimport { Tabs, Tab, TabPanel } from 'components/Tabs';\nimport Button from 'components/Button';\nimport FileSelectedPanel from './FileSelectedPanel';\nimport { exitPageReplacementWarning } from 'helpers/pageManipulationFunctions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalWrapper from '../ModalWrapper';\nimport getRootNode, { getInstanceNode } from 'helpers/getRootNode';\n\nimport './PageReplacementModal.scss';\n\nconst isValidUrlRegex = new RegExp(/^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/, 'm');\nconst options = { loadAsPDF: true };\n\nconst PageReplacementModal = ({\n  closeModal,\n  selectableFiles,\n  isOpen,\n  selectedThumbnailPageIndexes,\n  selectedTab,\n}) => {\n  const { core } = useCore();\n  const [t] = useTranslation();\n  const [source, setSource] = useState({});\n  const [error, setError] = useState(null);\n  const [selectedDoc, setSelectedDoc] = useState(null);\n  const [isFileSelected, setIsFileSelected] = useState(false);\n  const [selectedTabInternal, setSelectedTabInternal] = useState(null);\n\n  const fileInputId = 'pageReplacementFileInputId';\n\n  const dispatch = useDispatch();\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n\n  useEffect(() => {\n    if (isOpen && selectedTabInternal !== selectedTab) {\n      setSelectedTabInternal(selectedTab);\n    }\n  }, [isOpen, selectedTabInternal, selectedTab]);\n\n  const closeThisModal = () => {\n    setSelectedDoc(null);\n    setIsFileSelected(false);\n    const el = getRootNode().querySelector(`#${fileInputId}`);\n    if (el) {\n      el.value = null;\n    }\n    closeModal();\n    setSelectedTabInternal(null);\n    setSource({});\n  };\n\n  const closeModalWarning = () => exitPageReplacementWarning(closeThisModal, dispatch);\n\n  const modalClass = classNames({\n    Modal: true,\n    PageReplacementModal: true,\n    open: isOpen,\n    closed: !isOpen,\n    'modular-ui': customizableUI,\n  });\n\n  const srcString = source[selectedTabInternal];\n  const handleSelection = async () => {\n    let document;\n    if (srcString && selectedTabInternal === 'customFileListPanelButton') {\n      if (srcString.onSelect) {\n        document = await srcString.onSelect();\n        setSelectedDoc(document);\n      }\n\n      setIsFileSelected(true);\n    } else if (srcString) {\n      try {\n        document = await core.createDocument(srcString, options);\n\n        setSelectedDoc(document);\n        setIsFileSelected(true);\n      } catch (error) {\n        setError(t('message.urlInputFileLoadError'));\n        setIsFileSelected(false);\n        console.error('Error loading file from URL:', error);\n      }\n    }\n  };\n\n  // File picker can merge docs, in which case the callback gets\n  // executed with a Document not a file\n  const fileProcessedHandler = async (file) => {\n    let document;\n    // eslint-disable-next-line no-undef\n    if (file instanceof getInstanceNode().instance.Core.Document) {\n      document = file;\n    } else {\n      document = await core.createDocument(file, options);\n    }\n    setSelectedDoc(document);\n    setIsFileSelected(true);\n  };\n\n  let isSelectBtnDisabled = srcString === undefined;\n\n  if (selectedTabInternal === 'urlInputPanelButton' && !isValidUrlRegex.test(srcString)) {\n    isSelectBtnDisabled = true;\n  }\n\n  const clearDocument = () => {\n    setSelectedDoc(null);\n    setIsFileSelected(false);\n  };\n\n  const renderFileSelectedPanel = () => {\n    return (\n      <FileSelectedPanel\n        closeThisModal={closeThisModal}\n        clearLoadedFile={clearDocument}\n        pageIndicesToReplace={selectedThumbnailPageIndexes}\n        sourceDocument={selectedDoc}\n        closeModalWarning={closeModalWarning}\n      />\n    );\n  };\n\n  const renderSelectionTabs = () => {\n    const isFilePanelEnabled = selectableFiles && selectableFiles.length > 0;\n\n    return (\n      <div className=\"container tabs\" onMouseDown={(e) => e.stopPropagation()}>\n        <ModalWrapper\n          isOpen={isOpen}\n          title={t('component.pageReplaceModalTitle')}\n          closeButtonDataElement={'pageReplacementModalClose'}\n          onCloseClick={closeThisModal}\n          swipeToClose\n          closeHandler={closeThisModal}\n        >\n          <div className=\"swipe-indicator\" />\n          <Tabs className=\"page-replacement-tabs\" id=\"pageReplacementModal\">\n            <div className=\"tabs-header-container\">\n              <div role=\"tablist\" className=\"tab-list\">\n                {isFilePanelEnabled &&\n                  <>\n                    <Tab dataElement=\"customFileListPanelButton\">\n                      <button role=\"tab\" className=\"tab-options-button\">\n                        {t('option.pageReplacementModal.yourFiles')}\n                      </button>\n                    </Tab>\n                    <div className=\"tab-options-divider\" />\n                  </>\n                }\n                <Tab dataElement=\"urlInputPanelButton\">\n                  <button role=\"tab\" className=\"tab-options-button\">\n                    {t('link.url')}\n                  </button>\n                </Tab>\n                <div className=\"tab-options-divider\" />\n                <Tab dataElement=\"filePickerPanelButton\">\n                  <button role=\"tab\" className=\"tab-options-button\">\n                    {t('option.pageReplacementModal.localFile')}\n                  </button>\n                </Tab>\n              </div>\n            </div>\n            <TabPanel dataElement=\"customFileListPanel\">\n              <div className=\"panel-body\">\n                <FileListPanel\n                  onFileSelect={(selection) => {\n                    setSource({ [selectedTabInternal]: selection });\n                  }}\n                  list={selectableFiles}\n                  defaultValue={srcString}\n                />\n              </div>\n            </TabPanel>\n            <TabPanel dataElement=\"urlInputPanel\">\n              <div className=\"panel-body\">\n                <FileInputPanel\n                  error={error}\n                  onFileSelect={(url) => {\n                    setSource({ [selectedTabInternal]: url });\n                  }}\n                  defaultValue={source['urlInputPanelButton']}\n                />\n              </div>\n            </TabPanel>\n            <TabPanel dataElement=\"filePickerPanel\">\n              <div className=\"panel-body upload\">\n                <FilePickerPanel\n                  fileInputId={fileInputId}\n                  onFileProcessed={(file) => fileProcessedHandler(file)}\n                  allowMultiple={true}\n                />\n              </div>\n            </TabPanel>\n          </Tabs>\n          <div className=\"page-replacement-divider\" />\n          <div className=\"footer\">\n            <Button\n              className={classNames('modal-btn', { noFile: isSelectBtnDisabled })}\n              onClick={() => (isSelectBtnDisabled ? null : handleSelection())}\n              label={t('action.select')}\n              disabled={isSelectBtnDisabled}\n            />\n          </div>\n        </ModalWrapper>\n      </div>\n    );\n  };\n\n  return isOpen ? (\n    <div\n      className={modalClass}\n      data-element=\"pageReplacementModal\"\n      onMouseDown={isFileSelected ? closeModalWarning : closeThisModal}\n      id=\"pageReplacementModal\"\n    >\n      {isFileSelected ? renderFileSelectedPanel() : renderSelectionTabs()}\n    </div>\n  ) : null;\n};\n\nexport default PageReplacementModal;\n","import React, { useCallback } from 'react';\nimport PageReplacementModal from './PageReplacementModal';\n\nfunction PageReplacementModalContainer(props) {\n  const { closePageReplacement, ...rest } = props;\n\n  const closeModal = useCallback(() => {\n    closePageReplacement();\n  }, [closePageReplacement]);\n\n  const newProps = {\n    ...rest,\n    closeModal,\n  };\n\n  return <PageReplacementModal {...newProps} />;\n}\n\nexport default PageReplacementModalContainer;","import React from 'react';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PageReplacementModalContainer from './PageReplacementModalContainer';\nimport DataElements from 'constants/dataElement';\n\nfunction PageReplacementModalRedux(props) {\n  const dispatch = useDispatch();\n  const closePageReplacement = () => {\n    dispatch(actions.closeElement(DataElements.PAGE_REPLACEMENT_MODAL));\n  };\n\n  const selectableFiles = useSelector((state) => selectors.getPageReplacementFileList(state));\n\n  const [isOpen] = useSelector((state) => [\n    selectors.isElementOpen(state, DataElements.PAGE_REPLACEMENT_MODAL),\n  ]);\n\n  const selectedThumbnailPageIndexes = useSelector((state) => selectors.getSelectedThumbnailPageIndexes(state)\n  );\n\n  const selectedTab = useSelector((state) => selectors.getSelectedTab(state, DataElements.PAGE_REPLACEMENT_MODAL)\n  );\n\n  const newProps = {\n    ...props,\n    closePageReplacement,\n    selectableFiles,\n    isOpen,\n    selectedThumbnailPageIndexes,\n    selectedTab,\n  };\n\n  return <PageReplacementModalContainer {...newProps} />;\n}\n\nexport default PageReplacementModalRedux;","import PageReplacementModalRedux from './PageReplacementModalRedux';\n\nexport default PageReplacementModalRedux;"],"sourceRoot":""}