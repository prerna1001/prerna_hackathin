{"version":3,"sources":["webpack:///./src/ui/src/components/ViewControlsOverlay/ViewControlsOverlay.js","webpack:///./src/ui/src/components/ViewControlsOverlay/index.js"],"names":["ViewControlsOverlay","_core$getDocument","core","useCore","t","_slicedToArray","useTranslation","store","useStore","_useSelector2","useSelector","state","selectors","getTotalPages","getDisplayMode","isElementDisabled","DataElements","VIEW_CONTROLS_OVERLAY","isReaderMode","isMultiViewerMode","isFullScreen","getActiveDocumentViewerKey","getIsMultiTab","getIsMultiViewerModeAvailable","totalPages","displayMode","isDisabled","activeDocumentViewerKey","isMultiTab","isMultiViewerModeAvailable","isPageTransitionEnabled","documentViewer","getDocumentViewer","displayModeManager","getDisplayModeManager","isVirtualDisplayEnabled","pageTransition","layout","showCompareButton","isIE11","handleClick","setDisplayMode","displayModeObject","displayModeObjects","find","obj","exitReaderMode","setTimeout","showReaderButton","isFullPDFEnabled","getDocument","getType","React","createElement","FlyoutMenu","menu","trigger","VIEW_CONTROLS_OVERLAY_BUTTON","ariaLabel","Fragment","DataElementWrapper","dataElement","className","classNames","row","active","onClick","Button","title","img","isActive","role","enterReaderMode","rotateClockwise","ActionButton","rotateCounterClockwise","dispatch","actions","setIsMultiViewerMode","isIOS","isIOSFullScreenSupported","toggleFullscreen"],"mappings":"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","file":"chunks/chunk.96.js","sourcesContent":["import classNames from 'classnames';\nimport ActionButton from 'components/ActionButton';\nimport Button from 'components/Button';\nimport displayModeObjects from 'constants/displayModeObjects';\nimport useCore from 'hooks/useCore';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector, useStore } from 'react-redux';\nimport selectors from 'selectors';\nimport FlyoutMenu from '../FlyoutMenu/FlyoutMenu';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport { enterReaderMode, exitReaderMode } from 'helpers/readerMode';\nimport actions from 'actions';\nimport toggleFullscreen from 'helpers/toggleFullscreen';\nimport DataElements from 'src/constants/dataElement';\nimport { isIE11, isIOS, isIOSFullScreenSupported } from 'helpers/device';\n\nfunction ViewControlsOverlay() {\n  const { core } = useCore();\n  const [t] = useTranslation();\n  const store = useStore();\n\n  const [\n    totalPages,\n    displayMode,\n    isDisabled,\n    isReaderMode,\n    isMultiViewerMode,\n    isFullScreen,\n    activeDocumentViewerKey,\n    isMultiTab,\n    isMultiViewerModeAvailable,\n  ] = useSelector((state) => [\n    selectors.getTotalPages(state),\n    selectors.getDisplayMode(state),\n    selectors.isElementDisabled(state, DataElements.VIEW_CONTROLS_OVERLAY),\n    selectors.isReaderMode(state),\n    selectors.isMultiViewerMode(state),\n    selectors.isFullScreen(state),\n    selectors.getActiveDocumentViewerKey(state),\n    selectors.getIsMultiTab(state),\n    selectors.getIsMultiViewerModeAvailable(state),\n  ]);\n\n  const totalPageThreshold = 1000;\n  let isPageTransitionEnabled = totalPages < totalPageThreshold;\n\n  const documentViewer = core.getDocumentViewer();\n  const displayModeManager = documentViewer?.getDisplayModeManager();\n  if (displayModeManager && displayModeManager.isVirtualDisplayEnabled()) {\n    isPageTransitionEnabled = true;\n  }\n  const showCompareButton = !isIE11 && !isMultiTab && isMultiViewerModeAvailable;\n  const toggleCompareMode = () => {\n    store.dispatch(actions.setIsMultiViewerMode(!isMultiViewerMode));\n  };\n\n  const handleClick = (pageTransition, layout) => {\n    const setDisplayMode = () => {\n      const displayModeObject = displayModeObjects.find(\n        (obj) => obj.pageTransition === pageTransition && obj.layout === layout,\n      );\n      core.setDisplayMode(displayModeObject.displayMode);\n    };\n\n    if (isReaderMode) {\n      exitReaderMode(store);\n      setTimeout(() => {\n        setDisplayMode();\n      });\n    } else {\n      setDisplayMode();\n    }\n  };\n\n  const handleReaderModeClick = () => {\n    if (isReaderMode) {\n      return;\n    }\n    enterReaderMode(store);\n  };\n\n  if (isDisabled) {\n    return null;\n  }\n\n  let pageTransition;\n  let layout;\n\n  const displayModeObject = displayModeObjects.find((obj) => obj.displayMode === displayMode);\n  if (displayModeObject) {\n    pageTransition = displayModeObject.pageTransition;\n    layout = displayModeObject.layout;\n  }\n\n  const showReaderButton = core.isFullPDFEnabled() && core.getDocument()?.getType() === 'pdf';\n  // Full screen is supported in iPad OS for non-video elements, but not in iOS\n  const renderFullScreenToggle = () => {\n    if (isIOS && !isIOSFullScreenSupported) {\n      return null;\n    }\n    return (\n      <>\n        <DataElementWrapper\n          dataElement=\"viewControlsDivider3\"\n          className=\"divider\"\n        />\n        <DataElementWrapper\n          className=\"row\"\n          onClick={toggleFullscreen}\n          dataElement=\"fullScreenButton\"\n        >\n          <Button\n            img={isFullScreen ? 'icon-header-full-screen-exit' : 'icon-header-full-screen'}\n            role=\"option\"\n          />\n          <div className=\"title\">{isFullScreen ? t('action.exitFullscreen') : t('action.enterFullscreen')}</div>\n        </DataElementWrapper>\n      </>\n    );\n  };\n\n  return (\n    <FlyoutMenu\n      menu={DataElements.VIEW_CONTROLS_OVERLAY}\n      trigger={DataElements.VIEW_CONTROLS_OVERLAY_BUTTON}\n      ariaLabel={t('component.viewControls')}\n    >\n      {isPageTransitionEnabled && (\n        <>\n          <DataElementWrapper\n            dataElement=\"pageTransitionHeader\"\n            className=\"type\"\n            ariaLabel={t('option.displayMode.pageTransition')}\n          >\n            {t('option.displayMode.pageTransition')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            className={classNames({ row: true, active: (pageTransition === 'continuous' && !isReaderMode) })}\n            onClick={() => handleClick('continuous', layout)}\n            dataElement=\"continuousPageTransitionButton\"\n          >\n            <Button\n              title=\"option.pageTransition.continuous\"\n              img=\"icon-header-page-manipulation-page-transition-continuous-page-line\"\n              isActive={pageTransition === 'continuous' && !isReaderMode}\n              role=\"option\"\n            />\n            <div className=\"title\">{t('option.pageTransition.continuous')}</div>\n          </DataElementWrapper>\n          <DataElementWrapper\n            className={classNames({ row: true, active: (pageTransition === 'default' && !isReaderMode) })}\n            onClick={() => handleClick('default', layout)}\n            dataElement=\"defaultPageTransitionButton\"\n          >\n            <Button\n              title=\"option.pageTransition.default\"\n              img=\"icon-header-page-manipulation-page-transition-page-by-page-line\"\n              isActive={pageTransition === 'default' && !isReaderMode}\n              role=\"option\"\n            />\n            <div className=\"title\">{t('option.pageTransition.default')}</div>\n          </DataElementWrapper>\n          {showReaderButton && (\n            <DataElementWrapper\n              className={classNames({ row: true, active: isReaderMode })}\n              onClick={() => handleReaderModeClick()}\n              dataElement=\"readerPageTransitionButton\"\n            >\n              <Button\n                title=\"option.pageTransition.reader\"\n                img=\"icon-header-page-manipulation-page-transition-reader\"\n                isActive={isReaderMode}\n                role=\"option\"\n              />\n              <div className=\"title\">{t('option.pageTransition.reader')}</div>\n            </DataElementWrapper>\n          )}\n          {!isReaderMode && (\n            <DataElementWrapper\n              dataElement=\"viewControlsDivider1\"\n              className=\"divider\"\n            />\n          )}\n        </>\n      )}\n      {!isReaderMode && (\n        <>\n          <DataElementWrapper\n            dataElement=\"rotateHeader\"\n            className=\"type\"\n            ariaLabel={t('action.rotate')}\n          >\n            {t('action.rotate')}\n          </DataElementWrapper>\n          <DataElementWrapper className=\"row\" onClick={() => core.rotateClockwise(activeDocumentViewerKey)} dataElement=\"rotateClockwiseButton\">\n            <ActionButton\n              title=\"action.rotateClockwise\"\n              img=\"icon-header-page-manipulation-page-rotation-clockwise-line\"\n              role=\"option\"\n            />\n            <div className=\"title\">{t('action.rotateClockwise')}</div>\n          </DataElementWrapper>\n          <DataElementWrapper className=\"row\" onClick={() => core.rotateCounterClockwise(activeDocumentViewerKey)} dataElement=\"rotateCounterClockwiseButton\">\n            <ActionButton\n              title=\"action.rotateCounterClockwise\"\n              img=\"icon-header-page-manipulation-page-rotation-counterclockwise-line\"\n              role=\"option\"\n            />\n            <div className=\"title\">{t('action.rotateCounterClockwise')}</div>\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"viewControlsDivider2\"\n            className=\"divider\"\n          />\n          <DataElementWrapper\n            dataElement=\"layoutHeader\"\n            className=\"type\"\n            ariaLabel={t('option.displayMode.layout')}\n          >\n            {t('option.displayMode.layout')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            className={classNames({ row: true, active: layout === 'single' })}\n            onClick={() => handleClick(pageTransition, 'single')}\n            dataElement=\"singleLayoutButton\"\n          >\n            <Button\n              title=\"option.layout.single\"\n              img=\"icon-header-page-manipulation-page-layout-single-page-line\"\n              isActive={layout === 'single'}\n              role=\"option\"\n            />\n            <div className=\"title\">{t('option.layout.single')}</div>\n          </DataElementWrapper>\n          <DataElementWrapper\n            className={classNames({ row: true, active: layout === 'double' })}\n            onClick={() => handleClick(pageTransition, 'double')}\n            dataElement=\"doubleLayoutButton\"\n          >\n            <Button\n              title=\"option.layout.double\"\n              img=\"icon-header-page-manipulation-page-layout-double-page-line\"\n              isActive={layout === 'double'}\n              role=\"option\"\n            />\n            <div className=\"title\">{t('option.layout.double')}</div>\n          </DataElementWrapper>\n          <DataElementWrapper\n            className={classNames({ row: true, active: layout === 'cover' })}\n            onClick={() => handleClick(pageTransition, 'cover')}\n            dataElement=\"coverLayoutButton\"\n          >\n            <Button\n              title=\"option.layout.cover\"\n              img=\"icon-header-page-manipulation-page-layout-cover-line\"\n              isActive={layout === 'cover'}\n              role=\"option\"\n            />\n            <div className=\"title\">{t('option.layout.cover')}</div>\n          </DataElementWrapper>\n          {showCompareButton && (\n            <DataElementWrapper\n              className={classNames({ row: true, active: isMultiViewerMode })}\n              onClick={toggleCompareMode}\n              dataElement=\"toggleCompareModeButton\"\n            >\n              <Button\n                title=\"action.comparePages\"\n                img=\"icon-header-compare\"\n                isActive={isMultiViewerMode}\n                role=\"option\"\n              />\n              <div className=\"title\">{t('action.sideBySideView')}</div>\n            </DataElementWrapper>\n          )}\n        </>\n      )}\n      {renderFullScreenToggle()}\n    </FlyoutMenu>\n  );\n}\n\nexport default ViewControlsOverlay;\n","import ViewControlsOverlay from './ViewControlsOverlay';\n\nexport default ViewControlsOverlay;"],"sourceRoot":""}