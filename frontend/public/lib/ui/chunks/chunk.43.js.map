{"version":3,"sources":["webpack:///./src/ui/src/components/SignaturePanel/SignaturePanel.scss?13cc","webpack:///./src/ui/src/helpers/setVerificationResult.js","webpack:///./src/ui/src/components/SignaturePanel/WidgetLocator/WidgetLocator.js","webpack:///./src/ui/src/components/SignaturePanel/WidgetLocator/index.js","webpack:///./src/ui/src/components/SignaturePanel/WidgetInfo/WidgetInfo.js","webpack:///./src/ui/src/components/SignaturePanel/WidgetInfo/index.js","webpack:///./src/ui/src/components/SignaturePanel/SignaturePanel.js","webpack:///./src/ui/src/components/SignaturePanel/index.js","webpack:///./src/ui/src/components/SignatureValidationModal/SignatureValidationModal.scss?9ad2","webpack:///./src/ui/src/components/SignaturePanel/SignatureIcon/SignatureIcon.js","webpack:///./src/ui/src/components/SignaturePanel/SignatureIcon/index.js","webpack:///./src/ui/src/components/SignatureValidationModal/SignatureValidationModal.js","webpack:///./src/ui/src/components/SignatureValidationModal/index.js"],"names":["module","exports","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_ref","_callee","doc","certificates","trustLists","currentLanguage","revocationChecking","revocationProxyPrefix","dispatch","verificationResult","_context","getVerificationResult","actions","setVerificationResult","_x","_x2","_x3","_x4","_x5","_x6","_x7","_ref2","_callee5","PDFNet","VerificationResult","TrustStatus","DigestStatus","ModificationPermissionsStatus","DocumentStatus","verificationResults","_context6","window","Core","runWithCleanup","_callee4","opts","_iterator","_step","_loop","_iterator2","_step2","trustList","trustListDataStructure","supportedDataStructures","fdfDocBuffer","fdf","fieldIterator","field","digitalSigField","result","id","signer","signTime","documentPermission","isCertification","contactInfo","location","reason","validAtTimeOfSigning","signerName","issuerField","subjectField","signed","subFilter","signerCert","retrievedSubjectField","verificationStatus","documentStatus","digestStatus","trustStatus","permissionStatus","digestAlgorithm","disallowedChanges","validSignerIdentity","trustVerificationResultString","trustVerificationResultBoolean","timeOfTrustVerificationEnum","trustVerificationTime","trustVerificationResult","epochTrustVerificationTime","certPath","firstX509Cert","retrievedIssuerField","processedIssuerField","_retrievedSubjectField","_processedSubjectField","lastX509Cert","notBeforeEpochTime","notAfterEpochTime","badgeIcon","fieldName","_t8","_t9","_t0","_t1","_t10","_t11","_t12","_t13","_t14","_t15","_t16","_t17","_context5","getPDFDoc","VerificationOptions","SecurityLevel","e_compatibility_and_archiving","enableOnlineCRLRevocationChecking","setRevocationProxyPrefix","undefined","_createForOfIteratorHelper","certificate","fileReader","arrayBufferPromise","_t4","_t5","_t6","_t7","_context4","addTrustedCertificateFromURL","console","error","concat","File","toString","FileReader","reject","addEventListener","_ref5","_callee3","_context3","Uint8Array","target","_x13","readAsArrayBuffer","addTrustedCertificate","ArrayBuffer","Int8Array","Uint8ClampedArray","s","_regeneratorValues","constructor","name","arrayBuffer","includes","join","FDFDoc","createFromMemoryBuffer","loadTrustList","getFieldIteratorBegin","hasNext","current","isValid","getType","Field","Type","e_signature","DigitalSignatureField","createFromField","verify","getSDFObj","getObjNum","hasCryptographicSignature","getSubFilter","SubFilterType","e_adbe_pkcs7_detached","getSignerCertFromCMS","getSubjectField","processX501DistinguishedName","e_ETSI_RFC3161","getSignatureName","getContactInfo","getSigningTime","formatPDFNetDate","getLocation","getReason","getDocumentPermissions","getVerificationStatus","getDocumentStatus","getDigestStatus","getTrustStatus","getPermissionsStatus","getDigestAlgorithm","getDisallowedChanges","map","_ref4","_callee2","change","_t","_t2","_context2","getTypeAsString","objnum","type","_x12","all","e_trust_verified","hasTrustVerificationResult","getTrustVerificationResult","wasSuccessful","getResultString","getTimeOfTrustVerificationEnum","getTimeOfTrustVerification","formatDate","getCertPath","getIssuerField","assign","processedSubjectField","getNotBeforeEpochTime","getNotAfterEpochTime","warn","e_no_error","e_digest_verified","e_digest_verification_disabled","e_no_trust_status","e_unmodified","e_has_allowed_changes","e_permissions_verification_disabled","e_commonName","getName","next","_x8","_x9","_x0","_x1","_x10","_x11","date","year","month","day","hour","minute","second","Date","UTC","toLocaleDateString","replace","weekday","timeZoneName","epochTime","setUTCSeconds","_ref6","_callee6","x501DistinguishedNameObject","processedObject","allAttributeAndValues","_iterator3","_step3","x501AttributeTypeAndValue","objectIdentifier","key","_t18","_context7","getAllAttributesAndValues","getAttributeTypeOID","getRawValue","getStringValue","translateObjectIdentifierBotanOID","_x14","objectIdentifierOIDenum","JSON","stringify","WidgetLocator","rect","core","useCore","_useState2","_slicedToArray","useState","show","setShow","useEffect","scrollViewContainer","getScrollViewElement","handleScroll","removeEventListener","setTimeout","ReactDOM","createPortal","React","createElement","style","position","top","y1","left","x1","width","x2","height","y2","border","zIndex","getRootNode","querySelector","renderPermissionStatus","translate","DigestStatusErrorCodes","e_digest_invalid","permissionMessages","_defineProperty","e_invalidated_by_disallowed_changes","e_no_permissions_status","e_unsupported_permissions_features","propTypes","PropTypes","string","isRequired","onClick","func","instanceOf","Annotations","Forms","WidgetInfo","verificationType","content","useSelector","state","selectors","locatorRect","setLocatorRect","_useState4","signatureDetailsExpanded","setSignatureDetailsExpanded","_window$Core$PDFNet","TimeMode","useTranslation","useDispatch","titleInteraction","widgets","widget","jumpToAnnotation","_core$getScrollViewEl","scrollLeft","scrollTop","getRect","windowTopLeft","getDisplayModeObject","pageToWindow","x","PageNumber","windowBottomRight","jumpToWidget","openSignatureModalWithFocus","useFocusHandler","setSignatureValidationModalWidgetName","openElement","className","Fragment","PanelListItem","labelHeader","iconGlyph","useI18String","onKeyDown","tabIndex","_ref3","verificationTimeMessage","e_current","e_signing","e_timestamp","renderTrustVerification","data-element","aria-label","Button","img","classNames","arrow","expanded","ariaExpanded","isActive","ariaLabel","Array","isArray","_arrayWithHoles","push","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","slice","from","test","SignaturePanel","fields","setFields","showSpinner","setShowSpinner","_useState6","certificateErrorMessage","setCertificateErrorMessage","_useState8","getDocument","document","setDocument","isDisabled","isElementDisabled","getCertificates","shallowEqual","getCurrentLanguage","getIsRevocationCheckingEnabled","getRevocationProxyPrefix","trustListKey","getTrustListKey","onDocumentLoaded","onDocumentUnloaded","useCallback","onAnnotationChanged","annotations","action","isInFormCreationMode","getAnnotationManager","getFormFieldCreationManager","isInFormFieldCreationMode","addSignatureWidgetAnnotations","getAnnotationsList","removeAnnotations","addNonSignedFields","currentAnnotations","currentFields","forEach","annotation","SignatureWidgetAnnotation","getField","newSet","Set","_toConsumableArray","removeMatchingWidget","WidgetAnnotation","annotationManager","widgetToDelete","filter","annotationToFilter","getCustomData","Id","deleteAnnotations","resetFields","onDBRequestSucceeded","request","db","objectStoreNames","contains","close","transaction","getReq","objectStore","get","onsuccess","onerror","oncomplete","getTrustList","indexedDB","open","getAnnotationsLoadedPromise","fieldManager","getFieldManager","keys","message","Spinner","inPanel","Icon","glyph","panelData","panelNames","SIGNATURE","icon","renderLoadingOrErrors","index","collapsible","badge","size","SignatureIcon","_ref$size","SignatureValidationModal","_useSelector2","validationModalWidgetName","digitalSignatureValidation","isElementOpen","DataElements","SIGNATURE_VALIDATION_MODAL","isOpen","closeModal","useFocusOnClose","closeElements","SIGNATURE_MODAL","LOADING_MODAL","PRINT_MODAL","ERROR_MODAL","PASSWORD_MODAL","typeCapitalized","DigestAlgorithm","Modal","closed","ModalWrapper","title","closeHandler","onCloseClick","swipeToClose","status","interpolation","escapeValue","renderSignatureSummary","editor","DocumentPermissions","e_no_changes_allowed","e_formfilling_signing_allowed","e_annotating_formfilling_signing_allowed","e_unrestricted","renderDocumentPermission","e_untrusted","e_trust_verification_disabled","renderTrustStatus","e_corrupt_file","e_unsigned","e_bad_byteranges","e_corrupt_cryptographic_contents","renderDocumentStatus","e_weak_digest_algorithm_but_digest_verifiable","e_no_digest_status","e_unsupported_encoding","renderDigestStatus","e_SHA1","e_SHA256","e_SHA384","e_SHA512","e_RIPEMD160","e_unknown_digest_algorithm","renderDigestAlgorithm","label"],"mappings":"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","file":"chunks/chunk.43.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import actions from 'actions';\n\nconst DEFAULT_REVOCATION_PROXY_PREFIX = 'https://proxy.pdftron.com';\n\n/**\n * Side-effect function that sets the verification status of the document.\n * One of three possible results can happen:\n *\n * 1. Valid: All signatures have been successfully verified\n * 2. Unknown: One or more signatures has issues, but the verification API\n * cannot definitively state the signatures are valid or invalid (i.e. a\n * required Public Key Certificate is missing)\n * 3. Invalid: The document has been digitally signed, but has one or more\n * invalid signatures (i.e. because the document was modified after it was\n * signed, and one or more signature field did not allow for this to occur)\n *\n * The above results are dictated by the return values of:\n *\n * PDFNet.VerificationResult.getDocumentStatus:\n * https://docs.apryse.com/api/web/Core.PDFNet.VerificationResult.html#getDocumentStatus__anchor\n *\n * PDFNet.VerificationResult.getTrustStatus:\n * https://docs.apryse.com/api/web/Core.PDFNet.VerificationResult.html#getTrustStatus__anchor\n *\n * PDFNet.VerificationResult.getDigestStatus:\n * https://docs.apryse.com/api/web/Core.PDFNet.VerificationResult.html#getDigestStatus__anchor\n *\n * PDFNet.VerificationResult.getPermissionsStatus:\n * https://docs.apryse.com/api/web/Core.PDFNet.VerificationResult.html#getPermissionsStatus__anchor\n *\n * Valid:\n * DocumentStatus.e_no_error && TrustStatus.e_trust_verified\n *\n * Unknown:\n * DocumentStatus.e_no_error\n * && (\n *  DigestStatus.e_digest_verified\n *  || DigestStatus.e_digest_verification_disabled\n * ) && trustStatus !== TrustStatus.e_no_trust_status\n * && (\n *   ModificationPermissionsStatus.e_unmodified\n *   || ModificationPermissionsStatus.e_has_allowed_changes\n *   || ModificationPermissionsStatus.e_permissions_verification_disabled\n * )\n *\n * Any other combinations will cause the signature field to be considered\n * Invalid.\n * @ignore\n */\nexport default async (doc, certificates, trustLists, currentLanguage, revocationChecking, revocationProxyPrefix, dispatch) => {\n  const verificationResult = await getVerificationResult(doc, certificates, trustLists, currentLanguage, revocationChecking, revocationProxyPrefix);\n  dispatch(actions.setVerificationResult(verificationResult));\n  return verificationResult;\n};\n\n/**\n * Iterates through each signature widget in the document, retrieves and returns\n * all pertinent information pertaining to Digital Signature Verification\n *\n * @param {Core.Document} doc The document with signatures to verify\n * with the given certificate\n * @param {Array<File | string>} certificates The certificate files to be used\n * for verification. Can be passed as a File object, or a URL in the form\n * of a string, in which a GET call will be made to retrieve the certificate\n * @param {\n *   Array<Blob | ArrayBuffer | Int8Array | Uint8Array | Uint8ClampedArray>\n * } trustLists The Trust Lists to load for verification.\n * @param {string} currentLanguage Current UI language\n * @param {boolean} revocationChecking Determines if the PDFNet API\n * VerificationOptions.enableOnlineCRLRevocationChecking is invoked to enable\n * Online Certification Revocation List (CRL) Revocation Checking is done\n * within the PDFNet logic\n * @param {string} revocationProxyPrefix The URL of a proxy server that should\n * be used to avoid CORS related issues when contacting Certificate Revocation\n * List (CRL) servers\n * @returns {object} An object mapping the field name of each signature widget\n * to their verification results\n * @ignore\n */\nconst getVerificationResult = async (doc, certificates, trustLists, currentLanguage, revocationChecking, revocationProxyPrefix) => {\n  const { PDFNet } = window.Core;\n  const { VerificationResult } = PDFNet;\n  const {\n    TrustStatus,\n    DigestStatus,\n    ModificationPermissionsStatus,\n    DocumentStatus,\n  } = VerificationResult;\n  const verificationResults = {};\n\n\n  await PDFNet.runWithCleanup(async () => {\n    /**\n     * @todo Remove re-assignment of argument from original code?\n     */\n    doc = await doc.getPDFDoc();\n    const opts = await PDFNet.VerificationOptions.create(\n      PDFNet.VerificationOptions.SecurityLevel.e_compatibility_and_archiving\n    );\n\n    if (revocationChecking) {\n      await opts.enableOnlineCRLRevocationChecking(true);\n    }\n\n    if (revocationProxyPrefix === null) {\n      await opts.setRevocationProxyPrefix(DEFAULT_REVOCATION_PROXY_PREFIX);\n    } else if (revocationProxyPrefix !== undefined) {\n      await opts.setRevocationProxyPrefix(revocationProxyPrefix);\n    }\n\n    for (const certificate of certificates) {\n      if (typeof certificate === 'string') {\n        try {\n          await opts.addTrustedCertificateFromURL(certificate);\n        } catch {\n          console.error(\n            `Error encountered when trying to load certificate from URL: ${certificate}\\n`\n            + 'Certificate will not be used as part of verification process.'\n          );\n          continue;\n        }\n      } else if (\n        certificate instanceof File ||\n        Object.prototype.toString.call(certificate) === '[object File]'\n      ) {\n        const fileReader = new FileReader();\n        const arrayBufferPromise = new Promise((resolve, reject) => {\n          fileReader.addEventListener('load', async (e) => {\n            resolve(new Uint8Array(e.target.result));\n          });\n          fileReader.addEventListener('error', () => {\n            reject('Error reading the local certificate');\n          });\n\n          fileReader.readAsArrayBuffer(certificate);\n        });\n        try {\n          await opts.addTrustedCertificate(await arrayBufferPromise);\n        } catch (error) {\n          console.error(\n            `Error encountered when trying to load certificate: ${error}`\n            + 'Certificate will not be used as part of the verification process.'\n          );\n          continue;\n        }\n      } else if (\n        certificate instanceof ArrayBuffer\n        || certificate instanceof Int8Array\n        || certificate instanceof Uint8Array\n        || certificate instanceof Uint8ClampedArray\n      ) {\n        try {\n          await opts.addTrustedCertificate(certificate);\n        } catch (error) {\n          console.error(\n            `Error encountered when trying to load certificate: ${error}`\n            + 'Certificate will not be used as part of the verification process.'\n          );\n          continue;\n        }\n      }\n    }\n\n    for (const trustList of trustLists) {\n      const trustListDataStructure = trustList.constructor.name;\n      const supportedDataStructures = [\n        'ArrayBuffer',\n        'Int8Array',\n        'Uint8Array',\n        'Uint8ClampedArray',\n      ];\n      let fdfDocBuffer;\n      if (trustListDataStructure === 'Blob') {\n        fdfDocBuffer = await trustList.arrayBuffer();\n      } else if (supportedDataStructures.includes(trustListDataStructure)) {\n        fdfDocBuffer = trustList;\n      } else {\n        console.error(\n          'The provided TrustList is an unsupported data-structure. '\n          + 'Please ensure the TrustList is formatted as one of the following '\n          + `data-structures: ${[...supportedDataStructures, 'Blob'].join('|')}`\n        );\n        continue;\n      }\n      try {\n        const fdf = await PDFNet.FDFDoc.createFromMemoryBuffer(fdfDocBuffer);\n        await opts.loadTrustList(fdf);\n      } catch (error) {\n        console.error(\n          `Error encountered when trying to load certificate: ${error}. `\n          + 'Certificate will not be used as part of the verification process.'\n        );\n        continue;\n      }\n    }\n\n    const fieldIterator = await doc.getFieldIteratorBegin();\n    for (; (await fieldIterator.hasNext()); fieldIterator.next()) {\n      const field = await fieldIterator.current();\n      if (\n        !(await field.isValid())\n        || await field.getType() !== PDFNet.Field.Type.e_signature\n      ) {\n        continue;\n      }\n      const digitalSigField = await PDFNet.DigitalSignatureField.createFromField(field);\n      try {\n        const result = await digitalSigField.verify(opts);\n        const id = await (await digitalSigField.getSDFObj()).getObjNum();\n\n        let signer;\n        let signTime;\n        let documentPermission;\n        let isCertification;\n        let contactInfo;\n        let location;\n        let reason;\n        let validAtTimeOfSigning;\n        let signerName;\n        const issuerField = {};\n        const subjectField = {};\n\n        const signed = await digitalSigField.hasCryptographicSignature();\n        if (signed) {\n          const subFilter = await digitalSigField.getSubFilter();\n          if (subFilter === PDFNet.DigitalSignatureField.SubFilterType.e_adbe_pkcs7_detached) {\n            const signerCert = await digitalSigField.getSignerCertFromCMS();\n            /**\n             * @note \"Issuer\" refers to the Certificate Authority that issued the\n             * certificate\n             * \"Subject\" refers to the organization/person that the Certificate\n             * Auhority issued this certificate to\n             *\n             * It is likely that future UI iterations will leverage Issuer\n             * information, so the code has been commented out for now, but will\n             * be uncommented in future feature implementations\n             */\n            // const retrievedIssuerField = await signerCert.getIssuerField();\n            // const processedIssuerField = await processX501DistinguishedName(retrievedIssuerField) || {};\n            const retrievedSubjectField = await signerCert.getSubjectField();\n            const processedSubjectField = await processX501DistinguishedName(retrievedSubjectField) || {};\n            signer = processedSubjectField['e_commonName'];\n          }\n          // Getter functions cannot be called on Digital Signature fields using\n          // e_ETSI_RFC3161\n          if (subFilter !== PDFNet.DigitalSignatureField.SubFilterType.e_ETSI_RFC3161) {\n            if (!signer) {\n              signer = (\n                await digitalSigField.getSignatureName()\n                || await digitalSigField.getContactInfo()\n              );\n            }\n            signTime = await digitalSigField.getSigningTime();\n\n            if (await signTime.isValid()) {\n              signTime = formatPDFNetDate(signTime, currentLanguage);\n            } else {\n              signTime = null;\n            }\n\n            contactInfo = await digitalSigField.getContactInfo();\n            location = await digitalSigField.getLocation();\n            reason = await digitalSigField.getReason();\n          }\n\n          documentPermission = await digitalSigField.getDocumentPermissions();\n          isCertification = await digitalSigField.isCertification();\n        }\n\n        const verificationStatus = await result.getVerificationStatus();\n        const documentStatus = await result.getDocumentStatus();\n        const digestStatus = await result.getDigestStatus();\n        const trustStatus = await result.getTrustStatus();\n        const permissionStatus = await result.getPermissionsStatus();\n        const digestAlgorithm = await result.getDigestAlgorithm();\n        const disallowedChanges = await Promise.all(\n          (await result.getDisallowedChanges()).map(async (change) => ({\n            objnum: await change.getObjNum(),\n            type: await change.getTypeAsString(),\n          }))\n        );\n        const validSignerIdentity = trustStatus === TrustStatus.e_trust_verified;\n\n        let trustVerificationResultString;\n        let trustVerificationResultBoolean;\n        let timeOfTrustVerificationEnum;\n        let trustVerificationTime;\n        const hasTrustVerificationResult = await result.hasTrustVerificationResult();\n        if (hasTrustVerificationResult) {\n          const trustVerificationResult = await result.getTrustVerificationResult();\n\n          trustVerificationResultBoolean = await trustVerificationResult.wasSuccessful();\n          trustVerificationResultString = await trustVerificationResult.getResultString();\n          timeOfTrustVerificationEnum = await trustVerificationResult.getTimeOfTrustVerificationEnum();\n\n          const epochTrustVerificationTime = await trustVerificationResult.getTimeOfTrustVerification();\n          if (epochTrustVerificationTime) {\n            trustVerificationTime = formatDate(epochTrustVerificationTime, currentLanguage);\n          }\n          const certPath = await trustVerificationResult.getCertPath();\n          if (certPath.length) {\n            const firstX509Cert = certPath[0];\n            const retrievedIssuerField = await firstX509Cert.getIssuerField();\n            const processedIssuerField = await processX501DistinguishedName(retrievedIssuerField);\n            Object.assign(issuerField, processedIssuerField);\n            const retrievedSubjectField = await firstX509Cert.getSubjectField();\n            const processedSubjectField = await processX501DistinguishedName(retrievedSubjectField);\n            Object.assign(subjectField, processedSubjectField);\n            const lastX509Cert = certPath[certPath.length - 1];\n            /**\n             * @todo @colim @rdjericpdftron 2022-05-30\n             * Using the pdftron::PDF::VerificationOptions::LoadTrustList API\n             * in combination with\n             * pdftron::Crypto::X509Certificate::GetNotBeforeEpochTime\n             * or\n             * pdftron::Crypto::X509Certificate::GetNotAfterEpochTime\n             * Results in the following fatal error being thrown:\n             *\n             * calendar_point::to_std_timepoint() does not support years after\n             * 2037 on this system\n             *\n             * @rdjericpdftron Mentions that this should be addressed in a\n             * future release of PDFNet when the Botan library has been patched\n             */\n            try {\n              const notBeforeEpochTime = await lastX509Cert.getNotBeforeEpochTime();\n              const notAfterEpochTime = await lastX509Cert.getNotAfterEpochTime();\n              validAtTimeOfSigning = (\n                notAfterEpochTime >= epochTrustVerificationTime\n                && epochTrustVerificationTime >= notBeforeEpochTime\n              );\n            } catch (dateBugError) {\n              if (dateBugError.includes('calendar_point::to_std_timepoint() does not support years after')) {\n                console.warn(\n                  'The following error is a known issue with Botan, and aims to be addressed in a future release of '\n                  + 'PDFNet. This currently does not impact PDFTron\\'s Digital Signature Verification capabilities.'\n                );\n                console.warn(dateBugError);\n              }\n            }\n          }\n        }\n\n        let badgeIcon;\n        if (verificationStatus) {\n          badgeIcon = 'digital_signature_valid';\n        } else if (\n          documentStatus === DocumentStatus.e_no_error &&\n          (digestStatus === DigestStatus.e_digest_verified ||\n            digestStatus === DigestStatus.e_digest_verification_disabled) &&\n          trustStatus !== TrustStatus.e_no_trust_status &&\n          (permissionStatus === ModificationPermissionsStatus.e_unmodified ||\n            permissionStatus === ModificationPermissionsStatus.e_has_allowed_changes ||\n            permissionStatus === ModificationPermissionsStatus.e_permissions_verification_disabled)\n        ) {\n          badgeIcon = 'digital_signature_warning';\n        } else {\n          badgeIcon = 'digital_signature_error';\n        }\n\n        if (signer) {\n          signerName = signer;\n        } else if (!signer && subjectField.e_commonName) {\n          signerName = subjectField.e_commonName;\n        }\n        const fieldName = await field.getName();\n        verificationResults[fieldName] = {\n          signed,\n          signer,\n          signerName,\n          signTime,\n          verificationStatus,\n          documentStatus,\n          digestStatus,\n          trustStatus,\n          permissionStatus,\n          disallowedChanges,\n          trustVerificationResultBoolean,\n          trustVerificationResultString,\n          timeOfTrustVerificationEnum,\n          trustVerificationTime,\n          id,\n          badgeIcon,\n          validSignerIdentity,\n          digestAlgorithm,\n          documentPermission,\n          isCertification,\n          contactInfo,\n          location,\n          reason,\n          issuerField,\n          subjectField,\n          validAtTimeOfSigning,\n        };\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  });\n\n  return verificationResults;\n};\n\n/**\n * Retrieves the relevant information from the given object, containing date\n * information that originates from epoch time, and returns a string containing\n * the date and time information in a human readable string\n *\n * @param {object} date The date object that is returned from PDFNet\n * @returns {string} Human readable formatted date and time\n * @ignore\n */\nconst formatPDFNetDate = (date, currentLanguage) => {\n  const { year, month, day, hour, minute, second } = date;\n  const d = new Date(Date.UTC(year, month - 1, day, hour, minute, second));\n\n  return d.toLocaleDateString(currentLanguage.replace('_', '-'), {\n    year: 'numeric',\n    month: 'long',\n    weekday: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    timeZoneName: 'short',\n  });\n};\n\n/**\n * Converts an epoch time input to date in string\n *\n * @param {number} epochTime The epoch time to be converted\n * @returns {string} The converted epoch time\n * @ignore\n */\nconst formatDate = (epochTime, currentLanguage) => {\n  const date = new Date(0);\n  // Values greater than 59 are converted into their parent values\n  // (i.e. seconds -> minutes -> hours -> day etc.)\n  date.setUTCSeconds(epochTime);\n\n  return date.toLocaleDateString(currentLanguage.replace('_', '-'), {\n    year: 'numeric',\n    month: 'long',\n    weekday: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    timeZoneName: 'short',\n  });\n};\n\n/**\n * Processes an instance of the PDFNet.X501DistinguishedName class into a\n * Javascript object that is human readable\n *\n * Intended to process the objects returned from invoking\n * PDFNet.X509Certificate.GetIssuerField and\n * PDFNet.X509Certificate.GetSubjectField\n *\n * @param {PDFNet.X501DistinguishedName} x501DistinguishedNameObject An instance\n * of the PDFNet.X501DistinguishedName class, to be processed into a Javascript\n * object\n * @returns {object} Maps human readable keys (as opposed to the Botan Crpyto\n * OIDs, represented as Array<int> in PDFTron Core) to the corresponding values\n * they map to\n * @ignore\n */\nconst processX501DistinguishedName = async (x501DistinguishedNameObject) => {\n  const processedObject = {};\n  const allAttributeAndValues = await x501DistinguishedNameObject.getAllAttributesAndValues();\n  for (const x501AttributeTypeAndValue of allAttributeAndValues) {\n    const objectIdentifier = await x501AttributeTypeAndValue.getAttributeTypeOID();\n    const key = await objectIdentifier.getRawValue();\n    const value = await x501AttributeTypeAndValue.getStringValue();\n    processedObject[translateObjectIdentifierBotanOID(key)] = value;\n  }\n  return processedObject;\n};\n\n/**\n * Takes an Array<Number> argument (or its string representation from\n * JSON.stringify) and returns the enum it is supposed to represent based on\n * its OID representation in the Botan crypto C++ library\n *\n * PDFTron Core represents the key from the original Map<string, string>\n * data-structre in the form of an array\n *\n * @example The key of the object\n * { \"2.5.4.3\", \"X520.CommonName\" }\n * Is represented as [2,5,4,3] in PDFTron Core\n *\n * Source: https://botan.randombit.net/doxygen/oid__maps_8cpp_source.html\n *\n * @param {string | Array<Number>} objectIdentifierOIDenum The array returned\n * from the invocation of PDFNet.ObjectIdentifier.getRawValue, which can be\n * accepted as the Array input (which the body of the function will convert to a\n * string), or a string representation of the array\n * @returns {string} The human readable enum that the array represents\n * @ignore\n */\nconst translateObjectIdentifierBotanOID = (objectIdentifierOIDenum) => {\n  const botanArrayToEnum = {\n    '[2,5,4,3]': 'e_commonName',\n    '[2,5,4,4]': 'e_surname',\n    '[2,5,4,6]': 'e_countryName',\n    '[2,5,4,7]': 'e_localityName',\n    '[2,5,4,8]': 'e_stateOrProvinceName',\n    '[2,5,4,9]': 'e_streetAddress',\n    '[2,5,4,10]': 'e_organizationName',\n    '[2,5,4,11]': 'e_organizationalUnitName',\n    /**\n     * @note Added by @CorreyL, enum is not in PDFTronCore codebase as of\n     * PDFNetJS8.1\n     *\n     * Listed as { \"1.2.840.113549.1.9.1\", \"PKCS9.EmailAddress\" }\n     * in load_oid2str_map()\n     */\n    '[1,2,840,113549,1,9,1]': 'e_emailAddress',\n  };\n  const arrayAsString = (typeof objectIdentifierOIDenum === 'string')\n    ? objectIdentifierOIDenum\n    : JSON.stringify(objectIdentifierOIDenum);\n  return botanArrayToEnum[arrayAsString];\n};\n","import React, { useEffect, useState, } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport useCore from 'hooks/useCore';\nimport getRootNode from 'helpers/getRootNode';\n\nconst WidgetLocator = ({ rect }) => {\n  const { core } = useCore();\n  const [show, setShow] = useState(false);\n\n  useEffect(() => {\n    const scrollViewContainer = core.getScrollViewElement();\n    const handleScroll = () => {\n      setShow(false);\n    };\n\n    scrollViewContainer.addEventListener('scroll', handleScroll);\n    return () => scrollViewContainer.removeEventListener('scroll', handleScroll);\n  });\n\n  useEffect(() => {\n    if (rect) {\n      setTimeout(() => {\n        // so that the locator won't disappear because of the scroll\n        setShow(true);\n      }, 50);\n\n      setTimeout(() => {\n        setShow(false);\n      }, 700);\n    }\n  }, [rect]);\n\n  return (\n    show &&\n    ReactDOM.createPortal(\n      <div\n        style={{\n          position: 'absolute',\n          top: rect.y1,\n          left: rect.x1,\n          width: rect.x2 - rect.x1,\n          height: rect.y2 - rect.y1,\n          // eslint-disable-next-line custom/no-hex-colors\n          border: '1px solid #00a5e4',\n          // don't appear above the signature properties modal\n          zIndex: 99,\n        }}\n      />,\n      getRootNode().querySelector('#app')\n    )\n  );\n};\n\nexport default WidgetLocator;\n","import WidgetLocator from './WidgetLocator';\n\nexport default WidgetLocator;\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\n\nimport actions from 'actions';\nimport classNames from 'classnames';\nimport useCore from 'hooks/useCore';\nimport selectors from 'selectors';\n\nimport WidgetLocator from '../WidgetLocator';\nimport useFocusHandler from 'hooks/useFocusHandler';\nimport PanelListItem from 'src/components/PanelListItem';\nimport Button from 'src/components/Button';\n\nimport './WidgetInfo.scss';\n\nexport const renderPermissionStatus = ({\n  isCertification,\n  ModificationPermissionsStatus,\n  permissionStatus,\n  translate,\n  digestStatus,\n  DigestStatusErrorCodes\n}) => {\n\n  if (digestStatus === DigestStatusErrorCodes.e_digest_invalid) {\n    return <p>{translate('digitalSignatureVerification.digestStatus.documentHasBeenAltered')}</p>;\n  }\n\n  const permissionMessages = {\n    [ModificationPermissionsStatus.e_invalidated_by_disallowed_changes]: 'digitalSignatureVerification.permissionStatus.invalidatedByDisallowedChanges',\n    [ModificationPermissionsStatus.e_has_allowed_changes]: 'digitalSignatureVerification.permissionStatus.hasAllowedChanges',\n    [ModificationPermissionsStatus.e_unmodified]: isCertification\n      ? `${translate('digitalSignatureVerification.permissionStatus.unmodified')} ${translate('digitalSignatureVerification.certified')}.`\n      : `${translate('digitalSignatureVerification.permissionStatus.unmodified')} ${translate('digitalSignatureVerification.signed')}.`,\n    [ModificationPermissionsStatus.e_permissions_verification_disabled]: 'digitalSignatureVerification.permissionStatus.permissionsVerificationDisabled',\n    [ModificationPermissionsStatus.e_no_permissions_status]: 'digitalSignatureVerification.permissionStatus.noPermissionsStatus',\n    [ModificationPermissionsStatus.e_unsupported_permissions_features]: 'digitalSignatureVerification.permissionStatus.unsupportedPermissionsFeatures'\n  };\n\n  return <p>{translate(permissionMessages[permissionStatus] || '')}</p>;\n};\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  onClick: PropTypes.func,\n  field: PropTypes.instanceOf(window.Core.Annotations.Forms.Field),\n};\n\nconst WidgetInfo = ({ name, field }) => {\n  const { core } = useCore();\n  const verificationResult = useSelector((state) => selectors.getVerificationResult(state, name));\n  const [locatorRect, setLocatorRect] = useState(null);\n  const [signatureDetailsExpanded, setSignatureDetailsExpanded] = useState(false);\n  const { VerificationResult, VerificationOptions } = window.Core.PDFNet;\n  const { TimeMode } = VerificationOptions;\n  const { ModificationPermissionsStatus, DigestStatus: DigestStatusErrorCodes } = VerificationResult;\n  const [translate] = useTranslation();\n\n  const {\n    signed,\n    signTime,\n    verificationStatus,\n    permissionStatus,\n    disallowedChanges,\n    trustVerificationResultBoolean,\n    timeOfTrustVerificationEnum,\n    trustVerificationTime,\n    badgeIcon,\n    isCertification,\n    contactInfo,\n    location,\n    reason,\n    signerName,\n    digestStatus,\n  } = verificationResult;\n\n  const dispatch = useDispatch();\n\n  /**\n   * Side-effect function that highlights the SignatureWidgetAnnotation\n   * pertaining to the text element that was clicked by using core code to find\n   * the coordinates of the widget on the page it is placed on\n   *\n   * @param {Annotations.Forms.Field} field The field pertaining\n   * to the text element clicked in the Signature Panel\n   */\n  const jumpToWidget = (field) => {\n    if (!field.widgets.length) {\n      return;\n    }\n    const widget = field.widgets[0];\n    core.jumpToAnnotation(widget);\n\n    const { scrollLeft, scrollTop } = core.getScrollViewElement();\n    const rect = widget.getRect();\n    const windowTopLeft = core\n      .getDisplayModeObject()\n      .pageToWindow({ x: rect.x1, y: rect.y1 }, widget.PageNumber);\n    const windowBottomRight = core\n      .getDisplayModeObject()\n      .pageToWindow({ x: rect.x2, y: rect.y2 }, widget.PageNumber);\n\n    setLocatorRect({\n      x1: windowTopLeft.x - scrollLeft,\n      y1: windowTopLeft.y - scrollTop,\n      x2: windowBottomRight.x - scrollLeft,\n      y2: windowBottomRight.y - scrollTop,\n    });\n  };\n\n  /**\n   * Function that invokes the necessary methods when a user interacts with\n   * the title of the widget\n   *\n   * interaction\n   */\n  const titleInteraction = () => {\n    jumpToWidget(field);\n  };\n\n  const renderVerificationStatus = () => {\n    const verificationType = isCertification\n      ? translate('digitalSignatureVerification.Certification')\n      : translate('digitalSignatureVerification.Signature');\n    return (\n      <div className=\"title\">\n        <p>\n          {\n            verificationStatus\n              ? translate('digitalSignatureVerification.verificationStatus.valid', { verificationType })\n              : translate('digitalSignatureVerification.verificationStatus.failed', { verificationType })\n          }\n        </p>\n      </div>\n    );\n  };\n\n  const renderDisallowedChanges = () => {\n    return disallowedChanges.map(({ objnum, type }) => (\n      <li key={objnum}>\n        <p>\n          {\n            translate(\n              'digitalSignatureVerification.disallowedChange',\n              { type, objnum }\n            )\n          }\n        </p>\n      </li>\n    ));\n  };\n\n  const renderTrustVerification = () => {\n    let verificationTimeMessage;\n    switch (timeOfTrustVerificationEnum) {\n      case (TimeMode.e_current):\n        verificationTimeMessage = (\n          translate('digitalSignatureVerification.trustVerification.current')\n        );\n        break;\n      case (TimeMode.e_signing):\n        verificationTimeMessage = (\n          translate('digitalSignatureVerification.trustVerification.signing')\n        );\n        break;\n      case (TimeMode.e_timestamp):\n        verificationTimeMessage = (\n          translate('digitalSignatureVerification.trustVerification.timestamp')\n        );\n        break;\n      default:\n        console.warn(\n          `Unexpected pdftron::PDF::VerificationOptions::TimeMode: ${timeOfTrustVerificationEnum}`\n        );\n    }\n    return (\n      <>\n        <li>\n          <p>\n            {\n              translate(\n                trustVerificationResultBoolean\n                  ? 'digitalSignatureVerification.trustVerification.verifiedTrust'\n                  : 'digitalSignatureVerification.trustVerification.noTrustVerification'\n              )\n            }\n          </p>\n        </li>\n        {\n          /**\n           * @todo Chat with @rastko when he is available to determine what\n           * content from `trustVerificationResultString` could potentially\n           * be important to show to users\n           *\n           * <div>\n           *   <p className='bold'>Trust verification result:</p>\n           *   {\n           *     trustVerificationResultString.split('\\n').map((line, idx) => {\n           *       return (\n           *         <p\n           *           key={`trustVerificationResultString-${idx}`}\n           *           className={line[0] === '\\t' ? '' : 'bold'}\n           *         >\n           *           {line}\n           *         </p>\n           *       );\n           *     })\n           *   }\n           * </div>\n           */\n        }\n        <li>\n          <p>\n            {trustVerificationTime}\n          </p>\n        </li>\n        <li>\n          <p>\n            {verificationTimeMessage}\n          </p>\n        </li>\n      </>\n    );\n  };\n\n  const renderSignatureDetails = () => {\n    // No additional signature details to render\n    if (!contactInfo && !location && !reason) {\n      return null;\n    }\n    return (\n      <div\n        className='signatureDetails'\n        tabIndex={-1}\n      >\n        <div className=\"title collapsible\">\n          <Button\n            img=\"icon-chevron-right\"\n            className={classNames({\n              arrow: true,\n              expanded: signatureDetailsExpanded,\n            })}\n            ariaExpanded={signatureDetailsExpanded}\n            isActive={signatureDetailsExpanded}\n            ariaLabel={translate('digitalSignatureVerification.signatureDetails.signatureDetails')}\n            onClick={\n              () => setSignatureDetailsExpanded(!signatureDetailsExpanded)\n            }\n          />\n          <p>\n            {\n              translate(\n                'digitalSignatureVerification.signatureDetails.signatureDetails'\n              )\n            }\n          </p>\n        </div>\n        {\n          signatureDetailsExpanded\n          && (\n            <ul className=\"body\">\n              <li>\n                <p className=\"bold\">\n                  {\n                    `${translate('digitalSignatureVerification.signatureDetails.contactInformation')}:`\n                  }\n                </p>\n                <p className=\"result-for-header\">\n                  {\n                    contactInfo\n                    || translate('digitalSignatureVerification.signatureDetails.noContactInformation')\n                  }\n                </p>\n              </li>\n              <li>\n                <p className=\"bold\">\n                  {\n                    `${translate('digitalSignatureVerification.signatureDetails.location')}:`\n                  }\n                </p>\n                <p className=\"result-for-header\">\n                  {\n                    location\n                    || translate('digitalSignatureVerification.signatureDetails.noLocation')\n                  }\n                </p>\n              </li>\n              <li>\n                <p className=\"bold\">\n                  {\n                    `${translate('digitalSignatureVerification.signatureDetails.reason')}:`\n                  }\n                </p>\n                <p className=\"result-for-header\">\n                  {\n                    reason\n                    || translate('digitalSignatureVerification.signatureDetails.noReason')\n                  }\n                </p>\n              </li>\n              {\n                signTime && (\n                  <li>\n                    <p className=\"bold\">\n                      {\n                        `${translate('digitalSignatureVerification.signatureDetails.signingTime')}:`\n                      }\n                    </p>\n                    <p className=\"result-for-header\">\n                      {\n                        signTime\n                        || translate('digitalSignatureVerification.signatureDetails.noSigningTime')\n                      }\n                    </p>\n                  </li>\n                )\n              }\n            </ul>\n          )\n        }\n      </div>\n    );\n  };\n\n  const openSignatureModal = () => {\n    dispatch(actions.setSignatureValidationModalWidgetName(name));\n    dispatch(actions.openElement('signatureValidationModal'));\n  };\n\n  const openSignatureModalWithFocus = useFocusHandler(openSignatureModal);\n\n  /**\n   * Renders a button to open the signature modal\n   */\n  const renderSignaturePropertiesButton = () => {\n    return (\n      <li>\n        <button\n          data-element={`signatureProperties-${name}`}\n          onClick={openSignatureModalWithFocus}\n          tabIndex={0}\n          className=\"signatureProperties link\"\n          aria-label='Open signature properties modal'\n        >\n          <p className=\"bold underline\">\n            {translate('digitalSignatureVerification.signatureProperties')}\n          </p>\n        </button>\n      </li>\n    );\n  };\n\n  const getRenderTitle = () => {\n    let content = isCertification\n      ? translate('digitalSignatureVerification.Certified')\n      : translate('digitalSignatureVerification.Signed');\n    content += ` ${translate('digitalSignatureVerification.by')} ${signerName || translate('digitalSignatureModal.unknown')}`;\n    if (signTime) {\n      content += ` ${translate('digitalSignatureVerification.on')} ${signTime}`;\n    }\n    return content;\n  };\n\n  return (\n    <div className=\"signature-widget-info\">\n      {signed ? (\n        <React.Fragment>\n          <PanelListItem\n            labelHeader={getRenderTitle()}\n            iconGlyph={badgeIcon}\n            useI18String={false}\n            onClick={titleInteraction}\n            onKeyDown={titleInteraction}\n          >\n            <div\n              className='verificationDetails'\n              tabIndex={-1}\n            >\n              <div className=\"header\">\n                {\n                  renderVerificationStatus({\n                    isCertification,\n                    verificationStatus,\n                  })\n                }\n                <ul className=\"body\">\n                  <li>\n                    {\n                      renderPermissionStatus({\n                        isCertification,\n                        ModificationPermissionsStatus,\n                        permissionStatus,\n                        translate,\n                        digestStatus,\n                        DigestStatusErrorCodes,\n                      })\n                    }\n                  </li>\n                  {renderDisallowedChanges()}\n                  {renderTrustVerification()}\n                  {renderSignaturePropertiesButton()}\n                </ul>\n              </div>\n            </div>\n            <div className=\"header header-with-arrow\">\n              {renderSignatureDetails()}\n            </div>\n          </PanelListItem>\n        </React.Fragment>\n      ) : (\n        <PanelListItem\n          labelHeader={translate('digitalSignatureVerification.unsignedSignatureField', { fieldName: field.name })}\n          iconGlyph='digital_signature_empty'\n          useI18String={false}\n          onClick={titleInteraction}\n          onKeyDown={titleInteraction}\n        />\n      )}\n      <WidgetLocator rect={locatorRect} />\n    </div>\n  );\n};\n\nWidgetInfo.propTypes = propTypes;\n\nexport default WidgetInfo;\n","import WidgetInfo, { renderPermissionStatus } from './WidgetInfo';\n\nexport default WidgetInfo;\nexport {\n  renderPermissionStatus\n};\n","import React, { useCallback, useEffect, useState, } from 'react';\nimport { shallowEqual, useDispatch, useSelector, } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport actions from 'actions';\nimport useCore from 'hooks/useCore';\nimport selectors from 'selectors';\nimport setVerificationResult from 'helpers/setVerificationResult';\n\nimport Spinner from 'components/Spinner';\nimport WidgetInfo from './WidgetInfo';\n\nimport './SignaturePanel.scss';\nimport Icon from 'components/Icon';\nimport { panelData, panelNames } from 'constants/panel';\n\nconst SignaturePanel = () => {\n  const { core } = useCore();\n  const dispatch = useDispatch();\n  const [fields, setFields] = useState([]);\n  const [showSpinner, setShowSpinner] = useState(false);\n  const [certificateErrorMessage, setCertificateErrorMessage] = useState('');\n  const [document, setDocument] = useState(core.getDocument());\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, 'signaturePanel'));\n  const certificate = useSelector(selectors.getCertificates, shallowEqual);\n  const currentLanguage = useSelector(selectors.getCurrentLanguage);\n  const revocationChecking = useSelector(selectors.getIsRevocationCheckingEnabled);\n  const revocationProxyPrefix = useSelector(selectors.getRevocationProxyPrefix);\n  const trustListKey = useSelector(selectors.getTrustListKey);\n\n  const [translate] = useTranslation();\n\n  const onDocumentLoaded = async () => {\n    setDocument(core.getDocument());\n  };\n\n  const onDocumentUnloaded = useCallback(() => {\n    setShowSpinner(true);\n    dispatch(actions.setVerificationResult({}));\n  }, [setShowSpinner, dispatch]);\n\n  const onAnnotationChanged = ((annotations, action) => {\n    const isInFormCreationMode = core.getAnnotationManager().getFormFieldCreationManager().isInFormFieldCreationMode();\n\n    if (action === 'add') {\n      addSignatureWidgetAnnotations(core.getAnnotationManager().getAnnotationsList());\n    } else if (action === 'delete' && isInFormCreationMode) {\n      removeAnnotations(annotations);\n    }\n  });\n\n  const addNonSignedFields = () => {\n    const currentAnnotations = core.getAnnotationManager().getAnnotationsList();\n    addSignatureWidgetAnnotations(currentAnnotations);\n  };\n\n  const addSignatureWidgetAnnotations = (annotations) => {\n    const currentFields = [];\n    annotations.forEach((annotation) => {\n      if (annotation instanceof window.Core.Annotations.SignatureWidgetAnnotation) {\n        currentFields.push(annotation.getField());\n      }\n    });\n    const newSet = new Set(currentFields);\n    setFields([...newSet]);\n  };\n\n  const removeAnnotations = (annotations) => {\n    annotations.forEach((annotation) => {\n      removeMatchingWidget(annotation);\n    });\n\n    addNonSignedFields();\n  };\n\n  const removeMatchingWidget = (annotation) => {\n    const isWidget = annotation instanceof window.Core.Annotations.WidgetAnnotation;\n    if (isWidget) {\n      const annotationManager = core.getAnnotationManager();\n      const annotationList = annotationManager.getAnnotationsList();\n      const widgetToDelete = annotationList.filter((annotationToFilter) => {\n        return annotationToFilter.getCustomData('trn-editing-rectangle-id') === annotation.Id;\n      });\n      annotationManager.deleteAnnotations(widgetToDelete);\n    }\n  };\n\n  const resetFields = () => {\n    setFields([]);\n    addNonSignedFields();\n  };\n\n  useEffect(() => {\n    // This ensures that when the document loads, the state of this component is\n    // updated accordingly\n    core.addEventListener('documentLoaded', onDocumentLoaded);\n    core.addEventListener('documentUnloaded', onDocumentUnloaded);\n    core.addEventListener('annotationChanged', onAnnotationChanged);\n    core.addEventListener('formFieldCreationModeStarted', resetFields);\n    core.addEventListener('formFieldCreationModeEnded', resetFields);\n    return () => {\n      core.removeEventListener('documentLoaded', onDocumentLoaded);\n      core.removeEventListener('documentUnloaded', onDocumentUnloaded);\n      core.removeEventListener('annotationChanged', onAnnotationChanged);\n      core.removeEventListener('formFieldCreationModeStarted', resetFields);\n      core.removeEventListener('formFieldCreationModeEnded', resetFields);\n    };\n  }, [onDocumentUnloaded]);\n\n  const onDBRequestSucceeded = (request, resolve, reject) => {\n    const db = request.result;\n\n    const isTrustListStoreAvailable = db.objectStoreNames.contains('trustList');\n    if (!isTrustListStoreAvailable) {\n      db.close();\n      resolve(null);\n      return;\n    }\n\n    const transaction = db.transaction('trustList', 'readonly');\n    const store = transaction.objectStore('trustList');\n\n    let getReq = store.get(trustListKey);\n    getReq.onsuccess = async () => {\n      const value = getReq.result;\n\n      if (!value) {\n        resolve(null);\n      } else if (value instanceof ArrayBuffer) {\n        resolve(value.slice(0));\n      } else {\n        resolve(value);\n      }\n    };\n\n    getReq.onerror = () => reject(getReq.error);\n\n    transaction.onerror = () => {\n      reject(transaction.error);\n    };\n    transaction.oncomplete = () => db.close();\n  };\n\n  const getTrustList = async () => {\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open('WebViewerTrustList', 1);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => {\n        onDBRequestSucceeded(request, resolve, reject);\n      };\n    });\n  };\n\n\n  useEffect(() => {\n    // Need certificates for PDFNet to verify against, and for the document\n    // to be loaded in order to iterate through the signature fields in the\n    // document\n    if (document) {\n      // We need to wait for the annotationsLoaded event, otherwise the\n      // Field will not exist in the document\n      core.getAnnotationsLoadedPromise().then(async () => {\n        setShowSpinner(true);\n        const trustList = trustListKey ? (await getTrustList() || []) : [];\n        setVerificationResult(document, certificate, trustList, currentLanguage, revocationChecking, revocationProxyPrefix, dispatch)\n          .then(async (verificationResult) => {\n            const fieldManager = core.getAnnotationManager().getFieldManager();\n            setFields(Object.keys(verificationResult).map((fieldName) => fieldManager.getField(fieldName)));\n            setCertificateErrorMessage('');\n          })\n          .catch((e) => {\n            if (e && e.message) {\n              setCertificateErrorMessage(e.message);\n            } else {\n              console.error(e);\n            }\n          })\n          .then(() => {\n            addNonSignedFields();\n          })\n          .finally(() => {\n            setShowSpinner(false);\n          });\n      });\n    } else {\n      setShowSpinner(true);\n    }\n  }, [certificate, document, dispatch, currentLanguage, trustListKey]);\n\n  if (isDisabled) {\n    return null;\n  }\n\n  /**\n   * Returns a JSX element if document loading is not complete, or an error\n   * occurs, otherwise nothing is returned, indicating that information about\n   * one or more signature will be returned from this component\n   */\n  const renderLoadingOrErrors = () => {\n    let result;\n    if (showSpinner) {\n      result = <Spinner inPanel width={'40px'} height={'40px'} />;\n    } else if (certificateErrorMessage === 'Error reading the local certificate') {\n      result = translate('digitalSignatureVerification.panelMessages.localCertificateError');\n    } else if (certificateErrorMessage === 'Download Failed') {\n      result = translate('digitalSignatureVerification.panelMessages.certificateDownloadError');\n    } else if (!fields.length) {\n      result = translate('digitalSignatureVerification.panelMessages.noSignatureFields');\n    } else {\n      /**\n       * If document has completed loading, there are no errors, and there are\n       * signature fields, this function does not need to return anything\n       */\n      return null;\n    }\n\n    return (\n      <div className=\"empty-panel-container\">\n        <Icon className=\"empty-icon\" glyph={panelData[panelNames.SIGNATURE].icon} />\n        <div className=\"empty-message\">{result}</div>\n      </div>\n    );\n  };\n\n  return (\n    <div\n      className=\"Panel SignaturePanel\"\n      data-element=\"signaturePanel\"\n    >\n      {renderLoadingOrErrors()}\n      {\n        !showSpinner && fields.length > 0 && (\n          fields.map((field, index) => {\n            return (\n              <WidgetInfo\n                key={index}\n                name={field.name}\n                collapsible\n                field={field}\n              />\n            );\n          })\n        )\n      }\n    </div>\n  );\n};\n\nexport default SignaturePanel;\n","import SignaturePanel from './SignaturePanel';\nimport { renderPermissionStatus } from './WidgetInfo';\n\nexport default SignaturePanel;\n\nexport {\n  renderPermissionStatus,\n  SignaturePanel,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from 'components/Icon';\n\nimport './SignatureIcon.scss';\n\nconst propTypes = {\n  badge: PropTypes.string,\n  size: PropTypes.string,\n};\n\nconst SignatureIcon = ({ badge, size = 'medium' }) => (\n  <div className=\"signature-icon\">\n    {badge && <Icon glyph={badge} className={`badge ${size}`} />}\n  </div>\n);\n\nSignatureIcon.propTypes = propTypes;\n\nexport default SignatureIcon;\n","import SignatureIcon from './SignatureIcon';\n\nexport default SignatureIcon;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport Button from 'components/Button';\nimport ModalWrapper from 'components/ModalWrapper';\n\nimport {\n  renderPermissionStatus,\n  Spinner,\n} from 'components/SignaturePanel';\nimport SignatureIcon from 'components/SignaturePanel/SignatureIcon';\n\nimport actions from 'actions';\n\nimport './SignatureValidationModal.scss';\nimport useFocusOnClose from 'src/hooks/useFocusOnClose';\n\nconst SignatureValidationModal = () => {\n  const [translate] = useTranslation();\n\n  const [isOpen, verificationResult] = useSelector(\n    (state) => {\n      const { validationModalWidgetName } = state.digitalSignatureValidation;\n      return [\n        selectors.isElementOpen(state, DataElements.SIGNATURE_VALIDATION_MODAL),\n        selectors.getVerificationResult(state, validationModalWidgetName),\n      ];\n    },\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n  const closeModal = useFocusOnClose(() => {\n    dispatch(actions.closeElements([DataElements.SIGNATURE_VALIDATION_MODAL]));\n  });\n\n  useEffect(() => {\n    if (isOpen) {\n      dispatch(\n        actions.closeElements([\n          DataElements.SIGNATURE_MODAL,\n          DataElements.LOADING_MODAL,\n          DataElements.PRINT_MODAL,\n          DataElements.ERROR_MODAL,\n          DataElements.PASSWORD_MODAL,\n        ])\n      );\n    }\n  }, [dispatch, isOpen]);\n\n  /**\n   * @todo Figure out if this useEffect is still needed? Component appears to be\n   * operating normally without it.\n   */\n  /*\n  useEffect(() => {\n    const onDigitalSignatureAvailable = widget => {\n      setWidgetName(widget.getField().name);\n      dispatch(actions.openElements(['signatureValidationModal']));\n    };\n\n    core.addEventListener(\n      'digitalSignatureAvailable',\n      onDigitalSignatureAvailable,\n    );\n    return () => core.removeEventListener(\n      'digitalSignatureAvailable',\n      onDigitalSignatureAvailable,\n    );\n  }, [dispatch]);\n  */\n\n  const {\n    badgeIcon,\n    verificationStatus,\n    permissionStatus,\n    isCertification,\n    documentPermission,\n    trustVerificationResultString,\n    timeOfTrustVerificationEnum,\n    trustVerificationTime,\n    digestAlgorithm,\n    digestStatus,\n    documentStatus,\n    trustStatus,\n    signerName,\n  } = verificationResult;\n  const {\n    DigestAlgorithm,\n    DigitalSignatureField,\n    VerificationOptions,\n    VerificationResult,\n  } = window.Core.PDFNet;\n  const {\n    ModificationPermissionsStatus,\n    TrustStatus,\n    DigestStatus,\n    DocumentStatus,\n  } = VerificationResult;\n  const { TimeMode } = VerificationOptions;\n\n  const renderSignatureSummary = () => {\n    let status;\n    switch (badgeIcon) {\n      case 'digital_signature_valid':\n        status = translate('digitalSignatureModal.valid');\n        break;\n      case 'digital_signature_warning':\n        status = translate('digitalSignatureModal.unknown');\n        break;\n      case 'digital_signature_error':\n        status = translate('digitalSignatureModal.invalid');\n        break;\n      default:\n        status = translate('digitalSignatureModal.unknown');\n    }\n\n    const type = isCertification\n      ? translate('digitalSignatureModal.certification')\n      : translate('digitalSignatureModal.signature');\n\n    return (\n      <div>\n        <div className=\"summary-box\">\n          <SignatureIcon badge={badgeIcon} size=\"medium\" />\n          <div>\n            {\n              translate(\n                'digitalSignatureModal.summaryBox.summary',\n                {\n                  type,\n                  status,\n                }\n              )\n            }\n            {\n              badgeIcon === 'digital_signature_valid'\n                ? translate(\n                  'digitalSignatureModal.summaryBox.signedBy',\n                  {\n                    name: signerName || translate('digitalSignatureModal.unknown'),\n                    interpolation: { escapeValue: false }\n                  },\n                ) : ''\n            }\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderHeaderTitle = () => {\n    const typeCapitalized = isCertification\n      ? translate('digitalSignatureModal.Certification')\n      : translate('digitalSignatureModal.Signature');\n\n    return translate('digitalSignatureModal.title', { type: typeCapitalized });\n  };\n\n  /**\n   * Returns a message in a <p> tag corresponding to the enum value of\n   * documentPermission, which originates from the invocation of\n   * PDFNet.DigitalSignatureField.getDocumentPermissions\n   */\n  const renderDocumentPermission = () => {\n    if (!documentPermission) {\n      return;\n    }\n\n    let content = '';\n    const editor = isCertification ? 'certifier' : 'signer';\n\n    switch (documentPermission) {\n      case DigitalSignatureField.DocumentPermissions.e_no_changes_allowed:\n        content += translate('digitalSignatureModal.documentPermission.noChangesAllowed', { editor });\n        break;\n      case DigitalSignatureField.DocumentPermissions.e_formfilling_signing_allowed:\n        content += translate('digitalSignatureModal.documentPermission.formfillingSigningAllowed', { editor });\n        break;\n      case DigitalSignatureField.DocumentPermissions.e_annotating_formfilling_signing_allowed:\n        content += translate('digitalSignatureModal.documentPermission.annotatingFormfillingSigningAllowed', { editor });\n        break;\n      case DigitalSignatureField.DocumentPermissions.e_unrestricted:\n        content += translate('digitalSignatureModal.documentPermission.unrestricted', { editor });\n        break;\n    }\n\n    return <p>{content}</p>;\n  };\n\n  /**\n   * Returns a message in a <p> tag corresponding to the signature's trust\n   * verification result.\n   *\n   * If trustVerificationResultString is a falsy value (i.e. undefined, null or\n   * empty string), originating from the invocation of\n   * PDFNet.TrustVerificationResult.getResultString, then a message indicating\n   * no trust verification result is rendered.\n   *\n   * If a trust verification result is available, then the based on\n   * timeOfTrustVerificationEnum, which originates from the invocation of\n   * PDFNet.TrustVerificationResult.getTimeOfTrustVerificationEnum, an\n   * appropriate message is rendered\n   */\n  const renderTrustVerification = () => {\n    if (!trustVerificationResultString) {\n      return (\n        <p>{translate('digitalSignatureModal.trustVerification.none')}</p>\n      );\n    }\n\n    let content = '';\n    switch (timeOfTrustVerificationEnum) {\n      case (TimeMode.e_current):\n        content += translate(\n          'digitalSignatureModal.trustVerification.current',\n          { trustVerificationTime }\n        );\n        break;\n      case (TimeMode.e_signing):\n        content += translate(\n          'digitalSignatureModal.trustVerification.signing',\n          { trustVerificationTime }\n        );\n        break;\n      case (TimeMode.e_timestamp):\n        content += translate(\n          'digitalSignatureModal.trustVerification.timestamp',\n          { trustVerificationTime }\n        );\n        break;\n    }\n\n    return <p>{content}</p>;\n  };\n\n  /**\n   * Returns a message in a <p> tag corresponding to the signature's digest\n   * algorithm, which originates from the invocation of\n   * PDFNet.verificationResult.getDigestAlgorithm\n   */\n  const renderDigestAlgorithm = () => {\n    let content = translate('digitalSignatureModal.digestAlgorithm.preamble');\n\n    switch (digestAlgorithm) {\n      case DigestAlgorithm.Type.e_SHA1:\n        content += 'SHA1.';\n        break;\n      case DigestAlgorithm.Type.e_SHA256:\n        content += 'SHA256.';\n        break;\n      case DigestAlgorithm.Type.e_SHA384:\n        content += 'SHA384.';\n        break;\n      case DigestAlgorithm.Type.e_SHA512:\n        content += 'SHA512.';\n        break;\n      case DigestAlgorithm.Type.e_RIPEMD160:\n        content += 'RIPEMD160.';\n        break;\n      case DigestAlgorithm.Type.e_unknown_digest_algorithm:\n        content = translate('digitalSignatureModal.digestAlgorithm.unknown');\n        break;\n    }\n\n    return <p>{content}</p>;\n  };\n\n  /**\n   * Returns a message in a <p> tag corresponding to the boolean trust status of\n   * the signature, which originates from evaluating whether or not the value of\n   * PDFNet.verificationResult.getTrustStatus is set to the enum\n   * PDFNet.verificationResult.trustStatus.e_trust_verified\n   *\n   * Intentionally an un-used function, as @rdjericpdftron has noted that it\n   * is superfluous, but the method has been left behind in-case it could be\n   * leveraged in the future\n   */\n  /*\n  const renderSignerIdentityValidity = () => {\n    let content = translate('digitalSignatureModal.signerIdentity.preamble');\n    if (validSignerIdentity) {\n      content += translate('digitalSignatureModal.signerIdentity.valid');\n    } else {\n      content += translate('digitalSignatureModal.signerIdentity.unknown');\n    }\n    return <p>{content}</p>;\n  };\n  */\n\n  const renderDocumentStatus = () => {\n    let content;\n\n    switch (documentStatus) {\n      case DocumentStatus.e_no_error:\n        content = translate(\n          'digitalSignatureVerification.documentStatus.noError'\n        );\n        break;\n      case DocumentStatus.e_corrupt_file:\n        content = translate(\n          'digitalSignatureVerification.documentStatus.corruptFile'\n        );\n        break;\n      case DocumentStatus.e_unsigned:\n        content = translate(\n          'digitalSignatureVerification.documentStatus.unsigned'\n        );\n        break;\n      case DocumentStatus.e_bad_byteranges:\n        content = translate(\n          'digitalSignatureVerification.documentStatus.badByteRanges'\n        );\n        break;\n      case DocumentStatus.e_corrupt_cryptographic_contents:\n        content = translate(\n          'digitalSignatureVerification.documentStatus.corruptCryptographicContents'\n        );\n        break;\n    }\n\n    return <p>{content}</p>;\n  };\n\n  const renderDigestStatus = () => {\n    let content;\n\n    switch (digestStatus) {\n      case DigestStatus.e_digest_invalid:\n        content = translate(\n          'digitalSignatureVerification.digestStatus.digestInvalid'\n        );\n        break;\n      case DigestStatus.e_digest_verified:\n        content = translate(\n          'digitalSignatureVerification.digestStatus.digestVerified'\n        );\n        break;\n      case DigestStatus.e_digest_verification_disabled:\n        content = translate(\n          'digitalSignatureVerification.digestStatus.digestVerificationDisabled'\n        );\n        break;\n      case DigestStatus.e_weak_digest_algorithm_but_digest_verifiable:\n        content = translate(\n          'digitalSignatureVerification.digestStatus.weakDigestAlgorithmButDigestVerifiable'\n        );\n        break;\n      case DigestStatus.e_no_digest_status:\n        content = translate(\n          'digitalSignatureVerification.digestStatus.noDigestStatus'\n        );\n        break;\n      case DigestStatus.e_unsupported_encoding:\n        content = translate(\n          'digitalSignatureVerification.digestStatus.unsupportedEncoding'\n        );\n        break;\n    }\n\n    return <p>{content}</p>;\n  };\n\n  const renderTrustStatus = () => {\n    const verificationType = isCertification\n      ? translate('digitalSignatureVerification.certifier')\n      : translate('digitalSignatureVerification.signer');\n    let content;\n\n    switch (trustStatus) {\n      case TrustStatus.e_trust_verified:\n        content = translate(\n          'digitalSignatureVerification.trustStatus.trustVerified',\n          { verificationType },\n        );\n        break;\n      case TrustStatus.e_untrusted:\n        content = translate(\n          'digitalSignatureVerification.trustStatus.untrusted'\n        );\n        break;\n      case TrustStatus.e_trust_verification_disabled:\n        content = translate(\n          'digitalSignatureVerification.trustStatus.trustVerificationDisabled'\n        );\n        break;\n      case TrustStatus.e_no_trust_status:\n        content = translate(\n          'digitalSignatureVerification.trustStatus.noTrustStatus'\n        );\n        break;\n    }\n\n    return <p>{content}</p>;\n  };\n\n  const renderDocumentIntegrityHeader = () => (\n    <p\n      className=\"header\"\n    >\n      {translate('digitalSignatureModal.header.documentIntegrity')}\n    </p>\n  );\n\n  const renderIdentitiesTrustHeader = () => (\n    <p\n      className=\"header\"\n    >\n      {translate('digitalSignatureModal.header.identitiesTrust')}\n    </p>\n  );\n\n  const renderGeneralErrorsHeader = () => (\n    <p\n      className=\"header\"\n    >\n      {translate('digitalSignatureModal.header.generalErrors')}\n    </p>\n  );\n\n  const renderDigestStatusHeader = () => (\n    <p\n      className=\"header\"\n    >\n      {translate('digitalSignatureModal.header.digestStatus')}\n    </p>\n  );\n\n  const renderModalBody = () => {\n    if (typeof verificationStatus === 'undefined') {\n      return (\n        <div className=\"center\">\n          <Spinner />\n        </div>\n      );\n    }\n    return (\n      <>\n        <div className=\"body\">\n          <div className=\"section\">\n            {renderDocumentIntegrityHeader()}\n            {\n              renderPermissionStatus({\n                isCertification,\n                ModificationPermissionsStatus,\n                permissionStatus,\n                translate,\n                digestStatus,\n                DigestStatusErrorCodes: DigestStatus,\n              })\n            }\n            {renderDocumentPermission()}\n          </div>\n          <div className=\"section\">\n            {renderIdentitiesTrustHeader()}\n            {renderTrustStatus()}\n            {renderTrustVerification()}\n          </div>\n          <div className=\"section\">\n            {renderGeneralErrorsHeader()}\n            {renderDocumentStatus()}\n          </div>\n          <div className=\"section\">\n            {renderDigestStatusHeader()}\n            {renderDigestStatus()}\n            {renderDigestAlgorithm()}\n          </div>\n        </div>\n        <div className=\"modal-footer\">\n          <Button\n            className=\"close-modal-button\"\n            onClick={closeModal}\n            label={translate('action.close')}\n          />\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <div\n      className={classNames({\n        Modal: true,\n        SignatureValidationModal: true,\n        open: isOpen,\n        closed: !isOpen,\n      })}\n      data-element={DataElements.SIGNATURE_VALIDATION_MODAL}\n    >\n      <ModalWrapper\n        title={renderHeaderTitle()}\n        closeHandler={closeModal}\n        onCloseClick={closeModal}\n        isOpen={isOpen}\n        swipeToClose\n      >\n        <div className=\"container\">\n          {renderSignatureSummary()}\n          {renderModalBody()}\n        </div>\n      </ModalWrapper>\n    </div>\n  );\n};\n\nexport default SignatureValidationModal;\n","import SignatureValidationModal from './SignatureValidationModal';\n\nexport default SignatureValidationModal;\n"],"sourceRoot":""}