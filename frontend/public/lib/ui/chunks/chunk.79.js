(window.webpackJsonpWebViewerUI=window.webpackJsonpWebViewerUI||[]).push([[79],{1632:function(e,t,a){e.exports={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"}},1842:function(e,t,a){"use strict";a.r(t);a(9),a(10),a(14),a(38),a(27),a(21),a(49),a(20),a(12),a(43),a(22),a(95),a(18),a(16),a(8),a(17),a(19),a(116),a(62),a(11),a(13);var n=a(2),r=(a(37),a(0)),o=a.n(r),l=a(44),i=a(53),c=(a(83),a(30),a(15)),s=a.n(c),u=a(61),m=a(1),d=a.n(m),f=a(307),v=a(6),p=a(3),y=a(33),b=a(148);function g(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,i=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return S(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var M={scales:d.a.arrayOf(d.a.object).isRequired,selectedScales:d.a.arrayOf(d.a.string).isRequired,onScaleSelected:d.a.func.isRequired,onAddingNewScale:d.a.func.isRequired,ariaLabelledBy:d.a.string,isScaleModalEnabled:d.a.bool},O=window.Core.Scale,A=function(e){var t=e.scales,a=void 0===t?[]:t,c=e.selectedScales,m=void 0===c?[]:c,d=e.onScaleSelected,E=e.onAddingNewScale,S=e.ariaLabelledBy,M=e.isScaleModalEnabled,A=Object(y.a)().core,w=h(Object(f.a)(),1)[0],j=Object(v.d)(),N=h(Object(r.useState)([]),2),C=N[0],T=N[1];Object(r.useEffect)((function(){if(a&&0!==a.length){var e=L(a||[]);T(e)}else T([])}),[a]);var I=Object(v.e)((function(e){return p.a.getIsMultipleScalesMode(e)})),_=m.length>1,x=M&&I,L=function(e){var t=[],a=A.getScales();return e&&0!==e.length&&a&&0!==Object.keys(a).length?(e.forEach((function(e){var n=e.toString(),r=a[n];if(r&&0!==r.length){var o=[],l=new Set,i=!0;r.forEach((function(e){e instanceof window.Core.Annotations.Annotation&&(l.add(e.PageNumber),o.push(e),A.canModify(e)||(i=!1))})),t.some((function(e){return e.title===n}))||t.push({scale:e,title:e.toString(),measurementsNum:o.length,pages:g(l),canDelete:i})}else console.warn("No measurements found for scale ".concat(n))})),t):t},D=function(e){if(e){var t={message:!!e.pages.length?o.a.createElement("div",{className:"customMessage"},o.a.createElement("p",null,o.a.createElement("span",null,w("option.measurement.deleteScaleModal.scaleIsOn-delete-info"),o.a.createElement("b",null," ".concat(w("option.measurement.deleteScaleModal.page-delete-info")," ").concat(e.pages.join(", ")," ")),w("option.measurement.deleteScaleModal.appliedTo-delete-info"),o.a.createElement("b",null," ".concat(e.measurementsNum," ").concat(e.measurementsNum>1?w("option.measurement.deleteScaleModal.measurements"):w("option.measurement.deleteScaleModal.measurement"),"."))),o.a.createElement("span",null," "),o.a.createElement("span",null,w("option.measurement.deleteScaleModal.deletionIs"),o.a.createElement("b",null," ".concat(w("option.measurement.deleteScaleModal.irreversible")," ")),w("option.measurement.deleteScaleModal.willDeleteMeasurement"))),o.a.createElement("p",null,w("option.measurement.deleteScaleModal.confirmDelete"))):o.a.createElement("div",{className:"customMessage"},o.a.createElement("p",null,o.a.createElement("span",null,w("option.measurement.deleteScaleModal.confirmDelete"),w("option.measurement.deleteScaleModal.thisCantBeUndone")))),title:"".concat(w("option.measurement.deleteScaleModal.deleteScale")," ").concat(e.title),confirmBtnText:w("action.confirm"),onConfirm:function(){return A.deleteScale(e.scale)}};j(n.a.showWarningMessage(t))}},R=function(e){var t=A.getScalePrecision(e),a=O.getFormattedValue(e.pageScale.value,e.pageScale.unit,t,!1),n=O.getFormattedValue(e.worldScale.value,e.worldScale.unit,t,!1),r="".concat(a," = ").concat(n);return o.a.createElement("div",null,r)},k=w("option.measurement.scaleOverlay.multipleScales");if(m.length&&!_){var P=new O(m[0]);k=R(P)}var U=h(Object(r.useState)(!1),2),q=U[0],F=U[1],W=function(){F((function(e){return!e}))},H=Object(r.useRef)(null);Object(b.a)(H,(function(){F(!1)}));return o.a.createElement(u.a,{className:"scale-overlay-selector",dataElement:"scaleSelector",tabIndex:-1,ref:H,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||W()},onClick:W},o.a.createElement("div",{"data-testid":"scale-selector",className:"scale-overlay-selection","aria-expanded":q,"aria-labelledby":S,"aria-controls":"scale-overlay-dropdown",role:"combobox",tabIndex:0},o.a.createElement("div",{className:"scale-overlay-item"},o.a.createElement("div",{className:"scale-overlay-name"},k),o.a.createElement("div",{className:"scale-overlay-arrow"},o.a.createElement(i.a,{glyph:"icon-chevron-down",ariaHidden:!0})))),q&&o.a.createElement("ul",{id:"scale-overlay-dropdown",className:s()("scale-overlay-list")},o.a.createElement("li",null,o.a.createElement("div",{className:"scale-overlay-name"},k),o.a.createElement("div",{className:"scale-overlay-arrow"},o.a.createElement("button",{className:"scale-overlay-selected-arrow"},o.a.createElement(i.a,{glyph:"icon-chevron-up",ariaHidden:!0})))),C.map((function(e){return o.a.createElement("li",{key:e.title,className:s()({'className="scale-overlay-item':!0,"option-selected":m.includes(e.title)})},o.a.createElement("button",{className:s()({options:!0}),onClick:function(){return d(m,e.title)},onKeyDown:function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),d(m,e.title))}},R(e.scale)),o.a.createElement("button",{className:"delete",tabIndex:0,onClick:function(t){t.preventDefault(),t.stopPropagation(),D(e)},onKeyDown:function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),D(e))},disabled:C.length<=1||!e.canDelete,"aria-label":"".concat(w("action.delete")," ").concat(e.title)},o.a.createElement(i.a,{glyph:"icon-delete-line"})))})),x&&o.a.createElement("li",null,o.a.createElement(l.a,{onClick:E,label:w("option.measurement.scaleOverlay.addNewScale"),className:"add-new-scale"}))))};A.propTypes=M;var w=A,j=a(90),N=a(5);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,i=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var I={scales:d.a.arrayOf(d.a.object).isRequired,selectedScales:d.a.arrayOf(d.a.string).isRequired,onScaleSelected:d.a.func.isRequired,onAddingNewScale:d.a.func.isRequired},_=function(e){var t=e.scales,a=e.selectedScales,n=e.onScaleSelected,r=e.onAddingNewScale,c=C(Object(f.a)(),1)[0],s=Object(j.a)(r),u=Object(v.e)((function(e){return!p.a.isDisabledViewOnly(e,N.a.SCALE_MODAL)}));return o.a.createElement("div",{className:"scale-overlay-header"},o.a.createElement(i.a,{glyph:"ic-calibrate",className:"scale-overlay-icon"}),o.a.createElement("h4",{id:"scale-dropdown-label",className:"scale-overlay-title"},c("option.measurementOption.scale")),t.length?o.a.createElement(w,{scales:t,selectedScales:a,onScaleSelected:n,onAddingNewScale:r,ariaLabelledBy:"scale-dropdown-label",isScaleModalEnabled:u}):u&&o.a.createElement(l.a,{className:"add-new-scale",onClick:s,dataElement:"addNewScale",label:c("option.measurement.scaleOverlay.addNewScale")}))};_.propTypes=I;var x=_,L=(a(36),a(267),a(56)),D={distanceMeasurement:"option.measurementOverlay.distanceMeasurement",perimeterMeasurement:"option.measurementOverlay.perimeterMeasurement",areaMeasurement:"option.measurementOverlay.areaMeasurement",rectangularAreaMeasurement:"option.measurementOverlay.areaMeasurement",cloudyRectangularAreaMeasurement:"option.measurementOverlay.areaMeasurement",ellipseMeasurement:"option.measurementOverlay.areaMeasurement",arcMeasurement:"option.measurementOverlay.arcMeasurement"},R=a(419),k=function(e){return 1===e?0:null==e?void 0:e.toString().split(".")[1].length},P=a(45),U=function(e,t,a){var n;if(e&&t)if(a){var r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2)),l=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2));n=Math.acos((o*o+r*r-l*l)/(2*o*r))}else n=Math.atan2(t.y-e.y,t.x-e.x),n=(n=Math.abs(n))>Math.PI/2?Math.PI-n:n;return n},q=function(e){switch(e){case"ft'":return"ft";case'in"':return"in";case"ft-in":return"ft";default:return e}};function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,i=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var H={'in"':"in","ft'":"ft"};V.propTypes={annotation:d.a.object,isOpen:d.a.bool.isRequired,selectedTool:d.a.object,canModify:d.a.bool};var B=window.Core.Scale;function V(e){var t,a=e.annotation,n=e.isOpen,l=e.selectedTool,i=e.canModify,c=Object(y.a)().core,s=F(Object(f.a)(),1)[0],u=Object(v.e)((function(e){return p.a.isViewOnly(e)})),m=null==a?void 0:a.Measure.axis[0].factor,d=(null==a?void 0:a.DisplayUnits[0])||(null==l||null===(t=l.Measure)||void 0===t?void 0:t.unit),b=F(Object(r.useState)(((null==a?void 0:a.getLineLength())*m||0).toFixed(2)),2),g=b[0],h=b[1],E=function(e){h(e.target.value),A(e),S()},S=function(){c.getTool("AnnotationCreateDistanceMeasurement").finish()},M=function(){c.getAnnotationManager().selectAnnotation(a)},O=function(){c.getAnnotationManager().deselectAnnotation(a)},A=function(e){if(a){var t=Math.abs(e.target.value);t<a.Precision&&(t=a.Precision,h(t));var n=a.Measure.axis[0].factor;N(t/n)}},w=Object(r.useCallback)((function(){var e=c.getAnnotationManager();e.drawAnnotations(a.PageNumber),e.trigger("annotationChanged",[[a],"modify",{}])}),[a]),j=Object(r.useCallback)((function(){var e,t,n=c.getCurrentPage(),r=c.getPageWidth(n),o=c.getPageHeight(n),l=a.getAngle()*(180/Math.PI).toFixed(2),i=a.getStartPoint(),s=i.x,u=i.y;e=Math.abs(l)<90?r:0,t=l>0?o:0;var m=Math.abs((e-s)/Math.cos(a.getAngle())),d=Math.abs((t-u)/Math.sin(a.getAngle()));return Math.min(m,d)}),[a]),N=Object(r.useCallback)((function(e){if(n=a.getLineLength(),r=e,!(Math.abs(n-r)<.1)){var t=j();a.setLineLength(Math.min(t,e)),w()}var n,r}),[a,w,j]),C=function(e){var t,a;return null!=e&&null!==(t=e.DisplayUnits)&&void 0!==t&&t.length&&(a=2===e.DisplayUnits.length&&"ft'"===e.DisplayUnits[0]&&'in"'===e.DisplayUnits[1]?"in":e.DisplayUnits[0]),H[a]||a||H[d]||d},T=function(e){L(e.target.value),function(e){var t=e.target.value*(Math.PI/180)*-1,n=a.getLineLength(),r=a.Start,o=Math.cos(t)*n+r.x,l=Math.sin(t)*n+r.y;a.setEndPoint(o,l),a.adjustRect(),w()}(e),S()},I=Object(r.useCallback)((function(){if(!a)return 0;var e=a.getAngle();return((e=(e*=-1)<0?e+2*Math.PI:e)/Math.PI*180).toFixed(2)}),[a]),_=F(Object(r.useState)(I()),2),x=_[0],L=_[1];return Object(r.useEffect)((function(){n||N(a.getLineLength())}),[a,N,n]),Object(r.useEffect)((function(){if(a){var e=function(){h((a.getLineLength()*m).toFixed(2)),L(I())};return c.addEventListener("mouseMove",e),function(){c.removeEventListener("mouseMove",e)}}L(I())}),[a,I,m,l]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},s("option.measurementOverlay.distance"),":"),o.a.createElement("input",{className:"scale-input",type:"number",min:"0",disabled:u||!a||!i,value:a?g:0,autoFocus:!P.l,onChange:function(e){E(e),M()},onBlur:function(e){A(e)},onKeyDown:function(e){"Enter"===e.key&&(E(e),O())}}),q(d)),o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},s("option.measurementOverlay.angle"),":"),o.a.createElement("input",{className:"scale-input",type:"number",min:"0",max:"360",disabled:u||!a||!i,value:x,autoFocus:!P.l,onChange:function(e){T(e),M()},onKeyDown:function(e){"Enter"===e.key&&(T(e),O())}}),"°"),function(){var e=a&&U(a.Start,a.End)||0,t=C(a),n=B.getFormattedValue(a&&Math.abs(g*Math.cos(e)),t,null==a?void 0:a.Precision),r=B.getFormattedValue(a&&Math.abs(g*Math.sin(e)),t,null==a?void 0:a.Precision);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},s("option.measurementOverlay.xAxis"),":"),o.a.createElement("div",{className:"measurement"},n)),o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},s("option.measurementOverlay.yAxis"),":"),o.a.createElement("div",{className:"measurement"},r)))}())}var G=V;function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,i=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var Y={annotation:function(e,t,a){return e.annotation||e.selectedTool?(e.annotation&&d.a.checkPropTypes({annotation:d.a.shape({Precision:d.a.number,DisplayUnits:d.a.arrayOf(d.a.string),getContents:d.a.func})},{annotation:e.annotation},"prop","EllipseMeasurementOverlay"),null):new Error("One of props 'annotation' or 'selectedTool' was not specified in '".concat(a,"'."))},selectedTool:function(e,t,a){return e.annotation||e.selectedTool?(e.selectedTool&&d.a.checkPropTypes({selectedTool:d.a.shape({defaults:d.a.shape({Precision:d.a.number}),Measure:d.a.shape({unit:d.a.string})})},{selectedTool:e.selectedTool},"prop","EllipseMeasurementOverlay"),null):new Error("One of props 'annotation' or 'selectedTool' was not specified in '".concat(a,"'."))},isOpen:d.a.bool.isRequired,canModify:d.a.bool};function z(e){var t,a,n,l,i=e.annotation,c=e.isOpen,s=e.selectedTool,u=e.canModify,m=Object(y.a)().core,d=Object(f.a)().t,b=Object(v.e)((function(e){return p.a.isDocumentReadOnly(e)})),g=(null==i||null===(t=i.getMeasurementTextWithScaleAndUnits)||void 0===t?void 0:t.call(i))||0,h={precision:i?i.Precision:null==s||null===(a=s.defaults)||void 0===a?void 0:a.Precision,unit:q(null===(n=(null==i?void 0:i.Scale)||(null==s||null===(l=s.defaults)||void 0===l?void 0:l.Scale))||void 0===n?void 0:n[1][1]),area:g},E=function(){C(S())};Object(r.useEffect)((function(){return E(),m.addEventListener("mouseMove",E),function(){m.removeEventListener("mouseMove",E)}}),[i]),Object(r.useEffect)((function(){var e=function(e,t){if("deselected"===t){var a=e[0];w(a.getWidth(),a)}};return m.addEventListener("annotationSelected",e),function(){m.removeEventListener("annotationSelected",e)}}),[]);var S=function(){if(!i)return 0;var e=i&&k(i.Precision)||0,t=i.Measure.axis[0].factor;return((i.Width/2).toFixed(e)*t).toFixed(e)},M=function(e){var t=e.target.value||0,a=t>0?t:1e-4,n=2*(a/i.Measure.axis[0].factor),r=i.getRect(),o={x1:r.x1,y1:r.y1,x2:r.x1+n,y2:r.y1+n};i.setHeight(n),i.setWidth(n),i.resize(o),C(a),O(i),m.getTool("AnnotationCreateEllipseMeasurement").finish()},O=function(e){var t=m.getAnnotationManager();t.redrawAnnotation(e),t.trigger("annotationChanged",[[e],"modify",[]])},A=Object(r.useCallback)((function(e){var t=m.getCurrentPage(),a=m.getPageWidth(t),n=m.getPageHeight(t),r=a-e.X,o=n-e.Y;return Math.min(r,o)})),w=Object(r.useCallback)((function(e,t){if(e>A(t)){var a=t.getRect(),n=a.x1,r=a.x2,o=a.y1,l=a.y2,i=t.Width,c=t.Height,s=m.getCurrentPage(),u=m.getPageWidth(s),d=m.getPageHeight(s);r>u&&(a.x2=u,i=u-n),l>d&&(a.y2=d,c=d-o),i<u?t.setWidth(i):t.setWidth(u),c<d?t.setHeight(c):t.setHeight(d),t.resize(a),O(t)}}),[A]);Object(r.useEffect)((function(){c||w(i.getWidth(),i)}),[i,w,c]);var j=$(Object(r.useState)(S()),2),N=j[0],C=j[1];return o.a.createElement("div",{className:"measurement__detail-container"},o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.shared.precision"),":"),o.a.createElement("div",{className:"measurement"},R.q[h.precision]||h.precision)),o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.measurementOverlay.area"),":"),o.a.createElement("div",{className:"measurement"},h.area)),o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.measurementOverlay.radius"),":"),o.a.createElement("input",{autoFocus:!P.l,className:"scale-input",type:"number",min:"0",disabled:b||!i||!u,value:N,onChange:function(e){M(e),m.getAnnotationManager().selectAnnotation(i)},onBlur:function(e){return function(e){var t=Math.abs(e.target.value),a=i.Measure.axis[0].factor;w(2*(t/a),i),E()}(e)},onKeyDown:function(e){"Enter"===e.key&&(M(e),m.getAnnotationManager().deselectAnnotation(i))}}),h.unit))}z.propTypes=Y;var J=z;a(1632);function X(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var Z={annotation:d.a.object,isOpen:d.a.bool.isRequired,selectedTool:d.a.object,canModify:d.a.bool},ee=function(e){var t,a,n,l,c=e.annotation,s=e.isOpen,u=e.selectedTool,m=e.canModify,d=Object(f.a)().t,v=Object(r.useMemo)((function(){var e,t,a,n,r=c?Object(L.g)(c):Object(L.j)(u.name);return{key:r,icon:Object(L.e)(r).icon,color:c?c.Color.toHexString():null==u||null===(e=u.defaults)||void 0===e||null===(t=e.StrokeColor)||void 0===t?void 0:t.toHexString(),contents:c?null===(a=c.getMeasurementTextWithScaleAndUnits)||void 0===a?void 0:a.call(c):0,precision:c?c.Precision:null==u||null===(n=u.defaults)||void 0===n?void 0:n.Precision}}));return o.a.createElement("div",{className:"MeasurementDetail"},(t=v.key,a=v.icon,n=v.color,l=D[t],o.a.createElement("div",{className:"header"},o.a.createElement(i.a,{glyph:a,color:n,className:"icon"}),o.a.createElement("div",null,d(l)))),function(){var e,t,a=v.key,n=v.precision;return"ellipseMeasurement"===a?o.a.createElement(J,{annotation:c,selectedTool:u,isOpen:s,canModify:m}):o.a.createElement("div",{className:"measurement__detail-container"},o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.shared.precision"),":"),o.a.createElement("div",{className:"measurement"},R.q[n]||n)),"distanceMeasurement"===a&&o.a.createElement(G,{annotation:c,isOpen:s,selectedTool:u,canModify:m}),["rectangularAreaMeasurement","cloudyRectangularAreaMeasurement","perimeterMeasurement","areaMeasurement"].includes(a)&&function(){var e=v.key,t=v.contents,a={distanceMeasurement:d("option.measurementOverlay.distance"),perimeterMeasurement:d("option.measurementOverlay.perimeter"),areaMeasurement:d("option.measurementOverlay.area"),rectangularAreaMeasurement:d("option.measurementOverlay.area"),cloudyRectangularAreaMeasurement:d("option.measurementOverlay.area")};return o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},a[e],":"),o.a.createElement("div",{className:"measurement"},t))}(),"arcMeasurement"===a&&(t=(null==c?void 0:c.Length)||0,o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.measurementOverlay.length")),o.a.createElement("div",{className:"measurement"},t))),"arcMeasurement"===a&&(e=(null==c?void 0:c.Radius)||0,o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.measurementOverlay.radius")),o.a.createElement("div",{className:"measurement"},e))),!["rectangularAreaMeasurement","distanceMeasurement","cloudyRectangularAreaMeasurement"].includes(a)&&function(){if(!c)return o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.measurementOverlay.angle"),":"),o.a.createElement("div",{className:"measurement"},"0°"));var e=v.key,t=function(e){var t=e.getPath(),a=t.length;return[t[a-3],t[a-2],t[a-1]]},a={distanceMeasurement:function(e){return[e.Start,e.End]},perimeterMeasurement:t,areaMeasurement:t,rectangularAreaMeasurement:t,cloudyRectangularAreaMeasurement:t,arcMeasurement:t}[e](c).filter((function(e){return!!e})),n=U.apply(void 0,X(a))||0;if(n){var r=k(c.Precision);n=(n/Math.PI*180).toFixed(r)}return"arcMeasurement"===e&&(n=c.Angle.toFixed(2)),void 0!==n&&o.a.createElement("div",{className:"measurement__detail-item"},o.a.createElement("div",{className:"measurement_list"},d("option.measurementOverlay.angle"),":"),o.a.createElement("div",{className:"measurement"},n,"°"))}())}())};ee.propTypes=Z;var te=ee;function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,i=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var re=window.Core.Scale,oe={tempScale:d.a.string,onCancelCalibrationMode:d.a.func,onApplyCalibration:d.a.func},le=function(e){var t,a=e.tempScale,n=e.onCancelCalibrationMode,r=e.onApplyCalibration,l=ae(Object(f.a)(),1)[0],c=Object(v.e)((function(e){return p.a.isElementOpen(e,"annotationPopup")})),s=c&&a;return o.a.createElement("div",{className:"scale-overlay-calibrate"},o.a.createElement("div",{className:"scale-overlay-header"},o.a.createElement(i.a,{glyph:"ic-calibrate",className:"scale-overlay-icon"}),o.a.createElement("div",{className:"scale-overlay-title"},l("option.measurement.scaleModal.calibrate"))),o.a.createElement("div",{className:"scale-overlay-content"},l(s?"option.measurement.scaleOverlay.inputKnowDimension":"option.measurement.scaleOverlay.selectTwoPoints")),o.a.createElement("div",{className:"divider"}),o.a.createElement("div",{className:"scale-overlay-footer"},o.a.createElement("button",{className:"calibration-cancel",onMouseDown:n},l("action.cancel")),o.a.createElement("button",{className:"calibration-apply",disabled:!(c&&a&&(null===(t=new re(a).worldScale)||void 0===t?void 0:t.value)>0),"data-element":"calibrationApply",onMouseDown:r,onTouchStart:r},l("action.apply"))))};le.propTypes=oe;var ie=le;function ce(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,i=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return me(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var de=window.Core.Scale,fe={annotations:d.a.arrayOf(d.a.object).isRequired,selectedTool:d.a.object,updateIsCalibration:d.a.func.isRequired,disableToolElements:d.a.func.isRequired,onScaleSelected:d.a.func.isRequired,onCancelCalibrationMode:d.a.func.isRequired,onApplyCalibration:d.a.func.isRequired,onAddingNewScale:d.a.func.isRequired},ve=function(e){var t=e.annotations,a=e.selectedTool,n=e.updateIsCalibration,l=e.disableToolElements,i=e.onScaleSelected,c=e.onCancelCalibrationMode,s=e.onApplyCalibration,u=e.onAddingNewScale,m=e.forceUpdate,d=se(Object(v.e)((function(e){return[p.a.getCalibrationInfo(e),p.a.getActiveToolName(e)]}),v.c),2),f=d[0],b=f.isCalibration,g=f.tempScale,h=f.previousToolName,E=void 0===h?"AnnotationCreateDistanceMeasurement":h,S=f.isFractionalUnit,M=d[1],O=Object(y.a)().core,A=se(Object(r.useState)(O.getScales()),2),w=A[0],j=A[1],N=!(!Object.keys(w).length||!a&&(!t.length||t.length>1));Object(r.useEffect)((function(){m()}),[w]),Object(r.useEffect)((function(){var e=function(e){j(e)},t=function(){j(O.getScales())},a=function(){u()};return O.addEventListener("scaleUpdated",e),O.addEventListener("createAnnotationWithNoScale",a),O.addEventListener("annotationsLoaded",t),O.addEventListener("annotationChanged",t),function(){O.removeEventListener("scaleUpdated",e),O.removeEventListener("createAnnotationWithNoScale",a),O.removeEventListener("annotationsLoaded",t),O.removeEventListener("annotationChanged",t)}}),[]),Object(r.useEffect)((function(){"AnnotationCreateCalibrationMeasurement"===M?(!b&&n(!0),l(!0)):(n(!1),l(!1))}),[M,n,l]);var C=Object(r.useMemo)((function(){var e=new Set;return[].concat(ce(t),[a]).forEach((function(t){var a,n=null==t||null===(a=t.Measure)||void 0===a?void 0:a.scale;n&&!e.has(n)&&e.add(n)})),ce(e)}),[t,a,w]),T=Object.keys(w).map((function(e){return new de(e)})),I=1===t.length&&O.canModify(t[0]);return b?o.a.createElement(ie,{tempScale:g,onCancelCalibrationMode:function(){return c(E)},onApplyCalibration:function(){return s(E,g,S)},previousToolName:E}):o.a.createElement(o.a.Fragment,null,o.a.createElement(x,{scales:T,selectedScales:C,onScaleSelected:i,onAddingNewScale:u}),N&&o.a.createElement(te,{annotation:t.length>1?null:t[0]||null,selectedTool:a,isOpen:!0,canModify:I}))};ve.propTypes=fe;var pe=Object(r.memo)(ve),ye=a(185),be=a.n(ye),ge=a(357),he=a(359),Ee=a(65);function Se(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,l,i=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}(e,t)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){if(e){if("string"==typeof e)return Ae(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var we=window.Core.Scale,je=["distanceToolGroupButton","arcMeasurementToolGroupButton","perimeterToolGroupButton","areaToolGroupButton","rectangleAreaToolGroupButton","ellipseAreaToolGroupButton","countToolGroupButton","cloudyRectangleAreaToolGroupButton","arcToolGroupButton"],Ne={annotations:d.a.array,selectedTool:d.a.object},Ce=function(e){var t=e.annotations,a=e.selectedTool,l=Object(y.a)().core,i=Object(v.d)(),c=Me(Object(f.a)(),1)[0],u=Object(v.e)((function(e){return p.a.isElementDisabled(e,N.a.SCALE_OVERLAY_CONTAINER)})),m=Object(v.e)((function(e){return p.a.isDisabledViewOnly(e,N.a.SCALE_OVERLAY)})),d=Object(v.e)((function(e){var n=Se(new Set(t.map((function(e){return e.ToolName}))));return(n.length>0?n:[null==a?void 0:a.name]).some((function(t){return p.a.isToolDisabledViewOnly(e,t)}))})),b=Object(v.e)((function(e){return p.a.isElementOpen(e,N.a.SCALE_OVERLAY_CONTAINER)})),g=Object(v.e)((function(e){return p.a.getScaleOverlayPosition(e)})),h=Object(ge.a)(g),E=h.position,S=h.handleDrag,M=h.handleStop,O=h.containerRef,A=h.setOverlayRef,w=h.initialOffset,j=h.dragBounds,C=h.resetPosition,T=Me(Object(r.useReducer)((function(e){return e+1}),0,(function(){return 0})),2)[1];Object(r.useEffect)((function(){C()}),[g,C]);var I=Object(r.useCallback)((function(e){i(n.a.updateCalibrationInfo({isCalibration:e}))}),[]),_=Object(r.useCallback)((function(e){je.forEach((function(t){i(n.a.setCustomElementOverrides(t,{disabled:e}))}))}),[]),x=Object(r.useCallback)((function(e){e&&function(e){i(n.a.setSelectedScale(e))}(new we(e)),i(n.a.openElements([N.a.SCALE_MODAL])),i(n.a.setIsElementHidden(N.a.SCALE_MODAL,!1))}),[]),L=Object(r.useCallback)((function(e,n){var r=new we(n);if(1===e.length&&e.includes(n))x(n);else{var o=[].concat(Se(t),[a]),i=l.getDocumentViewer().getMeasurementManager().getOldScalesToDeleteAfterApplying({scale:r,applyTo:o})[0],c=function(){l.createAndApplyScale(r,[].concat(Se(t),[a]))};i?D(i,c):c()}}),[t,a]),D=function(e,t){var a={message:o.a.createElement("div",{className:"customMessage"},o.a.createElement("p",null,o.a.createElement("span",null,c("option.measurement.deleteScaleModal.ifChangeScale"),o.a.createElement("b",null,e),c("option.measurement.deleteScaleModal.notUsedWillDelete"))),o.a.createElement("p",null,o.a.createElement("span",null,c("option.measurement.deleteScaleModal.ifToContinue")))),title:"".concat(c("option.measurement.deleteScaleModal.deleteScale")," ").concat(e),confirmBtnText:c("action.confirm"),onConfirm:function(){return t()}};i(n.a.showWarningMessage(a))},R=Object(r.useCallback)((function(e){I(!1),i(n.a.setIsElementHidden(N.a.SCALE_MODAL,!1)),l.setToolMode(e)}),[]),k=Object(r.useCallback)((function(e,a,r){i(n.a.updateCalibrationInfo({isCalibration:!1,tempScale:a,isFractionalUnit:r})),i(n.a.setIsElementHidden(N.a.SCALE_MODAL,!1)),l.setToolMode(e),l.deleteAnnotations([t[0]])}),[t]),P=Object(r.useCallback)((function(){i(n.a.setIsAddingNewScale(!0)),x()}),[]),U=Object(Ee.b)();return u||m||d?null:U?o.a.createElement(he.a,null,o.a.createElement(pe,{annotations:t,selectedTool:a,updateIsCalibration:I,disableToolElements:_,onScaleSelected:L,onCancelCalibrationMode:R,onApplyCalibration:k,onAddingNewScale:P,forceUpdate:T,tabIndex:0})):o.a.createElement(be.a,{position:E,bounds:j,onDrag:S,onStop:M,cancel:".scale-overlay-selector, .add-new-scale"},o.a.createElement("div",{className:s()({Overlay:!0,ScaleOverlay:!0,open:b,closed:!b}),"data-element":N.a.SCALE_OVERLAY_CONTAINER,style:w,ref:function(e){O.current=e,A(e)}},o.a.createElement(pe,{annotations:t,selectedTool:a,updateIsCalibration:I,disableToolElements:_,onScaleSelected:L,onCancelCalibrationMode:R,onApplyCalibration:k,onAddingNewScale:P,forceUpdate:T,tabIndex:0})))};Ce.propTypes=Ne;t.default=Ce}}]);
//# sourceMappingURL=chunk.79.js.map