{"version":3,"sources":["webpack:///./src/ui/src/components/PageRedactionModal/PageRedactionModal.scss?33b7","webpack:///./src/ui/src/components/PageRedactionModal/PageRedactionModal.js","webpack:///./src/ui/src/components/PageRedactionModal/PageRedactionModalContainer.js","webpack:///./src/ui/src/components/PageRedactionModal/index.js"],"names":["module","exports","propTypes","closeModal","PropTypes","func","currentPage","number","pageLabels","array","selectedPages","markPages","redactPages","evenDisabled","bool","renderCanvases","isOpen","SelectionTypes","PageRedactionModal","_ref","t","useTranslation","_useState2","_slicedToArray","useState","selectionType","setSelectionType","_useState4","pages","setPages","_useState6","hasPageNumberError","setHasPageNumberError","useEffect","getSelectedPages","pageNumbers","i","length","push","onRedactWithFocusTransfer","useFocusOnClose","onMarktWithFocusTransfer","canvasContainer","useRef","onSwipe","e","eventTarget","event","target","current","clientHeight","scrollHeight","clientWidth","scrollWidth","contains","stopPropagation","specifyPagesLabelElement","React","createElement","Fragment","className","classNames","error","PageNumberInput","selectedPageNumbers","pageCount","ariaLabel","onSelectedPageNumbersChange","onBlurHandler","onError","Modal","open","closed","data-element","DataElements","PAGE_REDACT_MODAL","ModalWrapper","title","onCloseClick","closeHandler","onSwipedDown","onSwipedUp","swipeToClose","ref","role","aria-labelledby","onChange","classList","value","onSubmit","preventDefault","Choice","checked","radio","name","label","disabled","Button","dataElement","onClick","PageRedactionModalContainer","core","useCore","dispatch","useDispatch","_useSelector2","useSelector","state","selectors","isElementOpen","getCurrentPage","getSelectedThumbnailPageIndexes","getPageLabels","getActiveToolName","getActiveToolStyles","selectedIndexes","activeToolName","activeToolStyles","renderCanvasesCount","map","index","actions","closeElements","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","ERROR_MODAL","closeElement","getRedactionStyles","includes","setEvenDisabled","docLoaded","document","getDocument","documentCompletePromise","getDocumentCompletePromise","then","getPageCount","addEventListener","removeEventListener","_pagesToRender","callCount","pagesToRender","_toConsumableArray","doc","firstChild","removeChild","splice","_step","_iterator","_createForOfIteratorHelper","_loop","pageNumber","pageInfo","getPageInfo","zoom","rect","getBoundingClientRect","borderWidth","parseInt","window","getComputedStyle","height","width","loadCanvas","pageRotation","drawComplete","canvas","_canvasContainer$curr","appendChild","setAttribute","concat","allowUseOfOptimizedThumbnail","s","n","done","err","f","createPageRedactions"],"mappings":"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","file":"chunks/chunk.76.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};","import React, { useEffect, useState, useRef } from 'react';\nimport DataElements from 'constants/dataElement';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport Button from 'components/Button';\nimport Choice from 'components/Choice';\nimport PropTypes from 'prop-types';\nimport PageNumberInput from 'components/PageReplacementModal/PageNumberInput';\nimport ModalWrapper from 'components/ModalWrapper';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\n\nimport './PageRedactionModal.scss';\n\nconst propTypes = {\n  closeModal: PropTypes.func,\n  currentPage: PropTypes.number,\n  pageLabels: PropTypes.array,\n  selectedPages: PropTypes.array,\n  markPages: PropTypes.func,\n  redactPages: PropTypes.func,\n  evenDisabled: PropTypes.bool,\n  renderCanvases: PropTypes.func,\n  isOpen: PropTypes.bool,\n};\n\nconst SelectionTypes = {\n  CURRENT: 'current',\n  SPECIFY: 'specify',\n  ODD: 'odd',\n  EVEN: 'even',\n};\n\nconst PageRedactionModal = ({\n  closeModal,\n  pageLabels,\n  selectedPages,\n  currentPage,\n  markPages,\n  redactPages,\n  evenDisabled,\n  renderCanvases,\n  isOpen,\n}) => {\n  const { t } = useTranslation();\n\n  const [selectionType, setSelectionType] = useState(SelectionTypes.CURRENT);\n  const [pages, setPages] = useState();\n  const [hasPageNumberError, setHasPageNumberError] = useState(false);\n\n  useEffect(() => {\n    setPages(selectedPages);\n  }, [selectedPages]);\n\n  const getSelectedPages = () => {\n    const pageNumbers = [];\n    if (selectionType === SelectionTypes.CURRENT) {\n      return [currentPage];\n    }\n    if (selectionType === SelectionTypes.SPECIFY) {\n      return pages;\n    }\n    if (selectionType === SelectionTypes.ODD) {\n      for (let i = 1; pageLabels.length >= i; i += 2) {\n        pageNumbers.push(i);\n      }\n    } else if (selectionType === SelectionTypes.EVEN) {\n      for (let i = 2; pageLabels.length >= i; i += 2) {\n        pageNumbers.push(i);\n      }\n    }\n    return pageNumbers;\n  };\n\n  const onMark = () => markPages(getSelectedPages());\n  const onRedact = () => redactPages(getSelectedPages());\n  const onRedactWithFocusTransfer = useFocusOnClose(onRedact);\n  const onMarktWithFocusTransfer = useFocusOnClose(onMark);\n\n  const canvasContainer = useRef();\n  useEffect(() => {\n    if (isOpen) {\n      renderCanvases(canvasContainer, getSelectedPages());\n    }\n  }, [selectionType, isOpen, pages, renderCanvases, getSelectedPages]);\n\n  const onSwipe = (e) => {\n    const eventTarget = e.event.target;\n    const containerHasScroll =\n      canvasContainer.current.clientHeight < canvasContainer.current.scrollHeight ||\n      canvasContainer.current.clientWidth < canvasContainer.current.scrollWidth;\n    if (\n      containerHasScroll &&\n      (eventTarget === canvasContainer.current || canvasContainer.current.contains(eventTarget))\n    ) {\n      e.event.stopPropagation();\n    } else {\n      closeModal();\n    }\n  };\n\n  const onSelectionChange = (e) => {\n    if (!e.target.classList.contains('page-number-input')) {\n      setSelectionType(e.target.value);\n      setHasPageNumberError(false);\n    }\n  };\n  const onPagesChanged = (pageNumbers) => {\n    if (pageNumbers.length > 0) {\n      setHasPageNumberError(false);\n      setPages(pageNumbers);\n    }\n  };\n\n  const handlePageNumberError = () => {\n    setHasPageNumberError(true);\n  };\n\n  const specifyPagesLabelElement = (\n    <>\n      <label className=\"specifyPagesChoiceLabel\">\n        <span>{t('option.pageRedactModal.specify')}</span>\n        {selectionType === 'specify' && (\n          <span className=\"specifyPagesExampleLabel\">\n            - {t('option.thumbnailPanel.multiSelectPagesExample')}\n          </span>\n        )}\n      </label>\n      {selectionType === 'specify' && (\n        <div className={classNames('page-number-input-container', { error: hasPageNumberError })}>\n          <PageNumberInput\n            selectedPageNumbers={pages}\n            pageCount={pageLabels.length}\n            ariaLabel={t('option.pageRedactModal.specify')}\n            onSelectedPageNumbersChange={onPagesChanged}\n            onBlurHandler={setPages}\n            onError={handlePageNumberError}\n          />\n        </div>\n      )}\n    </>\n  );\n\n  return (\n    <div\n      className={classNames({\n        Modal: true,\n        PageRedactionModal: true,\n        open: isOpen,\n        closed: !isOpen,\n      })}\n      data-element={DataElements.PAGE_REDACT_MODAL}\n    >\n      <ModalWrapper\n        title=\"action.redactPages\"\n        isOpen={isOpen}\n        onCloseClick={closeModal}\n        closeHandler={closeModal}\n        onSwipedDown={onSwipe}\n        onSwipedUp={onSwipe}\n        swipeToClose\n      >\n        <div className=\"body\">\n          <div className=\"canvas-container\" ref={canvasContainer} />\n          <form className=\"selection-options\" role=\"group\" aria-labelledby={t('option.pageRedactModal.pageSelection')} onChange={onSelectionChange} onSubmit={(e) => e.preventDefault()}>\n            <fieldset>\n              <legend>\n                <strong>{t('option.pageRedactModal.pageSelection')}</strong>\n              </legend>\n              <Choice\n                checked={selectionType === SelectionTypes.CURRENT}\n                radio\n                name=\"page-redaction-option\"\n                label={t('option.pageRedactModal.current')}\n                value={SelectionTypes.CURRENT}\n              />\n              <Choice\n                checked={selectionType === SelectionTypes.SPECIFY}\n                radio\n                name=\"page-redaction-option\"\n                className=\"specify-pages-choice\"\n                label={specifyPagesLabelElement}\n                value={SelectionTypes.SPECIFY}\n              />\n              <Choice\n                checked={selectionType === SelectionTypes.ODD}\n                radio\n                name=\"page-redaction-option\"\n                label={t('option.pageRedactModal.odd')}\n                value={SelectionTypes.ODD}\n              />\n              <Choice\n                checked={selectionType === SelectionTypes.EVEN}\n                radio\n                name=\"page-redaction-option\"\n                label={t('option.pageRedactModal.even')}\n                value={SelectionTypes.EVEN}\n                disabled={evenDisabled}\n              />\n            </fieldset>\n          </form>\n        </div>\n        <div className=\"footer\">\n          <Button\n            className=\"cancel modal-button secondary-button\"\n            dataElement=\"modalRedactButton\"\n            label=\"annotation.redact\"\n            disabled={hasPageNumberError}\n            onClick={onRedactWithFocusTransfer}\n          />\n          <Button\n            className=\"confirm modal-button\"\n            dataElement=\"modalMarkRedactButton\"\n            label=\"option.pageRedactModal.addMark\"\n            disabled={hasPageNumberError}\n            onClick={onMarktWithFocusTransfer}\n          />\n        </div>\n      </ModalWrapper>\n    </div>\n  );\n};\n\nPageRedactionModal.propTypes = propTypes;\n\nexport default PageRedactionModal;\n","import React, { useEffect, useState, useRef } from 'react';\nimport DataElements from 'constants/dataElement';\nimport { useDispatch, useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport useCore from 'hooks/useCore';\nimport { createPageRedactions, redactPages } from 'helpers/pageManipulationFunctions';\nimport PageRedactionModal from 'components/PageRedactionModal/PageRedactionModal';\nimport { useTranslation } from 'react-i18next';\n\nimport './PageRedactionModal.scss';\n\nconst MAX_CANVAS_COUNT = 10;\n\nconst PageRedactionModalContainer = () => {\n  const { core } = useCore();\n  const dispatch = useDispatch();\n  const [isOpen, currentPage, selectedIndexes, pageLabels, activeToolName, activeToolStyles] = useSelector((state) => [\n    selectors.isElementOpen(state, DataElements.PAGE_REDACT_MODAL),\n    selectors.getCurrentPage(state),\n    selectors.getSelectedThumbnailPageIndexes(state),\n    selectors.getPageLabels(state),\n    selectors.getActiveToolName(state),\n    selectors.getActiveToolStyles(state)\n  ]);\n  const renderCanvasesCount = useRef(0);\n\n  const selectedPages = selectedIndexes.map((index) => index + 1);\n\n  useEffect(() => {\n    if (isOpen) {\n      dispatch(actions.closeElements([\n        DataElements.PRINT_MODAL,\n        DataElements.LOADING_MODAL,\n        DataElements.PROGRESS_MODAL,\n        DataElements.ERROR_MODAL,\n      ]));\n    }\n  }, [isOpen, dispatch]);\n\n  const closeModal = () => dispatch(actions.closeElement(DataElements.PAGE_REDACT_MODAL));\n  const getRedactionStyles = () => (activeToolName?.includes('AnnotationCreateRedaction') ? activeToolStyles : {});\n  const { t } = useTranslation();\n\n  const onRedact = (pageNumbers) => {\n    redactPages(pageNumbers, getRedactionStyles());\n    closeModal();\n  };\n\n  const markPages = (pageNumbers) => {\n    createPageRedactions(pageNumbers, getRedactionStyles());\n    closeModal();\n  };\n\n  const renderCanvases = (canvasContainer, pageNumbers) => {\n    renderCanvasesCount.current++;\n    const callCount = renderCanvasesCount.current;\n    // Clone the array so that we don't modify the original array\n    let pagesToRender = [...pageNumbers];\n\n    const doc = core.getDocument();\n    while (canvasContainer.current.firstChild) {\n      canvasContainer.current.removeChild(canvasContainer.current.firstChild);\n    }\n    if (!pagesToRender) {\n      return;\n    }\n    if (pagesToRender?.length > MAX_CANVAS_COUNT) {\n      pagesToRender = pagesToRender.splice(0, MAX_CANVAS_COUNT);\n    }\n    for (const pageNumber of pagesToRender) {\n      const pageInfo = doc?.getPageInfo(pageNumber);\n      if (isOpen && doc && canvasContainer.current && pageInfo) {\n        let zoom = 1;\n        const rect = canvasContainer.current.getBoundingClientRect();\n        const borderWidth = parseInt(window.getComputedStyle(canvasContainer.current).borderWidth) + 0.1;\n        rect.height -= borderWidth;\n        rect.width -= borderWidth;\n        if (pageInfo.width > pageInfo.height) {\n          zoom = rect.width / pageInfo.width;\n        } else {\n          zoom = rect.height / pageInfo.height;\n        }\n        zoom > 0 && doc.loadCanvas({\n          pageNumber,\n          zoom,\n          pageRotation: 0,\n          drawComplete: (canvas) => {\n            if (callCount === renderCanvasesCount.current && canvasContainer.current?.appendChild(canvas)) {\n              canvas.setAttribute('role', 'img');\n              canvas.setAttribute('aria-label', `${t('action.page')} ${pageNumber}`);\n            }\n          },\n          allowUseOfOptimizedThumbnail: true\n        });\n      }\n    }\n  };\n\n  const [evenDisabled, setEvenDisabled] = useState(false);\n  useEffect(() => {\n    const docLoaded = () => {\n      const document = core.getDocument();\n      const documentCompletePromise = document.getDocumentCompletePromise();\n\n      // Office documents don't have all pages available onload, so we need to\n      // wait for the documentCompletePromise to resolve before we can check\n      documentCompletePromise?.then(() => {\n        const pageCount = document.getPageCount();\n        if (pageCount < 2) {\n          setEvenDisabled(true);\n        } else {\n          setEvenDisabled(false);\n        }\n      });\n    };\n    core.addEventListener('documentLoaded', docLoaded);\n    return () => core.removeEventListener('documentLoaded', docLoaded);\n  }, []);\n\n  return (\n    <PageRedactionModal\n      evenDisabled={evenDisabled}\n      closeModal={closeModal}\n      renderCanvases={renderCanvases}\n      redactPages={onRedact}\n      markPages={markPages}\n      currentPage={currentPage}\n      selectedPages={selectedPages}\n      pageLabels={pageLabels}\n      isOpen={isOpen}\n    />\n  );\n};\n\nexport default PageRedactionModalContainer;","import PageRedactionModalContainer from 'components/PageRedactionModal/PageRedactionModalContainer';\n\nexport default PageRedactionModalContainer;"],"sourceRoot":""}