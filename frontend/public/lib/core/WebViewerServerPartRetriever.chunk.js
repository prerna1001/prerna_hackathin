/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{713:function(wa,ua,e){function ja(){return!1}function oa(aa,z,ea){if(!(z in w))return!0;z=w[z];for(var ha=0;ha<z.length;ha++){var na=aa;var fa=z[ha];var ma=ea;if(fa.name in na){var pa="",ka=!1;na=na[fa.name];switch(fa.type){case "s":pa="String";ka=Object(ca.isString)(na);break;case "a":pa="Array";ka=Object(ca.isArray)(na);break;case "n":pa="Number";ka=Object(ca.isNumber)(na)&&Object(ca.isFinite)(na);break;case "o":pa="Object",
ka=Object(ca.isObject)(na)&&!Object(ca.isArray)(na)}ka||ma.reject('Expected response field "'.concat(fa.name,'" to have type ').concat(pa));fa=ka}else ma.reject('Response missing field "'.concat(fa.name,'"')),fa=!1;if(!fa)return!1}return!0}function la(aa){for(var z=0,ea=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];z<ea.length;z++){var ha=ea[z],na=ha;ha=ha.charAt(0).toUpperCase()+ha.slice(1);aa[na]&&(Object.defineProperty(aa,ha,
Object.getOwnPropertyDescriptor(aa,na)),delete aa[na])}return aa}e.r(ua);var ia=e(0),ca=e(1);e.n(ca);var ba=e(2);wa=e(50);var y=e(38),x=e(732),r=e(146),f=e(624),n=e(56),b=e(277),h=function(){function aa(){this.request=this.result=null;this.state=0;var z=this;z.promise=new Promise(function(ea,ha){z.resolve=function(){if(0===z.state||4===z.state)z.state=1,z.result=arguments[0],ea.apply(null,arguments)};z.reject=function(){if(0===z.state||4===z.state)z.state=2,ha.apply(null,arguments)}})}aa.prototype.Fp=
function(){return 1===(this.state&1)};aa.prototype.GSa=function(){return 2===(this.state&2)};aa.prototype.wn=function(){return!this.GSa()&&!this.Fp()};aa.prototype.URa=function(){return 4===(this.state&4)};aa.prototype.j5=function(){this.state|=4};return aa}(),a=function(){function aa(){this.kC={};this.Yc=[]}aa.prototype.pop=function(){var z=this.Yc.pop();this.kC[z.key]=void 0;return z};aa.prototype.push=function(z,ea){ea={key:z,data:ea};this.Yc.push(ea);this.kC[z]=ea.data};aa.prototype.contains=
function(z){return!!this.kC[z]};aa.prototype.get=function(z){return this.kC[z]};aa.prototype.set=function(z,ea){var ha=this;this.kC[z]=ea;this.Yc.forEach(function(na,fa){na.key===z&&(ha.Yc[fa]=na)})};aa.prototype.remove=function(z){var ea=this;this.kC[z]=void 0;this.Yc.forEach(function(ha,na){ha.key===z&&ea.Yc.splice(na,1)})};aa.prototype.length=function(){return this.Yc.length};return aa}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],
health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};e=function(){function aa(z,ea,ha){var na=this;this.S5=this.tda=!1;this.Ek=this.qU=this.CE=this.Mg=this.fG=
this.hs=this.eG=this.Xs=null;this.ps=new h;this.Uw=new h;this.YN=!1;this.ji=this.Rg=this.Sg=this.Wh=null;this.Li=[];this.cP=[];this.cache={};this.timeStamp=0;this.xk=[];this.wj=[];this.gZ=null;this.$ca=!1;this.Mna=this.id=null;this.T1=this.wha=ja;this.Hi=0;this.j0=!1;this.Zja=1;this.En={};this.EA=0;this.DD=new a;ea.endsWith("/")||(ea+="/");ha=ha||{};this.tda=ha.disableWebsockets||!1;this.S5=ha.singleServerMode||!1;null!=ha.customQueryParameters&&Object(n.b)("wvsQueryParameters",ha.customQueryParameters);
ea.endsWith("blackbox/")||(ea+="blackbox/");this.Xs=ha.uploadData||null;this.CE=ha.uriData||null;this.eG=ha.cacheKey||null;if(this.hs=ha.officeOptions||null)this.hs=la(this.hs);this.Mg=ha.rasterizerOptions||null;this.fG=ha.cadOptions||null;this.Zh=ea;this.CY=z;this.Bv(!0);this.hB=(new x.a(ea,null,this.mn())).aKa(!this.tda,function(fa){na.NVa(fa)},function(){return null},function(){na.YN=!1},function(){na.b0a()})}aa.prototype.D2a=function(z){this.wha=z||ja;this.T1=ja};aa.prototype.yCa=function(){this.ana();
return this.hB.wx()};aa.prototype.ana=function(){Object(ia.c)(this,void 0,void 0,function(){return Object(ia.e)(this,function(){this.Uw=new h;this.ps=new h;this.YN=!1;this.id=null;this.$ca=!1;return[2]})})};aa.prototype.b0a=function(){this.wha();this.ana();this.Wh&&(this.Wh.wn()?this.Ik(this.Wh.request):this.Wh.Fp()&&this.T1(this.Wh.result.url,"pdf")&&(this.Wh=null,this.Xma()));this.ji&&this.ji.wn()&&this.Ik(this.ji.request);this.Sg&&this.Sg.wn()?this.Ik(this.Sg.request):this.Rg&&this.Rg.wn()&&this.Yga();
var z;for(z=0;z<this.xk.length;z++)this.xk[z]&&(this.xk[z].wn()?this.Ik(this.xk[z].request):this.xk[z].Fp()&&this.T1(this.xk[z].result.url,"image")&&(this.xk[z]=null,this.yS(Object(ca.uniqueId)(),z)));for(z=0;z<this.wj.length;z++)this.wj[z]&&this.wj[z].wn()&&!this.wj[z].URa()&&this.Ik(this.wj[z].request);for(z=0;z<this.Li.length;z++)this.Li[z]&&this.Li[z].wn()&&this.Ik(this.Li[z].request)};aa.prototype.MQa=function(){return this.YN?Promise.resolve():(this.YN=!0,this.timeStamp=Date.now(),this.hB.DQ())};
aa.prototype.y7a=function(){var z=this,ea,ha,na,fa,ma;return new Promise(function(pa,ka){if(z.Xs)ea=new FormData,ea.append("file",z.Xs.fileHandle,z.Xs.fileHandle.name),z.hs&&ea.append("officeOptions",JSON.stringify(z.hs)),z.Mg&&ea.append("rasterizerOptions",JSON.stringify(z.Mg)),z.fG&&ea.append("cadOptions",z.fG.getJsonString()),z.eG&&ea.append("cacheKey",z.eG),ha=z.Xs.loadCallback,fa="upload",na=z.Xs.extension;else if(z.CE)ea={uri:z.CE.uri,Kcb:z.CE.shareId},ea=Object.keys(ea).map(function(ra){return"".concat(ra,
"=").concat(ea[ra]?encodeURIComponent(ea[ra]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",ha=z.CE.loadCallback,fa="url",na=z.CE.extension;else{pa();return}var sa=new XMLHttpRequest,qa=Object(y.l)(z.Zh,"AuxUpload");qa=Object(b.a)(qa,{type:fa,ext:na});sa.open("POST",qa);sa.withCredentials=z.mn();ma&&sa.setRequestHeader("Content-Type",ma);sa.addEventListener("load",function(){if(sa.readyState===sa.DONE&&200===sa.status){var ra=JSON.parse(sa.response);z.CY=ra.uri;ha(ra);pa(ra)}});
sa.addEventListener("error",function(){ka("".concat(sa.statusText," ").concat(JSON.stringify(sa)))});z.Xs&&null!=z.Xs.onProgress&&(sa.upload.onprogress=function(ra){z.Xs.onProgress(ra)});sa.send(ea)})};aa.prototype.L_a=function(z){this.password=z||null;this.ps.Fp()||(this.ps=new h,this.Ik({t:"pages"}));return this.ps.promise};aa.prototype.WJ=function(z){this.gZ=z||null;this.ps.Fp()||this.Ik({t:"pages"});return this.ps.promise};aa.prototype.uG=function(z){z=Object.assign(z,{uri:encodeURIComponent(this.CY)});
this.gZ&&(z.ext=this.gZ);this.Ek&&(z.c=this.Ek);this.password&&(z.pswd=this.password);this.eG&&(z.cacheKey=this.eG);this.hs&&(z.officeOptions=this.hs);this.Mg&&(z.rastOptions=this.Mg);this.fG&&(z.cadOptions=this.fG.mImpl);return z};aa.prototype.a1a=function(){0<this.DD.length()&&10>=this.EA&&this.b1a(this.DD.pop().data)};aa.prototype.ABa=function(z){0<this.DD.length()&&this.DD.contains(z)&&this.DD.remove(z)};aa.prototype.Ik=function(z){z=this.uG(z);this.hB.send(z)};aa.prototype.Ina=function(z,ea){10<
this.EA?this.DD.push(z,ea):(this.EA++,z=this.uG(ea),this.hB.send(z))};aa.prototype.b1a=function(z){this.EA++;z=this.uG(z);this.hB.send(z)};aa.prototype.hr=function(z){return z};aa.prototype.vha=function(z){this.S5&&z?Object(ba.j)("Server failed health check. Single server mode ignoring check."):!this.rab&&z&&3>=this.Hi?(this.j0=!0,this.hB.wx()):3<this.Hi&&(this.S5=!0)};aa.prototype.NVa=function(z){var ea=this,ha=z.data,na=z.err,fa=z.t;switch(fa){case "upload":na?this.z7a.reject(na):this.z7a.resolve("Success");
break;case "pages":na?this.ps.reject(na):oa(ha,fa,this.ps)&&this.ps.resolve(ha);break;case "config":if(na)this.Uw.reject(na);else if(oa(ha,fa,this.Uw)){this.vha(ha.unhealthy);ha.id&&(this.id=ha.id);if(ha.auth){var ma=Object(n.a)("wvsQueryParameters");ma.auth=ha.auth;Object(n.b)("wvsQueryParameters",ma)}ha.serverVersion&&(this.qU=ha.serverVersion,Object(ba.h)("[WebViewer Server] server version: ".concat(this.qU)));ha.serverID?(this.Hi=ha.serverID===this.Mna&&this.j0?this.Hi+1:0,this.Mna=ha.serverID):
this.Hi=0;this.j0=!1;this.Uw.resolve(ha)}break;case "health":na?this.Uw.reject(na):oa(ha,fa,this.Uw)&&this.vha(ha.unhealthy);break;case "pdf":ha.url=Object(b.a)("".concat(this.Zh,"../").concat(encodeURI(ha.url)));na?this.Wh.reject(na):oa(ha,fa,this.Wh)&&this.Wh.resolve(ha);break;case "ApString2Xod":ha.url=Object(b.a)("".concat(this.Zh,"../data/").concat(encodeURI(ha.url)));na?this.En[ha.rID].reject(na):oa(ha,fa,this.En[ha.rID])&&this.En[ha.rID].resolve(ha);break;case "docmod":ha.url=Object(b.a)("".concat(this.Zh,
"../").concat(encodeURI(ha.url)));na?this.En[ha.rID].reject(na):oa(ha,fa,this.Wh)&&this.En[ha.rID].resolve(ha);break;case "xod":if(na)this.Sg&&this.Sg.wn()&&this.Sg.reject(na),this.Rg&&this.Rg.wn()&&this.Rg.reject(na);else if(ha.notFound)ha.noCreate||this.Sg&&this.Sg.wn()&&this.Sg.resolve(ha),this.Rg&&this.Rg.wn()&&this.Rg.resolve(ha);else{ha.url&&(ha.url=Object(b.a)("".concat(this.Zh,"../").concat(encodeURI(ha.url))));if(!this.Rg||this.Rg.Fp())this.Rg=new h,this.Rg.request={t:"xod",noCreate:!0};
this.Sg||(this.Sg=new h,this.Sg.request={t:"xod"});this.Rg.resolve(ha);this.Sg.resolve(ha)}break;case "cAnnots":ma=this.ji;if(na)ma.reject(na);else if(oa(ha,fa,ma)){ma.j5();var pa=[],ka=ha.annots;ha=function(ya){var xa=ka[ya].s,Aa=ka[ya].e,Ca="".concat(sa.Zh,"../").concat(encodeURI(ka[ya].xfdf)),za="true"===ka[ya].hasAppearance?Object(b.a)("".concat(Ca,".xodapp")):null,Ea=Object(ca.range)(xa,Aa);pa[ya]={range:Ea,promise:new Promise(function(Ja,Ka){var Oa=new XMLHttpRequest;Oa.open("GET",Object(b.a)(Ca));
Oa.responseType="text";Oa.withCredentials=ea.mn();Oa.addEventListener("load",function(){Oa.readyState===Oa.DONE&&200===Oa.status&&Ja({ct:Oa.response,Vq:za,range:Ea})});Oa.addEventListener("error",function(){Ka("".concat(Oa.statusText," ").concat(JSON.stringify(Oa)))});Oa.send()})}};var sa=this;for(na=0;na<ka.length;na++)ha(na);ma.resolve(pa)}break;case "annots":if(na)this.ji.reject(na);else if(oa(ha,fa,this.ji)){this.ji.j5();var qa=new XMLHttpRequest;ma="".concat(this.Zh,"../").concat(encodeURI(ha.url));
var ra=ha.hasAppearance?Object(b.a)("".concat(ma,".xodapp")):null;qa.open("GET",Object(b.a)(ma));qa.responseType="text";qa.withCredentials=this.mn();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ea.ji.resolve({ct:qa.response,Vq:ra})});qa.addEventListener("error",function(){ea.ji.reject("".concat(qa.statusText," ").concat(JSON.stringify(qa)))});qa.send()}break;case "image":this.EA--;var ta=this.xk[ha.p];na?ta.promise.reject(na):oa(ha,fa,ta)&&(ta.result=ha,ta.result.url=
Object(b.a)("".concat(this.Zh,"../").concat(encodeURI(ta.result.url))),ta.resolve(ta.result));break;case "tiles":this.EA--;ta=ha.rID;ma=this.Li[ta];this.Li[ta]=null;this.cP.push(ta);if(na)ma.reject(na);else if(oa(ha,fa,ma)){for(na=0;na<ha.tiles.length;na++)ha.tiles[na]=Object(b.a)("".concat(this.Zh,"../").concat(encodeURI(ha.tiles[na])));ma.resolve(ha)}break;case "text":ta=this.wj[ha.p];if(na)ta.reject(na);else if(oa(ha,fa,ta)){ta.j5();var va=new XMLHttpRequest;ha=Object(b.a)("".concat(this.Zh,"../").concat(encodeURI(ha.url)));
va.open("GET",ha);va.withCredentials=this.mn();va.addEventListener("load",function(){va.readyState===va.DONE&&200===va.status&&(ta.result=JSON.parse(va.response),ta.resolve(ta.result))});va.addEventListener("error",function(ya){ta.reject("".concat(va.statusText," ").concat(JSON.stringify(ya)))});va.send()}break;case "progress":"loading"===ha.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[ha.bytes,ha.total])}this.a1a();!fa&&z.echo&&z&&"apstring2xod"===z.echo.t&&(z=z.echo.reqID)&&(2<=parseInt(this.qU,
10)?this.En[z].reject("Message unhandled by server"):this.En[z].reject())};aa.prototype.TKa=function(){return Object(ia.c)(this,void 0,void 0,function(){return Object(ia.e)(this,function(z){switch(z.label){case 0:return[4,this.MQa()];case 1:return z.aa(),[2,this.Uw.promise]}})})};aa.prototype.sKa=function(z){for(var ea=this,ha=new XMLHttpRequest,na=Object(b.a)("".concat(this.Zh,"aul"),{id:this.id}),fa=new FormData,ma={},pa=0;pa<z.body.length;pa++){var ka=z.body[pa];ma[ka.id]="".concat(ka.TW.w,";").concat(ka.TW.h);
fa.append(ka.id,ka.TW.dataString)}z={t:"apstring2xod",reqID:this.Zja++,parts:ma};var sa=this.uG(z);fa.append("msg",JSON.stringify(sa));this.En[sa.reqID]=new h;ha.open("POST",na);ha.withCredentials=this.mn;na=new Promise(function(qa,ra){ha.onreadystatechange=function(){4===ha.readyState&&(200===ha.status?qa():ra("An error occurred while sending down appearance strings to the server"))}});ha.send(fa);return na.then(function(){return ea.En[sa.reqID].promise})};aa.prototype.ECa=function(){var z=this.qU.split("-")[0].split("."),
ea=["1","5","9"];if(3!==z.length)throw Error("Invalid WVS version length.");if(3!==ea.length)throw Error("Invalid version length.");for(var ha=0;ha<z.length;++ha){if(ea.length===ha||z[ha]>ea[ha])return-1;if(z[ha]!==ea[ha])return 1}return 0};aa.prototype.Rw=function(){return 0>=this.ECa()};aa.prototype.DZ=function(){this.ji||(this.ji=new h,this.Rw()?this.ji.request={t:"cAnnots"}:this.ji.request={t:"annots"},this.Ik(this.ji.request));return this.ji.promise};aa.prototype.yS=function(z,ea){this.xk[ea]||
(this.xk[ea]=new h,this.xk[ea].request={t:"image",p:ea},this.Ina(z,this.xk[ea].request));return this.xk[ea].promise};aa.prototype.M_a=function(z){this.wj[z]||(this.wj[z]=new h,this.wj[z].request={t:"text",p:z},this.Ik(this.wj[z].request));return this.wj[z].promise};aa.prototype.O_a=function(z,ea,ha,na,fa){var ma=this.Li.length;this.cP.length&&(ma=this.cP.pop());this.Li[ma]=new h;this.Li[ma].request={t:"tiles",p:ea,z:ha,r:na,size:fa,rID:ma};this.Ina(z,this.Li[ma].request);return this.Li[ma].promise};
aa.prototype.Xma=function(){this.Wh||(this.Wh=new h,this.Wh.request={t:"pdf"},this.$ca?this.Wh.resolve({url:this.CY}):this.Ik(this.Wh.request));return this.Wh.promise};aa.prototype.Sfa=function(z){var ea=this,ha=new XMLHttpRequest,na=Object(b.a)("".concat(this.Zh,"aul"),{id:this.id}),fa=new FormData,ma={};z.annots&&(ma.annots="xfdf");z.watermark&&(ma.watermark="png");z.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.Zja++,parts:ma};z.print&&(ma.print=!0);var pa=this.uG(ma);fa.append("msg",
JSON.stringify(pa));return Promise.all([z.annots,z.watermark,z.redactions].map(function(ka){return Promise.resolve(ka)})).then(function(ka){var sa=ka[0],qa=ka[1];ka=ka[2];sa&&fa.append("annots",sa);qa&&fa.append("watermark",qa);ka&&fa.append("redactions",ka);ea.En[pa.reqID]=new h;ha.open("POST",na);ha.withCredentials=ea.mn;sa=new Promise(function(ra,ta){ha.onreadystatechange=function(){4===ha.readyState&&(200===ha.status?ra():ta("An error occurred while sending down annotation data to the server"))}});
ha.send(fa);return sa.then(function(){return ea.En[pa.reqID].promise})})};aa.prototype.Yga=function(){this.Rg||(this.Rg=new h,this.Rg.request={t:"xod",noCreate:!0},this.Ik(this.Rg.request));return this.Rg.promise};aa.prototype.P_a=function(){this.Sg||(this.Sg=new h,this.Sg.request={t:"xod"},this.Ik(this.Sg.request));return this.Sg.promise};aa.prototype.uv=function(){return!0};aa.prototype.request=function(){};aa.prototype.jma=function(){};aa.prototype.abort=function(){for(var z=0;z<this.Li.length;z++)this.Li[z]&&
(this.Li[z].resolve(null),this.Li[z]=null,this.cP.push(z));this.close()};aa.prototype.bT=function(z){this.Ek=this.Ek||{};this.Ek.headers=z};aa.prototype.Bv=function(z){this.Ek=this.Ek||{};this.Ek.internal=this.Ek.internal||{};this.Ek.internal.withCredentials=z};aa.prototype.mn=function(){return this.Ek&&this.Ek.internal?this.Ek.internal.withCredentials:null};aa.prototype.getFileData=function(){return Promise.reject()};return aa}();Object(wa.b)(e);Object(f.a)(e);Object(f.b)(e);ua["default"]=e},732:function(wa,
ua,e){var ja=e(0),oa=e(2),la=e(38),ia=e(56),ca=e(277),ba=e(114),y=function(){function r(f,n,b,h,a,w){void 0===b&&(b=null);void 0===h&&(h=null);void 0===a&&(a=null);void 0===w&&(w=null);this.m0=!1;this.Hi=0;this.WI=8;this.pna=3E3;this.yT=!1;this.gba=this.g8a(f);this.url=n?"".concat(this.gba,"/").concat(n):"".concat(this.gba,"/ws");this.hY=b;this.pJ=h;this.sG=a;this.Yma=w}r.prototype.g8a=function(f){var n=f.indexOf("://"),b="ws://";0>n?n=0:(5===n&&(b="wss://"),n+=3);var h=f.lastIndexOf("/");0>h&&(h=
f.length);return b+f.slice(n,h)};r.prototype.send=function(f){this.Nv.readyState===WebSocket.CLOSED||this.m0||this.Nv.send(JSON.stringify(f))};r.prototype.DQ=function(){return Object(ja.c)(this,void 0,void 0,function(){var f,n=this;return Object(ja.e)(this,function(){f=Object(ia.a)("wvsQueryParameters");f.bcid=Object(la.m)(8);Object(ia.b)("wvsQueryParameters",f);return[2,new Promise(function(b,h){var a=Object(ca.a)(n.url);n.yT=!1;n.Nv=new WebSocket(a);n.Nv.onopen=function(){n.m0=!1;n.Hi=0;n.pJ&&n.pJ();
b()};n.Nv.onerror=function(){n.m0=!0};n.Nv.onclose=function(w){w=w.code;n.sG&&n.sG();1E3!==w&&3E3!==w&&n.TPa(w,b,h)};n.Nv.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?n.send({hb:!0}):w.end?close():n.hY(w))}})]})})};r.prototype.TPa=function(f,n,b){Object(ja.c)(this,void 0,void 0,function(){var h=this;return Object(ja.e)(this,function(){if(this.yT)return n(),[2];this.Hi<this.WI?setTimeout(function(){h.yT?n():(h.Hi++,Object(oa.j)("Failed to connect to server with WebSocket close code ".concat(f,
". Reconnecting to WebViewer Server, attempt ").concat(h.Hi," of ").concat(h.WI," ...")),h.DQ().then(n).catch(b))},this.pna):b(ba.a);return[2]})})};r.prototype.wx=function(){var f;void 0===f&&(f=!1);this.Hi=0;this.yT=!0;f?this.Nv.close(3E3):this.Nv.close();return Promise.resolve()};return r}(),x=function(){function r(f,n,b,h,a,w,aa){void 0===h&&(h=null);void 0===a&&(a=null);void 0===w&&(w=null);void 0===aa&&(aa=null);this.Hi=this.xS=this.id=0;this.$H=!1;this.request=null;this.WI=8;this.pna=3E3;f=
this.QXa(f);this.url=n?"".concat(f,"/").concat(n,"pf"):"".concat(f,"/pf");this.iU=b;this.hY=h;this.pJ=a;this.sG=w;this.Yma=aa}r.prototype.QXa=function(f){var n=f.lastIndexOf("/");0>n&&(n=f.length);return f.slice(0,n)};r.prototype.FEa=function(f){f=f.split("\n");for(f[f.length-1]&&f.pop();0<f.length&&3>f[f.length-1].length;)"]"===f.pop()&&(this.id=0);0<f.length&&3>f[0].length&&f.shift();for(var n=0;n<f.length;++n)f[n].endsWith(",")&&(f[n]=f[n].substr(0,f[n].length-1));return f};r.prototype.ona=function(){return Object(ja.c)(this,
void 0,void 0,function(){var f=this;return Object(ja.e)(this,function(n){switch(n.label){case 0:return this.Hi++<this.WI?[4,new Promise(function(b){return setTimeout(function(){f.Yma();f.DQ();b()},3E3)})]:[3,2];case 1:n.aa(),n.label=2;case 2:return[2]}})})};r.prototype.gYa=function(f){Object(ja.c)(this,void 0,void 0,function(){var n,b;return Object(ja.e)(this,function(h){switch(h.label){case 0:n=null,b=0,h.label=1;case 1:if(!(b<f.length))return[3,6];n=JSON.parse(f[b]);if(!n)return[3,5];if(!n.end)return[3,
2];close();return[3,5];case 2:if(!n.id||Number(n.id)===this.id)return[3,4];Object(oa.j)("Reconnecting, new server detected");this.wx();return[4,this.ona()];case 3:return h.aa(),[3,5];case 4:n.hb&&Number(n.id)===this.id?this.send({hb:!0}):this.$H||this.hY(n),h.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};r.prototype.IVa=function(f){Object(ja.c)(this,void 0,void 0,function(){var n,b,h;return Object(ja.e)(this,function(a){switch(a.label){case 0:if(!(3<=f.readyState))return[3,2];try{n=f.responseText.length}catch(w){return Object(oa.h)("caught exception"),
[2]}if(0<n)try{b=this.FEa(f.responseText),0===this.id&&0<b.length&&(h=JSON.parse(b.shift()),this.id=h.id,this.Hi=0),this.gYa(b)}catch(w){}return this.$H?[3,2]:[4,this.vea()];case 1:a.aa(),a.label=2;case 2:return[2]}})})};r.prototype.vea=function(){return Object(ja.c)(this,void 0,void 0,function(){var f=this;return Object(ja.e)(this,function(){return[2,new Promise(function(n,b){function h(){return Object(ja.c)(f,void 0,void 0,function(){return Object(ja.e)(this,function(w){switch(w.label){case 0:b(),
this.wx(),w.label=1;case 1:return this.$H&&this.Hi<this.WI?[4,this.ona()]:[3,3];case 2:return w.aa(),[3,1];case 3:return[2]}})})}f.request=new XMLHttpRequest;f.request.withCredentials=f.iU;var a=Object(ca.a)(f.url,0!==f.id?{id:String(f.id),uc:String(f.xS)}:{uc:String(f.xS)});f.xS++;f.request.open("GET",a,!0);f.request.setRequestHeader("Cache-Control","no-cache");f.request.setRequestHeader("X-Requested-With","XMLHttpRequest");f.request.onreadystatechange=function(){f.IVa(f.request)};f.request.addEventListener("error",
h);f.request.addEventListener("timeout",h);f.request.addEventListener("load",function(){f.pJ&&f.pJ();n()});f.request.send()})]})})};r.prototype.DQ=function(){var f=Object(ia.a)("wvsQueryParameters");f.bcid=Object(la.m)(8);Object(ia.b)("wvsQueryParameters",f);this.xS=this.id=0;this.$H=!1;return this.vea()};r.prototype.send=function(f){var n=this,b=new XMLHttpRequest;b.withCredentials=this.iU;var h=Object(ca.a)(this.url,{id:String(this.id)}),a=new FormData;a.append("data",JSON.stringify(f));b.addEventListener("error",
function(){n.wx()});b.open("POST",h);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(a)};r.prototype.wx=function(){this.id=0;this.$H=!0;this.sG&&this.sG();this.request.abort();return Promise.resolve()};return r}();wa=function(){function r(f,n,b){this.jca=f;this.target=n;this.iU=b}r.prototype.aKa=function(f,n,b,h,a){void 0===f&&(f=!0);void 0===n&&(n=null);void 0===b&&(b=null);void 0===h&&(h=null);void 0===a&&(a=null);return f?new y(this.jca,this.target,n,b,h,a):new x(this.jca,this.target,
this.iU,n,b,h,a)};return r}();ua.a=wa}}]);}).call(this || window)
